(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(t,e,n){"use strict";(function(t,r,i,a){n.d(e,"Dc",function(){return qu}),n.d(e,"Bb",function(){return qs}),n.d(e,"bb",function(){return ju}),n.d(e,"Tb",function(){return Bu}),n.d(e,"Bc",function(){return U}),n.d(e,"b",function(){return Wu}),n.d(e,"c",function(){return tt}),n.d(e,"Cc",function(){return nt}),n.d(e,"a",function(){return vt}),n.d(e,"ab",function(){return zs}),n.d(e,"gb",function(){return Ns}),n.d(e,"s",function(){return Ta}),n.d(e,"t",function(){return Pa}),n.d(e,"u",function(){return Ma}),n.d(e,"r",function(){return Ca}),n.d(e,"z",function(){return ni}),n.d(e,"A",function(){return ri}),n.d(e,"B",function(){return ii}),n.d(e,"C",function(){return ai}),n.d(e,"D",function(){return oi}),n.d(e,"gc",function(){return si}),n.d(e,"E",function(){return Ua}),n.d(e,"F",function(){return Va}),n.d(e,"J",function(){return qa}),n.d(e,"Sb",function(){return Wa}),n.d(e,"G",function(){return Ga}),n.d(e,"ob",function(){return Da}),n.d(e,"Ob",function(){return Ha}),n.d(e,"qb",function(){return Ja}),n.d(e,"q",function(){return Za}),n.d(e,"Yb",function(){return Qa}),n.d(e,"Zb",function(){return to}),n.d(e,"ac",function(){return eo}),n.d(e,"bc",function(){return no}),n.d(e,"cc",function(){return ro}),n.d(e,"d",function(){return $i}),n.d(e,"e",function(){return Ki}),n.d(e,"f",function(){return Xi}),n.d(e,"m",function(){return Yi}),n.d(e,"n",function(){return Ji}),n.d(e,"o",function(){return Zi}),n.d(e,"p",function(){return Qi}),n.d(e,"x",function(){return ta}),n.d(e,"y",function(){return ea}),n.d(e,"H",function(){return na}),n.d(e,"I",function(){return ra}),n.d(e,"O",function(){return ia}),n.d(e,"P",function(){return aa}),n.d(e,"R",function(){return oa}),n.d(e,"U",function(){return sa}),n.d(e,"jb",function(){return ua}),n.d(e,"kb",function(){return la}),n.d(e,"Ab",function(){return fa}),n.d(e,"Lb",function(){return ha}),n.d(e,"Pb",function(){return pa}),n.d(e,"Ub",function(){return ma}),n.d(e,"Vb",function(){return ga}),n.d(e,"Wb",function(){return va}),n.d(e,"Xb",function(){return ya}),n.d(e,"ec",function(){return ba}),n.d(e,"hc",function(){return _a}),n.d(e,"ic",function(){return xa}),n.d(e,"mc",function(){return wa}),n.d(e,"qc",function(){return Sa}),n.d(e,"rc",function(){return Ea}),n.d(e,"i",function(){return ao}),n.d(e,"j",function(){return oo}),n.d(e,"k",function(){return so}),n.d(e,"l",function(){return uo}),n.d(e,"pb",function(){return co}),n.d(e,"sb",function(){return fo}),n.d(e,"tb",function(){return ho}),n.d(e,"wb",function(){return po}),n.d(e,"pc",function(){return mo}),n.d(e,"N",function(){return go}),n.d(e,"Y",function(){return yo}),n.d(e,"Z",function(){return bo}),n.d(e,"eb",function(){return wo}),n.d(e,"fb",function(){return So}),n.d(e,"Cb",function(){return To}),n.d(e,"g",function(){return Mo}),n.d(e,"h",function(){return Co}),n.d(e,"L",function(){return No}),n.d(e,"V",function(){return Ro}),n.d(e,"rb",function(){return Do}),n.d(e,"ub",function(){return Lo}),n.d(e,"vb",function(){return zo}),n.d(e,"yb",function(){return Uo}),n.d(e,"zb",function(){return Vo}),n.d(e,"Hb",function(){return qo}),n.d(e,"jc",function(){return Go}),n.d(e,"oc",function(){return $o}),n.d(e,"M",function(){return es}),n.d(e,"db",function(){return ns}),n.d(e,"Mb",function(){return is}),n.d(e,"Rb",function(){return as}),n.d(e,"lb",function(){return Xo}),n.d(e,"mb",function(){return Yo}),n.d(e,"nb",function(){return Jo}),n.d(e,"Ec",function(){return Qo}),n.d(e,"Fc",function(){return ts}),n.d(e,"v",function(){return bi}),n.d(e,"w",function(){return _i}),n.d(e,"Q",function(){return Ei}),n.d(e,"S",function(){return ki}),n.d(e,"W",function(){return Ti}),n.d(e,"Db",function(){return Mi}),n.d(e,"Gb",function(){return Ci}),n.d(e,"Ib",function(){return Di}),n.d(e,"Jb",function(){return ji}),n.d(e,"Nb",function(){return Li}),n.d(e,"fc",function(){return Fi}),n.d(e,"kc",function(){return zi}),n.d(e,"lc",function(){return Bi}),n.d(e,"vc",function(){return Ui}),n.d(e,"zc",function(){return Vi}),n.d(e,"Ac",function(){return qi}),n.d(e,"T",function(){return re}),n.d(e,"hb",function(){return ie}),n.d(e,"Eb",function(){return ee}),n.d(e,"Kb",function(){return ae}),n.d(e,"Qb",function(){return Yt}),n.d(e,"sc",function(){return Xt}),n.d(e,"tc",function(){return Jt}),n.d(e,"Gc",function(){return ne}),n.d(e,"Fb",function(){return he}),n.d(e,"Hc",function(){return pe}),n.d(e,"yc",function(){return os}),n.d(e,"dc",function(){return Gt}),n.d(e,"ib",function(){return ss}),n.d(e,"X",function(){return fs}),n.d(e,"xb",function(){return ms}),n.d(e,"nc",function(){return gs}),n.d(e,"wc",function(){return ys}),n.d(e,"xc",function(){return Qu}),n.d(e,"uc",function(){return bt}),n.d(e,"cb",function(){return _t}),n.d(e,"K",function(){return xt});var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function s(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function l(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,s)}u((r=r.apply(t,e||[])).next())})}function c(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function f(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function h(t,e,n){return Math.max(t,Math.min(e,n))}function p(t,e){var n=Math.random();return e*n+(1-n)*t}function d(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function m(t,e,n){void 0===n&&(n=""),d(_(t,e),n+" Shapes "+t+" and "+e+" must match")}function g(t){d(null!=t,"The input to the tensor constructor must be a non-null value.")}function v(t,e){if(void 0===e&&(e=[]),Array.isArray(t))for(var n=0;n<t.length;++n)v(t[n],e);else e.push(t);return e}function y(t){var e=t;if(N(t))return[t.length];if(!Array.isArray(t))return[];for(var n=[];e instanceof Array;)n.push(e.length),e=e[0];return t instanceof Array&&function t(e,n,r){if(r=r||[],e instanceof Array){d(n.length>0,function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"}),d(e.length===n[0],function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+e.length+" elements"});for(var i=n.slice(1),a=0;a<e.length;++a)t(e[a],i,r.concat(a))}else d(0===n.length,function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array of "+n[0]+" elements"})}(t,n,[]),n}function b(t){if(0===t.length)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function _(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function x(t){return t%1==0}function w(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function S(t){for(var e=Math.floor(Math.sqrt(t));e>1;--e)if(t%e==0)return[e,t/e];return[1,t]}function E(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function k(t,e,n){return void 0===e&&(e=function(t){return 0}),new Promise(function(r,i){var a=0;!function o(){if(t())r();else{var s=e(++a);null!=n&&a>=n?i():setTimeout(o,s)}}()})}function T(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(-1===t[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(-1===r){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(0===n)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var a=t.slice();return a[r]=e/n,a}function P(t,e){for(var n=[],r=[],i=0,a=0;a<t.length;++a){if(null!=e){if(e[i]===a&&1!==t[a])throw new Error("Can't squeeze axis "+a+" since its dim '"+t[a]+"' is not 1");(null==e[i]||e[i]>a)&&1===t[a]&&(n.push(t[a]),r.push(a)),e[i]<=a&&i++}1!==t[a]&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function M(t,e){var n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function C(t,e,n){if("float32"===e)for(var r=0;r<t.length;r++)if(isNaN(t[r]))throw Error("The result of the '"+n+"' has NaNs.")}function O(t,e){if("float32"!==e)for(var n=0;n<t.length;n++)if(isNaN(t[n]))throw Error("NaN is not a valid value for dtype: '"+e+"'.")}function I(t,e){return"complex64"!==e&&("float32"!==e||"complex64"===t)&&("int32"!==e||"float32"===t||"complex64"===t)&&("bool"!==e||"bool"!==t)}function N(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function A(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error("Unknown dtype "+t)}function R(t){return!!(t&&t.constructor&&t.call&&t.apply)}function D(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function j(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function L(t,e,n){return function(t,e){return t instanceof Float32Array&&"float32"===e||t instanceof Int32Array&&"int32"===e||t instanceof Uint8Array&&"bool"===e}(t,e)?t:(Array.isArray(t)&&(t=v(t)),function(t,e,n){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return n&&O(t,e),new Int32Array(t);if("bool"===e){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)0!==Math.round(t[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}(t,e,n))}function F(t,e){for(var n=z(t,e),r=0;r<n.length;r++)n[r]=1;return n}function z(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error("Unknown data type "+e)}function B(){if("undefined"!=typeof performance)return performance.now();if("undefined"!=typeof t){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}throw new Error("Cannot measure time in this environment. You should run tf.js in the browser or in Node.js")}var U=Object.freeze({shuffle:f,clamp:h,randUniform:p,distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(e[r]);n+=i*i}return n},assert:d,assertShapesMatch:m,assertNonNull:g,flatten:v,inferShape:y,sizeFromShape:b,isScalarShape:function(t){return 0===t.length},arraysEqual:_,isInt:x,tanh:w,sizeToSquarishShape:S,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return f(e),e},rightPad:E,repeatedTry:k,inferFromImplicitShape:T,squeezeShape:P,getTypedArrayFromDType:M,checkComputationForNaN:C,checkConversionForNaN:O,hasEncodingLoss:I,isTypedArray:N,bytesPerElement:A,isFunction:R,nearestDivisor:D,computeStrides:j,toTypedArray:L,makeOnesTypedArray:F,makeZerosTypedArray:z,now:B}),V=function(){function t(t,e){this.backendTimer=t,this.logger=e,null==e&&(this.logger=new q)}return t.prototype.profileKernel=function(t,e){var n,r=this,i=this.backendTimer.time(function(){n=e()});return(Array.isArray(n)?n:[n]).forEach(function(e){var n=e.dataSync();C(n,e.dtype,t),i.then(function(i){r.logger.logKernelProfile(t,e,n,i.kernelMs)})}),n},t}(),q=function(){function t(){}return t.prototype.logKernelProfile=function(t,e,n,r){var i=E(r+"ms",9),a=E(t,25),o=e.rank,s=e.size,u=E(e.shape.toString(),14);console.log("%c"+a+"\t%c"+i+"\t%c"+o+"D "+u+"\t%c"+s,"font-weight:bold","color:red","color:blue","color: orange")},t}(),W=20,G=3,H=7;function $(t,e,n,r){var i=j(e),a=function(t,e,n,r){var i=b(e),a=r[r.length-1],o=new Array(a).fill(0),s=e.length,u="complex64"===n?X(t):t;if(s>1)for(var l=0;l<i/a;l++)for(var c=l*a,f=0;f<a;f++)o[f]=Math.max(o[f],K(u[c+f],0).length);return o}(t,e,n,i),o=e.length,s=function t(e,n,r,i,a,o){void 0===o&&(o=!0);var s="complex64"===r?2:1,u=n[0],l=n.length;if(0===l)return"complex64"===r?[K(X(e)[0],0)]:[e[0].toString()];if(1===l){if(u>W){var c=G*s,f=Array.from(e.subarray(0,c)),h=Array.from(e.subarray(u-G*s,u));return"complex64"===r&&(f=X(f),h=X(h)),["["+f.map(function(t,e){return K(t,a[e])}).join(", ")+", ..., "+h.map(function(t,e){return K(t,a[u-G+e])}).join(", ")+"]"]}return["["+("complex64"===r?X(e):Array.from(e)).map(function(t,e){return K(t,a[e])}).join(", ")+"]"]}var p=n.slice(1),d=i.slice(1),m=i[0]*s,g=[];if(u>W){for(var v=0;v<G;v++){var y=(b=v*m)+m;g.push.apply(g,t(e.subarray(b,y),p,r,d,a,!1))}for(g.push("..."),v=u-G;v<u;v++)y=(b=v*m)+m,g.push.apply(g,t(e.subarray(b,y),p,r,d,a,v===u-1))}else for(v=0;v<u;v++){var b;y=(b=v*m)+m,g.push.apply(g,t(e.subarray(b,y),p,r,d,a,v===u-1))}var _=2===l?",":"";g[0]="["+g[0]+_;for(v=1;v<g.length-1;v++)g[v]=" "+g[v]+_;var x=",\n";for(v=2;v<l;v++)x+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(o?"":x),g}(t,e,n,i,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+o),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(s.map(function(t){return"    "+t}).join("\n")),u.join("\n")}function K(t,e){return E(Array.isArray(t)?parseFloat(t[0].toFixed(H))+" + "+parseFloat(t[1].toFixed(H))+"j":parseFloat(t.toFixed(H)).toString(),e)}function X(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var Y=function(){function t(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=b(t),null!=n){var r=n.length;d(r===this.size,"Length of values '"+r+"' does not match the size inferred by the shape '"+this.size+"'.")}if("complex64"===e)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||M(e,b(this.shape)),this.strides=j(t)}return t.prototype.set=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];0===e.length&&(e=[0]),d(e.length===this.rank,"The number of provided coordinates ("+e.length+") must match the rank ("+this.rank+")");var r=this.locToIndex(e);this.values[r]=t},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];0===t.length&&(t=[0]);for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]},t.prototype.locToIndex=function(t){if(0===this.rank)return 0;if(1===this.rank)return t[0];for(var e=t[t.length-1],n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e},t.prototype.indexToLoc=function(t){if(0===this.rank)return[];if(1===this.rank)return[t];for(var e=new Array(this.shape.length),n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return tt.make(this.shape,{values:this.values},this.dtype)},t}(),J=null,Z=null;function Q(t){J=t}var tt=function(){function t(e,n,r,i){this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=b(e),null!=r&&d(this.size===r.length,"Based on the provided shape, ["+e+"], and dtype "+this.dtype+", the tensor should have "+this.size+" values but has "+r.length),this.strides=j(e),this.dataId=null!=i?i:{},this.id=t.nextId++,this.rankType=this.rank<5?this.rank.toString():"higher",J().registerTensor(this),null!=r&&J().write(this.dataId,r)}return t.make=function(e,n,r){return new t(e,r,n.values,n.dataId)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),d(1===this.size,"The array must have only 1 element."),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(t,e){return this.throwIfDisposed(),this.reshape([t,e])},t.prototype.as3D=function(t,e,n){return this.throwIfDisposed(),this.reshape([t,e,n])},t.prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),this.reshape([t,e,n,r])},t.prototype.asType=function(t){return this.throwIfDisposed(),Z.cast(this,t)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];d(t.length===this.rank,"Number of coordinates in get() must match the rank of the tensor"),d("complex64"!==this.dtype,"Tensor.get() is not supported for complex64 tensors yet."),this.throwIfDisposed(),0===t.length&&(t=[0]);for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.dataSync()[n]},t.prototype.buffer=function(){return Z.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.data=function(){return l(this,void 0,void 0,function(){return c(this,function(t){return this.throwIfDisposed(),[2,J().read(this.dataId)]})})},t.prototype.dataSync=function(){return this.throwIfDisposed(),J().readSync(this.dataId)},t.prototype.dispose=function(){this.isDisposed||(J().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(t){return void 0===t&&(t=!1),Z.print(this,t)},t.prototype.reshape=function(t){return this.throwIfDisposed(),Z.reshape(this,t)},t.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},t.prototype.expandDims=function(t){return void 0===t&&(t=0),Z.expandDims(this,t)},t.prototype.cumsum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=!1),void 0===n&&(n=!1),Z.cumsum(this,t,e,n)},t.prototype.squeeze=function(t){return this.throwIfDisposed(),Z.squeeze(this,t)},t.prototype.clone=function(){return this.throwIfDisposed(),Z.clone(this)},t.prototype.toString=function(t){return void 0===t&&(t=!1),$(this.dataSync(),this.shape,this.dtype,t)},t.prototype.tile=function(t){return this.throwIfDisposed(),Z.tile(this,t)},t.prototype.gather=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),Z.gather(this,t,e)},t.prototype.matMul=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.throwIfDisposed(),Z.matMul(this,t,e,n)},t.prototype.dot=function(t){return this.throwIfDisposed(),Z.dot(this,t)},t.prototype.norm=function(t,e,n){return void 0===t&&(t="euclidean"),void 0===e&&(e=null),void 0===n&&(n=!1),this.throwIfDisposed(),Z.norm(this,t,e,n)},t.prototype.slice=function(t,e){return this.throwIfDisposed(),Z.slice(this,t,e)},t.prototype.reverse=function(t){return this.throwIfDisposed(),Z.reverse(this,t)},t.prototype.concat=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),Z.concat([this,t],e)},t.prototype.split=function(t,e){return void 0===e&&(e=0),this.throwIfDisposed(),Z.split(this,t,e)},t.prototype.stack=function(t,e){return void 0===e&&(e=0),Z.stack([this,t],e)},t.prototype.unstack=function(t,e){return void 0===e&&(e=0),Z.unstack(this,e)},t.prototype.pad=function(t,e){return void 0===e&&(e=0),Z.pad(this,t,e)},t.prototype.batchNormalization=function(t,e,n,r,i){return void 0===n&&(n=.001),this.throwIfDisposed(),Z.batchNormalization(this,t,e,n,r,i)},t.prototype.all=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Z.all(this,t,e)},t.prototype.any=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Z.any(this,t,e)},t.prototype.logSumExp=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Z.logSumExp(this,t,e)},t.prototype.sum=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Z.sum(this,t,e)},t.prototype.mean=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Z.mean(this,t,e)},t.prototype.min=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Z.min(this,t,e)},t.prototype.max=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=!1),this.throwIfDisposed(),Z.max(this,t,e)},t.prototype.argMin=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),Z.argMin(this,t)},t.prototype.argMax=function(t){return void 0===t&&(t=null),this.throwIfDisposed(),Z.argMax(this,t)},t.prototype.cast=function(t){return this.throwIfDisposed(),Z.cast(this,t)},t.prototype.add=function(t){return this.throwIfDisposed(),Z.add(this,t)},t.prototype.addStrict=function(t){return this.throwIfDisposed(),Z.addStrict(this,t)},t.prototype.atan2=function(t){return this.throwIfDisposed(),Z.atan2(this,t)},t.prototype.sub=function(t){return this.throwIfDisposed(),Z.sub(this,t)},t.prototype.subStrict=function(t){return this.throwIfDisposed(),Z.subStrict(this,t)},t.prototype.pow=function(t){return this.throwIfDisposed(),Z.pow(this,t)},t.prototype.powStrict=function(t){return this.throwIfDisposed(),Z.powStrict(this,t)},t.prototype.mul=function(t){return this.throwIfDisposed(),Z.mul(this,t)},t.prototype.mulStrict=function(t){return this.throwIfDisposed(),Z.mulStrict(this,t)},t.prototype.div=function(t){return this.throwIfDisposed(),Z.div(this,t)},t.prototype.floorDiv=function(t){return this.throwIfDisposed(),Z.floorDiv(this,t)},t.prototype.divStrict=function(t){return this.throwIfDisposed(),Z.divStrict(this,t)},t.prototype.minimum=function(t){return this.throwIfDisposed(),Z.minimum(this,t)},t.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Z.minimumStrict(this,t)},t.prototype.maximum=function(t){return this.throwIfDisposed(),Z.maximum(this,t)},t.prototype.maximumStrict=function(t){return this.throwIfDisposed(),Z.maximumStrict(this,t)},t.prototype.mod=function(t){return this.throwIfDisposed(),Z.mod(this,t)},t.prototype.modStrict=function(t){return this.throwIfDisposed(),Z.modStrict(this,t)},t.prototype.squaredDifference=function(t){return this.throwIfDisposed(),Z.squaredDifference(this,t)},t.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Z.squaredDifferenceStrict(this,t)},t.prototype.transpose=function(t){return this.throwIfDisposed(),Z.transpose(this,t)},t.prototype.notEqual=function(t){return this.throwIfDisposed(),Z.notEqual(this,t)},t.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Z.notEqualStrict(this,t)},t.prototype.less=function(t){return this.throwIfDisposed(),Z.less(this,t)},t.prototype.lessStrict=function(t){return this.throwIfDisposed(),Z.lessStrict(this,t)},t.prototype.equal=function(t){return this.throwIfDisposed(),Z.equal(this,t)},t.prototype.equalStrict=function(t){return this.throwIfDisposed(),Z.equalStrict(this,t)},t.prototype.lessEqual=function(t){return this.throwIfDisposed(),Z.lessEqual(this,t)},t.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Z.lessEqualStrict(this,t)},t.prototype.greater=function(t){return this.throwIfDisposed(),Z.greater(this,t)},t.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Z.greaterStrict(this,t)},t.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Z.greaterEqual(this,t)},t.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Z.greaterEqualStrict(this,t)},t.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Z.logicalAnd(this,t)},t.prototype.logicalOr=function(t){return this.throwIfDisposed(),Z.logicalOr(this,t)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),Z.logicalNot(this)},t.prototype.logicalXor=function(t){return this.throwIfDisposed(),Z.logicalXor(this,t)},t.prototype.where=function(t,e){return this.throwIfDisposed(),Z.where(t,this,e)},t.prototype.neg=function(){return this.throwIfDisposed(),Z.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),Z.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),Z.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),Z.sign(this)},t.prototype.exp=function(){return this.throwIfDisposed(),Z.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),Z.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),Z.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),Z.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),Z.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),Z.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),Z.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),Z.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),Z.abs(this)},t.prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Z.clipByValue(this,t,e)},t.prototype.relu=function(){return this.throwIfDisposed(),Z.relu(this)},t.prototype.elu=function(){return this.throwIfDisposed(),Z.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),Z.selu(this)},t.prototype.leakyRelu=function(t){return void 0===t&&(t=.2),this.throwIfDisposed(),Z.leakyRelu(this,t)},t.prototype.prelu=function(t){return this.throwIfDisposed(),Z.prelu(this,t)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),Z.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),Z.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),Z.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),Z.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),Z.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),Z.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),Z.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),Z.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),Z.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),Z.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),Z.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),Z.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),Z.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),Z.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),Z.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),Z.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),Z.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),Z.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),Z.round(this)},t.prototype.step=function(t){return void 0===t&&(t=0),this.throwIfDisposed(),Z.step(this,t)},t.prototype.softmax=function(t){return void 0===t&&(t=-1),this.throwIfDisposed(),Z.softmax(this,t)},t.prototype.resizeBilinear=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),Z.image.resizeBilinear(this,t,e)},t.prototype.resizeNearestNeighbor=function(t,e){return void 0===e&&(e=!1),this.throwIfDisposed(),Z.image.resizeNearestNeighbor(this,t,e)},t.prototype.conv1d=function(t,e,n,r,i,a){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),Z.conv1d(this,t,e,n,r,i,a)},t.prototype.conv2d=function(t,e,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),Z.conv2d(this,t,e,n,r,i,a)},t.prototype.conv2dTranspose=function(t,e,n,r,i){return this.throwIfDisposed(),Z.conv2dTranspose(this,t,e,n,r,i)},t.prototype.depthwiseConv2D=function(t,e,n,r,i,a){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),Z.depthwiseConv2d(this,t,e,n,r,i,a)},t.prototype.separableConv2d=function(t,e,n,r,i,a){return void 0===i&&(i=[1,1]),void 0===a&&(a="NHWC"),this.throwIfDisposed(),Z.separableConv2d(this,t,e,n,r,i,a)},t.prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),Z.avgPool(this,t,e,n,r)},t.prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),Z.maxPool(this,t,e,n,r)},t.prototype.localResponseNormalization=function(t,e,n,r){return void 0===t&&(t=5),void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=.5),Z.localResponseNormalization(this,t,e,n,r)},t.prototype.variable=function(t,e,n){return void 0===t&&(t=!0),this.throwIfDisposed(),et.variable(this,t,e,n)},t.prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),Z.unsortedSegmentSum(this,t,e)},t.prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),Z.batchToSpaceND(this,t,e)},t.prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),Z.spaceToBatchND(this,t,e)},t.prototype.topk=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!0),this.throwIfDisposed(),Z.topk(this,t,e)},t.prototype.stridedSlice=function(t,e,n,r,i){return void 0===r&&(r=0),void 0===i&&(i=0),this.throwIfDisposed(),Z.stridedSlice(this,t,e,n,r,i)},t.prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),Z.depthToSpace(this,t,e)},t.nextId=0,t}();Object.defineProperty(tt,Symbol.hasInstance,{value:function(t){return!!t&&null!=t.shape&&null!=t.dtype}});var et=function(t){function e(n,r,i){void 0===r&&(r=!0);var a=t.call(this,n.shape,n.dtype,null,n.dataId)||this;a.trainable=r,a.name=i,null==a.name&&(a.name=e.nextVarId.toString(),e.nextVarId++);try{J().registerVariable(a)}catch(t){throw J().disposeTensor(a),t}return a}return s(e,t),e.variable=function(t,n,r,i){return void 0===n&&(n=!0),null!=i&&i!==t.dtype&&(t=t.asType(i)),new e(t,n,r)},e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!_(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");J().disposeTensor(this),this.dataId=t.dataId,J().registerTensor(this)},e.nextVarId=0,e}(tt);Object.defineProperty(et,Symbol.hasInstance,{value:function(t){return t instanceof tt&&null!=t.assign&&t.assign instanceof Function}});var nt=et.variable;function rt(t,e){d(t.dtype===e.dtype,"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match")}function it(t){var e=[];return function t(e,n,r){if(null!=e)if(e instanceof tt)n.push(e);else if(function(t){return Array.isArray(t)||"object"==typeof t}(e)){var i=e;for(var a in i){var o=i[a];r.has(o)||(r.add(o),t(o,n,r))}}}(t,e,new Set),e}var at,ot,st=function(){function t(t,e,n){this.backend=t,this.safeMode=e,this.debugMode=n,this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numDataBuffers=0,this.profiling=!1,this.gradientScopeCount=0,this.customGradientDepth=0,this.keepTensors=new Set,this.tensorInfo=new WeakMap,this.activeScope={track:[],name:"default scope"},this.scopeStack=[this.activeScope],this.profiler=new V(t),this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.moveData=function(t){this.write(t,this.readSync(t))},t.prototype.tidy=function(t,e,n){var r=this;void 0===n&&(n=!1);var i,a=null;if(null==e){if("function"!=typeof t)throw new Error("Please provide a function to tidy()");e=t}else{if("string"!=typeof t&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof e)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=t}return this.scopedRun(function(){return r.startScope(a,n)},function(){return r.endScope(i,n)},function(){return(i=e())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),i})},t.prototype.scopedRun=function(t,e,n){t();try{var r=n();return e(),r}catch(t){throw e(),t}},t.prototype.runKernel=function(t,e,n){var r,i=this,a=[],o=function(t){return a.push(t),t},s=this.activeScope.name,u=this.numBytes,l=this.numTensors;if(this.scopedRun(function(){return i.customGradientDepth++},function(){return i.customGradientDepth--},function(){r=i.debugMode()?i.profiler.profileKernel(s,function(){return t(i.backend,o)}):t(i.backend,o)}),this.shouldRecord()){var c={id:this.nextTapeNodeId++,name:s,inputs:e,outputs:Array.isArray(r)?r:[r]};null!=n&&(c.gradient=function(t){return n(t,a)}),this.activeTape.push(c)}return this.profiling&&this.activeProfile.kernels.push({name:s,bytesAdded:this.numBytes-u,totalBytesSnapshot:this.numBytes,tensorsAdded:this.numTensors-l,totalTensorsSnapshot:this.numTensors,inputShapes:Object.keys(e).map(function(t){return e[t].shape}),outputShape:Array.isArray(r)?r.map(function(t){return t.shape}):r.shape}),r},t.prototype.registerTensor=function(t){var e=this.tensorInfo.has(t.dataId)?this.tensorInfo.get(t.dataId).refCount:0;this.numTensors++,0===e&&(this.numDataBuffers++,"complex64"!==t.dtype&&(this.numBytes+=b(t.shape)*A(t.dtype)),this.tensorInfo.set(t.dataId,{backend:this.backend,dtype:t.dtype,shape:t.shape,refCount:0}),this.backend.register(t.dataId,t.shape,t.dtype)),this.tensorInfo.get(t.dataId).refCount++,t instanceof et||this.track(t)},t.prototype.registerVariable=function(t){if(null!=this.registeredVariables[t.name])throw new Error("Variable with name "+t.name+" was already registered");this.registeredVariables[t.name]=t},t.prototype.disposeTensor=function(t){this.tensorInfo.has(t.dataId)&&(this.keepTensors.has(t.id)&&this.keepTensors.delete(t.id),this.numTensors--,this.tensorInfo.get(t.dataId).refCount<=1?(this.tensorInfo.get(t.dataId).backend.disposeData(t.dataId),this.numDataBuffers--,"complex64"!==t.dtype&&(this.numBytes-=b(t.shape)*A(t.dtype)),this.tensorInfo.delete(t.dataId)):this.tensorInfo.get(t.dataId).refCount--)},t.prototype.disposeVariables=function(){for(var t in this.registeredVariables){var e=this.registeredVariables[t];this.disposeTensor(e),delete this.registeredVariables[t]}},t.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.numTensors,t.numDataBuffers=this.numDataBuffers,t.numBytes=this.numBytes,t},t.prototype.profile=function(t){return l(this,void 0,void 0,function(){var e,n;return c(this,function(r){return this.profiling=!0,e=this.numBytes,n=this.numTensors,this.activeProfile.kernels=[],this.activeProfile.result=t(),this.profiling=!1,this.activeProfile.peakBytes=Math.max.apply(Math,this.activeProfile.kernels.map(function(t){return t.totalBytesSnapshot})),this.activeProfile.newBytes=this.numBytes-e,this.activeProfile.newTensors=this.numTensors-n,[2,this.activeProfile]})})},t.prototype.shouldRecord=function(){return null!=this.activeTape&&0===this.customGradientDepth},t.prototype.addTapeNode=function(t,e,n){var r={};t.forEach(function(t,e){r[e]=t});var i={id:this.nextTapeNodeId++,name:this.activeScope.name,inputs:r,outputs:[e],gradient:function(t){var e={};return n(t).forEach(function(t,n){e[n]=function(){return t}}),e}};this.activeTape.push(i)},t.prototype.keep=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {...}) to avoid memory leaks.");return this.keepTensors.add(t.id),t},t.prototype.startScope=function(t,e){void 0===e&&(e=!1),e&&0===this.gradientScopeCount&&(this.activeTape=[]),e&&this.gradientScopeCount++;var n={track:[],name:"unnamed scope"};t&&(n.name=t),this.scopeStack.push(n),this.activeScope=n},t.prototype.endScope=function(t,e){var n=this;void 0===e&&(e=!1),e&&(this.gradientScopeCount--,0===this.gradientScopeCount&&(this.activeTape=null));var r=new Set(this.keepTensors),i=it(t);i.forEach(function(t){return r.add(t.id)});for(var a=0;a<this.activeScope.track.length;a++){var o=this.activeScope.track[a];r.has(o.id)||(null!=this.activeTape?i.push(o):o.dispose())}var s=this.scopeStack.pop();this.activeScope=0===this.scopeStack.length?{track:[],name:"default scope"}:this.scopeStack[this.scopeStack.length-1],i.forEach(function(t){!n.keepTensors.has(t.id)&&function(t,e){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return!0;return!1}(t,s.track)&&n.track(t)})},t.prototype.gradients=function(t,e,n,r){var i=this;return void 0===r&&(r=!1),d(e.length>0,"gradients() received an empty list of xs."),this.tidy("gradients",function(){var a=t();d(a instanceof tt,"The result y returned by f() must be a tensor.");var o=function(t,e,n){for(var r={},i={},a=0;a<e.length;a++)r[e[a].id]=!0;for(a=0;a<t.length;a++){var o=(d=t[a]).inputs;for(var s in o){for(var u=o[s],l=!1,c=0;c<e.length;c++)if(r[u.id]){d.outputs.forEach(function(t){return r[t.id]=!0}),l=!0,i[d.id]=!0;break}if(l)break}}var f={};f[n.id]=!0;var h={};for(a=t.length-1;a>=0;a--)for(o=(d=t[a]).inputs,c=0;c<d.outputs.length;c++)if(f[d.outputs[c].id]){for(var s in o)f[o[s].id]=!0,h[d.id]=!0;break}var p=[];for(a=0;a<t.length;a++){var d;if(i[(d=t[a]).id]&&h[d.id]){var m={};for(var s in d.inputs){var g=d.inputs[s];r[g.id]&&(m[s]=g)}var v=Object.assign({},d);v.inputs=m,v.outputs=d.outputs,p.push(v)}}return p}(i.activeTape,e,a);if(!r&&0===o.length&&e.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");var s={};return s[a.id]=null==n?function(t){var e=F(b(t),"float32");return tt.make(t,{values:e})}(a.shape):n,function(t,e){for(var n=function(n){var r=e[n],i=[];if(r.outputs.forEach(function(e){var n=t[e.id];if(null!=n)i.push(n);else{var r=tt.make(e.shape,{values:z(e.size,e.dtype)},e.dtype);i.push(r)}}),null==r.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+r.name+".");var a=r.gradient(1===r.outputs.length?i[0]:i);for(var o in r.inputs){if(!(o in a))throw new Error("Cannot backprop through input "+o+". Available gradients found: "+Object.keys(a)+".");var s=a[o](),u=r.inputs[o];if(!_(s.shape,u.shape))throw new Error("Error in gradient for op "+r.name+". The gradient of input '"+o+"' has shape '"+s.shape+"', which does not match the shape of the input '"+u.shape+"'");if(null==t[u.id])t[u.id]=s;else{var l=t[u.id];t[u.id]=l.add(s),l.dispose()}}},r=e.length-1;r>=0;r--)n(r)}(s,o),{value:a,grads:e.map(function(t){return s[t.id]})}},!0)},t.prototype.customGrad=function(t){var e=this;return d(R(t),"The f passed in customGrad(f) must be a function."),function(){for(var n,r,i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];return d(i.every(function(t){return t instanceof tt}),"The args passed in customGrad(f)(x1, x2,...) must all be tensors"),e.scopedRun(function(){return e.customGradientDepth++},function(){return e.customGradientDepth--},function(){r=e.tidy(t.name,function(){var e=t.apply(void 0,i),r=e.value,a=e.gradFunc;return d(r instanceof tt,"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),d(R(a),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),n=a,r},!0)}),e.shouldRecord()&&e.addTapeNode(i,r,function(t){var e=n(t),r=Array.isArray(e)?e:[e];return d(r.length===i.length,"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),d(r.every(function(t){return t instanceof tt}),"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."),r}),r}},t.prototype.write=function(t,e){var n=this.tensorInfo.get(t);this.backend!==n.backend&&(n.backend.disposeData(t),n.backend=this.backend,this.backend.register(t,n.shape,n.dtype)),this.backend.write(t,e)},t.prototype.readSync=function(t){return this.tensorInfo.get(t).backend.readSync(t)},t.prototype.read=function(t){return this.tensorInfo.get(t).backend.read(t)},t.prototype.fromPixels=function(t,e){return this.backend.fromPixels(t,e)},t.prototype.time=function(t){return l(this,void 0,void 0,function(){var e,n;return c(this,function(r){switch(r.label){case 0:return e=B(),[4,this.backend.time(t)];case 1:return(n=r.sent()).wallMs=B()-e,[2,n]}})})},t.prototype.track=function(t){if(1===this.scopeStack.length&&this.safeMode)throw new Error("Safe mode is ON. Enclose all tensor operations inside tf.tidy(): tf.tidy(() => {op();...}); to avoid memory leaks.");return this.activeScope.track.push(t),t},t}();(ot=at||(at={}))[ot.NUMBER=0]="NUMBER",ot[ot.BOOLEAN=1]="BOOLEAN",ot[ot.STRING=2]="STRING";var ut=[{name:"DEBUG",type:at.BOOLEAN},{name:"IS_BROWSER",type:at.BOOLEAN},{name:"WEBGL_PAGING_ENABLED",type:at.BOOLEAN},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",type:at.NUMBER},{name:"WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",type:at.BOOLEAN},{name:"WEBGL_VERSION",type:at.NUMBER},{name:"WEBGL_RENDER_FLOAT32_ENABLED",type:at.BOOLEAN},{name:"WEBGL_DOWNLOAD_FLOAT_ENABLED",type:at.BOOLEAN},{name:"WEBGL_FENCE_API_ENABLED",type:at.BOOLEAN},{name:"BACKEND",type:at.STRING},{name:"EPSILON",type:at.NUMBER}];function lt(t,e){var n;try{n=pt(t,e)}catch(t){return!1}return null!=n&&(dt(n),!0)}var ct="tfjsflags";function ft(){var t={};if("undefined"==typeof window||void 0===window.location)return t;var e=function(t){var e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return function(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}(e,n[0],n[1]),n.join("=")}),e}(window.location.search);if(ct in e){var n={};e[ct].split(",").forEach(function(t){var e=t.split(":"),r=e[0],i=e[1];n[r]=i}),ut.forEach(function(e){e.name in n&&(console.log("Setting feature override from URL "+e.name+": "+n[e.name]),e.type===at.NUMBER?t[e.name]=+n[e.name]:e.type===at.BOOLEAN?t[e.name]="true"===n[e.name]:e.type===at.STRING?t[e.name]=n[e.name]:console.warn("Unknown URL param: "+e.name+"."))})}return t}function ht(t,e){return null!=t.getExtension(e)}function pt(t,e){if(0===t||!e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=document.createElement("canvas");return 1===t?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}function dt(t){if(null!=t){var e=t.getExtension("WEBGL_lose_context");if(null==e)throw new Error("Extension WEBGL_lose_context not supported on this browser.");e.loseContext()}}function mt(t,e){var n=t.createFramebuffer(),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var i=2===e?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,i,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(n),a}var gt=function(){function e(t){this.features={},this.registry={},null!=t&&(this.features=t),this.get("DEBUG")&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}return e.setBackend=function(t,e){if(void 0===e&&(e=!1),!(t in vt.registry))throw new Error("Backend name '"+t+"' not found in registry");vt.engine.backend=vt.findBackend(t),vt.backendName=t},e.getBackend=function(){return vt.initEngine(),vt.backendName},e.disposeVariables=function(){vt.engine.disposeVariables()},e.memory=function(){return vt.engine.memory()},e.profile=function(t){return vt.engine.profile(t)},e.tidy=function(t,e,n){return void 0===n&&(n=!1),vt.engine.tidy(t,e,n)},e.dispose=function(t){it(t).forEach(function(t){return t.dispose()})},e.keep=function(t){return vt.engine.keep(t)},e.time=function(t){return vt.engine.time(t)},e.prototype.get=function(t){return t in this.features?this.features[t]:(this.features[t]=this.evaluateFeature(t),this.features[t])},e.prototype.getFeatures=function(){return this.features},e.prototype.set=function(t,e){this.features[t]=e},e.prototype.getBestBackendName=function(){var t=this;if(0===Object.keys(this.registry).length)throw new Error("No backend found in registry.");return Object.keys(this.registry).map(function(e){return{name:e,entry:t.registry[e]}}).sort(function(t,e){return e.entry.priority-t.entry.priority})[0].name},e.prototype.evaluateFeature=function(e){if("DEBUG"===e)return!1;if("IS_BROWSER"===e)return"undefined"!=typeof window;if("IS_NODE"===e)return"undefined"!=typeof t&&void 0!==t.versions.node;if("IS_CHROME"===e)return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor);if("WEBGL_PAGING_ENABLED"===e)return this.get("IS_BROWSER");if("IS_TEST"===e)return!1;if("BACKEND"===e)return this.getBestBackendName();if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"===e){var n=this.get("WEBGL_VERSION");return 0===n?0:function(t,e){if(0===t)return 0;var n,r=pt(t,e);return n=ht(r,"EXT_disjoint_timer_query_webgl2")&&2===t?2:ht(r,"EXT_disjoint_timer_query")?1:0,null!=r&&dt(r),n}(n,this.get("IS_BROWSER"))}if("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE"===e)return this.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!function(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}();if("HAS_WEBGL"===e)return this.get("WEBGL_VERSION")>0;if("WEBGL_VERSION"===e)return lt(2,this.get("IS_BROWSER"))?2:lt(1,this.get("IS_BROWSER"))?1:0;if("WEBGL_RENDER_FLOAT32_ENABLED"===e)return function(t,e){if(0===t)return!1;var n=pt(t,e);if(1===t){if(!ht(n,"OES_texture_float"))return!1}else if(!ht(n,"EXT_color_buffer_float"))return!1;var r=mt(n,t);return dt(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_DOWNLOAD_FLOAT_ENABLED"===e)return function(t,e){if(0===t)return!1;var n=pt(t,e);if(1===t){if(!ht(n,"OES_texture_float"))return!1;if(!ht(n,"WEBGL_color_buffer_float"))return!1}else if(!ht(n,"EXT_color_buffer_float"))return!1;var r=mt(n,t);return dt(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("WEBGL_FENCE_API_ENABLED"===e)return function(t,e){if(2!==t)return!1;var n=pt(t,e),r=null!=n.fenceSync;return dt(n),r}(this.get("WEBGL_VERSION"),this.get("IS_BROWSER"));if("TEST_EPSILON"===e)return 32===this.backend.floatPrecision()?.001:.1;if("EPSILON"===e)return 32===this.backend.floatPrecision()?1e-7:.001;throw new Error("Unknown feature "+e+".")},e.prototype.setFeatures=function(t){this.features=Object.assign({},t)},e.prototype.reset=function(){this.features=ft(),null!=this.globalEngine&&(this.globalEngine=null)},Object.defineProperty(e.prototype,"backend",{get:function(){return this.engine.backend},enumerable:!0,configurable:!0}),e.prototype.findBackend=function(t){return t in this.registry?this.registry[t].backend:null},e.prototype.registerBackend=function(t,e,n,r){var i=this;if(void 0===n&&(n=1),t in this.registry)return console.warn(t+" backend was already registered. Reusing existing backend"),null!=r&&r(function(){return i.engine}),!1;try{var a=e();return a.setDataMover({moveData:function(t){return i.engine.moveData(t)}}),this.registry[t]={backend:a,priority:n},!0}catch(e){return console.warn("Registration of backend "+t+" failed"),console.warn(e.stack||e.message),!1}},e.prototype.removeBackend=function(t){if(!(t in this.registry))throw new Error(t+" backend not found in registry");this.registry[t].backend.dispose(),delete this.registry[t]},Object.defineProperty(e.prototype,"engine",{get:function(){return this.initEngine(),this.globalEngine},enumerable:!0,configurable:!0}),e.prototype.initEngine=function(){var t=this;if(null==this.globalEngine){this.backendName=this.get("BACKEND");var e=this.findBackend(this.backendName);this.globalEngine=new st(e,!1,function(){return t.get("DEBUG")})}},e}();var vt=function(){var e=function(){var e;if("undefined"!=typeof window)e=window;else{if("undefined"==typeof t)throw new Error("Could not find a global object");e=t}return e}();return null==e.ENV&&(e.ENV=new gt(ft()),Q(function(){return e.ENV.engine})),e.ENV}();Object.freeze({Environment:gt,ENV:vt});function yt(t){return vt.engine.customGrad(t)}var bt=gt.tidy,_t=gt.keep,xt=gt.dispose;gt.time,gt.profile;function wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];vt.get("IS_TEST")||console.warn.apply(console,t)}function St(t,e,n,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var a=e.length,o=0;o<a;++o)i=i.concat([t[o+1]/e[o],e[o]]);i=i.concat(t.slice(a+1))}return i}function Et(t,e,n){void 0===n&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var a=[],o=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?o.push(i):a.push(i);r.push.apply(r,a),r.push(0),r.push.apply(r,o)}return r}function kt(t,e,n,r){void 0===r&&(r=!0);var i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(var a=1;a<t.length;++a)a<=e.length?r?i.push(e[a-1]*t[a]):i.push(t[a]/e[a-1]):i.push(t[a]);return i}function Tt(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function Pt(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function Mt(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function Ct(t,e){for(var n=[],r=t.length,i=0;i<r;i++)-1===e.indexOf(i)&&n.push(t[i]);return[n,e.map(function(e){return t[e]})]}function Ot(t,e){return function(t,e,n){for(var r=t.length+e.length,i=[],a=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?i.push(t[a++]):i.push(e[o++]);return i}(t,e.map(function(t){return 1}),e)}function It(t,e){var n=e.length;return d((t=null==t?e.map(function(t,e){return e}):[].concat(t)).every(function(t){return t>=-n&&t<n}),"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t),d(t.every(function(t){return x(t)}),"All values in axis param must be integers but got axis "+t),t.map(function(t){return t<0?n+t:t})}function Nt(t,e,n){d(Mt(e,n),t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input.")}function At(t,e){if(Mt(t,e))return null;for(var n=[],r=0;r<e;++r)-1===t.indexOf(r)&&n.push(r);return t.forEach(function(t){return n.push(t)}),n}function Rt(t){return t.map(function(t,e){return[e,t]}).sort(function(t,e){return t[1]-e[1]}).map(function(t){return t[0]})}function Dt(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function jt(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}var Lt=30;function Ft(t){return t<=Lt?t:D(t,Math.floor(Math.sqrt(t)))}function zt(t,e,n,r,i,a,o,s,u){if(void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==o)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");for(var l=[],c=[],f=[],h=0;h<t.length;h++)l[h]=Bt(i,e,r,t,h),c[h]=Ut(a,n,r,t,h),u&1<<h&&(c[h]=l[h]+1,f.push(h));var p=new Array(t.length).fill(0);return p=p.map(function(t,e){for(var n=0,i=l[e];!(r[e]>0?i>=c[e]:i<=c[e]);i+=r[e])n+=1;return n}),[l,p,f]}function Bt(t,e,n,r,i){var a=e[i];t&1<<i&&(a=n[i]>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var o=r[i];return a<0&&(a+=o),h(0,a,o-1)}function Ut(t,e,n,r,i){var a=e[i];t&1<<i&&(a=n[i]>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var o=r[i];return a<0&&(a+=o),n[i]>0?h(0,a,o):h(-1,a,o-1)}function Vt(t,e,n,r){if(void 0===r&&(r="float32"),r=r||"float32",t instanceof tt)return t;if(!N(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t)throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got "+t.constructor.name);var i=y(t);return N(t)||Array.isArray(t)||(t=[t]),tt.make(i,{values:L(t,r,vt.get("DEBUG"))},r)}function qt(t,e,n){if(!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(t,r){return Vt(t,e+"["+r+"]",n)})}function Wt(t){var e=Object.keys(t);if(1!==e.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];vt.engine.startScope(n);try{var i=r.apply(void 0,t);return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),vt.engine.endScope(i),i}catch(t){throw vt.engine.endScope(null),t}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}var Gt=Wt({softmax_:function(t,e){void 0===e&&(e=-1);var n=Vt(t,"logits","softmax");if(-1===e&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return yt(function(t){var n=t.logSumExp([e],!0),r=t.toFloat().sub(n).exp();return{value:r,gradFunc:function(t){var n=t.mul(r);return n.sub(n.sum([e],!0).mul(r))}}})(n)}});var Ht=Wt({complex_:function(t,e){var n=Vt(t,"real","complex"),r=Vt(e,"imag","complex");return m(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),vt.engine.runKernel(function(t){return t.complex(n,r)},{$real:n,$imag:r})}}),$t=Wt({real_:function(t){var e=Vt(t,"input","real");return vt.engine.runKernel(function(t){return t.real(e)},{$input:e})}}),Kt=Wt({imag_:function(t){var e=Vt(t,"input","imag");return vt.engine.runKernel(function(t){return t.imag(e)},{$input:e})}});function Xt(t,e,n){if(void 0===n&&(n="float32"),"complex64"===n)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!N(t)&&!Array.isArray(t)&&"number"!=typeof t&&"boolean"!=typeof t)throw new Error("values passed to tensor(values) must be an array of numbers or booleans, or a TypedArray");var r=y(t);return null!=e&&1!==r.length&&m(e,r,"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+e+"). "),N(t)||Array.isArray(t)||(t=[t]),e=e||r,tt.make(e,{values:L(t,n,vt.get("DEBUG"))},n)}function Yt(t,e){if(void 0===e&&(e="float32"),(N(t)||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean)");return Xt(t,[],e)}function Jt(t,e){void 0===e&&(e="float32"),g(t);var n=y(t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Xt(t,n,e)}function Zt(t,e,n){if(void 0===n&&(n="float32"),g(t),null!=e&&2!==e.length)throw new Error("tensor2d() requires shape to have two numbers");var r=y(t);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Xt(t,e=e||r,n)}function Qt(t,e,n){if(void 0===n&&(n="float32"),g(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");var r=y(t);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Xt(t,e=e||r,n)}function te(t,e,n){if(void 0===n&&(n="float32"),g(t),null!=e&&4!==e.length)throw new Error("tensor4d() requires shape to have four numbers");var r=y(t);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Xt(t,e=e||r,n)}function ee(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=ee(t,"float32"),r=ee(t,"float32");return Ht(n,r)}var i=F(b(t),e);return tt.make(t,{values:i},e)}function ne(t,e){if(void 0===e&&(e="float32"),"complex64"===e){var n=ne(t,"float32"),r=ne(t,"float32");return Ht(n,r)}var i=z(b(t),e);return tt.make(t,{values:i},e)}function re(t,e,n){void 0===n&&(n="float32");var r=M(n,b(t));return r.fill(e),tt.make(t,{values:r},n)}function ie(t,e,n){if(0===n)throw new Error("Cannot request zero samples");var r=(e-t)/(n-1),i=z(n,"float32");i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+r;return Jt(i,"float32")}function ae(t,e,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return ne([0],r);var i=z(Math.abs(Math.ceil((e-t)/n)),r);e<t&&1===n&&(n=-1),i[0]=t;for(var a=1;a<i.length;a++)i[a]=i[a-1]+n;return Jt(i,r)}var oe,se,ue,le,ce,fe,he=Wt({onesLike_:function(t){var e=Vt(t,"x","onesLike");return ee(e.shape,e.dtype)}}),pe=Wt({zerosLike_:function(t){var e=Vt(t,"x","zerosLike");return ne(e.shape,e.dtype)}});!function(t){t.float32="float32",t.int32="int32",t.bool="bool"}(oe||(oe={})),function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"}(se||(se={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(ue||(ue={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(le||(le={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(ce||(ce={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(fe||(fe={}));var de={float32:ce,int32:ue,bool:le,complex64:fe};function me(t,e){return de[t][e]}function ge(t){return me(t,"int32")}var ve=function(){function t(t){this.dataMover=t,this.data=new WeakMap}return t.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(t),this.data.get(t)},t.prototype.set=function(t,e){this.data.set(t,e)},t.prototype.has=function(t){return this.data.has(t)},t.prototype.delete=function(t){return this.data.delete(t)},t}();function ye(t,e,n){if("complex64"===e){if("complex64"===t.dtype)return t.clone();var r=ne(t.shape),i=t.toFloat(),a=n.complex(i,r);return r.dispose(),i.dispose(),a}if(!I(t.dtype,e))return tt.make(t.shape,{dataId:t.dataId},e);if("complex64"===t.dtype){var o=n.real(t);return a=o.cast(e),o.dispose(),a}if("int32"===e)return n.int(t);if("bool"===e){var s=Yt(0,t.dtype);return a=n.notEqual(t,s),s.dispose(),a}throw new Error("Error in Cast: unknown dtype argument ("+e+")")}function be(t,e){return tt.make(e,{dataId:t.dataId},t.dtype)}function _e(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function xe(t,e,n,r,i){for(var a=Array.from(e).map(function(t,e){return{score:t,boxIndex:e}}).filter(function(t){return t.score>i}).sort(function(t,e){return e.score-t.score}),o=[],s=0;s<a.length;s++){var u=a[s],l=u.score,c=u.boxIndex;if(l<i)break;for(var f=!1,h=o.length-1;h>=0;--h)if(we(t,c,o[h])>=r){f=!0;break}if(!f&&(o.push(c),o.length>=n))break}return Jt(o,"int32")}function we(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),f=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),p=(s-a)*(u-o),d=(f-l)*(h-c);if(p<=0||d<=0)return 0;var m=Math.max(a,l),g=Math.max(o,c),v=Math.min(s,f),y=Math.min(u,h),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(p+d-b)}function Se(t,e,n){var r=Array(t.rank).fill(0),i=t.shape.slice();return e.map(function(e){i[n]=e;var a=t.slice(r,i);return r[n]+=e,a})}function Ee(t,e,n,r,i){for(var a=e[e.length-1],o=[t.length/a,a],s=o[0],u=o[1],l=M(n,s*r),c=M("int32",s*r),f=0;f<s;f++){for(var h=f*u,p=t.subarray(h,h+u),d=[],m=0;m<p.length;m++)d.push({value:p[m],index:m});d.sort(function(t,e){return e.value-t.value});var g=f*r,v=l.subarray(g,g+r),y=c.subarray(g,g+r);for(m=0;m<r;m++)v[m]=d[m].value,y[m]=d[m].index}var b=e.slice();return b[b.length-1]=r,[Xt(l,b,n),Xt(c,b,"int32")]}var ke=function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,a=t.inSize,o=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];var s="max"===e?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = 0;\n        float bestValue = getA(batch, inOffset);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "},Te=function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.top,o=n-1-t.padInfo.left,s=1/(e*n);this.userCode="\n      const ivec2 pads = ivec2("+a+", "+o+");\n      const float avgMultiplier = float("+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};function Pe(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var a=n-1-i,o=t[a]||1;(e[e.length-1-i]||1)>1&&1===o&&r.unshift(a)}return r}function Me(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],a=e.length-r-1,o=e[a];(null==i||1===i&&o>1)&&n.unshift(a)}return n}function Ce(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var a=t[t.length-i-1];null==a&&(a=1);var o=e[e.length-i-1];if(null==o&&(o=1),1===a)n.unshift(o);else if(1===o)n.unshift(a);else{if(a!==o)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(a)}}return n}var Oe=function(t,e,n,r,i,a){this.outputShape=[],this.supportsBroadcasting=!0,this.variableNames=["x","mean","variance"],Ce(t,e),Ce(t,n);var o="0.0";null!=r&&(Ce(t,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";null!=i&&(Ce(t,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+a+"));\n        setOutput((x - mean) * inv + offset);\n      }\n    "},Ie="return areal * breal - aimag * bimag;",Ne="return areal * bimag + aimag * breal;",Ae=function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.supportsBroadcasting=!0,this.outputShape=Ce(e,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+t+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},Re="return a + b;",De="return a - b;",je=function(){function t(t,e,n){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.outputShape=Ce(e,n),this.userCode="\n      uniform float NAN;\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(){var t=this;return function(e,n){null==t.startLoc&&(t.startLoc=e.getUniformLocationNoThrow(n,"NAN"),null==t.startLoc)||e.gl.uniform1f(t.startLoc,NaN)}},t}(),Le=function(t,e,n){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      void main() {\n        float value = getAAtOutCoords();\n        if (isNaN(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, float("+e+"), float("+n+")));\n      }\n    "},Fe=function(t,e){this.variableNames=["A","B"],this.outputShape=[],this.outputShape=jt([t,e],1),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        float value = 0.0;\n        if (yC < "+t[1]+") {\n          value = getA(yR, yC);\n        } else {\n          yC -= "+t[1]+";\n          value = getB(yR, yC);\n        }\n\n        setOutput(value);\n      }\n    "},ze=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Be=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.top,o=n-1-t.padInfo.left;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, d2);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ue=function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+a+" + dm;\n\n        float dotProd = 0.0;\n\n        // TODO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ve=function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.top,o=n-1-t.padInfo.left,s=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TODO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},qe=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.top,n=t.padInfo.left,r=t.strideHeight,i=t.strideWidth,a=t.dilationHeight,o=t.dilationWidth,s=t.filterHeight,u=t.filterWidth,l=4*Math.floor(t.inChannels/4),c=t.inChannels%4;this.userCode="\n      const ivec2 strides = ivec2("+r+", "+i+");\n      const ivec2 pads = ivec2("+e+", "+n+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+"; wR++) {\n          int xR = xRCorner + wR * "+a+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+u+"; wC++) {\n            int xC = xCCorner + wC * "+o+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+l+"; d1 += 4) {\n              vec4 xValues = vec4(\n                getX(batch, xR, xC, d1),\n                getX(batch, xR, xC, d1 + 1),\n                getX(batch, xR, xC, d1 + 2),\n                getX(batch, xR, xC, d1 + 3)\n              );\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              dotProd += dot(xValues, wValues);\n            }\n\n            if ("+(1===c)+") {\n              dotProd +=\n                getX(batch, xR, xC, "+l+") *\n                getW(wR, wC, "+l+", d2);\n            } else if ("+(2===c)+") {\n              vec2 xValues = vec2(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1)\n              );\n              vec2 wValues = vec2(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            } else if ("+(3===c)+") {\n              vec3 xValues = vec3(\n                getX(batch, xR, xC, "+l+"),\n                getX(batch, xR, xC, "+l+" + 1),\n                getX(batch, xR, xC, "+l+" + 2)\n              );\n              vec3 wValues = vec3(\n                getW(wR, wC, "+l+", d2),\n                getW(wR, wC, "+l+" + 1, d2),\n                getW(wR, wC, "+l+" + 2, d2)\n              );\n              dotProd += dot(xValues, wValues);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},We=function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.inHeight,n=t.inWidth,r=t.padInfo.top,i=t.padInfo.left,a=t.strideHeight,o=t.strideWidth,s=t.dilationHeight,u=t.dilationWidth,l=t.filterHeight,c=t.filterWidth,f=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 strides = ivec2("+a+", "+o+");\n      const ivec2 pads = ivec2("+r+", "+i+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+f+";\n        int q = d2 - d1 * "+f+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TODO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+l+"; wR++) {\n          int xR = xRCorner + wR * "+s+";\n\n          if (xR < 0 || xR >= "+e+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+c+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+n+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},Ge=function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=t[0],o=t[1],s=t[2],u=t[3],l=e[0],c=n[0],f=n[1];this.outputShape=[l,c,f,u];var h="bilinear"===r?1:0,p=[o-1+".0",s-1+".0"],d=p[0],m=p[1],g=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+d+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+d],v=g[0],y=g[1],b=g[2],_=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],x=_[0],w=_[1],S=_[2];this.userCode="\n      const float height_ratio = float("+v+");\n      const float width_ratio = float("+x+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+a+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+w+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+d+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+S+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexRC = vec2(in_y,in_x);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n          ivec2 sourceCeilRC = ivec2(ceil(sourceFracIndexRC));\n\n          float topLeft = getImage(b, sourceFloorRC.x, sourceFloorRC.y, d);\n          float bottomLeft = getImage(b, sourceCeilRC.x, sourceFloorRC.y, d);\n          float topRight = getImage(b, sourceFloorRC.x, sourceCeilRC.y, d);\n          float bottomRight = getImage(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n          vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n          float top = topLeft + (topRight - topLeft) * fracRC.y;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n          float newValue = top + (bottom - top) * fracRC.x;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestRC = ivec2(floor(\n            sourceFracIndexRC + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestRC.x, sourceNearestRC.y, d);\n          setOutput(newValue);\n        }\n      }\n    "};function He(t,e,n,r){var i=t.map(function(t){var e=b(t.shapeInfo.logicalShape);return t.shapeInfo.isUniform?"uniform float "+t.name+(e>1?"["+e+"]":"")+";":"uniform sampler2D "+t.name+";"});i=i.join("\n");var a,o=t.map(function(t){return function(t,e,n){var r=function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1)+"Flat",r=b(t.shapeInfo.logicalShape);if(t.shapeInfo.isUniform)return 1===r?"float "+n+"(int index) {return "+e+";}":"\n      float "+n+"(int index) {\n        for (int i = 0; i < "+r+"; i++) {\n          if (i == index) {\n            return "+e+"[i];\n          }\n        }\n      }\n    ";var i=t.shapeInfo.texShape,a=i[0],o=i[1];return 1===o&&1===a?"\n      float "+n+"(int index) {\n        return sampleTexture("+e+", halfCR);\n      }\n    ":1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index) + 0.5) / "+a+".0);\n        return sampleTexture("+e+", uv);\n      }\n    ":1===a?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index) + 0.5) / "+o+".0, 0.5);\n        return sampleTexture("+e+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = UVfrom1D("+a+", "+o+", index);\n      return sampleTexture("+e+", uv);\n    }\n  "}(t);return r+=$e(t),(n||_(t.shapeInfo.logicalShape,e.logicalShape))&&(r+=function(t,e,n){var r=t.name,i=r.charAt(0).toUpperCase()+r.slice(1),a="get"+i+"AtOutCoords",o=Pe(t.shapeInfo.logicalShape,e.logicalShape),s=t.shapeInfo.logicalShape.length,u=e.logicalShape.length,l=n&&(u>s||o.length>0),c=function(t){for(var e=0;e<t.length;e++)if(t[e]!==e)return!1;return!0}(o),f=t.shapeInfo.isUniform;if(l&&!c)return function(t,e,n,r){var i=t.shapeInfo.logicalShape.length,a=e.logicalShape.length,o="int";2===a?o="ivec2":3===a?o="ivec3":4===a&&(o="ivec4");var s=Pe(t.shapeInfo.logicalShape,e.logicalShape),u=a-i;return"\n    float "+r+"() {\n      "+o+" coords = getOutputCoords();\n      "+(0===i?"":a<2&&s.length>=1?"coords = 0;":s.map(function(t){return"coords["+(t+u)+"] = 0;"}).join("\n"))+"\n      return get"+n+"("+(a<2&&i>0?"coords":t.shapeInfo.logicalShape.map(function(t,e){return"coords["+(e+u)+"]"}).join(", "))+");\n    }\n  "}(t,e,i,a);var h=b(t.shapeInfo.logicalShape),p="";l&&c&&(p="\n        int mainPart = index / "+h+";\n        index -= mainPart * "+h+";\n      ");var d=e.texShape;if(f)return 1===h?"float "+a+"() {return "+r+";}":"\n      float "+a+"() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                              vec2("+d[0]+", "+d[1]+"));\n        int index = resTexRC.x * "+d[1]+" + resTexRC.y;\n        "+p+"\n        return get"+i+"Flat(index);\n      }\n    ";var m=t.shapeInfo.texShape;return _(m,d)?"\n      float "+a+"() {\n        return sampleTexture("+r+", resultUV);\n      }\n    ":"\n    float "+a+"() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+d[0]+", "+d[1]+"));\n      int index = resTexRC.x * "+d[1]+" + resTexRC.y;\n      "+p+"\n      int texR = index / "+m[1]+";\n      int texC = index - texR * "+m[1]+";\n      vec2 uv = (vec2(texC, texR) + halfCR) /\n                 vec2("+m[1]+".0, "+m[0]+".0);\n\n      return sampleTexture("+r+", uv);\n    }\n  "}(t,e,n)),r}(t,e,r)}).join("\n"),s=e.texShape;return a=e.isPacked?function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 2:return function(t,e){return"\n    ivec2 getOutputCoords() {\n      return 2 * ivec2(resultUV.yx * vec2("+Math.ceil(e[0]/2)+", "+Math.ceil(e[1]/2)+"));\n    }\n  "}(0,e);default:throw new Error(t.length+"-D output packed sampling is not yet supported")}}(e.logicalShape,s):function(t,e){switch(t.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(t,e){return 1===e[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+e[1]+".0);\n      }\n    ":1===e[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+e[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      return resTexRC.x * "+e[1]+" + resTexRC.y;\n    }\n  "}(0,e);case 2:return function(t,e){return _(t,e)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+e[0]+", "+e[1]+"));\n      }\n    ":1===t[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===t[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+e[0]+", "+e[1]+"));\n        int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+t[1]+";\n      int c = index - r * "+t[1]+";\n      return ivec2(r, c);\n    }\n  "}(t,e);case 3:return function(t,e){var n=t[1]*t[2],r=t[2];return"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n      int r = index / "+n+";\n      index -= r * "+n+";\n      int c = index / "+r+";\n      int d = index - c * "+r+";\n      return ivec3(r, c, d);\n    }\n  "}(t,e);case 4:return function(t,e){var n=t[3],r=t[2]*n,i=t[1]*r;return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+i+";\n      index -= r * "+i+";\n\n      int c = index / "+r+";\n      index -= c * "+r+";\n\n      int d = index / "+n+";\n      int d2 = index - d * "+n+";\n\n      return ivec4(r, c, d, d2);\n    }\n  "}(t,e);case 5:return function(t,e){var n=t[4],r=t[3]*n,i=t[2]*r,a=t[1]*i;return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+e[0]+",\n                             "+e[1]+"));\n\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+a+";\n      index -= r * "+a+";\n\n      int c = index / "+i+";\n      index -= c * "+i+";\n\n      int d = index / "+r+";\n      index -= d * "+r+";\n\n      int d2 = index  / "+n+";\n      int d3 = index - d2 * "+n+";\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(t,e);case 6:return function(t,e){var n=t[5],r=t[4]*n,i=t[3]*r,a=t[2]*i,o=t[1]*a;return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+e[0]+", "+e[1]+"));\n      int index = resTexRC.x * "+e[1]+" + resTexRC.y;\n\n      int r = index / "+o+";\n      index -= r * "+o+";\n\n      int c = index / "+a+";\n      index -= c * "+a+";\n\n      int d = index / "+i+";\n      index -= d * "+i+";\n\n      int d2 = index / "+r+";\n      index -= d2 * "+r+";\n\n      int d3 = index / "+n+";\n      int d4 = index - d3 * "+n+";\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(t,e);default:throw new Error(t.length+"-D output sampling is not yet supported")}}(e.logicalShape,s),[Ye,Ke,Xe,i,a,o,n].join("\n")}function $e(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);return t.shapeInfo.isUniform?"float "+n+"() {return "+e+";}":"\n    float "+n+"() {\n      return sampleTexture("+e+", halfCR);\n    }\n  "}(t);case 1:return function(t){var e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1);return"\n    float "+n+"(int index) {\n      return "+n+"Flat(index);\n    }\n  "}(t);case 2:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t.shapeInfo.texShape;if(null!=i&&_(e,i)){var a=i[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i[1]+".0, "+a+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var o=P(e),s=o.newShape,u=o.keptDims,l=s;if(l.length<e.length)return"\n      "+$e(Ze(t,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+Qe(["row","col"],u)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = row * "+e[1]+" + col;\n        return "+r+"Flat(index);\n      }\n    ";var c=i[0],f=i[1];return 1===f?"\n    float "+r+"(int row, int col) {\n      int index = row * "+e[1]+" + col;\n      vec2 uv = vec2(0.5, (float(index) + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      int index = row * "+e[1]+" + col;\n      vec2 uv = vec2((float(index) + 0.5) / "+f+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    vec2 uv = UVfrom2D("+c+", "+f+", "+e[1]+", row, col);\n    return sampleTexture("+n+", uv);\n  }\n"}(t);case 3:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[1]*e[2],a=e[2],o=P(e),s=o.newShape,u=o.keptDims,l=s;if(l.length<e.length)return"\n        "+$e(Ze(t,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+Qe(["row","col","depth"],u)+");\n        }\n      ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = row * "+i+" + col * "+a+" + depth;\n        return "+r+"Flat(index);\n      }\n    ";var c=t.shapeInfo.texShape,f=c[0],h=c[1];return h===i?"\n        float "+r+"(int row, int col, int depth) {\n          int texR = row;\n          int texC = col * "+a+" + depth;\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+f+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":h===a?"\n    float "+r+"(int row, int col, int depth) {\n      int texR = row * "+e[1]+" + col;\n      int texC = depth;\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+f+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        vec2 uv = UVfrom3D(\n            "+f+", "+h+", "+i+", "+a+", row, col, depth);\n        return sampleTexture("+n+", uv);\n      }\n  "}(t);case 4:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[3],a=e[2]*i,o=e[1]*a,s=P(e),u=s.newShape,l=s.keptDims;if(u.length<e.length)return"\n      "+$e(Ze(t,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+Qe(["row","col","depth","depth2"],l)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = row * "+o+" + col * "+a+" +\n            depth * "+i+" + depth2;\n        return "+r+"Flat(index);\n      }\n    ";var c=t.shapeInfo.texShape,f=c[0],h=c[1];return h===o?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int texR = row;\n        int texC = col * "+a+" + depth * "+i+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+h+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":h===i?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int texR = row * "+e[1]*e[2]+" + col * "+e[2]+" + depth;\n        int texC = depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+h+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      vec2 uv = UVfrom4D("+f+", "+h+", "+o+", "+a+",\n          "+i+", row, col, depth, depth2);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 5:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[4],a=e[3]*i,o=e[2]*a,s=e[1]*o,u=P(e),l=u.newShape,c=u.keptDims;if(l.length<e.length)return"\n      "+$e(Ze(t,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+Qe(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int index = row * "+s+" + col * "+o+" +\n            depth * "+a+" + depth2 * "+i+" + depth3;\n        return "+r+"Flat(index);\n      }\n    ";var f=t.shapeInfo.texShape,h=f[0],p=f[1];return p===s?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        int texC = col * "+o+" + depth * "+a+" +\n                   depth2 * "+i+" + depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===i?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row * "+e[1]*e[2]+" + col * "+e[2]+" +\n                   depth * "+e[3]+" + depth2;\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      vec2 uv = UVfrom5D("+h+", "+p+", "+s+", "+o+",\n          "+a+", "+i+", row, col, depth, depth2, depth3);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);case 6:return function(t){var e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e[5],a=e[4]*i,o=e[3]*a,s=e[2]*o,u=e[1]*s,l=P(e),c=l.newShape,f=l.keptDims;if(c.length<e.length)return"\n      "+$e(Ze(t,c))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+Qe(["row","col","depth","depth2","depth3","depth4"],f)+");\n      }\n    ";if(t.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = row * "+u+" + col * "+s+" +\n            depth * "+o+" + depth2 * "+a+" + depth3 * "+a+"\n            + depth4\n        return "+r+"Flat(index);\n      }\n    ";var h=t.shapeInfo.texShape,p=h[0],d=h[1];return d===u?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        int texC = col * "+s+" + depth * "+o+" + depth2;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":d===i?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row * "+e[1]*e[2]+" + col * "+e[2]+" + depth;\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      vec2 uv = UVfrom6D("+p+", "+d+", "+u+", "+s+",\n          "+o+", "+a+", "+i+"\n          ,row, col, depth, depth2, depth3, depth4);\n      return sampleTexture("+n+", uv);\n    }\n  "}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}var Ke="\n  float sampleTexture(sampler2D textureSampler, vec2 uv) {\n    return texture2D(textureSampler, uv).r;\n  }\n",Xe="\n  void setOutput(float val) {\n    gl_FragColor = vec4(val, 0, 0, 0);\n  }\n",Ye="\n  precision highp float;\n  precision highp int;\n  varying vec2 resultUV;\n  const vec2 halfCR = vec2(0.5, 0.5);\n\n  struct ivec5\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n  };\n\n  struct ivec6\n  {\n    int x;\n    int y;\n    int z;\n    int w;\n    int u;\n    int v;\n  };\n\n  bool isNaN(float val) {\n    return (val < 0.0 || 0.0 < val || val == 0.0) ? false : true;\n  }\n\n  bool hasNaN(vec4 values) {\n    vec4 v1 = values * values;\n    vec4 v2 = values * values;\n    return any(notEqual(v1, v2));\n  }\n\n  float getNaN(vec4 values) {\n    return dot(vec4(1), values);\n  }\n\n  int round(float value) {\n    return int(floor(value + 0.5));\n  }\n\n  int imod(int x, int y) {\n    return x - y * (x / y);\n  }\n\n  //Based on the work of Dave Hoskins\n  //https://www.shadertoy.com/view/4djSRW\n  #define HASHSCALE1 443.8975\n  float random(float seed){\n    vec2 p = resultUV * seed;\n    vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n    p3 += dot(p3, p3.yzx + 19.19);\n    return fract((p3.x + p3.y) * p3.z);\n  }\n\n  \nvec2 UVfrom1D(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom2D(int texNumR, int texNumC, int numC, int row, int col) {\n  int index = row * numC + col;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom3D(int texNumR, int texNumC, int stride0,\n    int stride1, int row, int col, int depth) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom4D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int row, int col, int depth,\n    int depth2) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom5D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int row, int col, int depth,\n    int depth2, int depth3) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 +\n              depth * stride2 + depth2 * stride3 + depth3;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n  \nvec2 UVfrom6D(int texNumR, int texNumC, int stride0,\n    int stride1, int stride2, int stride3, int stride4,\n    int row, int col, int depth, int depth2, int depth3, int depth4) {\n  // Explicitly use integer operations as dot() only works on floats.\n  int index = row * stride0 + col * stride1 + depth * stride2 + depth2 *\n    stride3 + depth3 * stride4 + depth4;\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n\n";function Je(t){if(t<=1)return"int";if(2===t)return"ivec2";if(3===t)return"ivec3";if(4===t)return"ivec4";if(5===t)return"ivec5";if(6===t)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function Ze(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function Qe(t,e){return e.map(function(e){return t[e]}).join(", ")}var tn=function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],a=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+Je(r)+" coords = getOutputCoords();\n        int end = "+en(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+a+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+en(r,"coords")+" = idx;\n          val += getX("+function(t,e){if(1===t)return""+e;if(2===t)return e+".x, "+e+".y";if(3===t)return e+".x, "+e+".y, "+e+".z";if(4===t)return e+".x, "+e+".y, "+e+".z, "+e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function en(t,e){if(1===t)return""+e;if(2===t)return e+".y";if(3===t)return e+".z";if(4===t)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var nn,rn,an=function(){function t(t,e,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=e,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+e+";\n      int offset_h = imod(h, "+e+");\n      int in_w = w / "+e+";\n      int offset_w = imod(w, "+e+");\n      int offset_d = (offset_h * "+e+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return t.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),on=function(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      const float FLOAT_MAX = 1.70141184e38;\n      const float FLOAT_MIN = 1.17549435e-38;\n\n      lowp vec4 encode_float(highp float v) {\n        if (isNaN(v)) {\n          return vec4(255, 255, 255, 255);\n        }\n\n        highp float av = abs(v);\n\n        if(av < FLOAT_MIN) {\n          return vec4(0.0, 0.0, 0.0, 0.0);\n        } else if(v > FLOAT_MAX) {\n          return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n        } else if(v < -FLOAT_MAX) {\n          return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n        }\n\n        highp vec4 c = vec4(0,0,0,0);\n\n        highp float e = floor(log2(av));\n        highp float m = exp2(fract(log2(av))) - 1.0;\n\n        c[2] = floor(128.0 * m);\n        m -= c[2] / 128.0;\n        c[1] = floor(32768.0 * m);\n        m -= c[1] / 32768.0;\n        c[0] = floor(8388608.0 * m);\n\n        highp float ebias = e + 127.0;\n        c[3] = floor(ebias / 2.0);\n        ebias -= c[3] * 2.0;\n        c[2] += floor(ebias) * 128.0;\n\n        c[3] += 128.0 * step(0.0, -v);\n\n        return c / 255.0;\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        gl_FragColor = encode_float(x);\n      }\n    "},sn=function(t){this.variableNames=["A"];var e=t[0],n=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+n+".0, "+e+".0);\n\n        vec4 values = texture2D(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},un=function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=Je(this.rank),a=function(t,e){var n=t.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],a=0;a<t.length;a++)a===e?i.push("int(getIndices("+r[a]+"))"):i.push(""+r[a]);return i.join()}(t,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "};function ln(t,e){return[e,t]}function cn(t,e){return t*e}function fn(t,e,n){var r=function(t,e){if(t%e!=0)throw new Error("unpackedSize ("+t+") must be a multiple of "+e);return t/e}(t.length,n);if(e.length<r)throw new Error("matrix length ("+e.length+") must be >= "+r);for(var i=0,a=0;a<t.length;a+=n)e[i++]=t[a]}function hn(t,e){return[Math.ceil(e/2),Math.ceil(t/2)]}function pn(t,e){var n=hn(t,e);return n[0]*n[1]*4}!function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD",t[t.PACK=4]="PACK"}(nn||(nn={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32"}(rn||(rn={}));var dn=null;function mn(t){var e=document.createElement("canvas");return e.width=1,e.height=1,gn(e,t)}function gn(t,e){var n,r=vt.get("WEBGL_VERSION");if(2===r?n=t.getContext("webgl2",e):1===r&&(n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)),0===r||null==n)throw new Error("This browser does not support WebGL.");return n}function vn(t,e){var n=e();return _n(t),n}var yn=!1;function bn(t){yn=t}function _n(t){if(yn){var e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+xn(t,e))}}function xn(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function wn(t,e){return Gn(t,function(){return t.getExtension(e)},'Extension "'+e+'" not supported on this browser.')}function Sn(t,e){var n=Gn(t,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(vn(t,function(){return t.shaderSource(n,e)}),vn(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function En(t,e){var n=Gn(t,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(vn(t,function(){return t.shaderSource(n,e)}),vn(t,function(){return t.compileShader(n)}),!1===t.getShaderParameter(n,t.COMPILE_STATUS))throw function(t,e){var n=kn.exec(e);if(null==n)return console.log("Couldn't parse line number in error: "+e),void console.log(t);for(var r=+n[1],i=t.split("\n"),a=i.length.toString().length+2,o=i.map(function(t,e){return E((e+1).toString(),a)+t}),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var l=o.slice(0,r-1),c=o.slice(r-1,r),f=o.slice(r);console.log(l.join("\n")),console.log(e.split("\n")[0]),console.log("%c "+E(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(f.join("\n"))}(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var kn=/ERROR: [0-9]+:([0-9]+):/g;function Tn(t){return Gn(t,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function Pn(t,e){if(vn(t,function(){return t.linkProgram(e)}),!1===t.getProgramParameter(e,t.LINK_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function Mn(t,e){if(vn(t,function(){return t.validateProgram(e)}),!1===t.getProgramParameter(e,t.VALIDATE_STATUS))throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Cn(t,e){var n=Gn(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return vn(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),vn(t,function(){return t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)}),n}function On(t,e){var n=Gn(t,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return vn(t,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)}),vn(t,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)}),n}function In(t){return null!=dn?dn:dn=vn(t,function(){return t.getParameter(t.MAX_TEXTURE_SIZE)})}function Nn(){return 2===vt.get("WEBGL_VERSION")?1:4}function An(t){return Gn(t,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function Rn(t,e,n){var r=In(t);if(e<=0||n<=0){var i="["+e+"x"+n+"]";throw new Error("Requested texture size "+i+" is invalid.")}if(e>r||n>r)throw i="["+e+"x"+n+"]",new Error("Requested texture size "+i+" greater than WebGL maximum on this browser / GPU ["+r+"x"+r+"].")}function Dn(t){return Gn(t,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function jn(t,e,n,r,i,a,o){var s=t.getAttribLocation(e,n);return-1!==s&&(vn(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),vn(t,function(){return t.vertexAttribPointer(s,i,t.FLOAT,!1,a,o)}),vn(t,function(){return t.enableVertexAttribArray(s)}),!0)}function Ln(t,e,n){Hn(t,n),vn(t,function(){return t.activeTexture(t.TEXTURE0+n)}),vn(t,function(){return t.bindTexture(t.TEXTURE_2D,e)})}function Fn(t,e,n){return Gn(t,function(){return t.getUniformLocation(e,n)},'uniform "'+n+'" not present in program.')}function zn(t,e,n){return t.getUniformLocation(e,n)}function Bn(t,e,n,r,i){vn(t,function(){return Ln(t,n,i)}),vn(t,function(){return t.uniform1i(r,i)})}function Un(t,e,n){vn(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),vn(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)})}function Vn(t,e){vn(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,e)}),vn(t,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function qn(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Wn(t,e))}function Wn(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Gn(t,e,n){var r=vn(t,function(){return e()});if(null==r)throw new Error(n);return r}function Hn(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function $n(t,e){2!==e.length&&(e=P(e).newShape);var n=In(t),r=b(e);return e.length<=1&&r<=n?[r,1]:2===e.length&&e[0]<=n&&e[1]<=n?e:3===e.length&&e[0]<=n&&e[1]*e[2]<=n?[e[0],e[1]*e[2]]:4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n?[e[0],e[1]*e[2]*e[3]]:S(r)}var Kn=Object.freeze({createWebGLRenderingContext:mn,createWebGLRenderingContextFromCanvas:gn,callAndCheck:vn,enableDebugWebGLErrorChecking:bn,checkWebGLError:_n,getWebGLErrorMessage:xn,getExtensionOrThrow:wn,createVertexShader:Sn,createFragmentShader:En,createProgram:Tn,linkProgram:Pn,validateProgram:Mn,createStaticVertexBuffer:Cn,createStaticIndexBuffer:On,queryMaxTextureSize:In,getNumChannels:Nn,createTexture:An,validateTextureSize:Rn,createFramebuffer:Dn,bindVertexBufferToProgramAttribute:jn,bindTextureUnit:Ln,unbindTextureUnit:function(t,e){Hn(t,e),vn(t,function(){return t.activeTexture(t.TEXTURE0+e)}),vn(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:Fn,getProgramUniformLocation:zn,bindTextureToProgramUniformSampler:Bn,bindCanvasToFramebuffer:function(t){vn(t,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),vn(t,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),vn(t,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:Un,unbindColorTextureFromFramebuffer:Vn,validateFramebuffer:qn,getFramebufferErrorMessage:Wn,getTextureShapeFromLogicalShape:$n});function Xn(){return{alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0}}function Yn(t){var e,n={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};return vn(e=null!=t?gn(t,n):mn(n),function(){return e.disable(e.DEPTH_TEST)}),vn(e,function(){return e.disable(e.STENCIL_TEST)}),vn(e,function(){return e.disable(e.BLEND)}),vn(e,function(){return e.disable(e.DITHER)}),vn(e,function(){return e.disable(e.POLYGON_OFFSET_FILL)}),vn(e,function(){return e.disable(e.SAMPLE_COVERAGE)}),vn(e,function(){return e.enable(e.SCISSOR_TEST)}),vn(e,function(){return e.enable(e.CULL_FACE)}),vn(e,function(){return e.cullFace(e.BACK)}),e}function Jn(t){return Sn(t,"\n    precision highp float;\n    attribute vec3 clipSpacePos;\n    attribute vec2 uv;\n    varying vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function Zn(t){return Cn(t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function Qn(t){return On(t,new Uint16Array([0,1,2,2,1,3]))}function tr(t,e){var n,r,i,a,o,s,u,l=t;return 2===vt.get("WEBGL_VERSION")?(n=l.R32F,r=l.R16F,i=l.RGBA32F,a=l.RED,o=4,s=1,u=l.HALF_FLOAT):(n=t.RGBA,r=t.RGBA,i=l.RGBA,a=t.RGBA,o=4,s=4,u=null!=e?e.HALF_FLOAT_OES:null),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedFloat:i,textureFormatFloat:a,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:o,defaultNumChannels:s,textureTypeHalfFloat:u}}function er(t,e,n,r,i,a){Rn(t,e,n);var o=An(t),s=t.TEXTURE_2D;return vn(t,function(){return t.bindTexture(s,o)}),vn(t,function(){return t.texParameteri(s,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),vn(t,function(){return t.texParameteri(s,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),vn(t,function(){return t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST)}),vn(t,function(){return t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST)}),vn(t,function(){return t.texImage2D(s,0,r,e,n,0,i,a,null)}),vn(t,function(){return t.bindTexture(t.TEXTURE_2D,null)}),o}function nr(t,e,n,r){var i=ln(e,n);return er(t,i[0],i[1],r.internalFormatFloat,r.textureFormatFloat,t.FLOAT)}function rr(t,e,n,r){var i=ln(e,n);return er(t,i[0],i[1],r.internalFormatFloat,r.textureFormatFloat,r.textureTypeHalfFloat)}function ir(t,e,n,r){var i=ln(e,n);return er(t,i[0],i[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function ar(t,e,n,r){var i=hn(e,n);return er(t,i[0],i[1],r.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function or(t,e,n){return vn(t,function(){return t.bindBuffer(t.ARRAY_BUFFER,n)}),jn(t,e,"clipSpacePos",n,3,20,0)&&jn(t,e,"uv",n,2,20,12)}function sr(t,e,n){vn(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),vn(t,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}),vn(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function ur(t,e,n,r,i,a){Rn(t,n,r),vn(t,function(){return t.bindTexture(t.TEXTURE_2D,e)}),vn(t,function(){return t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,a,t.FLOAT,i)}),vn(t,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function lr(t,e,n,r,i,a,o){var s,u=ln(n,r),l=u[0],c=u[1];1===o.defaultNumChannels?s=i:function(t,e,n){var r=cn(t.length,n);if(e.length<r)throw new Error("unpackedArray length ("+e.length+") must be >= "+r);for(var i=0,a=0;a<t.length;++a)e[i]=t[a],i+=n}(i,s=new Float32Array(cn(i.length,a)),a),ur(t,e,l,c,s,o.textureFormatFloat)}function cr(t,e,n,r,i,a){var o=hn(n,r),s=o[0],u=o[1],l=new Float32Array(pn(n,r));(function(t,e,n,r){var i=pn(e,n);if(r.length<i)throw new Error("packedRGBA length ("+r.length+") must be >= "+i);for(var a=hn(e,n),o=a[0],s=a[1],u=n%2==1,l=e%2==1,c=Math.floor(n/2),f=Math.floor(e/2),h=u?4:0,p=n,d=0,m=0;m<f;++m){for(var g=2*m*n,v=0;v<c;++v){var y=g+2*v;r[d]=t[y],r[d+1]=t[y+1],r[d+2]=t[y+p],r[d+3]=t[y+p+1],d+=4}d+=h}if(u){y=n-1,d=4*(o-1);var b=2*n;for(h=4*o,m=0;m<f;++m)r[d]=t[y],r[d+2]=t[y+n],y+=b,d+=h}if(l)for(y=(e-1)*n,d=(s-1)*o*4,v=0;v<c;++v)r[d++]=t[y++],r[d++]=t[y++],d+=2;u&&l&&(r[r.length-4]=t[t.length-1])})(i,n,r,l),ur(t,e,s,u,l,t.RGBA)}function fr(t,e,n,r,i){var a=e;if(2===vt.get("WEBGL_VERSION")){var o=t,s=o.createBuffer();vn(t,function(){return t.bindBuffer(o.PIXEL_PACK_BUFFER,s)});var u=4*cn(n*r,i.downloadUnpackNumChannels);vn(t,function(){return t.bufferData(o.PIXEL_PACK_BUFFER,u,t.STATIC_DRAW)}),vn(t,function(){return o.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),vn(t,function(){return t.bindBuffer(o.PIXEL_PACK_BUFFER,null)}),a=s}return a}function hr(t,e,n,r,i){var a=t,o=new Float32Array(cn(n*r,i.downloadUnpackNumChannels));a.bindBuffer(t.ARRAY_BUFFER,e),a.getBufferSubData(t.ARRAY_BUFFER,0,o),a.bindBuffer(t.ARRAY_BUFFER,null);var s=new Float32Array(n*r);return fn(o,s,i.downloadUnpackNumChannels),s}function pr(t,e,n,r){var i=ln(e,n),a=i[0],o=i[1],s=new Float32Array(cn(e*n,r.downloadUnpackNumChannels));vn(t,function(){return t.readPixels(0,0,a,o,r.downloadTextureFormat,t.FLOAT,s)});var u=new Float32Array(e*n);return fn(s,u,r.downloadUnpackNumChannels),u}function dr(t,e,n,r){var i=ln(e,n),a=i[0],o=i[1],s=new Uint8Array(cn(e*n,4));return vn(t,function(){return t.readPixels(0,0,a,o,r.downloadTextureFormat,t.UNSIGNED_BYTE,s)}),new Float32Array(s.buffer)}function mr(t,e,n,r){var i=hn(e,n),a=i[0],o=i[1],s=new Float32Array(pn(e,n));vn(t,function(){return t.readPixels(0,0,a,o,t.RGBA,t.FLOAT,s)});var u=new Float32Array(e*n);return function(t,e,n,r){var i=e*n;if(i<r.length)throw new Error("matrix length ("+r.length+") must be >= "+i);for(var a=n%2==1,o=e%2==1,s=Math.floor(n/2),u=Math.floor(e/2),l=hn(e,n),c=l[0],f=l[1],h=a?4:0,p=n+(a?1:0),d=0,m=0,g=n,v=0;v<u;++v){for(var y=0;y<s;++y)r[m++]=t[d++],r[m++]=t[d++],r[g++]=t[d++],r[g++]=t[d++];d+=h,m+=p,g+=p}if(a){d=4*(c-1);var b=n-1;for(h=4*c,p=2*n,v=0;v<u;++v)r[b]=t[d],r[b+n]=t[d+2],d+=h,b+=p}if(o)for(d=(f-1)*c*4,b=(e-1)*n,y=0;y<s;++y)r[b++]=t[d++],r[b++]=t[d++],d+=2;return a&&o&&(r[r.length-1]=t[t.length-4]),r}(s,e,n,u)}var gr=Object.freeze({getWebGLContextAttributes:Xn,createWebGLContext:Yn,createVertexShader:Jn,createVertexBuffer:Zn,createIndexBuffer:Qn,getTextureConfig:tr,createFloat32MatrixTexture:nr,createFloat16MatrixTexture:rr,createUnsignedBytesMatrixTexture:ir,createPackedMatrixTexture:ar,bindVertexProgramAttributeStreams:or,uploadPixelDataToTexture:sr,uploadMatrixToTexture:lr,uploadMatrixToPackedTexture:cr,maybeCreateBufferFromOutputTexture:fr,downloadFloat32MatrixFromBuffer:hr,downloadFloat32MatrixFromOutputTexture:pr,downloadByteEncodedFloatMatrixFromOutputTexture:dr,downloadMatrixFromPackedOutputTexture:mr}),vr=function(){function t(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.autoDebugValidate=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[],this.gl=null!=t?t:Yn(),1===vt.get("WEBGL_VERSION")?(this.textureFloatExtension=wn(this.gl,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),vt.get("WEBGL_RENDER_FLOAT32_ENABLED")||(this.textureHalfFloatExtension=wn(this.gl,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float"))):this.colorBufferFloatExtension=wn(this.gl,"EXT_color_buffer_float"),this.loseContextExtension=wn(this.gl,"WEBGL_lose_context"),this.vertexBuffer=Zn(this.gl),this.indexBuffer=Qn(this.gl),this.framebuffer=Dn(this.gl),this.textureConfig=tr(this.gl,this.textureHalfFloatExtension)}return t.prototype.dispose=function(){var t=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var e=this.gl;vn(e,function(){return e.finish()}),vn(e,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),vn(e,function(){return e.deleteFramebuffer(t.framebuffer)}),vn(e,function(){return e.bindBuffer(e.ARRAY_BUFFER,null)}),vn(e,function(){return e.deleteBuffer(t.vertexBuffer)}),vn(e,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}),vn(e,function(){return e.deleteBuffer(t.indexBuffer)}),this.loseContextExtension.loseContext(),this.disposed=!0}},t.prototype.enableAutomaticDebugValidation=function(t){this.autoDebugValidate=t,bn(t)},t.prototype.createFloat32MatrixTexture=function(t,e){return this.throwIfDisposed(),nr(this.gl,t,e,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(t,e){return this.throwIfDisposed(),rr(this.gl,t,e,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(t,e){return this.throwIfDisposed(),ir(this.gl,t,e,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(t,e){this.throwIfDisposed(),sr(this.gl,t,e)},t.prototype.createPackedMatrixTexture=function(t,e){return this.throwIfDisposed(),ar(this.gl,t,e,this.textureConfig)},t.prototype.deleteMatrixTexture=function(t){var e=this;this.throwIfDisposed(),this.outputTexture===t&&(Vn(this.gl,this.framebuffer),this.outputTexture=null),vn(this.gl,function(){return e.gl.deleteTexture(t)})},t.prototype.uploadMatrixToTexture=function(t,e,n,r){this.throwIfDisposed();var i=Nn();return lr(this.gl,t,e,n,r,i,this.textureConfig)},t.prototype.uploadMatrixToPackedTexture=function(t,e,n,r){return this.throwIfDisposed(),cr(this.gl,t,e,n,r,this.textureConfig)},t.prototype.downloadFloat32MatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return pr(r.gl,e,n,r.textureConfig)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return dr(r.gl,e,n,r.textureConfig)})},t.prototype.downloadFloat32MatrixFromBuffer=function(t,e,n){return hr(this.gl,t,e,n,this.textureConfig)},t.prototype.maybeCreateBufferFromTexture=function(t,e,n){this.bindTextureToFrameBuffer(t);var r=fr(this.gl,t,e,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},t.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},t.prototype.createFence=function(t){var e,n,r=this;if(vt.get("WEBGL_FENCE_API_ENABLED")){var i=t,a=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var t=i.clientWaitSync(a,0,0);return t===i.ALREADY_SIGNALED||t===i.CONDITION_SATISFIED},e=a}else vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(e=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(e,vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:e,isFencePassed:n}},t.prototype.downloadMatrixFromPackedTexture=function(t,e,n){var r=this;return this.downloadMatrixDriver(t,function(){return mr(r.gl,e,n,r.textureConfig)})},t.prototype.createProgram=function(t){this.throwIfDisposed();var e=this.gl,n=En(e,t),r=Jn(e),i=Tn(e);return vn(e,function(){return e.attachShader(i,r)}),vn(e,function(){return e.attachShader(i,n)}),Pn(e,i),this.autoDebugValidate&&Mn(e,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=or(e,this.program,this.vertexBuffer)),i},t.prototype.deleteProgram=function(t){var e=this;this.throwIfDisposed(),t===this.program&&(this.program=null),null!=t&&vn(this.gl,function(){return e.gl.deleteProgram(t)})},t.prototype.setProgram=function(t){var e=this;this.throwIfDisposed(),this.program=t,null!=this.program&&this.autoDebugValidate&&Mn(this.gl,this.program),vn(this.gl,function(){return e.gl.useProgram(t)})},t.prototype.getUniformLocation=function(t,e,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?Fn(this.gl,t,e):zn(this.gl,t,e)},t.prototype.getAttributeLocation=function(t,e){var n=this;return this.throwIfDisposed(),vn(this.gl,function(){return n.gl.getAttribLocation(t,e)})},t.prototype.getUniformLocationNoThrow=function(t,e){return this.throwIfDisposed(),this.gl.getUniformLocation(t,e)},t.prototype.setInputMatrixTexture=function(t,e,n){this.throwIfDisposed(),this.throwIfNoProgram(),Bn(this.gl,this.program,t,e,n)},t.prototype.setOutputMatrixTexture=function(t,e,n){this.setOutputMatrixTextureDriver(t,n,e)},t.prototype.setOutputPackedMatrixTexture=function(t,e,n){this.throwIfDisposed();var r=hn(e,n),i=r[0],a=r[1];this.setOutputMatrixTextureDriver(t,i,a)},t.prototype.setOutputMatrixWriteRegion=function(t,e,n,r){this.setOutputMatrixWriteRegionDriver(n,t,r,e)},t.prototype.setOutputPackedMatrixWriteRegion=function(t,e,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){null!=this.program&&Mn(this.gl,this.program),qn(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.autoDebugValidate&&this.debugValidate(),vn(t,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),vn(this.gl,function(){return t.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=wn(this.gl,2===vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(2===vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.gl,e=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},t.prototype.endQuery=function(){if(2!==vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var e=this.gl,n=this.getQueryTimerExtensionWebGL2();e.endQuery(n.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(t){return l(this,void 0,void 0,function(){var e=this;return c(this,function(n){switch(n.label){case 0:return[4,k(function(){return e.isQueryAvailable(t,vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(t,vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(t,e){if(0===e)return null;if(2===e){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(t,r.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(t,e){if(0===e)return!0;if(2===e){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},t.prototype.pollFence=function(t){var e=this;return new Promise(function(n){e.addItemToPoll(function(){return t.isFencePassed()},function(){return n()})})},t.prototype.pollItems=function(){for(var t=function(t){for(var e=0,n=t.length-1,r=-1;e<=n;){var i=e+n>>1;t[i]()?(r=i,e=i+1):n=i-1}return r}(this.itemsToPoll.map(function(t){return t.isDoneFn})),e=0;e<=t;++e)(0,this.itemsToPoll[e].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},t.prototype.addItemToPoll=function(t,e){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),this.itemsToPoll.length>1||k(function(){return n.pollItems(),0===n.itemsToPoll.length})},t.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Un(this.gl,t,this.framebuffer),this.autoDebugValidate&&qn(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Un(this.gl,this.outputTexture,this.framebuffer),this.autoDebugValidate&&qn(this.gl)):Vn(this.gl,this.framebuffer)},t.prototype.downloadMatrixDriver=function(t,e){this.bindTextureToFrameBuffer(t);var n=e();return this.unbindTextureToFrameBuffer(),n},t.prototype.setOutputMatrixTextureDriver=function(t,e,n){this.throwIfDisposed();var r=this.gl;Un(r,t,this.framebuffer),this.autoDebugValidate&&qn(r),this.outputTexture=t,vn(r,function(){return r.viewport(0,0,e,n)}),vn(r,function(){return r.scissor(0,0,e,n)})},t.prototype.setOutputMatrixWriteRegionDriver=function(t,e,n,r){var i=this;this.throwIfDisposed(),vn(this.gl,function(){return i.gl.scissor(t,e,n,r)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},t}();function yr(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(t,n){var r=t.logicalShape,i=e[n],a=i.shape;if(!_(r,a))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+a+" must match");if(!t.isUniform||!i.isUniform){var o=t.texShape,s=i.isUniform?null:i.texData.texShape;if(!_(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")}})}var br=function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var a,o=e,s=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";a=.5===i?"inversesqrt("+u+")":1===i?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+a+";\n        setOutput(val);\n      }\n    "},_r=function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+e+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+e+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},xr=function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,a=e-1-t.padInfo.top,o=n-1-t.padInfo.left,s=e*n-1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+s+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+n+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},wr=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1),this.variableNames=["matrixA","matrixB"];var i=t[0],a=n?t[2]:t[1],o=r?e[1]:e[2],s=n?t[1]:t[2];this.outputShape=[i,a,o];var u=function(t,e){return n?"batch, "+e+" + "+t+", aRow":"batch, aRow, "+e+" + "+t},l=function(t,e){return r?"batch, bCol, "+e+" + "+t:"batch, "+e+" + "+t+", bCol"},c=4*Math.floor(s/4),f=s%4;this.userCode=" float dotARowBCol(int batch, int aRow, int bCol) {\n      float result = 0.0;\n      for (int i = 0; i < "+c+"; i += 4) {\n        vec4 a = vec4(\n          getMatrixA("+u(0,"i")+"),\n          getMatrixA("+u(1,"i")+"),\n          getMatrixA("+u(2,"i")+"),\n          getMatrixA("+u(3,"i")+")\n        );\n        vec4 b = vec4(\n          getMatrixB("+l(0,"i")+"),\n          getMatrixB("+l(1,"i")+"),\n          getMatrixB("+l(2,"i")+"),\n          getMatrixB("+l(3,"i")+")\n        );\n\n        result += dot(a, b);\n      }\n\n      if ("+(1===f)+") {\n        result += getMatrixA("+u(0,c)+") *\n          getMatrixB("+l(0,c)+");\n      } else if ("+(2===f)+") {\n        vec2 a = vec2(\n          getMatrixA("+u(0,c)+"),\n          getMatrixA("+u(1,c)+")\n        );\n        vec2 b = vec2(\n          getMatrixB("+l(0,c)+"),\n          getMatrixB("+l(1,c)+")\n        );\n        result += dot(a, b);\n      } else if ("+(3===f)+") {\n        vec3 a = vec3(\n          getMatrixA("+u(0,c)+"),\n          getMatrixA("+u(1,c)+"),\n          getMatrixA("+u(2,c)+")\n        );\n        vec3 b = vec3(\n          getMatrixB("+l(0,c)+"),\n          getMatrixB("+l(1,c)+"),\n          getMatrixB("+l(2,c)+")\n        );\n        result += dot(a, b);\n      }\n\n      return result;\n    }\n\n    void main() {\n      ivec3 resBRC = getOutputCoords();\n      setOutput(dotARowBCol(resBRC.x, resBRC.y, resBRC.z));\n    }\n    "},Sr=function(t,e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!1),this.variableNames=["matrixA","matrixB"],this.outputShape=n;var a=r?t[0]:t[1],o=Math.ceil(a/2),s=r?"resultUV.t, center":"center, resultUV.t",u=i?"center, resultUV.s":"resultUV.s, center",l=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],c=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];this.userCode="\n      const float sharedDimension = "+o+".0;\n\n      vec4 dot2x2ARowBCol() {\n        vec4 result = vec4(0);\n        for (int ii = 0; ii < "+o+"; ii++) {\n          float i = float(ii);\n          float center = (i + 0.5) / sharedDimension;\n          vec4 a = texture2D(matrixA, vec2("+s+"));\n          vec4 b = texture2D(matrixB, vec2("+u+"));\n\n          result += ("+l[0]+" * "+c[0]+") + ("+l[1]+" * "+c[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        gl_FragColor = dot2x2ARowBCol();\n      }\n    "},Er=function(){function t(t,e,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(e-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(e-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;return function(n,r){null==e.seedLoc&&(e.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(e.seedLoc,t)}},t}(),kr=function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},Tr=function(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        int r = rc.x;\n        int c = rc.y;\n        int rp1 = r + 1;\n        int cp1 = c + 1;\n\n        bool cEdge = cp1 >= "+t[1]+";\n        bool rEdge = rp1 >= "+t[0]+";\n\n        gl_FragColor = vec4(\n            getA(r, c),\n            cEdge ? 0. : getA(r, cp1),\n            rEdge ? 0. : getA(rp1, c),\n            rEdge || cEdge ? 0. : getA(rp1, cp1)\n          );\n      }\n    "},Pr=function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(e,n){return e[0]+t[n]+e[1]});var r=t.length,i=Je(r),a=e.map(function(t){return t[0]}).join(","),o=e.map(function(e,n){return e[0]+t[n]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+a+");\n      "+i+" end = "+i+"("+o+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+a+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},Mr=function(t,e,n){if(this.variableNames=["x"],"avg"===e&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterHeight,i=t.filterWidth,a=t.strideHeight,o=t.strideWidth,s=t.padInfo.top,u=t.padInfo.left;this.outputShape=t.outShape;var l="avg"===e,c="0.0";if(l||(c="-1.0 / 0.0"),n)this.userCode="\n        const ivec2 strides = ivec2("+a+", "+o+");\n        const ivec2 pads = ivec2("+s+", "+u+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+r+"; wR++) {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+i+"; wC++) {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+i+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var f=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===e&&(f="avgValue / count");var h=4*Math.floor(i/4),p=i%4,d="\n      if ("+l+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+a+", "+o+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n      const float initializationValue = "+c+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+c+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+r+"; wR++) {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+h+"; wC += 4) {\n            int xC = xCCorner + wC;\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              getValue(batch, xR, xC + 3, d)\n            );\n\n            "+d+"\n          }\n\n          int xC = xCCorner + "+h+";\n          if ("+(1===p)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+d+"\n          } else if ("+(2===p)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+d+"\n          } else if ("+(3===p)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + 1, d),\n              getValue(batch, xR, xC + 2, d),\n              initializationValue\n            );\n\n            "+d+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}},Cr=function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=Math.ceil(i/n);this.outputShape=[r,a];var o="0.0",s="";"min"===e?(o="1.0 / 0.0",s="min"):"max"===e&&(o="-1.0 / 0.0",s="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===e?u="sumValue":"all"===e?u="allValue":"any"===e&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,f="\n      if ("+("sum"===e)+") {\n        sumValue += dot(values, ones);\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===e?(o="1.0",f="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===e&&(o="0.0",f="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var p="";i%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+p+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+f+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(2===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+f+"\n        } else if ("+(3===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+f+"\n        }\n        setOutput("+u+");\n      }\n    "},Or=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],u=o[2],l=[n&&s>1?i-1:i,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],p=1/f,d=1/h,m=2*Math.ceil(p)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Ir=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},Nr=function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],a=r[2],o=t.shape,s=o[1],u=o[2],l=[n&&s>1?i-1:i,n&&u>1?a-1:a],c=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=l[0]/c[0],h=l[1]/c[1],p=1/f,d=1/h,m=2*Math.ceil(p)+2,g=2*Math.ceil(d)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+f+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+d+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},Ar=function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],a=t[1],o=t[2],s=t[3];this.outputShape=[i,e,n,s];var u=[r&&e>1?a-1:a,r&&n>1?o-1:o],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+a+".0, "+o+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},Rr=function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,1!==n){var r=t.map(function(n,r){return function(n){return-1!==e.indexOf(n)&&1!==t[n]?t[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)}).join(","),i=Je(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "},Dr=function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,a=t.numSegments,o=a*Math.ceil(i/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, filter);\n    ",c="";i%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var f="";i%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+f+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+a+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+a+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 filter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "},jr=function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<e.length;u++)s.push(""+a[u]),u<t&&o.push(""+a[u]);r=o.join(),i=s.join()}var l=Je(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},Lr=function(){function t(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var e=Je(this.rank),n=function(t){if(1===t)return"sourceLoc";if(2===t)return"sourceLoc.x, sourceLoc.y";if(3===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z";if(4===t)return"sourceLoc.x, sourceLoc.y, sourceLoc.z, sourceLoc.w";throw Error("Slicing for rank "+t+" is not yet supported")}(this.rank);this.userCode="\n      uniform "+e+" start;\n\n      void main() {\n        "+e+" sourceLoc = start + getOutputCoords();\n        setOutput(getSource("+n+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(t){var e=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,r){if(null!=e.startLoc||(e.startLoc=n.getUniformLocationNoThrow(r,"start"),null!=e.startLoc))if(1===e.rank)n.gl.uniform1i(e.startLoc,t[0]);else if(2===e.rank)n.gl.uniform2i(e.startLoc,t[0],t[1]);else if(3===e.rank)n.gl.uniform3i(e.startLoc,t[0],t[1],t[2]);else{if(4!==e.rank)throw Error("Slicing for rank "+e.rank+" is not yet supported");n.gl.uniform4i(e.startLoc,t[0],t[1],t[2],t[3])}}},t}();var Fr=function(t,e,n,r){this.variableNames=["x"];var i=n.filter(function(t,e){return-1===r.indexOf(e)});this.outputShape=i;var a=n.length,o=Je(n.length),s=Je(i.length),u="";if(1===a)u="coords * strides + begin";else{var l=0;u=n.map(function(t,e){return-1===r.indexOf(e)?(l++,1===i.length?"coords * strides["+e+"] + begin["+e+"]":"coords["+(l-1)+"] * strides["+e+"] + begin["+e+"]"):"begin["+e+"]"}).join(",")}this.userCode="\n      "+o+" begin = "+o+"("+t+");\n      "+o+" strides = "+o+"("+e+");\n\n      void main() {\n        "+s+" coords = getOutputCoords();\n        setOutput(getX("+u+"));\n      }\n    "},zr=function(){function t(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(t,e){var n,r=Br(e),i=Ur(t,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[i].shift();return this.usedTextures[i].push(a),a}return this.numUsedTextures++,this.log(),r===rn.PACKED_2X2_FLOAT32?n=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):r===rn.UNPACKED_FLOAT32?n=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):r===rn.UNPACKED_FLOAT16?n=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):r===rn.PACKED_4X1_UNSIGNED_BYTE&&(n=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(n),n},t.prototype.releaseTexture=function(t,e,n){if(null!=this.freeTextures){var r=Ur(e,Br(n));r in this.freeTextures||(this.freeTextures[r]=[]),this.freeTextures[r].push(t),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[r],a=i.indexOf(t);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(a,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var t=this;if(null!=this.freeTextures){for(var e in this.freeTextures)this.freeTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});for(var e in this.usedTextures)this.usedTextures[e].forEach(function(e){t.gpgpu.deleteMatrixTexture(e)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function Br(t){if(t===nn.DOWNLOAD||t===nn.PIXELS)return rn.PACKED_4X1_UNSIGNED_BYTE;if(t===nn.UPLOAD)return rn.UNPACKED_FLOAT32;if(t===nn.RENDER)return vt.get("WEBGL_RENDER_FLOAT32_ENABLED")?rn.UNPACKED_FLOAT32:rn.UNPACKED_FLOAT16;if(t===nn.PACK)return rn.PACKED_2X2_FLOAT32;throw new Error("Unknown logical texture type "+t)}function Ur(t,e){return t[0]+"_"+t[1]+"_"+e}var Vr=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=Je(this.rank),a=function(t){var e=t.length;if(e>5)throw Error("Tile for rank "+e+" is not yet supported");if(1===e)return"imod(resRC, "+t[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<t.length;i++)r.push("imod("+n[i]+", "+t[i]+")");return r.join()}(t);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+a+"));\n      }\n    "};var qr=function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=Je(this.rank),a=function(t){var e=t.length;if(e>6)throw Error("Transpose for rank "+e+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e),i=0;i<t.length;i++)r[t[i]]=n[i];return r.join()}(e);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+a+"));\n    }\n    "};var Wr=1.7580993408473768,Gr=1.0507009873554805,Hr=function(){function t(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      uniform float NAN;\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(){var t=this;return function(e,n){null==t.startLoc&&(t.startLoc=e.getUniformLocationNoThrow(n,"NAN"),null==t.startLoc)||e.gl.uniform1f(t.startLoc,NaN)}},t}(),$r="if (isNaN(x)) return x;",Kr=$r+"\n  return (x < 0.0) ? 0.0 : x;\n",Xr="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+Wr+";\n  float scale = "+Gr+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n";var Yr=$r+"\n  return sin(x);\n",Jr=$r+"\n  return cos(x);\n",Zr=$r+"\n  return atan(x);\n",Qr=$r+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",ti=$r+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",ei=function(t){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      const vec2 onePixel = 1. / vec2("+t[1]+", "+t[0]+");\n\n      void main() {\n        ivec2 rc = getOutputCoords();\n        vec2 modCoord = mod(vec2(rc.y, rc.x), 2.);\n\n        vec4 packedInput = texture2D(A,\n          resultUV - step(1., modCoord) * onePixel);\n\n        setOutput(\n          modCoord.x == 0. ?\n            (modCoord.y == 0. ? packedInput.r : packedInput.b) :\n            (modCoord.y == 0. ? packedInput.g : packedInput.a)\n        );\n      }\n    "};var ni=Wt({concat_:function(t,e){void 0===e&&(e=0),d(t.length>=1,"Pass at least one tensor to concat");var n=qt(t,"tensors","concat");e=It(e,n[0].shape)[0];var r=jt(n.map(function(t){return t.shape}),e);if(0===b(r))return Xt([],r);if(1===(n=n.filter(function(t){return t.size>0})).length)return n[0];var i=n.map(function(t){return t.shape});!function(t,e){var n=t[0].length;t.forEach(function(t,e){d(t.length===n,"Error in concat"+n+"D: rank of tensors["+e+"] must be the same as the rank of the rest ("+n+")")}),d(e>=0&&e<n,"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+".");var r=t[0];t.forEach(function(t,i){for(var a=0;a<n;a++)d(a===e||t[a]===r[a],"Error in concat"+n+"D: Shape of tensors["+i+"] ("+t+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+".")})}(i,e);var a=n;return vt.engine.runKernel(function(t){return t.concat(n,e)},a,function(t){var n=i.map(function(t){return t[e]});return si(t,n,e).map(function(t){return function(){return t}})})}}),ri=Wt({concat1d_:function(t){return ni(t,0)}}),ii=Wt({concat2d_:function(t,e){return ni(t,e)}}),ai=Wt({concat3d_:function(t,e){return ni(t,e)}}),oi=Wt({concat4d_:function(t,e){return ni(t,e)}}),si=Wt({split_:function(t,e,n){void 0===n&&(n=0);var r,i=Vt(t,"x","split");return n=It(n,i.shape)[0],"number"==typeof e?(d(i.shape[n]%e==0,"Number of splits must evenly divide the axis."),r=Array(e).fill(i.shape[n]/e)):(d(i.shape[n]===e.reduce(function(t,e){return t+e}),"The sum of sizes must match the size of the axis dimension."),r=e),vt.engine.runKernel(function(t){return t.split(i,r,n)},{$x:i},function(t){return{$x:function(){return ni(t,n)}}})}});"undefined"!=typeof window?window:"undefined"!=typeof r||"undefined"!=typeof self&&self;function ui(t,e){return t(e={exports:{}},e.exports),e.exports}var li=ui(function(t){!function(t,e,n){function r(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function i(t,e){var n=new function(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}(t),i=e&&e.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+1.1102230246251565e-16*(2097152*a()|0)},a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.alea=i}(0,t)}),ci=ui(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function i(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.xor128=i}(0,t)}),fi=ui(function(t){!function(t,e,n){function r(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.xorwow=i}(0,t)}),hi=ui(function(t){!function(t,e,n){function r(t,e){return e.x=t.x.slice(),e.i=t.i,e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&(i.x&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.xorshift7=i}(0,t)}),pi=ui(function(t){!function(t,e,n){function r(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function i(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,a=e.i;return e.w=r=r+1640531527|0,n=i[a+34&127],t=i[a=a+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[a]=n^t,e.i=a,n+(r^r>>>16)|0},function(t,e){var n,r,i,a,o,s=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,a=-32;a<u;++a)e&&(r^=e.charCodeAt((a+32)%e.length)),0===a&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,a>=0&&(o=o+1640531527|0,i=0==(n=s[127&a]^=r+o)?i+1:0);for(i>=128&&(s[127&(e&&e.length||0)]=-1),i=127,a=512;a>0;--a)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;t.w=o,t.X=s,t.i=i}(e,t)}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&(i.X&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.xor4096=i}(0,t)}),di=ui(function(t){!function(t,e,n){function r(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function i(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),i=e&&e.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},a.int32=n.next,a.quick=a,i&&("object"==typeof i&&r(i,n),a.state=function(){return r(n,{})}),a}e&&e.exports?e.exports=i:this.tychei=i}(0,t)}),mi=ui(function(t){!function(e,r){var i,a=this,o=256,s=6,u="random",l=r.pow(o,s),c=r.pow(2,52),f=2*c,h=o-1;function p(t,n,p){var v=[],y=m(function t(e,n){var r,i=[],a=typeof e;if(n&&"object"==a)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==a?e:e+"\0"}((n=1==n?{entropy:!0}:n||{}).entropy?[t,g(e)]:null==t?function(){try{var t;return i&&(t=i.randomBytes)?t=t(o):(t=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(t)),g(t)}catch(t){var n=a.navigator,r=n&&n.plugins;return[+new Date,a,r,a.screen,g(e)]}}():t,3),v),b=new function(t){var e,n=t.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[a=h&a+t[i%n]+(e=s[i])],s[a]=e;(r.g=function(t){for(var e,n=0,i=r.i,a=r.j,s=r.S;t--;)e=s[i=h&i+1],n=n*o+s[h&(s[i]=s[a=h&a+e])+(s[a]=e)];return r.i=i,r.j=a,n})(o)}(v),_=function(){for(var t=b.g(s),e=l,n=0;t<c;)t=(t+n)*o,e*=o,n=b.g(1);for(;t>=f;)t/=2,e/=2,n>>>=1;return(t+n)/e};return _.int32=function(){return 0|b.g(4)},_.quick=function(){return b.g(4)/4294967296},_.double=_,m(g(b.S),e),(n.pass||p||function(t,e,n,i){return i&&(i.S&&d(i,b),t.state=function(){return d(b,{})}),n?(r[u]=t,e):t})(_,y,"global"in n?n.global:this==r,n.state)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function m(t,e){for(var n,r=t+"",i=0;i<r.length;)e[h&i]=h&(n^=19*e[h&i])+r.charCodeAt(i++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(r["seed"+u]=p,m(r.random(),e),t.exports){t.exports=p;try{i=n(841)}catch(t){}}}([],Math)});mi.alea=li,mi.xor128=ci,mi.xorwow=fi,mi.xorshift7=hi,mi.xor4096=pi,mi.tychei=di;var gi=mi.alea,vi=function(){function t(t,e,n,r,i){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var a=i||Math.random();this.random=gi(a.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var e,n,r=!1;!r;){var i=void 0,a=void 0,o=void 0;do{o=(i=2*this.random()-1)*i+(a=2*this.random()-1)*a}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*a*s,this.truncated&&!this.isValidTruncated(e)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(e)},t.prototype.convertValue=function(t){return null==this.dtype||"float32"===this.dtype?t:Math.round(t)},t.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},t}();function yi(t,e,n){return void 0===e&&(e="float32"),new Y(t,e,n)}var bi=Wt({batchToSpaceND_:function(t,e,n){var r=Vt(t,"x","batchToSpaceND"),i=e.reduce(function(t,e){return t*e});return d(r.rank>=1+e.length,"input rank should be > than [blockShape] but got "+r.rank),d(n.length===e.length,"crops.shape[0] must be equal to [blockShape] but got "+n.length),d(r.shape[0]%i==0,"input tensor batch must be divisible by prod( blockShape )"),vt.engine.runKernel(function(t){return t.batchToSpaceND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.spaceToBatchND(e,n)}}})}}),_i=Wt({cast_:function(t,e){var n=Vt(t,"x","cast");return vt.engine.runKernel(function(t){return t.cast(n,e)},{$x:n},function(t){return{$x:function(){return t.clone()}}})}}),xi=Wt({clone_:function(t){var e=Vt(t,"x","clone");return vt.engine.runKernel(function(t){return tt.make(e.shape,{dataId:e.dataId},e.dtype)},{$x:e},function(t){return{$x:function(){return t.toFloat()}}})}}),wi=Wt({cumsum_:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=Vt(t,"x","cumsum"),a=At([e|=0],i.rank),o=i;null!=a&&(o=i.transpose(a));var s=Dt(1,i.rank)[0],u=vt.engine.runKernel(function(t){return t.cumsum(o,s,n,r)},{permutedX:o},function(t){return{permutedX:function(){return t.cumsum(e,n,!r)}}});return null!=a&&(u=u.transpose(a)),u}}),Si=Wt({depthToSpace_:function(t,e,n){void 0===n&&(n="NHWC");var r=Vt(t,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],a="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];return d(i*e>=0,"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+e+"  for depthToSpace with input shape\n      "+r.shape),d(a*e>=0,"Negative dimension size caused by overflow when multiplying\n      "+a+" and "+e+" for depthToSpace with input shape\n          "+r.shape),d(o%(e*e)==0,"Dimension size must be evenly divisible by "+e*e+" but is "+o+" for depthToSpace with input shape "+r.shape),vt.engine.runKernel(function(t){return t.depthToSpace(r,e,n)},{$x:r})}}),Ei=Wt({expandDims_:function(t,e){void 0===e&&(e=0);var n=Vt(t,"x","expandDims");d(e<=n.rank,"Axis must be <= rank of the tensor");var r=n.shape.slice();return e<0&&(d(-(n.rank+1)<=e,"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"),e=n.rank+e+1),r.splice(e,0,1),Li(n,r)}}),ki=Wt({eye_:function(t,e,n,r){void 0===r&&(r="float32"),null==e&&(e=t);for(var i=yi([t,e],r),a=t<=e?t:e,o=0;o<a;++o)i.set(1,o,o);var s=i.toTensor().as2D(t,e);if(null==n)return s;if(1===n.length)return Ui(Ei(s,0),[n[0],1,1]);if(2===n.length)return Ui(Ei(Ei(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return Ui(Ei(Ei(Ei(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),Ti=Wt({fromPixels_:function(t,e){if(void 0===e&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");return vt.engine.fromPixels(t,e)}}),Pi=Wt({multinomial_:function(t,e,n,r){void 0===r&&(r=!1);var i=Vt(t,"logits","multinomial"),a=i.size,o=i.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s=1===o?i.as2D(1,-1):i,u=vt.engine.runKernel(function(t){return t.multinomial(s,r,e,n)},{logits2D:s});return 1===o?u.as1D():u}}),Mi=Wt({oneHot_:function(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=0);var i=Vt(t,"indices","oneHot","int32");if(d("int32"===i.dtype,"Indices must be of dtype `int32`"),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);return vt.engine.runKernel(function(t){return t.oneHot(i,e,n,r)},{$indices:i},function(t){return{$indices:function(){return pe(i)}}})}}),Ci=Wt({pad_:function(t,e,n){void 0===n&&(n=0);var r=Vt(t,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i=e.map(function(t){return t[0]});return vt.engine.runKernel(function(t){return t.pad(r,e,n)},{$x:r},function(t){return{$x:function(){return t.slice(i,r.shape)}}})}}),Oi=Wt({pad1d_:function(t,e,n){return void 0===n&&(n=0),d(2===e.length,"Invalid number of paddings. Must be length of 2."),Ci(t,[e],n)}}),Ii=Wt({pad2d_:function(t,e,n){return void 0===n&&(n=0),d(2===e.length&&2===e[0].length&&2===e[1].length,"Invalid number of paddings. Must be length of 2 each."),Ci(t,e,n)}}),Ni=Wt({pad3d_:function(t,e,n){return void 0===n&&(n=0),d(3===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length,"Invalid number of paddings. Must be length of 2 each."),Ci(t,e,n)}}),Ai=Wt({pad4d_:function(t,e,n){return void 0===n&&(n=0),d(4===e.length&&2===e[0].length&&2===e[1].length&&2===e[2].length&&2===e[3].length,"Invalid number of paddings. Must be length of 2 each."),Ci(t,e,n)}}),Ri=Wt({rand_:function(t,e,n){var r=b(t),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var a=0;a<r;a++)i[a]=e();return tt.make(t,{values:i},n)}}),Di=Wt({randomNormal_:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new vi(e,n,r,!1,i),o=yi(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),ji=Wt({randomUniform_:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var i=yi(t,r),a=0;a<i.values.length;a++)i.values[a]=p(e,n);return i.toTensor()}}),Li=Wt({reshape_:function(t,e){var n=Vt(t,"x","reshape");return e=T(e,n.size),d(n.size===b(e),"new shape and old shape must have the same number of elements."),vt.engine.runKernel(function(t){return t.reshape(n,e)},{$x:n},function(t){return{$x:function(){return t.reshape(n.shape)}}})}}),Fi=Wt({spaceToBatchND_:function(t,e,n){var r=Vt(t,"x","spaceToBatchND");return d(r.rank>=1+e.length,"input rank "+r.rank+" should be > than [blockShape] "+e.length),d(n.length===e.length,"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length),d(r.shape.reduce(function(t,r,i){return i>0&&i<=e.length?t&&(r+n[i-1][0]+n[i-1][1])%e[i-1]==0:t},!0),"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()),vt.engine.runKernel(function(t){return t.spaceToBatchND(r,e,n)},{$x:r},function(t){return{$x:function(){return t.batchToSpaceND(e,n)}}})}}),zi=Wt({squeeze_:function(t,e){var n=Vt(t,"x","squeeze");return Li(n,P(n.shape,e).newShape)}}),Bi=Wt({stack_:function(t,e){void 0===e&&(e=0);var n=qt(t,"tensors","stack");if(d(n.length>=1,"Pass at least one tensor to tf.stack"),1===n.length)return n[0].expandDims(e);var r=n[0].rank,i=n[0].shape,a=n[0].dtype;d(e<=r,"Axis must be <= rank of the tensor"),n.forEach(function(t){m(i,t.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(t){d(a===t.dtype,"All tensors passed to stack must have matching dtypes")});var o=n.map(function(t){return t.expandDims(e)});return ni(o,e)}}),Ui=Wt({tile_:function(t,e){var n=Vt(t,"x","tile");return d(n.rank===e.length,"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."),vt.engine.runKernel(function(t){return t.tile(n,e)},{$x:n},function(t){return{$x:function(){var r=pe(n);if(1===n.rank)for(var i=0;i<e[0];++i)r=r.add(t.slice([i*n.shape[0]],[n.shape[0]]));else if(2===n.rank)for(i=0;i<e[0];++i)for(var a=0;a<e[1];++a)r=r.add(t.slice([i*n.shape[0],a*n.shape[1]],[n.shape[0],n.shape[1]]));else if(3===n.rank)for(i=0;i<e[0];++i)for(a=0;a<e[1];++a)for(var o=0;o<e[2];++o)r=r.add(t.slice([i*n.shape[0],a*n.shape[1],o*n.shape[2]],[n.shape[0],n.shape[1],n.shape[2]]));else{if(4!==n.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+n.rank+" tensors yet.");for(i=0;i<e[0];++i)for(a=0;a<e[1];++a)for(o=0;o<e[2];++o)for(var s=0;s<e[3];++s)r=r.add(t.slice([i*n.shape[0],a*n.shape[1],o*n.shape[2],s*n.shape[3]],[n.shape[0],n.shape[1],n.shape[2],n.shape[3]]))}return r}}})}}),Vi=Wt({truncatedNormal_:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var a=new vi(e,n,r,!0,i),o=yi(t,r),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),qi=Wt({unstack_:function(t,e){void 0===e&&(e=0);for(var n,r=Vt(t,"x","unstack"),i=r.shape[e],a=Array(r.rank-1).fill(0),o=0,s=0;s<r.rank;s++)s!==e&&(a[o]=r.shape[s],o++);n=Array(i).fill(1);var u=Array(r.rank).fill(0),l=r.shape.slice();return n.map(function(t){l[e]=t;var n=r.slice(u,l);return u[e]+=t,n.reshape(a)})}});function Wi(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=yi(t,"int32"),a=yi([n.length,t.length],"int32");for(r=0;r<n.length;r++){var o=i.indexToLoc(n[r]),s=r*t.length;a.values.set(o,s)}return a.toTensor()}var Gi=300,Hi=function(){function t(t,e){if(void 0===e&&(e=!0),this.gpgpu=t,this.delayedStorage=e,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.lruDataGPU=[],this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.binaryCache={},this.disposed=!1,vt.get("WEBGL_VERSION")<1)throw new Error("WebGL is not supported on this device");vt.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas")),null==t?(this.gpgpu=new vr(Yn(this.canvas)),this.gpgpuCreatedLocally=!0):this.gpgpuCreatedLocally=!1,vt.get("WEBGL_PAGING_ENABLED")&&(this.NUM_BYTES_BEFORE_PAGING=window.screen.height*window.screen.width*window.devicePixelRatio*Gi),this.textureManager=new zr(this.gpgpu)}return t.prototype.register=function(t,e,n){if(this.texData.has(t))throw new Error("Data buffer is already registered");this.texData.set(t,{shape:e,dtype:n,values:null,texture:null,complexTensors:null,texShape:null,usage:nn.RENDER})},t.prototype.setDataMover=function(t){this.texData=new ve(t)},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("pixels passed to tf.fromPixels() can not be null");var n=[t.height,t.width],r=[t.height,t.width,e];if(!(t instanceof HTMLVideoElement||t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof ImageData))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+t.constructor.name);if(t instanceof HTMLVideoElement){if(null==this.fromPixelsCanvas){if(!vt.get("IS_BROWSER"))throw new Error("Can't read pixels from HTMLImageElement outside the browser.");if("complete"!==document.readyState)throw new Error("The DOM is not ready yet. Please call tf.fromPixels() once the DOM is ready. One way to do that is to add an event listener for `DOMContentLoaded` on the document object");this.fromPixelsCanvas=document.createElement("canvas")}this.fromPixelsCanvas.width=t.width,this.fromPixelsCanvas.height=t.height,this.fromPixelsCanvas.getContext("2d").drawImage(t,0,0,t.width,t.height),t=this.fromPixelsCanvas}var i=this.makeTensorHandle(n,"int32");this.texData.get(i.dataId).usage=nn.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(i.dataId),t);var a=new sn(r),o=this.compileAndRun(a,[i]);return this.disposeData(i.dataId),o},t.prototype.makeTensorHandle=function(t,e){var n={};return this.register(n,t,e),{dataId:n,shape:t,dtype:e}},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendWebGL.write(): values can not be null");var n=this.texData.get(t),r=n.texture,i=n.texShape,a=n.usage;if("complex64"===n.dtype)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");null!=r&&(this.releaseTexture(t,r,i,a),n.texture=null,n.texShape=null),n.usage=nn.UPLOAD,n.values=e,this.delayedStorage||this.uploadToGPU(t)},t.prototype.readSync=function(t){var e=this.texData.get(t),n=e.values,r=e.dtype,i=e.complexTensors;if(null!=n)return this.cacheOnCPU(t),n;var a,o,s=null!=this.activeTimers;return s&&(a=performance.now()),o="complex64"===r?_e(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(t),s&&(this.downloadWaitMs+=performance.now()-a),this.cacheOnCPU(t,o),e.values},t.prototype.read=function(t){return l(this,void 0,void 0,function(){var e,n,r,i,a,o,s,u;return c(this,function(l){switch(l.label){case 0:if(this.pendingRead.has(t))return e=this.pendingRead.get(t),[2,new Promise(function(t){return e.push(t)})];if(n=this.texData.get(t),r=n.texture,i=n.values,a=n.texShape,null!=i)return this.cacheOnCPU(t),[2,i];if(this.pendingRead.set(t,[]),!vt.get("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===vt.get("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return o=this.gpgpu.maybeCreateBufferFromTexture(r,a[0],a[1]),[4,this.gpgpu.createAndWaitForFence()];case 1:return l.sent(),s=o instanceof WebGLTexture?this.getValuesFromTexture(t):this.gpgpu.downloadFloat32MatrixFromBuffer(o,a[0],a[1]),this.cacheOnCPU(t,s),u=this.pendingRead.get(t),this.pendingRead.delete(t),u.forEach(function(t){return t(s)}),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t)),[2,s]}})})},t.prototype.getValuesFromTexture=function(t){var e=this.texData.get(t),n=e.shape,r=e.dtype,i=e.texture,a=e.texShape;if(vt.get("WEBGL_DOWNLOAD_FLOAT_ENABLED"))return this.texData.get(t).usage===nn.PACK?this.gpgpu.downloadMatrixFromPackedTexture(i,a[0],a[1]):this.gpgpu.downloadFloat32MatrixFromOutputTexture(i,a[0],a[1]);var o=this.makeTensorHandle(n,"float32");o.size=b(n),this.texData.get(o.dataId).usage=nn.DOWNLOAD;var s=new on(n);this.compileAndRun(s,[{shape:n,dtype:r,dataId:t}],o,null,!1);var u=this.texData.get(o.dataId),l=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture,u.texShape[0],u.texShape[1]);return this.disposeData(o.dataId),l},t.prototype.time=function(t){return l(this,void 0,void 0,function(){var e,n,r,i,a,o;return c(this,function(s){switch(s.label){case 0:return e=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,t(),i=v(this.activeTimers),this.activeTimers=e,r&&(this.programTimersStack=null),[4,Promise.all(i).then(function(t){var e=0;return t.forEach(function(t){return e+=t}),e})];case 1:return a=s.sent(),o={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:a,wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,o]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:performance.now(),endMs:null}},t.prototype.endTimer=function(t){return vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),t):(t.endMs=performance.now(),t)},t.prototype.getQueryTime=function(t){return l(this,void 0,void 0,function(){var e;return c(this,function(n){return vt.get("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(e=t).endMs-e.startMs]})})},t.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t))if(this.pendingRead.has(t))this.pendingDisposal.add(t);else if(this.texData.has(t)){var e=this.texData.get(t),n=e.texture,r=e.texShape,i=e.usage,a=e.complexTensors;null!=n&&this.releaseTexture(t,n,r,i),null!=a&&(a.real.dispose(),a.imag.dispose()),this.texData.delete(t)}},t.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.getCanvas=function(){return this.canvas},t.prototype.complex=function(t,e){var n=this.makeOutputArray(t.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:vt.engine.keep(t.clone()),imag:vt.engine.keep(e.clone())},n},t.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},t.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},t.prototype.slice=function(t,e,n){var r=new Lr(n),i=r.getCustomSetupFunc(e);return this.compileAndRun(r,[t],null,i)},t.prototype.stridedSlice=function(t,e,n,r,i,a,o,s,u){var l=zt(t.shape,e,n,r,i,a,o,s,u),c=l[0],f=l[1],h=l[2],p=f.filter(function(t,e){return-1===h.indexOf(e)});if(p.some(function(t){return 0===t}))return Xt([],p);var d=new Fr(c,r,f,h);return this.compileAndRun(d,[t])},t.prototype.reverse=function(t,e){var n=new Rr(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.concat2Tensors=function(t,e,n){var r=jt([t.shape,e.shape],n),i=t.as2D(-1,b(t.shape.slice(n))),a=e.as2D(-1,b(e.shape.slice(n))),o=new Fe(i.shape,a.shape);return this.compileAndRun(o,[i,a]).reshape(r)},t.prototype.concat=function(t,e){if(1===t.length)return t[0];for(var n=t[0],r=1;r<t.length;++r)n=this.concat2Tensors(n,t[r],e);return n},t.prototype.neg=function(t){var e=new Hr(t.shape,"return -x;");return this.compileAndRun(e,[t])},t.prototype.batchMatMul=function(t,e,n,r){var i=n?t.shape[2]:t.shape[1],a=r?e.shape[1]:e.shape[2];if(vt.get("WEBGL_RENDER_FLOAT32_ENABLED")&&1===t.shape[0]&&1===e.shape[0]&&_($n(this.gpgpu.gl,[i,a]),[i,a])){var o=t.as2D(t.shape[1],t.shape[2]),s=e.as2D(e.shape[1],e.shape[2]),u=new Tr(o.shape),l=tt.make(o.shape,{});this.texData.get(l.dataId).usage=nn.PACK;var c=this.compileAndRun(u,[o],l),f=new Tr(s.shape),h=tt.make(s.shape,{});this.texData.get(h.dataId).usage=nn.PACK;var p=this.compileAndRun(f,[s],h),d=new Sr(c.shape,p.shape,[i,a],n,r),m=tt.make(d.outputShape,{});this.texData.get(m.dataId).usage=nn.PACK;var g=this.compileAndRun(d,[c,p],m),v=new ei(g.shape),y=this.compileAndRun(v,[g]);return l.dispose(),h.dispose(),m.dispose(),y.reshape([1,g.shape[0],g.shape[1]])}return this.compileAndRun(new wr(t.shape,e.shape,n,r),[t,e])},t.prototype.multiply=function(t,e){if("complex64"===t.dtype){var n=this.texData.get(t.dataId),r=this.texData.get(e.dataId),i=new Ae(Ie,t.shape,e.shape),a=new Ae(Ne,t.shape,e.shape),o=[this.makeComplexComponentTensorHandle(t,n.complexTensors.real),this.makeComplexComponentTensorHandle(t,n.complexTensors.imag),this.makeComplexComponentTensorHandle(e,r.complexTensors.real),this.makeComplexComponentTensorHandle(e,r.complexTensors.imag)],s=this.compileAndRun(i,o),u=this.compileAndRun(a,o),l=this.complex(s,u);return s.dispose(),u.dispose(),l}var c=new je("return a * b;",t.shape,e.shape),f=this.makeOutputArray(c.outputShape,t.dtype);return this.compileAndRun(c,[t,e],f)},t.prototype.batchNormalization=function(t,e,n,r,i,a){var o=[t,e,n],s=null;null!=a&&(s=a.shape,o.push(a));var u=null;null!=i&&(u=i.shape,o.push(i));var l=new Oe(t.shape,e.shape,n.shape,s,u,r);return this.compileAndRun(l,o)},t.prototype.localResponseNormalization4D=function(t,e,n,r,i){var a=new br(t.shape,e,n,r,i);return this.compileAndRun(a,[t])},t.prototype.LRNGrad=function(t,e,n,r,i,a,o){var s=new _r(e.shape,r,i,a,o);return this.compileAndRun(s,[e,n,t])},t.prototype.tile=function(t,e){var n=new Vr(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.pad=function(t,e,n){var r=new Pr(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.transpose=function(t,e){var n=new qr(t.shape,e);return this.compileAndRun(n,[t])},t.prototype.gather=function(t,e,n){var r=new un(t.shape,e.size,n);return this.compileAndRun(r,[t,e])},t.prototype.batchToSpaceND=function(t,e,n){d(t.rank<=4,"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");var r=e.reduce(function(t,e){return t*e}),i=St(t.shape,e,r),a=Et(i.length,e.length),o=kt(t.shape,e,r),s=Tt(n,e.length),u=Pt(o,n,e.length);return t.reshape(i).transpose(a).reshape(o).slice(s,u)},t.prototype.spaceToBatchND=function(t,e,n){d(t.rank<=4,"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");var r=e.reduce(function(t,e){return t*e}),i=[[0,0]];i.push.apply(i,n);for(var a=1+e.length;a<t.shape.length;++a)i.push([0,0]);var o=t.pad(i),s=St(o.shape,e,r,!1),u=Et(s.length,e.length,!1),l=kt(o.shape,e,r,!1);return o.reshape(s).transpose(u).reshape(l)},t.prototype.reduce=function(t,e,n){var r=t.shape[0],i=t.shape[1],a=Ft(i),o=new Cr({windowSize:a,inSize:i,batchSize:r},e),s=o.outputShape,u=s[0],l=s[1],c=this.makeOutputArray([u,l],n);return this.compileAndRun(o,[t],c),1===c.shape[1]?c:this.reduce(c,e,n)},t.prototype.argReduce=function(t,e,n){void 0===n&&(n=null);var r=t.shape[0],i=t.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);var a=Ft(i),o=new ke({windowSize:a,inSize:i,batchSize:r},e,null==n),s=o.outputShape,u=s[0],l=s[1],c=this.makeOutputArray([u,l],"int32"),f=[t];return null!=n&&f.push(n),this.compileAndRun(o,f,c),1===c.shape[1]?c:this.argReduce(t,e,c)},t.prototype.sum=function(t,e){Nt("sum",e,t.rank);var n=Ct(t.shape,e),r=n[0],i=b(n[1]),a=t.as2D(-1,i),o=ge(t.dtype);return this.reduce(a,"sum",o).reshape(r)},t.prototype.unsortedSegmentSum=function(t,e,n){var r=0,i=At([r],t.rank),a=t;null!=i&&(a=t.transpose(i),r=Dt(1,t.rank)[0]);var o=function(t,e,n){for(var r=[],i=t.length,a=0;a<i;a++)a!==e?r.push(t[a]):r.push(n);return r}(a.shape,r,n),s=b([a.shape[r]]),u=a.as2D(-1,s),l=ge(t.dtype),c=this.segOpCompute(u,"unsortedSegmentSum",e,l,n).reshape(o);return null!=i&&(c=c.transpose(Rt(i))),c},t.prototype.segOpCompute=function(t,e,n,r,i){var a=t.shape[0],o=t.shape[1],s=function(t,e){var n,r=!1;for(t<=Lt?(n=t,r=!0):n=D(t,Math.floor(Math.sqrt(t)));!r;){if(n>e||n===t){r=!0;break}n=D(t,n+1)}return n}(o,i),u=new Dr({windowSize:s,inSize:o,batchSize:a,numSegments:i},e),l=u.outputShape,c=l[0],f=l[1],h=this.makeOutputArray([c,f],r);return this.compileAndRun(u,[t,n],h),h.shape[1]===i?h:(n=ae(0,i).tile([o/s]),this.segOpCompute(h,e,n,r,i))},t.prototype.argMin=function(t,e){var n=[e];Nt("argMin",n,t.rank);var r=Ct(t.shape,n),i=r[0],a=b(r[1]),o=t.as2D(-1,a);return this.argReduce(o,"min").reshape(i)},t.prototype.argMax=function(t,e){var n=[e];Nt("argMax",n,t.rank);var r=Ct(t.shape,n),i=r[0],a=b(r[1]),o=t.as2D(-1,a);return this.argReduce(o,"max").reshape(i)},t.prototype.cumsum=function(t,e,n,r){if(e!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+e);var i=new tn(t.shape,n,r);return this.compileAndRun(i,[t])},t.prototype.equal=function(t,e){var n=new je("return float(a == b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.notEqual=function(t,e){var n=new je("return float(a != b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.less=function(t,e){var n=new je("return float(a < b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.lessEqual=function(t,e){var n=new je("return float(a <= b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greater=function(t,e){var n=new je("return float(a > b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.greaterEqual=function(t,e){var n=new je("return float(a >= b);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalNot=function(t){var e=new Hr(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(e,[t])},t.prototype.logicalAnd=function(t,e){var n=new je("return float(a >= 1.0 && b >= 1.0);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.logicalOr=function(t,e){var n=new je("return float(a >= 1.0 || b >= 1.0);",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[t,e],r)},t.prototype.select=function(t,e,n){var r=new jr(t.rank,e.shape,e.rank),i=this.makeOutputArray(r.outputShape,me(e.dtype,n.dtype));return this.compileAndRun(r,[t,e,n],i)},t.prototype.where=function(t){wt("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var e=t.dataSync();return Wi(t.shape,e)},t.prototype.topk=function(t,e,n){return Ee(t.dataSync(),t.shape,t.dtype,e)},t.prototype.min=function(t,e){Nt("min",e,t.rank);var n=Ct(t.shape,e),r=n[0],i=b(n[1]),a=t.as2D(-1,i);return this.reduce(a,"min",a.dtype).reshape(r)},t.prototype.minimum=function(t,e){var n=new je("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return min(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.mod=function(t,e){var n=new je("if (b == 0.0) return NAN;\n  return mod(a, b);",t.shape,e.shape),r=n.getCustomSetupFunc();return this.compileAndRun(n,[t,e],null,r)},t.prototype.max=function(t,e){Nt("max",e,t.rank);var n=Ct(t.shape,e),r=n[0],i=b(n[1]),a=t.as2D(-1,i);return this.reduce(a,"max",a.dtype).reshape(r)},t.prototype.maximum=function(t,e){var n=new je("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return max(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.all=function(t,e){Nt("all",e,t.rank);var n=Ct(t.shape,e),r=n[0],i=b(n[1]),a=t.as2D(-1,i);return this.reduce(a,"all",a.dtype).reshape(r)},t.prototype.any=function(t,e){Nt("any",e,t.rank);var n=Ct(t.shape,e),r=n[0],i=b(n[1]),a=t.as2D(-1,i);return this.reduce(a,"any",a.dtype).reshape(r)},t.prototype.squaredDifference=function(t,e){var n=new je("return (a - b) * (a - b);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.realDivide=function(t,e){var n=new je("if (a == b) return 1.0;\n  return a / b;",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t,e],r)},t.prototype.floorDiv=function(t,e){var n=new je("\n  float resultSign = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  int result = ia / ib;\n  int amodb = ia - ib * result;\n\n  if (resultSign < 0.0 && amodb != 0) {\n    result -= 1;\n  }\n  return float(result);\n",t.shape,e.shape),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[t,e],r)},t.prototype.add=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,Re);var n=new je(Re,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,me(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.complexSeparableBinaryOp=function(t,e,n){var r=this,i=this.texData.get(t.dataId),a=this.texData.get(e.dataId),o=[[i.complexTensors.real,a.complexTensors.real],[i.complexTensors.imag,a.complexTensors.imag]].map(function(i){var a=i[0],o=i[1],s=new je(n,t.shape,e.shape),u=r.makeOutputArray(s.outputShape,me(a.dtype,o.dtype)),l=r.makeComplexComponentTensorHandle(t,a),c=r.makeComplexComponentTensorHandle(e,o);return r.compileAndRun(s,[l,c],u)}),s=o[0],u=o[1],l=this.complex(s,u);return s.dispose(),u.dispose(),l},t.prototype.makeComplexComponentTensorHandle=function(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}},t.prototype.addN=function(t){for(var e=t[0],n=1;n<t.length;n++)e=this.add(e,t[n]);return e},t.prototype.subtract=function(t,e){if("complex64"===t.dtype&&"complex64"===e.dtype)return this.complexSeparableBinaryOp(t,e,De);var n=new je(De,t.shape,e.shape),r=this.makeOutputArray(n.outputShape,me(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],r)},t.prototype.pow=function(t,e){var n=new je("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nreturn (round(mod(b, 2.0)) == 0 || round(mod(b, 2.0)) == 2) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",t.shape,e.shape),r=n.getCustomSetupFunc(),i=this.makeOutputArray(n.outputShape,me(t.dtype,e.dtype));return this.compileAndRun(n,[t,e],i,r)},t.prototype.ceil=function(t){var e=new Hr(t.shape,"return ceil(x);");return this.compileAndRun(e,[t])},t.prototype.floor=function(t){var e=new Hr(t.shape,"return floor(x);");return this.compileAndRun(e,[t])},t.prototype.sign=function(t){var e=new Hr(t.shape,"\n  if (isNaN(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(e,[t])},t.prototype.round=function(t){var e=new Hr(t.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(e,[t])},t.prototype.exp=function(t){var e=new Hr(t.shape,"return exp(x);");return this.compileAndRun(e,[t])},t.prototype.expm1=function(t){var e=new Hr(t.shape,"return exp(x) - 1.0;");return this.compileAndRun(e,[t])},t.prototype.log=function(t){var e=new Hr(t.shape,"if (x < 0.0) return NAN;\n  return log(x);"),n=e.getCustomSetupFunc();return this.compileAndRun(e,[t],null,n)},t.prototype.log1p=function(t){var e=new Hr(t.shape,"return log(1.0 + x);");return this.compileAndRun(e,[t])},t.prototype.sqrt=function(t){var e=new Hr(t.shape,"return sqrt(x);");return this.compileAndRun(e,[t])},t.prototype.rsqrt=function(t){var e=new Hr(t.shape,"return inversesqrt(x);");return this.compileAndRun(e,[t])},t.prototype.square=function(t){var e=new Hr(t.shape,"return x * x;");return this.compileAndRun(e,[t])},t.prototype.reciprocal=function(t){var e=new Hr(t.shape,"return 1.0 / x;");return this.compileAndRun(e,[t])},t.prototype.relu=function(t){var e=new Hr(t.shape,Kr);return this.compileAndRun(e,[t])},t.prototype.elu=function(t){var e=new Hr(t.shape,"return (x >= 0.0) ? x : (exp(x) - 1.0);");return this.compileAndRun(e,[t])},t.prototype.eluDer=function(t,e){var n=new je("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.selu=function(t){var e=new Hr(t.shape,Xr);return this.compileAndRun(e,[t])},t.prototype.int=function(t){var e=new Hr(t.shape,"return float(int(x));"),n=this.makeOutputArray(e.outputShape,"int32");return this.compileAndRun(e,[t],n)},t.prototype.clip=function(t,e,n){var r=new Le(t.shape,e,n);return this.compileAndRun(r,[t])},t.prototype.abs=function(t){var e=new Hr(t.shape,"return abs(x);");return this.compileAndRun(e,[t])},t.prototype.sigmoid=function(t){var e=new Hr(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(e,[t])},t.prototype.softplus=function(t){var e=new Hr(t.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(e,[t])},t.prototype.sin=function(t){var e=new Hr(t.shape,Yr);return this.compileAndRun(e,[t])},t.prototype.cos=function(t){var e=new Hr(t.shape,Jr);return this.compileAndRun(e,[t])},t.prototype.tan=function(t){var e=new Hr(t.shape,"return tan(x);");return this.compileAndRun(e,[t])},t.prototype.asin=function(t){var e=new Hr(t.shape,"return asin(x);");return this.compileAndRun(e,[t])},t.prototype.acos=function(t){var e=new Hr(t.shape,"return acos(x);");return this.compileAndRun(e,[t])},t.prototype.atan=function(t){var e=new Hr(t.shape,Zr);return this.compileAndRun(e,[t])},t.prototype.atan2=function(t,e){var n=new je("\n  if (isNaN(a)) return a;\n  if (isNaN(b)) return b;\n\n  return atan(a, b);\n",t.shape,e.shape);return this.compileAndRun(n,[t,e])},t.prototype.sinh=function(t){var e=new Hr(t.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},t.prototype.cosh=function(t){var e=new Hr(t.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(e,[t])},t.prototype.tanh=function(t){var e=new Hr(t.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(e,[t])},t.prototype.asinh=function(t){var e=new Hr(t.shape,"return log(x + sqrt(x * x + 1.0));");return this.compileAndRun(e,[t])},t.prototype.acosh=function(t){var e=new Hr(t.shape,Qr),n=e.getCustomSetupFunc();return this.compileAndRun(e,[t],null,n)},t.prototype.atanh=function(t){var e=new Hr(t.shape,ti),n=e.getCustomSetupFunc();return this.compileAndRun(e,[t],null,n)},t.prototype.erf=function(t){var e=new Hr(t.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float t = 1.0 / (1.0 + p * x);\n  return 1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x);\n');return this.compileAndRun(e,[t])},t.prototype.step=function(t,e){var n=new Hr(t.shape,function(t){return void 0===t&&(t=0),$r+"\n    return x > 0.0 ? 1.0 : float("+t+");\n  "}(e));return this.compileAndRun(n,[t])},t.prototype.conv2d=function(t,e,n){var r=new qe(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerInput=function(t,e,n){var r=new Be(n);return this.compileAndRun(r,[t,e])},t.prototype.conv2dDerFilter=function(t,e,n){var r=new ze(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2D=function(t,e,n){var r=new We(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2DDerInput=function(t,e,n){var r=new Ve(n);return this.compileAndRun(r,[t,e])},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){var r=new Ue(n);return this.compileAndRun(r,[t,e])},t.prototype.maxPool=function(t,e){var n=new Mr(e,"max",!1),r=this.makeOutputArray(n.outputShape,t.dtype);return this.compileAndRun(n,[t],r)},t.prototype.avgPool=function(t,e){var n=new Mr(e,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[t],r)},t.prototype.maxPoolBackprop=function(t,e,n,r){var i=new Mr(r,"max",!0),a=this.compileAndRun(i,[e]),o=new xr(r),s=this.makeOutputArray(o.outputShape,e.dtype),u=this.compileAndRun(o,[t,a],s);return a.dispose(),u},t.prototype.avgPoolBackprop=function(t,e,n){var r=new Te(n),i=this.makeOutputArray(r.outputShape,e.dtype);return this.compileAndRun(r,[t],i)},t.prototype.cast=function(t,e){return ye(t,e,this)},t.prototype.reshape=function(t,e){return be(t,e)},t.prototype.resizeBilinear=function(t,e,n,r){var i=new Ir(t.shape,e,n,r);return this.compileAndRun(i,[t])},t.prototype.resizeBilinearBackprop=function(t,e,n){var r=new Or(t,e,n);return this.compileAndRun(r,[t])},t.prototype.resizeNearestNeighbor=function(t,e,n,r){var i=new Ar(t.shape,e,n,r);return this.compileAndRun(i,[t])},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){var r=new Nr(t,e,n);return this.compileAndRun(r,[t])},t.prototype.multinomial=function(t,e,n,r){var i=e?t:Gt(t),a=i.shape[0],o=i.shape[1],s=new Er(a,o,n),u=this.makeOutputArray(s.outputShape,"int32"),l=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],u,l)},t.prototype.oneHot=function(t,e,n,r){var i=new kr(t.size,e,n,r);return this.compileAndRun(i,[t])},t.prototype.nonMaxSuppression=function(t,e,n,r,i){return wt("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),xe(t.dataSync(),e.dataSync(),n,r,i)},t.prototype.cropAndResize=function(t,e,n,r,i,a){var o=new Ge(t.shape,e.shape,r,i,a);return this.compileAndRun(o,[t,e,n])},t.prototype.depthToSpace=function(t,e,n){d(e>1,"blockSize should be > 1 for depthToSpace, but was: "+e);var r=t.shape[0],i=("NHWC"===n?t.shape[1]:t.shape[2])*e,a=("NHWC"===n?t.shape[2]:t.shape[3])*e,o=("NHWC"===n?t.shape[3]:t.shape[1])/(e*e),s=new an("NHWC"===n?[r,i,a,o]:[r,o,i,a],e,n);return this.compileAndRun(s,[t])},t.prototype.split=function(t,e,n){return Se(t,e,n)},t.prototype.makeOutputArray=function(t,e){return tt.make(t,{},e)},t.prototype.compileAndRun=function(t,e,n,r,i){var a=this;if(void 0===i&&(i=!0),null==n&&(n=this.makeOutputArray(t.outputShape,e[0].dtype)),0===n.size)return this.texData.get(n.dataId).values=M(n.dtype,0),n;var o=e.map(function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var e=a.texData.get(t.dataId);return null==e.texture&&b(t.shape)<=32?{shape:t.shape,texData:null,isUniform:!0,uniformValues:a.readSync(t.dataId)}:(a.uploadToGPU(t.dataId),{shape:t.shape,texData:e,isUniform:!1})});this.uploadToGPU(n.dataId);var s,u={shape:n.shape,texData:this.texData.get(n.dataId),isUniform:!1},l=function(t,e,n){var r="";e.concat(n).forEach(function(t){r+=t.shape+"_"+(t.isUniform?"uniform":t.texData.texShape)});var i=t.userCode,a=(!0===t.supportsBroadcasting).toString();return t.constructor.name+"_"+a+"_"+r+"_"+i}(t,o,u),c=this.getAndSaveBinary(l,function(){return function(t,e,n,r){for(var i=e.userCode,a=n.map(function(t,n){var r={logicalShape:t.shape,texShape:t.isUniform?null:t.texData.texShape,isUniform:t.isUniform,isPacked:!t.isUniform&&t.texData.usage===nn.PACK};return{name:e.variableNames[n],shapeInfo:r}}),o=a.map(function(t){return t.shapeInfo}),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.usage===nn.PACK},u=He(a,s,i,!0===e.supportsBroadcasting),l=t.createProgram(u),c={},f=0;f<e.variableNames.length;f++){var h=e.variableNames[f];c[h]=t.getUniformLocation(l,h,!1)}return{program:e,source:u,webGLProgram:l,uniformLocations:c,gpgpu:t,inShapeInfos:o,outShapeInfo:s}}(a.gpgpu,t,o,u)}),f=null!=this.activeTimers;if(f&&(s=this.startTimer()),function(t,e,n,r){yr(t.inShapeInfos,e),yr([t.outShapeInfo],[n]);var i=n.texData.texture,a=n.texData.texShape,o=t.gpgpu;n.texData.usage===nn.PACK?o.setOutputPackedMatrixTexture(i,a[0],a[1]):o.setOutputMatrixTexture(i,a[0],a[1]),o.setProgram(t.webGLProgram),e.forEach(function(e,n){var r=t.program.variableNames[n],i=t.uniformLocations[r];if(null!=i){if(e.isUniform){if(1===b(e.shape))o.gl.uniform1f(i,e.uniformValues[0]);else{var a=e.uniformValues;a instanceof Float32Array||(a=new Float32Array(a)),o.gl.uniform1fv(i,a)}return}var s=e.texData.texture;o.setInputMatrixTexture(s,i,n)}}),null!=r&&r(o,t.webGLProgram),o.executeProgram()}(c,o,u,r),vt.get("WEBGL_PAGING_ENABLED")&&i&&this.numBytesInGPU>this.NUM_BYTES_BEFORE_PAGING)for(var h=this.numBytesInGPU-this.NUM_BYTES_BEFORE_PAGING;h>0&&this.lruDataGPU.length>0;){var p=this.lruDataGPU.shift(),d=this.texData.get(p),m=d.shape,g=d.dtype;h-=this.computeBytes(m,g),this.read(p)}return f&&(s=this.endTimer(s),this.activeTimers.push(this.getQueryTime(s))),n},t.prototype.getAndSaveBinary=function(t,e){return t in this.binaryCache||(this.binaryCache[t]=e()),this.binaryCache[t]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){if(!this.disposed){for(var t in this.binaryCache)this.gpgpu.deleteProgram(this.binaryCache[t].webGLProgram);this.textureManager.dispose(),this.canvas.remove(),null!=this.fromPixelsCanvas&&this.fromPixelsCanvas.remove(),this.gpgpuCreatedLocally&&this.gpgpu.dispose(),this.disposed=!0}},t.prototype.floatPrecision=function(){var t=this;return bt(function(){return t.abs(Yt(1e-8)).get()>0?32:16})},t.prototype.uploadToGPU=function(t){var e=this.texData.get(t),n=e.shape,r=e.values,i=e.texture,a=(e.dtype,e.usage);if(vt.get("WEBGL_PAGING_ENABLED")&&null!=i)this.lruDataGPU.indexOf(t)>=0&&(this.lruDataGPU.splice(this.lruDataGPU.indexOf(t),1),this.lruDataGPU.push(t));else{var o,s=null!=this.activeTimers;s&&(o=performance.now());var u=$n(this.gpgpu.gl,n);e.texShape=u;var l=this.acquireTexture(t,u,a);e.texture=l,null!=r&&(this.gpgpu.uploadMatrixToTexture(l,u[0],u[1],function(t,e){return t instanceof Float32Array?t:new Float32Array(t)}(r)),e.values=null,s&&(this.uploadWaitMs+=performance.now()-o))}},t.prototype.cacheOnCPU=function(t,e){var n=this.delayedStorage,r=this.texData.get(t),i=r.texture,a=r.texShape,o=r.dtype,s=r.usage;n&&null!=i&&(this.releaseTexture(t,i,a,s),r.texture=null,r.texShape=null),r.usage=nn.UPLOAD,null!=e&&(r.values=function(t,e){if("float32"===e||"complex64"===e)return t;if("int32"===e||"bool"===e){for(var n="int32"===e?new Int32Array(t.length):new Uint8Array(t.length),r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}throw new Error("Unknown dtype "+e)}(e,o))},t.prototype.releaseTexture=function(t,e,n,r){var i=this.texData.get(t),a=i.shape,o=i.dtype;if(vt.get("WEBGL_PAGING_ENABLED")){var s=this.lruDataGPU.indexOf(t);s>=0&&this.lruDataGPU.splice(s,1)}this.numBytesInGPU-=this.computeBytes(a,o),this.textureManager.releaseTexture(e,n,r)},t.prototype.acquireTexture=function(t,e,n){var r=this.texData.get(t),i=r.shape,a=r.dtype;return vt.get("WEBGL_PAGING_ENABLED")&&this.lruDataGPU.push(t),this.numBytesInGPU+=this.computeBytes(i,a),this.textureManager.acquireTexture(e,n)},t.prototype.computeBytes=function(t,e){return b(t)*A(e)},t}();vt.get("IS_BROWSER")&&vt.registerBackend("webgl",function(){return new Hi},2,Q);var $i=Wt({abs_:function(t){var e=Vt(t,"x","abs");return vt.engine.runKernel(function(t){return t.abs(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.toFloat().step(-1))}}})}}),Ki=Wt({acos_:function(t){var e=Vt(t,"x","acos");return vt.engine.runKernel(function(t){return t.acos(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Yt(1).sub(e.toFloat().square()).sqrt()).neg()}}})}}),Xi=Wt({acosh_:function(t){var e=Vt(t,"x","acosh");return vt.engine.runKernel(function(t){return t.acosh(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.toFloat().square().sub(Yt(1)).sqrt())}}})}}),Yi=Wt({asin_:function(t){var e=Vt(t,"x","asin");return vt.engine.runKernel(function(t){return t.asin(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Yt(1).sub(e.toFloat().square()).sqrt())}}})}}),Ji=Wt({asinh_:function(t){var e=Vt(t,"x","asinh");return vt.engine.runKernel(function(t){return t.asinh(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Yt(1).add(e.toFloat().square()).sqrt())}}})}}),Zi=Wt({atan_:function(t){var e=Vt(t,"x","atan");return vt.engine.runKernel(function(t){return t.atan(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Yt(1).add(e.toFloat().square()))}}})}}),Qi=Wt({atanh_:function(t){var e=Vt(t,"x","atanh");return vt.engine.runKernel(function(t){return t.atanh(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(Yt(1).sub(e.toFloat().square()))}}})}}),ta=Wt({ceil_:function(t){var e=Vt(t,"x","ceil");return vt.engine.runKernel(function(t){return t.ceil(e)},{$x:e},function(t){return{$x:function(){return pe(t)}}})}}),ea=Wt({clipByValue_:function(t,e,n){var r=Vt(t,"x","clipByValue");return d(e<=n,"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."),vt.engine.runKernel(function(t){return t.clip(r,e,n)},{$x:r},function(t){return{$x:function(){return t.where(r.greaterEqual(Yt(e)).logicalAnd(r.lessEqual(Yt(n))),pe(t))}}})}}),na=Wt({cos_:function(t){var e=Vt(t,"x","cos");return vt.engine.runKernel(function(t){return t.cos(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().sin().neg().mulStrict(t)}}})}}),ra=Wt({cosh_:function(t){var e=Vt(t,"x","cosh");return vt.engine.runKernel(function(t){return t.cosh(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().sinh().mulStrict(t)}}})}}),ia=Wt({erf_:function(t){var e=Vt(t,"x","erf");return d("int32"===e.dtype||"float32"===e.dtype,"Input dtype must be `int32` or `float32`."),"int32"===e.dtype&&(e=e.toFloat()),vt.engine.runKernel(function(t){return t.erf(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(Yt(2/Math.sqrt(Math.PI)).mul(e.square().neg().exp()))}}})}}),aa=Wt({exp_:function(t){var e=Vt(t,"x","exp");return vt.engine.runKernel(function(t,n){return n(t.exp(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mulStrict(n)}}})}}),oa=Wt({expm1_:function(t){var e=Vt(t,"x","expm1");return vt.engine.runKernel(function(t){return t.expm1(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.exp())}}})}}),sa=Wt({floor_:function(t){var e=Vt(t,"x","floor");return vt.engine.runKernel(function(t){return t.floor(e)},{$x:e},function(t){return{$x:function(){return pe(t)}}})}}),ua=Wt({log_:function(t){var e=Vt(t,"x","log");return vt.engine.runKernel(function(t){return t.log(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.toFloat())}}})}}),la=Wt({log1p_:function(t){var e=Vt(t,"x","log1p");return vt.engine.runKernel(function(t){return t.log1p(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.add(Yt(1)))}}})}}),ca=Wt({logSigmoid_:function(t){var e=Vt(t,"x","logSigmoid");return vt.engine.runKernel(function(t){return t.softplus(e.neg()).neg()},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.neg().sigmoid())}}})}}),fa=Wt({neg_:function(t){var e=Vt(t,"x","neg");return vt.engine.runKernel(function(t){return t.neg(e)},{$x:e},function(t){return{$x:function(){return t.neg()}}})}}),ha=Wt({reciprocal_:function(t){var e=Vt(t,"x","reciprocal");return vt.engine.runKernel(function(t){return t.reciprocal(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.square().neg())}}})}}),pa=Wt({round_:function(t){var e=Vt(t,"x","round");return vt.engine.runKernel(function(t){return t.round(e)},{$x:e},function(t){return{$x:function(){return pe(t)}}})}}),da=Wt({rsqrt_:function(t){var e=Vt(t,"x","rsqrt");return vt.engine.runKernel(function(t){return t.rsqrt(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.pow(Yt(1.5)).mul(Yt(2))).neg()}}})}}),ma=Wt({sigmoid_:function(t){var e=Vt(t,"x","sigmoid");return vt.engine.runKernel(function(t,n){return n(t.sigmoid(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return t.mulStrict(n.mul(Yt(1).sub(n)))}}})}}),ga=Wt({sign_:function(t){var e=Vt(t,"x","sign");return vt.engine.runKernel(function(t){return t.sign(e)},{$x:e},function(t){return{$x:function(){return pe(t)}}})}}),va=Wt({sin_:function(t){var e=Vt(t,"x","sin");return vt.engine.runKernel(function(t){return t.sin(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().cos().mulStrict(t)}}})}}),ya=Wt({sinh_:function(t){var e=Vt(t,"x","sinh");return vt.engine.runKernel(function(t){return t.sinh(e)},{$x:e},function(t){return{$x:function(){return e.toFloat().cosh().mulStrict(t)}}})}}),ba=Wt({softplus_:function(t){var e=Vt(t,"x","softplus");return vt.engine.runKernel(function(t){return t.softplus(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.sigmoid())}}})}}),_a=Wt({sqrt_:function(t){var e=Vt(t,"x","sqrt");return vt.engine.runKernel(function(t){return t.sqrt(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.toFloat().sqrt().mul(Yt(2)))}}})}}),xa=Wt({square_:function(t){var e=Vt(t,"x","square");return vt.engine.runKernel(function(t){return t.square(e)},{$x:e},function(t){return{$x:function(){return t.mulStrict(e.toFloat().mul(Yt(2)))}}})}}),wa=Wt({step_:function(t,e){void 0===e&&(e=0);var n=Vt(t,"x","step");return vt.engine.runKernel(function(t){return t.step(n,e)},{$x:n},function(t){return{$x:function(){return pe(t)}}})}}),Sa=Wt({tan_:function(t){var e=Vt(t,"x","tan");return vt.engine.runKernel(function(t){return t.tan(e)},{$x:e},function(t){return{$x:function(){return t.divStrict(e.cos().square())}}})}}),Ea=Wt({tanh_:function(t){var e=Vt(t,"x","tanh");return vt.engine.runKernel(function(t,n){return n(t.tanh(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return Yt(1).sub(n.square()).mulStrict(t)}}})}});function ka(t){return null==t?null:0===t.rank?t.as1D():1===t.rank?t:2===t.rank?t.as4D(1,1,t.shape[0],t.shape[1]):3===t.rank?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}var Ta=Wt({batchNormalization2d_:function(t,e,n,r,i,a){void 0===r&&(r=.001);var o,s,u=Vt(t,"x","batchNormalization"),l=Vt(e,"mean","batchNormalization"),c=Vt(n,"variance","batchNormalization");return null!=i&&(o=Vt(i,"scale","batchNormalization")),null!=a&&(s=Vt(a,"offset","batchNormalization")),d(2===u.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+u.rank+"."),d(2===l.rank||1===l.rank,"Error in batchNormalization2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."),d(2===c.rank||1===c.rank,"Error in batchNormalization2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."),null!=o&&d(2===o.rank||1===o.rank,"Error in batchNormalization2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."),null!=s&&d(2===s.rank||1===s.rank,"Error in batchNormalization2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."),Ca(u,l,c,r,o,s)}}),Pa=Wt({batchNormalization3d_:function(t,e,n,r,i,a){void 0===r&&(r=.001);var o,s,u=Vt(t,"x","batchNormalization"),l=Vt(e,"mean","batchNormalization"),c=Vt(n,"variance","batchNormalization");return null!=i&&(o=Vt(i,"scale","batchNormalization")),null!=a&&(s=Vt(a,"offset","batchNormalization")),d(3===u.rank,"Error in batchNormalization3D: x must be rank 3 but got rank "+u.rank+"."),d(3===l.rank||1===l.rank,"Error in batchNormalization3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."),d(3===c.rank||1===c.rank,"Error in batchNormalization3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."),null!=o&&d(3===o.rank||1===o.rank,"Error in batchNormalization3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."),null!=s&&d(3===s.rank||1===s.rank,"Error in batchNormalization3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."),Ca(u,l,c,r,o,s)}}),Ma=Wt({batchNormalization4d_:function(t,e,n,r,i,a){void 0===r&&(r=.001);var o,s,u=Vt(t,"x","batchNormalization"),l=Vt(e,"mean","batchNormalization"),c=Vt(n,"variance","batchNormalization");return null!=i&&(o=Vt(i,"scale","batchNormalization")),null!=a&&(s=Vt(a,"offset","batchNormalization")),d(4===u.rank,"Error in batchNormalization4D: x must be rank 4 but got rank "+u.rank+"."),d(4===l.rank||1===l.rank,"Error in batchNormalization4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."),d(4===c.rank||1===c.rank,"Error in batchNormalization4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."),null!=o&&d(4===o.rank||1===o.rank,"Error in batchNormalization4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."),null!=s&&d(4===s.rank||1===s.rank,"Error in batchNormalization4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."),Ca(u,l,c,r,o,s)}}),Ca=Wt({batchNormalization_:function(t,e,n,r,i,a){void 0===r&&(r=.001);var o,s,u,l=Vt(t,"x","batchNormalization"),c=Vt(e,"mean","batchNormalization"),f=Vt(n,"variance","batchNormalization");return null!=i&&(o=Vt(i,"scale","batchNormalization")),null!=a&&(s=Vt(a,"offset","batchNormalization")),d(c.rank===f.rank,"Batch normalization gradient requires mean and variance to have equal ranks."),d(null==s||c.rank===s.rank,"Batch normalization gradient requires mean and offset to have equal ranks."),d(null==o||c.rank===o.rank,"Batch normalization gradient requires mean and scale to have equal ranks."),u=0===l.rank||1===l.rank?l.as4D(1,1,1,l.size):2===l.rank?l.as4D(1,1,l.shape[0],l.shape[1]):3===l.rank?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,vt.engine.runKernel(function(t){return t.batchNormalization(u,ka(c),ka(f),r,ka(o),ka(s))},{$x:l,$mean:c,$variance:f,$scale:o,$offset:s},function(t){var e=null==o?Yt(1):o,n=Me(c.shape,u.shape),i=[];if(1===c.rank){for(var a=0;a<u.shape.length-1;++a)i.push(u.shape[a]);i.push(1)}var s=l.sub(c),h=t.mul(e),p=da(f.add(Yt(r))),d=p.mul(p).mul(p).mul(Yt(-.5));return{$x:function(){return 1===c.rank?t.mul(Ui(p.as4D(1,1,1,c.shape[0]),i)).mul(e).reshape(l.shape):t.mul(p).mul(e).reshape(l.shape)},$mean:function(){var t=p.mul(Yt(-1)).mul(h);return 1===c.rank&&(t=t.sum(n)),t.reshape(c.shape)},$variance:function(){var t=d.mul(s).mul(h);return 1===c.rank&&(t=t.sum(n)),t.reshape(c.shape)},$scale:function(){var e=s.mul(p),r=t.mul(e);return 1===c.rank&&(r=r.sum(n)),r.reshape(c.shape)},$offset:function(){var e=t;return 1===c.rank&&(e=e.sum(n)),e.reshape(c.shape)}}}).reshape(l.shape)}});function Oa(t,e,n,r,i,a){void 0===a&&(a="channelsLast");var o,s=Na(e),u=s[0],l=s[1];if("channelsLast"===a)o=[u,l,t[3],t[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);o=[u,l,t[1],t[1]]}return Ia(t,o,n,1,r,i,!1,a)}function Ia(t,e,n,r,i,a,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],f=u[2],h=u[3];if("channelsLast"===s)l=t[0],c=t[1],f=t[2],h=t[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);l=t[0],h=t[1],c=t[2],f=t[3]}var p,m=e[0],g=e[1],v=e[3],y=Na(n),b=y[0],_=y[1],w=Na(r),S=w[0],E=w[1],k=function(t,e,n,r,i,a,o,s){var u,l,c;if("number"==typeof t){u={top:t,bottom:t,left:t,right:t,type:0===t?"VALID":"NUMBER"};var f=function(t,e,n,r,i,a){null==i&&(i=function(t,e,n,r){void 0===r&&(r=1);var i=Aa(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}(t,e,r));var o=t[0],s=t[1],u=Ra((o-e+2*i)/r+1,a);d(x(u),"The output # of rows ("+u+") must be an integer. Change the stride and/or zero pad parameters");var l=Ra((s-e+2*i)/r+1,a);return d(x(l),"The output # of columns ("+l+") must be an integer. Change the stride and/or zero pad parameters"),[u,l,n]}([e,n,1],a,1,r,t,s);l=f[0],c=f[1]}else if("same"===t){var h=((l=Math.ceil(e/r))-1)*r+a-e,p=((c=Math.ceil(n/i))-1)*i+o-n,m=Math.floor(h/2),g=h-m,v=Math.floor(p/2);u={top:m,bottom:g,left:v,right:p-v,type:"SAME"}}else{if("valid"!==t)throw Error("Unknown padding parameter: "+t);u={top:0,bottom:0,left:0,right:0,type:"VALID"},l=Math.ceil((e-a+1)/r),c=Math.ceil((n-o+1)/i)}return{padInfo:u,outHeight:l,outWidth:c}}(i,c,f,b,_,Aa(m,S),Aa(g,E),a),T=k.padInfo,P=k.outHeight,M=k.outWidth,C=o?v*h:v;return"channelsFirst"===s?p=[l,C,P,M]:"channelsLast"===s&&(p=[l,P,M,C]),{batchSize:l,dataFormat:s,inHeight:c,inWidth:f,inChannels:h,outHeight:P,outWidth:M,outChannels:C,padInfo:T,strideHeight:b,strideWidth:_,filterHeight:m,filterWidth:g,dilationHeight:S,dilationWidth:E,inShape:t,outShape:p,filterShape:e}}function Na(t){return"number"==typeof t?[t,t]:t}function Aa(t,e){return e<=1?t:t+(t-1)*(e-1)}function Ra(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}var Da=Wt({matMul_:function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var i=Vt(t,"a","matMul"),a=Vt(e,"b","matMul"),o=n?i.shape[i.rank-2]:i.shape[i.rank-1],s=r?a.shape[a.rank-1]:a.shape[a.rank-2],u=n?i.shape[i.rank-1]:i.shape[i.rank-2],l=r?a.shape[a.rank-2]:a.shape[a.rank-1],c=i.shape.slice(0,-2),f=a.shape.slice(0,-2),h=b(c),p=b(f);d(i.rank>=2&&a.rank>=2&&i.rank===a.rank,"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+a.rank+"."),d(_(c,f),"Error in matMul: outer dimensions ("+c+") and ("+f+") of Tensors with shapes "+i.shape+" and "+a.shape+" must match."),d(o===s,"Error in matMul: inner shapes ("+o+") and ("+s+") of Tensors with shapes "+i.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match.");var m=i.shape.slice(0,-2).concat([u,l]),g=n?i.as3D(h,o,u):i.as3D(h,u,o),v=r?a.as3D(p,l,s):a.as3D(p,s,l);return vt.engine.runKernel(function(t){return t.batchMatMul(g,v,n,r)},{$a:g,$b:v},function(t){return n||r?!n&&r?{$a:function(){return t.matMul(v.toFloat(),!1,!1)},$b:function(){return t.matMul(g.toFloat(),!0,!1)}}:n&&!r?{$a:function(){return v.toFloat().matMul(t,!1,!0)},$b:function(){return g.toFloat().matMul(t,!1,!1)}}:{$a:function(){return v.toFloat().matMul(t,!0,!0)},$b:function(){return t.matMul(g.toFloat(),!0,!0)}}:{$a:function(){return t.matMul(v.toFloat(),!1,!0)},$b:function(){return g.toFloat().matMul(t,!0,!1)}}}).reshape(m)}}),ja=Wt({dot_:function(t,e){var n=Vt(t,"t1","dot"),r=Vt(e,"t2","dot");d(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+".");var i=1===n.rank?n.size:n.shape[1],a=1===r.rank?r.size:r.shape[0];return d(i===a,"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+a+"."),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),La=Wt({outerProduct_:function(t,e){var n=Vt(t,"v1","outerProduct"),r=Vt(e,"v2","outerProduct");return d(1===n.rank&&1===r.rank,"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."),n.as2D(-1,1).matMul(r.as2D(1,-1))}});function Fa(t,e,n,r,i,a){d(t.length===e.rank,"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match");var o=t,s=e,u=!1;3===e.rank&&(u=!0,s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),o=[1,t[0],t[1],t[2]]);var l=o[3],c=s.shape[3];d(4===o.length,"Error in conv2dDerInput: inShape must be length 4, but got length "+o.length+"."),d(4===s.rank,"Error in conv2dDerInput: dy must be rank 4, but got rank "+s.rank),d(4===n.rank,"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank),d(l===n.shape[2],"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."),d(c===n.shape[3],"Error in conv2dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[3]+"."),null!=a&&d(x(i),"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+".");var f=Ia(o,n.shape,r,1,i,a),h=vt.engine.runKernel(function(t){return t.conv2dDerInput(s,n,f)},{dy4D:s});return u?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function za(t){var e=function(t){return"number"==typeof t?[t,t]:t}(t),n=e[0],r=e[1];return 1===n&&1===r}function Ba(t,e){return za(t)||za(e)}var Ua=Wt({conv1d_:function(t,e,n,r,i,a,o){void 0===i&&(i="NWC"),void 0===a&&(a=1);var s=Vt(t,"x","conv1d"),u=Vt(e,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=s.as3D(1,s.shape[0],s.shape[1])),d(3===l.rank,"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."),d(3===u.rank,"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."),null!=o&&d(x(r),"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."),d(l.shape[2]===u.shape[1],"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."),d(Ba(n,a),"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"),d("NWC"===i,"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported.");var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),p=Va(h,f,[1,n],r,"NHWC",[1,a],o);return c?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),Va=Wt({conv2d_:function(t,e,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var s=Vt(t,"x","conv2d"),u=Vt(e,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),d(4===l.rank,"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."),d(4===u.rank,"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."),null!=o&&d(x(r),"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."),d(l.shape[3]===u.shape[2],"Error in conv2d: depth of input ("+l.shape[3]+") must match input depth for filter "+u.shape[2]+"."),d(Ba(n,a),"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"),d("NHWC"===i,"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported.");var f,h=Ia(l.shape,u.shape,n,a,r,o);if(1===h.filterHeight&&1===h.filterWidth&&1===h.dilationHeight&&1===h.dilationWidth&&1===h.strideHeight&&1===h.strideWidth&&"SAME"===h.padInfo.type){var p=l.reshape([-1,h.inChannels]),m=u.reshape([h.inChannels,h.outChannels]);f=Da(p,m).reshape(h.outShape)}else f=vt.engine.runKernel(function(t){return t.conv2d(l,u,h)},{x:l,$filter:u},function(t){return d(za(a),"Error in gradient of conv2D: dilation rates greater than 1 are notyet supported in gradients. Got dilations '"+a+"'"),{x:function(){return Fa(l.shape,t,u,n,r)},$filter:function(){return function(t,e,n,r,i,a){var o=t;3===t.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var s=e;3===s.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),d(4===o.rank,"Error in conv2dDerFilter: input must be rank 4, but got shape "+o.shape+"."),d(4===s.rank,"Error in conv2dDerFilter: dy must be rank 4, but got shape "+s.shape+"."),d(4===n.length,"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."),d(o.shape[3]===n[2],"Error in conv2dDerFilter: depth of input "+o.shape[3]+") must match input depth in filter ("+n[2]+"."),d(s.shape[3]===n[3],"Error in conv2dDerFilter: depth of dy ("+s.shape[3]+") must match output depth for filter ("+n[3]+")."),null!=a&&d(x(i),"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+".");var u=Ia(o.shape,n,r,1,i,a);return vt.engine.runKernel(function(t){return t.conv2dDerFilter(o,s,u)},{x4D:o,dy4D:s})}(l,t,u.shape,n,r)}}});return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),qa=Wt({depthwiseConv2d_:function(t,e,n,r,i,a,o){void 0===i&&(i="NHWC"),void 0===a&&(a=[1,1]);var s=Vt(t,"x","depthwiseConv2d"),u=Vt(e,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),d(4===l.rank,"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."),d(4===u.rank,"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."),d(l.shape[3]===u.shape[2],"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."),null==a&&(a=[1,1]),d(Ba(n,a),"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"),null!=o&&d(x(r),"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+".");var f=Ia(l.shape,u.shape,n,a,r,o,!0),h=vt.engine.runKernel(function(t){return t.depthwiseConv2D(l,u,f)},{x:l,$filter:u},function(t){return d(za(a),"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"),{x:function(){return function(t,e,n,r){var i=e,a=!1;3===e.rank&&(a=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=vt.engine.runKernel(function(t){return t.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return a?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}(l.shape,t,u,f)},$filter:function(){return function(t,e,n,r){var i=t;3===t.rank&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=e;return 3===a.rank&&(a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),vt.engine.runKernel(function(t){return t.depthwiseConv2DDerFilter(i,a,r)},{x4D:i,dy4D:a})}(l,t,u.shape,f)}}});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),Wa=Wt({separableConv2d_:function(t,e,n,r,i,a,o){void 0===a&&(a=[1,1]),void 0===o&&(o="NHWC");var s=Vt(t,"x","separableConv2d"),u=Vt(e,"depthwiseFilter","separableConv2d"),l=Vt(n,"pointwiseFilter","separableConv2d"),c=s,f=!1;if(3===s.rank&&(f=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");d(4===c.rank,"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."),d(4===u.rank,"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."),d(4===l.rank,"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."),d(1===l.shape[0],"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."),d(1===l.shape[1],"Error in separableConv2d: the second dimension of pointwise filter  must be 1, but got "+l.shape[1]+".");var h=u.shape[2],p=u.shape[3];d(l.shape[2]===h*p,"Error in separableConv2d: the third dimension of pointwise filter must be "+h*p+", but got "+l.shape[2]+".");var m=qa(c,u,r,i,o,a),g=Va(m,l,1,"valid",o);return f?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),Ga=Wt({conv2dTranspose_:function(t,e,n,r,i,a){return Fa(n,Vt(t,"x","conv2dTranspose"),Vt(e,"filter","conv2dTranspose"),r,i,a)}});var Ha=Wt({reverse_:function(t,e){var n=Vt(t,"x","reverse");if(0===n.rank)return n.clone();var r=It(e,n.shape);return vt.engine.runKernel(function(t){return t.reverse(n,r)},{$x:n},function(t){return{$x:function(){return t.reverse(r)}}}).reshapeAs(n)}}),$a=Wt({reverse1d_:function(t){var e=Vt(t,"x","reverse");return d(1===e.rank,"Error in reverse1D: x must be rank 1 but got\n             rank "+e.rank+"."),Ha(e,0)}}),Ka=Wt({reverse2d_:function(t,e){var n=Vt(t,"x","reverse");return d(2===n.rank,"Error in reverse2D: x must be rank 2 but got\n             rank "+n.rank+"."),Ha(n,e)}}),Xa=Wt({reverse3d_:function(t,e){var n=Vt(t,"x","reverse");return d(3===n.rank,"Error in reverse3D: x must be rank 3 but got\n             rank "+n.rank+"."),Ha(n,e)}}),Ya=Wt({reverse4d_:function(t,e){var n=Vt(t,"x","reverse");return d(4===n.rank,"Error in reverse4D: x must be rank 4 but got\n             rank "+n.rank+"."),Ha(n,e)}});var Ja=Wt({maxPool_:function(t,e,n,r,i){var a=Vt(t,"x","maxPool"),o=a,s=!1;3===a.rank&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),d(4===o.rank,"Error in maxPool: input must be rank 4 but got rank "+o.rank+"."),null!=i&&d(x(r),"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+".");var u=Oa(o.shape,e,n,r,i),l=vt.engine.runKernel(function(t,e){return e(t.maxPool(o,u))},{x:o},function(t,i){var a=i[0];return{x:function(){return function(t,e,n,r,i,a,o){var s=Vt(t,"dy","maxPoolBackprop"),u=Vt(e,"input","maxPoolBackprop"),l=Vt(n,"output","maxPoolBackprop");d(u.rank===s.rank,"Rank of input ("+u.rank+") does not match rank of dy ("+s.rank+")"),d(4===s.rank,"Error in maxPoolBackprop: dy must be rank 4 but got rank "+s.rank+"."),d(4===u.rank,"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+"."),null!=o&&d(x(a),"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+".");var c=Oa(u.shape,r,i,a,o);return vt.engine.runKernel(function(t){return t.maxPoolBackprop(s,u,l,c)},{$dy:s,$input:u})}(t,o,a,e,n,r)}}});return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),Za=Wt({avgPool_:function(t,e,n,r,i){var a=Vt(t,"x","avgPool");d("float32"===a.dtype,"The input dtype to avgPool must be float32");var o=a,s=!1;3===a.rank&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),d(4===o.rank,"Error in avgPool: x must be rank 4 but got rank "+o.rank+"."),null!=i&&d(x(r),"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+".");var u=Oa(o.shape,e,n,r),l=vt.engine.runKernel(function(t){return t.avgPool(o,u)},{x:o},function(t){return{x:function(){return function(t,e,n,r,i){var a=Vt(t,"dy","avgPoolBackprop"),o=Vt(e,"input","avgPoolBackprop");d(o.rank===a.rank,"Rank of input ("+o.rank+") does not match rank of dy ("+a.rank+")");var s=o,u=a,l=!1;3===o.rank&&(l=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]),u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),d(4===u.rank,"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."),d(4===s.rank,"Error in avgPoolBackprop: input must be rank 4 but got rank "+s.rank+".");var c=Oa(s.shape,n,r,i),f=vt.engine.runKernel(function(t){return t.avgPoolBackprop(u,s,c)},{dy4D:u,input4D:s});return l?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}(t,o,e,n,r)}}});return l=l.cast(a.dtype),s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}});var Qa=Wt({slice_:function(t,e,n){var r,i,a=Vt(t,"x","slice");if(0===a.rank)throw new Error("Slicing scalar is not possible");r="number"==typeof e?[e].concat(new Array(a.rank-1).fill(0)):e.length<a.rank?e.concat(new Array(a.rank-e.length).fill(0)):e.slice(),i=(i=null==n?new Array(a.rank).fill(-1):"number"==typeof n?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(t,e){return t>=0?t:(d(-1===t,"Bad value in size"),a.shape[e]-r[e])}),function(t,e,n){d(t.rank===e.length,"Error in slice"+t.rank+"D: Length of begin "+e+" must match the rank of the array ("+t.rank+")."),d(t.rank===n.length,"Error in slice"+t.rank+"D: Length of size "+n+" must match the rank of the array ("+t.rank+").");for(var r=0;r<t.rank;++r)d(e[r]+n[r]<=t.shape[r],"Error in slice"+t.rank+"D: begin["+r+"] + size["+r+"] ("+(e[r]+n[r])+") would overflow input.shape["+r+"] ("+t.shape[r]+")")}(a,r,i);var o=a.shape;return vt.engine.runKernel(function(t){return t.slice(a,r,i)},{$x:a},function(t){for(var e=[],n=0;n<t.rank;n++)e.push([r[n],o[n]-r[n]-i[n]]);return{$x:function(){return t.pad(e)}}})}}),to=Wt({slice1d_:function(t,e,n){var r=Vt(t,"x","slice1d");return d(1===r.rank,"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"),Qa(r,[e],[n])}}),eo=Wt({slice2d_:function(t,e,n){var r=Vt(t,"x","slice2d");return d(2===r.rank,"slice1d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"),Qa(r,e,n)}}),no=Wt({slice3d_:function(t,e,n){var r=Vt(t,"x","slice3d");return d(3===r.rank,"slice1d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"),Qa(r,e,n)}}),ro=Wt({slice4d_:function(t,e,n){var r=Vt(t,"x","slice4d");return d(4===r.rank,"slice1d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"),Qa(r,e,n)}});function io(t,e,n,r,i){var a=e[0];return a.rank<n.rank&&(a=a.reshape(Ot(a.shape,r))),t.rank<n.rank&&(t=t.reshape(Ot(t.shape,r))),{$x:function(){var e=t.mul(n.equal(a).cast(t.dtype));return null==i?e:e.transpose(i)}}}var ao=Wt({all_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Vt(t,"x","all","bool");d("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var i=It(e,r.shape),a=i,o=At(a,r.rank);null!=o&&(r=r.transpose(o),a=Dt(a.length,r.rank));var s=vt.engine.runKernel(function(t){return t.all(r,a)},{$x:r});if(n){var u=Ot(s.shape,i);return s.reshape(u)}return s}}),oo=Wt({any_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Vt(t,"x","any","bool");d("bool"===r.dtype,"Error Tensor must be of type bool. Got: "+r.dtype);var i=It(e,r.shape),a=i,o=At(a,r.rank);null!=o&&(r=r.transpose(o),a=Dt(a.length,r.rank));var s=vt.engine.runKernel(function(t){return t.any(r,a)},{$x:r});if(n){var u=Ot(s.shape,i);return s.reshape(u)}return s}}),so=Wt({argMax_:function(t,e){void 0===e&&(e=0);var n=Vt(t,"x","argMax");null==e&&(e=0);var r=It(e,n.shape),i=At(r,n.rank);return null!=i&&(n=n.transpose(i),r=Dt(r.length,n.rank)),vt.engine.runKernel(function(t){return t.argMax(n,r[0])},{$x:n},function(t){return{$x:function(){return pe(n)}}})}}),uo=Wt({argMin_:function(t,e){void 0===e&&(e=0);var n=Vt(t,"x","argMin");null==e&&(e=0);var r=It(e,n.shape),i=At(r,n.rank);return null!=i&&(n=n.transpose(i),r=Dt(r.length,n.rank)),vt.engine.runKernel(function(t){return t.argMin(n,r[0])},{$x:n},function(t){return{$x:function(){return pe(n)}}})}}),lo=Wt({logSumExp_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Vt(t,"x","logSumExp"),i=It(e,r.shape),a=r.max(i,!0),o=r.sub(a).exp().sum(i).log(),s=a.reshape(o.shape).add(o);if(n){var u=Ot(s.shape,i);return s.reshape(u)}return s}}),co=Wt({max_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Vt(t,"x","max"),i=r,a=It(e,r.shape),o=a,s=At(o,r.rank);null!=s&&(r=r.transpose(s),o=Dt(o.length,r.rank));var u=vt.engine.runKernel(function(t,e){return e(t.max(r,o))},{$x:r},function(t,e){return io(t,e,i,a,s)});if(n){var l=Ot(u.shape,a);u=u.reshape(l)}return u}}),fo=Wt({mean_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Vt(t,"x","mean"),i=It(e,r.shape),a=b(Ct(r.shape,i)[1]);return yt(function(t){var r=Yt(a);return{value:(r.dtype===t.dtype?t:t.cast(r.dtype)).div(r).sum(e,n),gradFunc:function(e){var n=t.shape.slice();return i.forEach(function(t){n[t]=1}),e.reshape(n).mul(ee(t.shape,"float32")).div(r)}}})(r)}}),ho=Wt({min_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Vt(t,"x","min"),i=r,a=It(e,r.shape),o=a,s=At(o,r.rank);null!=s&&(r=r.transpose(s),o=Dt(o.length,r.rank));var u=vt.engine.runKernel(function(t,e){return e(t.min(r,o))},{$x:r},function(t,e){return io(t,e,i,a,s)});if(n){var l=Ot(u.shape,a);u=u.reshape(l)}return u}}),po=Wt({moments_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=It(e,(t=Vt(t,"x","moments")).shape),i=t.mean(r,n),a=i.shape;return n||(a=Ot(i.shape,r)),{mean:i,variance:t.toFloat().sub(i.reshape(a)).square().mean(r,n)}}}),mo=Wt({sum_:function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=!1);var r=Vt(t,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=It(e,r.shape);return yt(function(t){var e=At(i,t.rank),r=i,a=t;null!=e&&(a=t.transpose(e),r=Dt(r.length,t.rank));var o=vt.engine.runKernel(function(t){return t.sum(a,r)},{permutedX:a});if(n){var s=Ot(o.shape,i);o=o.reshape(s)}return{value:o,gradFunc:function(e){var n=t.shape.slice();return i.forEach(function(t){n[t]=1}),e.reshape(n).mul(ee(t.shape,"float32"))}}})(r)}});var go=Wt({equal_:function(t,e){var n=Vt(t,"a","equal"),r=Vt(e,"b","equal");return rt(n,r),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.equal(n,r)},{$a:n,$b:r})}}),vo=Wt({equalStrict_:function(t,e){var n=Vt(t,"a","equalStrict"),r=Vt(e,"b","equalStrict");return m(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),yo=Wt({greater_:function(t,e){var n=Vt(t,"a","greater"),r=Vt(e,"b","greater");return rt(n,r),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.greater(n,r)},{$a:n,$b:r})}}),bo=Wt({greaterEqual_:function(t,e){var n=Vt(t,"a","greaterEqual"),r=Vt(e,"b","greaterEqual");return rt(n,r),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.greaterEqual(n,r)},{$a:n,$b:r},function(t){return{$a:function(){return pe(n)},$b:function(){return pe(r)}}})}}),_o=Wt({greaterEqualStrict_:function(t,e){var n=Vt(t,"a","greaterEqualStrict"),r=Vt(e,"b","greaterEqualStrict");return m(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),xo=Wt({greaterStrict_:function(t,e){var n=Vt(t,"a","greaterStrict"),r=Vt(e,"b","greaterStrict");return m(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),wo=Wt({less_:function(t,e){var n=Vt(t,"a","less"),r=Vt(e,"b","less");return rt(n,r),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.less(n,r)},{$a:n,$b:r})}}),So=Wt({lessEqual_:function(t,e){var n=Vt(t,"a","lessEqual"),r=Vt(e,"b","lessEqual");return rt(n,r),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.lessEqual(n,r)},{$a:n,$b:r})}}),Eo=Wt({lessEqualStrict_:function(t,e){var n=Vt(t,"a","lessEqualStrict"),r=Vt(e,"b","lessEqualStrict");return m(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),ko=Wt({lessStrict_:function(t,e){var n=Vt(t,"a","lessStrict"),r=Vt(e,"b","lessStrict");return m(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),To=Wt({notEqual_:function(t,e){var n=Vt(t,"a","notEqual"),r=Vt(e,"b","notEqual");return rt(n,r),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.notEqual(n,r)},{$a:n,$b:r})}}),Po=Wt({notEqualStrict_:function(t,e){var n=Vt(t,"a","notEqualStrict"),r=Vt(e,"b","notEqualStrict");return m(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});var Mo=Wt({add_:function(t,e){var n=Vt(t,"a","add"),r=Vt(e,"b","add");rt(n,r);var i=Ce(n.shape,r.shape);return vt.engine.runKernel(function(t){return t.add(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t,r=Me(n.shape,i);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},$b:function(){var e=t,n=Me(r.shape,i);return n.length>0&&(e=e.sum(n)),e.reshape(r.shape)}}})}}),Co=Wt({addN_:function(t){d(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),d(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(t,e){return Vt(t,"tensors"+e,"addN")}),n=e[0];e.forEach(function(t){if(t.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(t){if(!_(t.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return vt.engine.runKernel(function(t){return t.addN(e)},r,function(t){var n={};return e.forEach(function(e,r){n[r]=function(){return t.clone()}}),n})}}),Oo=Wt({addStrict_:function(t,e){return m(t.shape,e.shape,"Error in addStrict: "),t.add(e)}}),Io=Wt({atan2_:function(t,e){var n=Vt(t,"a","atan2"),r=Vt(e,"b","atan2");rt(n,r);var i=Ce(n.shape,r.shape);return vt.engine.runKernel(function(t){return t.atan2(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=Mo(n.square(),r.square()),a=t.mul(r.div(e)),o=Me(n.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(n.shape)},$b:function(){var e=Mo(n.square(),r.square()),a=fa(t.mul(n.div(e))),o=Me(r.shape,i);return o.length>0&&(a=a.sum(o)),a.reshape(r.shape)}}})}}),No=Wt({div_:function(t,e){var n,r=Vt(t,"a","div"),i=Vt(e,"b","div");if(rt(r,i),"int32"===r.dtype&&"int32"===i.dtype)return Ro(r,i);n=function(t){return t.realDivide(r,i)};var a=Ce(r.shape,i.shape);return vt.engine.runKernel(n,{$a:r,$b:i},function(t){return{$a:function(){var e=t.div(i.toFloat()),n=Me(r.shape,a);return n.length>0?e.sum(n).reshape(r.shape):e},$b:function(){var e=t.mul(r.toFloat()),n=Me(i.shape,a);n.length>0&&(e=e.sum(n).reshape(i.shape));var o=i.square();return e.div(o.toFloat()).neg()}}})}}),Ao=Wt({divStrict_:function(t,e){return m(t.shape,e.shape,"Error in divideStrict: "),t.div(e)}}),Ro=Wt({floorDiv_:function(t,e){var n=Vt(t,"a","floorDiv"),r=Vt(e,"b","floorDiv");rt(n,r);var i=Ce(n.shape,r.shape);return vt.engine.runKernel(function(t){return t.floorDiv(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t.div(r.toFloat()),a=Me(n.shape,i);return a.length>0?e.sum(a).reshape(n.shape):e},$b:function(){var e=t.mul(n.toFloat()),a=Me(r.shape,i);a.length>0&&(e=e.sum(a).reshape(r.shape));var o=r.square();return e.div(o.toFloat()).neg()}}})}}),Do=Wt({maximum_:function(t,e){var n=Vt(t,"a","maximum"),r=Vt(e,"b","maximum");return rt(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.maximum(n,r)},{$a:n,$b:r},function(t){return{$a:function(){return t.mul(n.greaterEqual(r).toFloat())},$b:function(){return t.mul(n.less(r).toFloat())}}})}}),jo=Wt({maximumStrict_:function(t,e){return m(t.shape,e.shape,"Error in maximumStrict: "),t.maximum(e)}}),Lo=Wt({minimum_:function(t,e){var n=Vt(t,"a","minimum"),r=Vt(e,"b","minimum");return rt(n,r),"bool"===n.dtype&&(n=n.toInt()),"bool"===r.dtype&&(r=r.toInt()),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.minimum(n,r)},{$a:n,$b:r},function(t){return{$a:function(){return t.mul(n.lessEqual(r).toFloat())},$b:function(){return t.mul(n.greater(r).toFloat())}}})}}),Fo=Wt({minimumStrict_:function(t,e){return m(t.shape,e.shape,"Error in minimumStrict: "),t.minimum(e)}}),zo=Wt({mod_:function(t,e){var n=Vt(t,"a","mod"),r=Vt(e,"b","mod");rt(n,r);var i=Ce(n.shape,r.shape);return vt.engine.runKernel(function(t){return t.mod(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=Me(n.shape,i);return e.length>0?t.sum(e).reshape(n.shape):t},$b:function(){var e=t.mul(n.div(r).floor().neg()),a=Me(r.shape,i);return a.length>0?e.sum(a).reshape(r.shape):e}}})}}),Bo=Wt({modStrict_:function(t,e){return m(t.shape,e.shape,"Error in modStrict: "),t.mod(e)}}),Uo=Wt({mul_:function(t,e){var n=Vt(t,"a","mul"),r=Vt(e,"b","mul");rt(n,r);var i=Ce(n.shape,r.shape);return vt.engine.runKernel(function(t){return t.multiply(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t.mul(r.toFloat()),a=Me(n.shape,i);return a.length>0?e.sum(a).reshape(n.shape):e},$b:function(){var e=t.mul(n.toFloat()),a=Me(r.shape,i);return a.length>0?e.sum(a).reshape(r.shape):e}}})}}),Vo=Wt({mulStrict_:function(t,e){return m(t.shape,e.shape,"Error in multiplyStrict: "),t.mul(e)}}),qo=Wt({pow_:function(t,e){var n=Vt(t,"base","pow"),r=Vt(e,"exp","pow"),i=Ce(n.shape,r.shape);return t=n.cast(me(n.dtype,r.dtype)),e=r.cast(me(n.dtype,r.dtype)),vt.engine.runKernel(function(t,e){return e(t.pow(n,r))},{$base:n,$exp:r},function(t,e){var a=e[0];return{$base:function(){var e=t.mul(r.toFloat().mul(a.div(n))),o=Me(n.shape,i);return o.length>0&&(e=e.sum(o)),e.reshape(n.shape)},$exp:function(){var e=t.mul(a.mul(n.log()).toFloat()),o=Me(r.shape,i);return o.length>0&&(e=e.sum(o)),e.reshape(r.shape)}}})}}),Wo=Wt({powStrict_:function(t,e){return m(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),Go=Wt({squaredDifference_:function(t,e){var n=Vt(t,"a","squaredDifference"),r=Vt(e,"b","squaredDifference");return rt(n,r),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.squaredDifference(n,r)},{$a:n,$b:r},function(t){var e=Yt(2);return{$a:function(){return t.mul(n.sub(r).mul(e))},$b:function(){return t.mul(r.sub(n).mul(e))}}})}}),Ho=Wt({squaredDifferenceStrict_:function(t,e){return m(t.shape,e.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(e)}}),$o=Wt({sub_:function(t,e){var n=Vt(t,"a","sub"),r=Vt(e,"b","sub");rt(n,r);var i=Ce(n.shape,r.shape);return vt.engine.runKernel(function(t){return t.subtract(n,r)},{$a:n,$b:r},function(t){return{$a:function(){var e=t,r=Me(n.shape,i);return r.length>0&&(e=e.sum(r)),e.reshape(n.shape)},$b:function(){var e=t,n=Me(r.shape,i);return n.length>0&&(e=e.sum(n)),e.neg().reshape(r.shape)}}})}}),Ko=Wt({subStrict_:function(t,e){return m(t.shape,e.shape,"Error in subStrict: "),t.sub(e)}});var Xo=Wt({logicalAnd_:function(t,e){var n=Vt(t,"a","logicalAnd","bool"),r=Vt(e,"b","logicalAnd","bool");return d("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.logicalAnd(n,r)},{$a:n,$b:r})}}),Yo=Wt({logicalNot_:function(t){var e=Vt(t,"x","logicalNot","bool");return d("bool"===e.dtype,"Error Array must be of type bool."),vt.engine.runKernel(function(t){return t.logicalNot(e)},{$x:e})}}),Jo=Wt({logicalOr_:function(t,e){var n=Vt(t,"a","logicalOr","bool"),r=Vt(e,"b","logicalOr","bool");return d("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),Ce(n.shape,r.shape),vt.engine.runKernel(function(t){return t.logicalOr(n,r)},{$a:n,$b:r})}}),Zo=Wt({logicalXor_:function(t,e){var n=Vt(t,"a","logicalXor","bool"),r=Vt(e,"b","logicalXor","bool");return d("bool"===n.dtype&&"bool"===r.dtype,"Error Array must be of type bool."),Ce(n.shape,r.shape),Jo(t,e).logicalAnd(Xo(t,e).logicalNot())}}),Qo=Wt({where_:function(t,e,n){var r=Vt(e,"a","where"),i=Vt(n,"b","where"),a=Vt(t,"condition","where","bool");return d("bool"===a.dtype,"Error Condition must be of type bool."),m(r.shape,i.shape,"Error in where: "),1===a.rank?d(a.shape[0]===r.shape[0],"The first dimension of `a` must match the size of `condition`."):m(a.shape,i.shape,"Error in where: "),vt.engine.runKernel(function(t){return t.select(a,r,i)},{$condition:a,$a:r,$b:i},function(t){return{$condition:function(){return pe(a)},$a:function(){return t.mul(a.cast(r.dtype))},$b:function(){return t.mul(a.logicalNot().cast(i.dtype))}}})}}),ts=function(t){return l(this,void 0,void 0,function(){var e,n,r;return c(this,function(i){switch(i.label){case 0:return d("bool"===(e=Vt(t,"condition","where","bool")).dtype,"Condition must be of type bool."),[4,e.data()];case 1:return n=i.sent(),r=Wi(e.shape,n),t!==e&&e.dispose(),[2,r]}})})};var es=Wt({elu_:function(t){var e=Vt(t,"x","elu");return vt.engine.runKernel(function(t,n){return n(t.elu(e))},{$x:e},function(t,e){var n=e[0];return{$x:function(){return vt.engine.runKernel(function(e){return e.eluDer(t,n)},{dy:t,y:n})}}})}}),ns=Wt({leakyRelu_:function(t,e){void 0===e&&(e=.2);var n=Vt(t,"x","leakyRelu");return Do(Yt(e).mul(n),n)}}),rs=Wt({prelu_:function(t,e){var n=Vt(t,"x","prelu"),r=Vt(e,"alpha","prelu"),i=Yt(0);return Do(i,n).add(r.mul(Lo(i,n)))}}),is=Wt({relu_:function(t){var e=Vt(t,"x","relu");return"bool"===e.dtype?e.toInt():vt.engine.runKernel(function(t){return t.relu(e)},{$x:e},function(t){var n=e.step();return{$x:function(){return t.mulStrict(n.toFloat())}}})}}),as=Wt({selu_:function(t){var e=Vt(t,"x","selu");return vt.engine.runKernel(function(t){return t.selu(e)},{$x:e},function(t){return{$x:function(){var n=e.greater(Yt(0)),r=Yt(Wr),i=Yt(Gr),a=t.mul(i),o=t.mul(r).mul(e.toFloat().exp());return Qo(n,a,o)}}})}});var os=Wt({transpose_:function(t,e){var n=Vt(t,"x","transpose");return null==e&&(e=n.shape.map(function(t,e){return e}).reverse()),d(n.rank===e.length,"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."),e.forEach(function(t){d(t>=0&&t<n.rank,"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e)}),n.rank<=1?n.clone():vt.engine.runKernel(function(t){return t.transpose(n,e)},{$x:n},function(t){var n=Rt(e);return{$x:function(){return t.transpose(n)}}})}});var ss=Wt({localResponseNormalization_:function(t,e,n,r,i){void 0===e&&(e=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5);var a=Vt(t,"x","localResponseNormalization");d(4===a.rank||3===a.rank,"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+a.rank+"."),d(x(e),"Error in localResponseNormalization: depthRadius must be an integer\n                     but got depthRadius "+e+".");var o=a,s=!1;3===a.rank&&(s=!0,o=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=vt.engine.runKernel(function(t,a){return a(t.localResponseNormalization4D(o,e,n,r,i))},{x4D:o},function(t,a){var s=a[0];return{x4D:function(){return vt.engine.runKernel(function(a){return a.LRNGrad(t,o,s,e,n,r,i)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}});var us=Wt({norm_:function(t,e,n,r){void 0===e&&(e="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var i=function t(e,n,r){if(void 0===r&&(r=null),0===e.rank)return e.abs();if(1!==e.rank&&null===r)return t(e.reshape([-1]),n,r);if(1===e.rank||"number"==typeof r||r instanceof Array&&1===r.length){if(1===n)return e.abs().sum(r);if(n===1/0)return e.abs().max(r);if(n===-1/0)return e.abs().min(r);if("euclidean"===n||2===n)return e.abs().pow(Yt(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(r instanceof Array&&2===r.length){if(1===n)return e.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return e.abs().sum(r[1]).max(r[0]);if(n===-1/0)return e.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return e.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(t=Vt(t,"x","norm"),e,n),a=i.shape;if(r){var o=It(n,t.shape);a=Ot(i.shape,o)}return i.reshape(a)}});function ls(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function cs(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var fs=Wt({gather_:function(t,e,n){void 0===n&&(n=0);var r=Vt(t,"x","gather"),i=Vt(e,"indices","gather","int32");return d("int32"===i.dtype,"Indices must be of dtype `int32`"),n=It(n,r.shape)[0],vt.engine.runKernel(function(t){return t.gather(r,i,n)},{$x:r},function(t){return{$x:function(){if(0===n)return hs(t,i,r.shape[n]);var e=r.shape,a=i.size,o=e.slice(0,n),s=o.length,u=e.slice(n,e.length).slice(1),l=u.length,c=ls(0,s),f=ls(s+1,s+1+l),h=cs([o,[a],u]),p=t.reshape(h),d=i.reshape([a]),m=cs([[s],c,f]),g=p.transpose(m),v=hs(g,d,r.shape[n]),y=Rt(m);return v.transpose(y)}}})}}),hs=Wt({unsortedSegmentSum_:function(t,e,n){var r=Vt(t,"x","unsortedSegmentSum"),i=Vt(e,"segmentIds","unsortedSegmentSum","int32");return d("int32"===i.dtype,"segmentIds must be of dtype `int32`"),d(x(n),"numSegments must be of dtype int"),vt.engine.runKernel(function(t){return t.unsortedSegmentSum(r,i,n)},{$x:r},function(t){return{$x:function(){return function(t,e){for(var n=Do(e,pe(e)),r=fs(t,n),i=bo(e,Yt(0,"int32")),a=r.rank-i.rank,o=0;o<a;++o)i=Ei(i,o+1);i=Xo(i,ee(r.shape,"bool"));var s=pe(r);return Qo(i,r,s)}(t,i)}}})}});var ps=Wt({basicLSTMCell_:function(t,e,n,r,i,a){var o=Vt(t,"forgetBias","basicLSTMCell"),s=Vt(e,"lstmKernel","basicLSTMCell"),u=Vt(n,"lstmBias","basicLSTMCell"),l=Vt(r,"data","basicLSTMCell"),c=Vt(i,"c","basicLSTMCell"),f=Vt(a,"h","basicLSTMCell"),h=l.concat(f,1).matMul(s).add(u),p=h.shape[0],d=h.shape[1]/4,m=[p,d],g=h.slice([0,0],m),v=h.slice([0,d],m),y=h.slice([0,2*d],m),b=h.slice([0,3*d],m),_=g.sigmoid().mulStrict(v.tanh()).addStrict(c.mulStrict(o.add(y).sigmoid()));return[_,_.tanh().mulStrict(b.sigmoid())]}}),ds=Wt({multiRNNCell_:function(t,e,n,r){for(var i=Vt(e,"data","multiRNNCell"),a=qt(n,"c","multiRNNCell"),o=qt(r,"h","multiRNNCell"),s=i,u=[],l=0;l<t.length;l++){var c=t[l](s,a[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}var f=[],h=[];for(l=0;l<u.length;l+=2)f.push(u[l]),h.push(u[l+1]);return[f,h]}});var ms=Wt({movingAverage_:function(t,e,n,r,i){void 0===i&&(i=!0);var a=Vt(t,"v","movingAverage"),o=Vt(e,"x","movingAverage"),s=Vt(n,"decay","movingAverage");rt(a,o),d(_(a.shape,o.shape),"Shape mismatch in v and x");var u=Yt(1),l=u.sub(s),c=o.sub(a).mul(l);if(i){d(null!=r,"When using zeroDebias: true, step is required.");var f=Vt(r,"step","movingAverage");c=c.div(u.sub(qo(s,f)))}return a.add(c)}});var gs=Wt({stridedSlice_:function(t,e,n,r,i,a,o,s,u){if(void 0===i&&(i=0),void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0),0!==o)throw new Error("ellipsis mask is not yet supported");if(0!==s)throw new Error("new axis mask is not yet supported");var l=Vt(t,"x","stridedSlice");return vt.engine.runKernel(function(t){return t.stridedSlice(l,e,n,r,i,a,o,s,u)},{$x:l})}});var vs,ys=Wt({topk_:function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!0);var r=Vt(t,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var a=vt.engine.runKernel(function(t){return t.topk(r,e,n)},{$x:r});return{values:a[0],indices:a[1]}}});!function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(vs||(vs={}));var bs=Wt({absoluteDifference_:function(t,e,n,r){void 0===r&&(r=vs.SUM_BY_NONZERO_WEIGHTS);var i=Vt(t,"labels","absoluteDifference"),a=Vt(e,"predictions","absoluteDifference"),o=null;null!=n&&(o=Vt(n,"weights","absoluteDifference")),m(i.shape,a.shape,"Error in absoluteDifference: ");var s=i.sub(a).abs();return _s(s,o,r)}}),_s=Wt({computeWeightedLoss_:function(t,e,n){void 0===n&&(n=vs.SUM_BY_NONZERO_WEIGHTS);var r=Vt(t,"losses","computeWeightedLoss"),i=null;null!=e&&(i=Vt(e,"weights","computeWeightedLoss"));var a=null==i?r:r.mul(i);if(n===vs.NONE)return a;if(n===vs.SUM)return a.sum();if(n===vs.MEAN){if(null==i)return a.mean();var o=b(r.shape)/b(i.shape),s=a.sum().div(i.sum());return o>1?s.div(Yt(o)):s}if(n===vs.SUM_BY_NONZERO_WEIGHTS){if(null==i)return a.sum().div(Yt(r.size));var u=i.mul(ee(r.shape)).notEqual(Yt(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),xs=Wt({cosineDistance_:function(t,e,n,r,i){void 0===i&&(i=vs.SUM_BY_NONZERO_WEIGHTS);var a=Vt(t,"labels","cosineDistance"),o=Vt(e,"predictions","cosineDistance"),s=null;null!=r&&(s=Vt(r,"weights","cosineDistance")),m(a.shape,o.shape,"Error in cosineDistance: ");var u=Yt(1).sub(a.mul(o).sum(n,!0));return _s(u,s,i)}}),ws=Wt({hingeLoss_:function(t,e,n,r){void 0===r&&(r=vs.SUM_BY_NONZERO_WEIGHTS);var i=Vt(t,"labels","hingeLoss"),a=Vt(e,"predictions","hingeLoss"),o=null;null!=n&&(o=Vt(n,"weights","hingeLoss")),m(i.shape,a.shape,"Error in hingeLoss: ");var s=Yt(1);i=Yt(2).mul(i).sub(s);var u=s.sub(i.mul(a)).relu();return _s(u,o,r)}}),Ss=Wt({huberLoss_:function(t,e,n,r,i){void 0===r&&(r=1),void 0===i&&(i=vs.SUM_BY_NONZERO_WEIGHTS);var a=Vt(t,"labels","huberLoss"),o=Vt(e,"predictions","huberLoss"),s=null;null!=n&&(s=Vt(n,"weights","huberLoss")),m(a.shape,o.shape,"Error in huberLoss: ");var u=Yt(r),l=o.sub(a).abs(),c=Lo(l,u),f=l.sub(c),h=Yt(.5).mul(c.square()).add(u.mul(f));return _s(h,s,i)}}),Es=Wt({logLoss_:function(t,e,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=vs.SUM_BY_NONZERO_WEIGHTS);var a=Vt(t,"labels","logLoss"),o=Vt(e,"predictions","logLoss"),s=null;null!=n&&(s=Vt(n,"weights","logLoss")),m(a.shape,o.shape,"Error in logLoss: ");var u=Yt(1),l=Yt(r),c=a.mul(o.add(l).log()).neg().sub(u.sub(a).mul(u.sub(o).add(l).log()));return _s(c,s,i)}}),ks=Wt({meanSquaredError_:function(t,e,n,r){void 0===r&&(r=vs.SUM_BY_NONZERO_WEIGHTS);var i=Vt(t,"labels","meanSquaredError"),a=Vt(e,"predictions","meanSquaredError"),o=null;null!=n&&(o=Vt(n,"weights","meanSquaredError")),m(i.shape,a.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(a);return _s(s,o,r)}}),Ts=Wt({sigmoidCrossEntropy_:function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=vs.SUM_BY_NONZERO_WEIGHTS);var a=Vt(t,"multiClassLabels","sigmoidCrossEntropy"),o=Vt(e,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=Vt(n,"weights","sigmoidCrossEntropy")),m(a.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=Yt(r),l=Yt(1),c=Yt(.5);a=a.mul(l.sub(u)).add(c.mul(u))}var f=function(t,e){var n=Vt(t,"labels","sigmoidCrossEntropyWithLogits"),r=Vt(e,"logits","sigmoidCrossEntropyWithLogits");m(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),a=r.mul(n),o=r.abs().neg().exp().log1p();return i.sub(a).add(o)}(a,o);return _s(f,s,i)}}),Ps=Wt({softmaxCrossEntropy_:function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=vs.SUM_BY_NONZERO_WEIGHTS);var a=Vt(t,"onehotLabels","softmaxCrossEntropy"),o=Vt(e,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=Vt(n,"weights","softmaxCrossEntropy")),m(a.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){var u=Yt(r),l=Yt(1),c=Yt(a.shape[1]);a=a.mul(l.sub(u)).add(u.div(c))}var f=function(t,e,n){if(void 0===n&&(n=-1),-1===n&&(n=e.rank-1),n!==e.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+e.rank+" and dim was "+n);return yt(function(t,e){var r=e.logSumExp([n],!0),i=e.toFloat().sub(r);return{value:i.mul(t).neg().sum([n]),gradFunc:function(e){var r=Ot(e.shape,[n]);return[e.reshape(r).mul(t.toFloat().sub(i.exp())),e.reshape(r).mul(i.exp().sub(t.toFloat()))]}}})(t,e)}(a,o);return _s(f,s,i)}}),Ms=Object.freeze({get Reduction(){return vs},absoluteDifference:bs,computeWeightedLoss:_s,cosineDistance:xs,hingeLoss:ws,huberLoss:Ss,logLoss:Es,meanSquaredError:ks,sigmoidCrossEntropy:Ts,softmaxCrossEntropy:Ps});function Cs(t,e){return void 0===e&&(e=!1),vt.engine.tidy(function(){if(2!==t.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=ki(n),a=t.clone(),o=Zt([[1]],[1,1]),s=o.clone(),u=n>=r?r:n,l=function(t){var e,u=a,l=s,c=i;e=vt.engine.tidy(function(){var e=a.slice([t,t],[n-t,1]),u=e.norm(),l=a.slice([t,t],[1,1]),c=l.sign().neg(),f=l.sub(c.mul(u)),h=e.div(f);s=1===h.shape[0]?o.clone():o.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var p=c.matMul(f).div(u).neg(),d=a.slice([t,0],[n-t,r]),m=p.mul(s);a=0===t?d.sub(m.matMul(s.transpose().matMul(d))):a.slice([0,0],[t,r]).concat(d.sub(m.matMul(s.transpose().matMul(d))),0);var g=i.slice([0,t],[n,i.shape[1]-t]);return i=0===t?g.sub(g.matMul(s).matMul(m.transpose())):i.slice([0,0],[n,t]).concat(g.sub(g.matMul(s).matMul(m.transpose())),1),[s,a,i]}),s=e[0],a=e[1],i=e[2],xt([u,l,c])},c=0;c<u;++c)l(c);return!e&&n>r&&(i=i.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[i,a]})}var Os=Wt({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,d(null!=t&&t.length>0,"Gram-Schmidt process: input must not be null, undefined, or empty");for(var n=t[0].shape[0],r=1;r<t.length;++r)d(t[r].shape[0]===n,"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[r].shape[0]+" vs. "+n+")")}else e=!0,t=si(t,t.shape[0],0).map(function(t){return zi(t,[0])});d(t.length<=t[0].shape[0],"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+").");var i=[],a=t,o=function(t){i.push(vt.engine.tidy(function(){var e=a[t];if(t>0)for(var n=0;n<t;++n){var r=mo(i[n].mulStrict(e)).mul(i[n]);e=e.sub(r)}return e.div(us(e,"euclidean"))}))};for(r=0;r<t.length;++r)o(r);return e?Bi(i,0):i}}),Is=Wt({qr_:function(t,e){if(void 0===e&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(2===t.rank)return Cs(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(t,e){return t*e}),r=[],i=[];return qi(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0).forEach(function(t){var n=Cs(t,e),a=n[0],o=n[1];r.push(a),i.push(o)}),[Bi(r,0).reshape(t.shape),Bi(i,0).reshape(t.shape)]}}),Ns=Object.freeze({gramSchmidt:Os,qr:Is});function As(t,e,n,r,i){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY);var a=t.shape[0];return n=Math.min(n,a),d(0<=r&&r<=1,"iouThreshold must be in [0, 1], but was '"+r+"'"),d(2===t.rank,"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"),d(4===t.shape[1],"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]),d(1===e.rank,"scores must be a 1D tensor"),d(e.shape[0]===a,"scores has incompatible shape with boxes. Expected "+a+", but was "+e.shape[0]),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i}}var Rs=Wt({resizeBilinear_:function(t,e,n){void 0===n&&(n=!1);var r=Vt(t,"images","resizeBilinear");d(3===r.rank||4===r.rank,"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."),d(2===e.length,"Error in resizeBilinear: new shape must 2D, but got shape "+e+".");var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=vt.engine.runKernel(function(t,e){return t.resizeBilinear(i,o,s,n)},{batchImages:i},function(t,e){return{batchImages:function(){return vt.engine.runKernel(function(e){return e.resizeBilinearBackprop(t,i,n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Ds=Wt({resizeNearestNeighbor_:function(t,e,n){void 0===n&&(n=!1);var r=Vt(t,"images","resizeNearestNeighbor");d(3===r.rank||4===r.rank,"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."),d(2===e.length,"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."),d("float32"===r.dtype||"int32"===r.dtype,"`images` must have `int32` or `float32` as dtype");var i=r,a=!1;3===r.rank&&(a=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var o=e[0],s=e[1],u=vt.engine.runKernel(function(t,e){return t.resizeNearestNeighbor(i,o,s,n)},{batchImages:i},function(t,e){return{batchImages:function(){return vt.engine.runKernel(function(e){return e.resizeNearestNeighborBackprop(t,i,n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),js=Wt({nonMaxSuppression_:function(t,e,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var a=Vt(t,"boxes","nonMaxSuppression"),o=Vt(e,"scores","nonMaxSuppression"),s=As(a,o,n,r,i);return n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,vt.engine.runKernel(function(t){return t.nonMaxSuppression(a,o,n,r,i)},{$boxes:a})}}),Ls=function(t,e,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),l(this,void 0,void 0,function(){var a,o,s,u,l,f;return c(this,function(c){switch(c.label){case 0:return a=Vt(t,"boxes","nonMaxSuppressionAsync"),o=Vt(e,"scores","nonMaxSuppressionAsync"),s=As(a,o,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,a.data()];case 1:return u=c.sent(),[4,o.data()];case 2:return l=c.sent(),f=xe(u,l,n,r,i),a!==t&&a.dispose(),o!==e&&o.dispose(),[2,f]}})})},Fs=function(t,e,n,r,i,a){var o=Vt(t,"image","cropAndResize","float32"),s=Vt(e,"boxes","cropAndResize","float32"),u=Vt(n,"boxInd","cropAndResize","int32");i=i||"bilinear",a=a||0;var l=s.shape[0];return d(4===o.rank,"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."),d(2===s.rank&&4===s.shape[1],"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."),d(1===u.rank&&u.shape[0]===l,"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."),d("int32"===u.dtype,"Error in cropAndResize: boxInd must be of dtype int32, but got dtype "+u.dtype+"."),d(2===r.length,"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."),d(r[0]>=1&&r[1]>=1,"cropSize must be atleast [1,1], but was "+r),d("bilinear"===i||"nearest"===i,"method must be bilinear or nearest, but was "+i),vt.engine.runKernel(function(t,e){return t.cropAndResize(o,s,u,r,i,a)},{$image:o,$boxes:s})},zs=Object.freeze({resizeBilinear:Rs,resizeNearestNeighbor:Ds,nonMaxSuppression:js,nonMaxSuppressionAsync:Ls,cropAndResize:Fs}),Bs=Object.freeze({image:zs,linalg:Ns,losses:Ms,op:Wt,batchNormalization2d:Ta,batchNormalization3d:Pa,batchNormalization4d:Ma,batchNormalization:Ca,complex:Ht,real:$t,imag:Kt,concat:ni,concat1d:ri,concat2d:ii,concat3d:ai,concat4d:oi,split:si,conv1d:Ua,conv2d:Va,depthwiseConv2d:qa,separableConv2d:Wa,conv2dTranspose:Ga,matMul:Da,dot:ja,outerProduct:La,reverse:Ha,reverse1d:$a,reverse2d:Ka,reverse3d:Xa,reverse4d:Ya,maxPool:Ja,avgPool:Za,slice:Qa,slice1d:to,slice2d:eo,slice3d:no,slice4d:ro,abs:$i,acos:Ki,acosh:Xi,asin:Yi,asinh:Ji,atan:Zi,atanh:Qi,ceil:ta,clipByValue:ea,cos:na,cosh:ra,erf:ia,exp:aa,expm1:oa,floor:sa,log:ua,log1p:la,logSigmoid:ca,neg:fa,reciprocal:ha,round:pa,rsqrt:da,sigmoid:ma,sign:ga,sin:va,sinh:ya,softplus:ba,sqrt:_a,square:xa,step:wa,tan:Sa,tanh:Ea,all:ao,any:oo,argMax:so,argMin:uo,logSumExp:lo,max:co,mean:fo,min:ho,moments:po,sum:mo,equal:go,equalStrict:vo,greater:yo,greaterEqual:bo,greaterEqualStrict:_o,greaterStrict:xo,less:wo,lessEqual:So,lessEqualStrict:Eo,lessStrict:ko,notEqual:To,notEqualStrict:Po,add:Mo,addN:Co,addStrict:Oo,atan2:Io,div:No,divStrict:Ao,floorDiv:Ro,maximum:Do,maximumStrict:jo,minimum:Lo,minimumStrict:Fo,mod:zo,modStrict:Bo,mul:Uo,mulStrict:Vo,pow:qo,powStrict:Wo,squaredDifference:Go,squaredDifferenceStrict:Ho,sub:$o,subStrict:Ko,elu:es,leakyRelu:ns,prelu:rs,relu:is,selu:as,logicalAnd:Xo,logicalNot:Yo,logicalOr:Jo,logicalXor:Zo,where:Qo,whereAsync:ts,buffer:yi,toPixels:function(t,e){return l(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l,f,h,p,d,m,g,v,y,b,_,x,w;return c(this,function(c){switch(c.label){case 0:if(2!==(n=Vt(t,"img","toPixels","int32")).rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],a=r[1],(o=2===n.rank?1:n.shape[2])>4||2===o)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return s=n.min(),u=n.max(),[4,s.data()];case 1:return l=c.sent()[0],[4,u.data()];case 2:if(f=c.sent()[0],s.dispose(),u.dispose(),"float32"===n.dtype){if(l<0||f>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+l+" - "+f+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(l<0||f>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+l+" - "+f+"].")}return[4,n.data()];case 3:for(h=c.sent(),p="float32"===n.dtype?255:1,d=new Uint8ClampedArray(a*i*4),m=0;m<i*a;++m)g=void 0,v=void 0,y=void 0,b=void 0,1===o?(g=h[m]*p,v=h[m]*p,y=h[m]*p,b=255):3===o?(g=h[3*m]*p,v=h[3*m+1]*p,y=h[3*m+2]*p,b=255):4===o&&(g=h[4*m]*p,v=h[4*m+1]*p,y=h[4*m+2]*p,b=h[4*m+3]*p),d[0+(_=4*m)]=Math.round(g),d[_+1]=Math.round(v),d[_+2]=Math.round(y),d[_+3]=Math.round(b);return null!=e&&(e.width=a,e.height=i,x=e.getContext("2d"),w=new ImageData(d,a,i),x.putImageData(w,0,0)),n!==t&&n.dispose(),[2,d]}})})},print:function(t,e){void 0===e&&(e=!1),console.log(t.toString(e))},batchToSpaceND:bi,cast:_i,clone:xi,cumsum:wi,depthToSpace:Si,expandDims:Ei,eye:ki,fromPixels:Ti,multinomial:Pi,oneHot:Mi,pad:Ci,pad1d:Oi,pad2d:Ii,pad3d:Ni,pad4d:Ai,rand:Ri,randomNormal:Di,randomUniform:ji,reshape:Li,spaceToBatchND:Fi,squeeze:zi,stack:Bi,tile:Ui,truncatedNormal:Vi,unstack:qi,fill:re,linspace:ie,ones:ee,range:ae,scalar:Yt,tensor:Xt,tensor1d:Jt,tensor2d:Zt,tensor3d:Qt,tensor4d:te,tensor5d:function(t,e,n){if(void 0===n&&(n="float32"),g(t),null!=e&&5!==e.length)throw new Error("tensor5d() requires shape to have five numbers");var r=y(t);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Xt(t,e=e||r,n)},tensor6d:function(t,e,n){if(void 0===n&&(n="float32"),g(t),null!=e&&6!==e.length)throw new Error("tensor6d() requires shape to have six numbers");var r=y(t);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==e)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return Xt(t,e=e||r,n)},zeros:ne,onesLike:he,zerosLike:pe,transpose:os,softmax:Gt,localResponseNormalization:ss,norm:us,gather:fs,unsortedSegmentSum:hs,basicLSTMCell:ps,multiRNNCell:ds,movingAverage:ms,stridedSlice:gs,topk:ys}),Us=function(){function t(){this.blockSize=48,this.firstUse=!0,vt.get("IS_BROWSER")&&(this.canvas=document.createElement("canvas"))}return t.prototype.setDataMover=function(t){this.data=new ve(t)},t.prototype.register=function(t,e,n){if(this.firstUse&&(this.firstUse=!1,vt.get("IS_NODE")&&wt("\n============================\nHi there \ud83d\udc4b. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(t))throw new Error("Data buffer is already registered");this.data.set(t,{dtype:n})},t.prototype.write=function(t,e){if(null==e)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(t).values=e},t.prototype.fromPixels=function(t,e){if(null==t)throw new Error("pixels passed to tf.fromPixels() can not be null");var n,r;if(vt.get("IS_NODE")&&null==t.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=t.getContext)n=t.getContext("2d").getImageData(0,0,t.width,t.height).data;else if(t instanceof ImageData)n=t.data;else{if(!(t instanceof HTMLImageElement||t instanceof HTMLVideoElement))throw new Error("pixels passed to tf.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement or ImageData, but was "+t.constructor.name);if(null==this.canvas)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.canvas.width=t.width,this.canvas.height=t.height,this.canvas.getContext("2d").drawImage(t,0,0,t.width,t.height),n=this.canvas.getContext("2d").getImageData(0,0,t.width,t.height).data}if(4===e)r=new Int32Array(n);else{var i=t.width*t.height;r=new Int32Array(i*e);for(var a=0;a<i;a++)for(var o=0;o<e;++o)r[a*e+o]=n[4*a+o]}return Qt(r,[t.height,t.width,e],"int32")},t.prototype.read=function(t){return l(this,void 0,void 0,function(){return c(this,function(e){return[2,this.readSync(t)]})})},t.prototype.readSync=function(t){var e=this.data.get(t),n=e.dtype,r=e.complexTensors;return"complex64"===n?_e(r.real.dataSync(),r.imag.dataSync()):this.data.get(t).values},t.prototype.disposeData=function(t){if(this.data.has(t)){var e=this.data.get(t).complexTensors;null!=e&&(e.real.dispose(),e.imag.dispose()),this.data.delete(t)}},t.prototype.time=function(t){return l(this,void 0,void 0,function(){var e;return c(this,function(n){return e=B(),t(),[2,{kernelMs:B()-e}]})})},t.prototype.memory=function(){return{unreliable:!0}},t.prototype.complex=function(t,e){var n=tt.make(t.shape,{},"complex64");return this.data.get(n.dataId).complexTensors={real:vt.engine.keep(t.clone()),imag:vt.engine.keep(e.clone())},n},t.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},t.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},t.prototype.assertNotComplex=function(t,e){Array.isArray(t)||(t=[t]),t.forEach(function(t){null!=t&&d("complex64"!==t.dtype,e+" does not support complex64 tensors.")})},t.prototype.slice=function(t,e,n){this.assertNotComplex(t,"slice");for(var r=yi(n,t.dtype),i=0;i<r.size;++i){var a=r.indexToLoc(i),o=a.map(function(t,n){return t+e[n]});r.set.apply(r,[t.get.apply(t,o)].concat(a))}return r.toTensor()},t.prototype.stridedSlice=function(t,e,n,r,i,a,o,s,u){this.assertNotComplex(t,"stridedSlice");var l=zt(t.shape,e,n,r,i,a,o,s,u),c=l[0],f=l[1],h=l[2],p=f.filter(function(t,e){return-1===h.indexOf(e)});if(p.some(function(t){return 0===t}))return Xt([],p);for(var d=yi(f,t.dtype),m=0;m<d.size;m++){for(var g=d.indexToLoc(m),v=new Array(g.length),y=0;y<v.length;y++)v[y]=g[y]*r[y]+c[y];d.set.apply(d,[t.get.apply(t,v)].concat(g))}return d.toTensor().reshape(p)},t.prototype.reverse=function(t,e){this.assertNotComplex(t,"reverse");for(var n=yi(t.shape,t.dtype),r=t.buffer(),i=function(i){var a=n.indexToLoc(i),o=a.slice();e.forEach(function(e){return o[e]=t.shape[e]-1-o[e]}),n.set.apply(n,[r.get.apply(r,o)].concat(a))},a=0;a<n.size;a++)i(a);return n.toTensor()},t.prototype.concat=function(t,e){this.assertNotComplex(t,"concat");var n=t.map(function(t){var n=b(t.shape.slice(e));return t.as2D(-1,n)}),r=jt(n.map(function(t){return t.shape}),1),i=yi(r,t[0].dtype).values;if(1===n[0].shape[0]){var a=0;n.forEach(function(t){i.set(t.dataSync(),a),a+=t.size})}else{var o=0;n.forEach(function(t){for(var e=t.dataSync(),n=0,a=0;a<t.shape[0];++a)for(var s=a*r[1]+o,u=0;u<t.shape[1];++u)i[s+u]=e[n++];o+=t.shape[1]})}var s=jt(t.map(function(t){return t.shape}),e);return Xt(i,s,t[0].dtype)},t.prototype.neg=function(t){return this.assertNotComplex(t,"neg"),this.multiply(Yt(-1),t)},t.prototype.add=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t+n,imag:e+r}}):this.broadcastedBinaryOp(t,e,me(t.dtype,e.dtype),function(t,e){return t+e})},t.prototype.addN=function(t){this.assertNotComplex(t,"addN");for(var e=t.map(function(t){return t.dataSync()}),n=yi(t[0].shape,t[0].dtype),r=n.values,i=0;i<t.length;i++)for(var a=e[i],o=0;o<r.length;o++)r[o]+=a[o];return n.toTensor()},t.prototype.subtract=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t-n,imag:e-r}}):this.broadcastedBinaryOp(t,e,me(t.dtype,e.dtype),function(t,e){return t-e})},t.prototype.pow=function(t,e){return this.assertNotComplex([t,e],"pow"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.pow(t,e)})},t.prototype.batchMatMul=function(t,e,n,r){this.assertNotComplex([t,e],"matMul");for(var i=n?t.shape[1]:t.shape[2],a=n?t.shape[2]:t.shape[1],o=r?e.shape[1]:e.shape[2],s=t.shape[0],u=t.dataSync(),l=e.dataSync(),c=n?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],f=c[0],h=c[1],p=c[2],d=r?[1,e.strides[1],e.strides[0]]:[e.strides[1],1,e.strides[0]],m=d[0],g=d[1],v=d[2],y=a*o,b=new Float32Array(s*y),_=this.blockSize,x=0;x<s;x++)for(var w=0;w<a;w+=_)for(var S=0;S<o;S+=_)for(var E=0;E<i;E+=_)for(var k=Math.min(w+_,a),T=Math.min(S+_,o),P=Math.min(E+_,i),M=w;M<k;M++)for(var C=S;C<T;C++){for(var O=0,I=E;I<P;I++)O+=u[x*f+M*h+I*p]*l[I*m+C*g+x*v];b[x*y+(M*o+C)]+=O}return Qt(b,[s,a,o])},t.prototype.multiply=function(t,e){return"complex64"===t.dtype||"complex64"===e.dtype?this.broadcastedBinaryComplexOp(t.cast("complex64"),e.cast("complex64"),function(t,e,n,r){return{real:t*n-e*r,imag:t*r+e*n}}):this.broadcastedBinaryOp(t,e,me(t.dtype,e.dtype),function(t,e){return t*e})},t.prototype.realDivide=function(t,e){return this.assertNotComplex([t,e],"realDivide"),this.broadcastedBinaryOp(t,e,"float32",function(t,e){return t/e})},t.prototype.floorDiv=function(t,e){return this.assertNotComplex([t,e],"floorDiv"),this.broadcastedBinaryOp(t,e,"int32",function(t,e){return Math.floor(t/e)})},t.prototype.sum=function(t,e){this.assertNotComplex(t,"sum"),Nt("sum",e,t.rank);for(var n=Ct(t.shape,e),r=n[0],i=n[1],a=ne(r,me(t.dtype,"int32")),o=b(i),s=a.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=0,h=0;h<o;++h)f+=u[c+h];s[l]=f}return a},t.prototype.unsortedSegmentSum=function(t,e,n){this.assertNotComplex(t,"unsortedSegmentSum");for(var r=[],i=t.rank-e.rank,a=0;a<i;++a)e=e.expandDims(a+1);for(a=0;a<n;++a){var o=Yt(a,"int32"),s=go(o,e).asType("float32").mul(t).sum(0);r.push(s)}return Bi(r)},t.prototype.argMin=function(t,e){this.assertNotComplex(t,"argMin");var n=[e];Nt("argMin",n,t.rank);for(var r=Ct(t.shape,n),i=r[0],a=r[1],o=ne(i,"int32"),s=b(a),u=o.dataSync(),l=t.dataSync(),c=0;c<u.length;++c){for(var f=c*s,h=l[f],p=0,d=0;d<s;++d){var m=l[f+d];m<h&&(h=m,p=d)}u[c]=p}return o},t.prototype.argMax=function(t,e){this.assertNotComplex(t,"argMax");var n=[e];Nt("argMax",n,t.rank);for(var r=Ct(t.shape,n),i=r[0],a=r[1],o=ne(i,"int32"),s=b(a),u=o.dataSync(),l=t.dataSync(),c=0;c<u.length;++c){for(var f=c*s,h=l[f],p=0,d=0;d<s;++d){var m=l[f+d];m>h&&(h=m,p=d)}u[c]=p}return o},t.prototype.cumsum=function(t,e,n,r){if(this.assertNotComplex(t,"cumsum"),e!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+e);for(var i=me(t.dtype,"int32"),a=ne(t.shape,i),o=a.dataSync(),s=t.dataSync(),u=t.shape[t.rank-1],l=r?function(t,e){return t+u-e-1}:function(t,e){return t+e},c=0;c<s.length;c+=u)for(var f=0;f<u;f++){var h=l(c,f);if(0===f)o[h]=n?0:s[h];else{var p=l(c,f-1);o[h]=n?s[p]+o[p]:s[h]+o[p]}}return a},t.prototype.equal=function(t,e){return this.assertNotComplex([t,e],"equal"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t===e?1:0})},t.prototype.notEqual=function(t,e){return this.assertNotComplex([t,e],"notEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t!==e?1:0})},t.prototype.less=function(t,e){return this.assertNotComplex([t,e],"less"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<e?1:0})},t.prototype.lessEqual=function(t,e){return this.assertNotComplex([t,e],"lessEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t<=e?1:0})},t.prototype.greater=function(t,e){return this.assertNotComplex([t,e],"greater"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>e?1:0})},t.prototype.greaterEqual=function(t,e){return this.assertNotComplex([t,e],"greaterEqual"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t>=e?1:0})},t.prototype.logicalNot=function(t){this.assertNotComplex(t,"logicalNot");for(var e=t.dataSync(),n=new Int32Array(e.length),r=0;r<e.length;++r)n[r]=e[r]?0:1;return tt.make(t.shape,{values:n},"bool")},t.prototype.logicalAnd=function(t,e){return this.assertNotComplex([t,e],"logicalAnd"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t&&e})},t.prototype.logicalOr=function(t,e){return this.assertNotComplex([t,e],"logicalOr"),this.broadcastedBinaryOp(t,e,"bool",function(t,e){return t||e})},t.prototype.select=function(t,e,n){this.assertNotComplex([t,e,n],"select");for(var r=t.dataSync(),i=e.dataSync(),a=n.dataSync(),o=ne(e.shape,me(e.dtype,n.dtype)),s=o.dataSync(),u=0,l=0===t.rank||t.rank>1||1===e.rank?1:e.shape[1],c=0;c<r.length;c++)for(var f=0;f<l;f++)1===r[c]?s[u++]=i[c]:s[u++]=a[c];return o},t.prototype.where=function(t){this.assertNotComplex([t],"where");var e=t.dataSync();return Wi(t.shape,e)},t.prototype.topk=function(t,e,n){return this.assertNotComplex(t,"topk"),Ee(t.dataSync(),t.shape,t.dtype,e)},t.prototype.min=function(t,e){this.assertNotComplex(t,"min"),Nt("min",e,t.rank);for(var n=Ct(t.shape,e),r=n[0],i=n[1],a=ne(r,t.dtype),o=b(i),s=a.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=u[c],h=0;h<o;++h){var p=u[c+h];p<f&&(f=p)}s[l]=f}return a},t.prototype.minimum=function(t,e){return this.assertNotComplex([t,e],"minimum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.min(t,e)})},t.prototype.mod=function(t,e){return this.assertNotComplex([t,e],"mod"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e})},t.prototype.max=function(t,e){this.assertNotComplex(t,"max"),Nt("max",e,t.rank);for(var n=Ct(t.shape,e),r=n[0],i=n[1],a=ne(r,t.dtype),o=b(i),s=a.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=u[c],h=0;h<o;++h){var p=u[c+h];p>f&&(f=p)}s[l]=f}return a},t.prototype.maximum=function(t,e){return this.assertNotComplex([t,e],"maximum"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.max(t,e)})},t.prototype.all=function(t,e){this.assertNotComplex(t,"all"),Nt("all",e,t.rank);for(var n=Ct(t.shape,e),r=n[0],i=n[1],a=ne(r,t.dtype),o=b(i),s=a.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=u[c],h=0;h<o;++h){var p=u[c+h];f=f&&p}s[l]=f}return a},t.prototype.any=function(t,e){this.assertNotComplex(t,"any"),Nt("any",e,t.rank);for(var n=Ct(t.shape,e),r=n[0],i=n[1],a=ne(r,t.dtype),o=b(i),s=a.dataSync(),u=t.dataSync(),l=0;l<s.length;++l){for(var c=l*o,f=u[c],h=0;h<o;++h){var p=u[c+h];f=f||p}s[l]=f}return a},t.prototype.squaredDifference=function(t,e){return this.assertNotComplex([t,e],"squaredDifference"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){var n=t-e;return n*n})},t.prototype.ceil=function(t){this.assertNotComplex(t,"ceil");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.ceil(e[r]);return tt.make(t.shape,{values:n})},t.prototype.floor=function(t){this.assertNotComplex(t,"floor");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.floor(e[r]);return tt.make(t.shape,{values:n})},t.prototype.sign=function(t){this.assertNotComplex(t,"x");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)e[r]<0?n[r]=-1:e[r]>0?n[r]=1:n[r]=0;return tt.make(t.shape,{values:n})},t.prototype.round=function(t){this.assertNotComplex(t,"round");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=Math.floor(e[r]);e[r]-i<.5?n[r]=Math.floor(e[r]):e[r]-i>.5?n[r]=Math.ceil(e[r]):n[r]=i%2==0?i:i+1}return tt.make(t.shape,{values:n})},t.prototype.exp=function(t){this.assertNotComplex(t,"exp");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.exp(e[r]);return tt.make(t.shape,{values:n})},t.prototype.expm1=function(t){this.assertNotComplex(t,"expm1");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=Math.expm1(e[r]);return tt.make(t.shape,{values:n})},t.prototype.log=function(t){this.assertNotComplex(t,"log");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=Math.log(i)}return tt.make(t.shape,{values:n})},t.prototype.log1p=function(t){this.assertNotComplex(t,"log1p");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=Math.log1p(i)}return tt.make(t.shape,{values:n})},t.prototype.sqrt=function(t){this.assertNotComplex(t,"sqrt");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=Math.sqrt(i)}return tt.make(t.shape,{values:n})},t.prototype.rsqrt=function(t){this.assertNotComplex(t,"rsqrt");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=1/Math.sqrt(i)}return tt.make(t.shape,{values:n})},t.prototype.square=function(t){this.assertNotComplex(t,"square");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r){var i=e[r];n[r]=i*i}return tt.make(t.shape,{values:n})},t.prototype.reciprocal=function(t){this.assertNotComplex(t,"reciprocal");for(var e=t.dataSync(),n=new Float32Array(e.length),r=0;r<e.length;++r)n[r]=1/e[r];return tt.make(t.shape,{values:n})},t.prototype.relu=function(t){this.assertNotComplex(t,"relu");for(var e=ne(t.shape,t.dtype),n=e.dataSync(),r=t.dataSync(),i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return e},t.prototype.elu=function(t){this.assertNotComplex(t,"elu");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var i=n[r];e[r]=i>=0?i:Math.exp(i)-1}return tt.make(t.shape,{values:e})},t.prototype.eluDer=function(t,e){this.assertNotComplex([t,e],"eluDer");for(var n=new Float32Array(e.size),r=e.dataSync(),i=t.dataSync(),a=0;a<r.length;++a){var o=r[a];n[a]=o>=1?i[a]:i[a]*(o+1)}return tt.make(e.shape,{values:n})},t.prototype.selu=function(t){this.assertNotComplex(t,"selu");for(var e=Wr,n=Gr,r=new Float32Array(t.size),i=t.dataSync(),a=0;a<i.length;++a){var o=i[a];r[a]=o>=0?n*o:e*(Math.exp(o)-1)}return tt.make(t.shape,{values:r})},t.prototype.clip=function(t,e,n){this.assertNotComplex(t,"clip");for(var r=new Float32Array(t.size),i=t.dataSync(),a=0;a<i.length;++a){var o=i[a];r[a]=o>n?n:o<e?e:o}return tt.make(t.shape,{values:r})},t.prototype.abs=function(t){this.assertNotComplex(t,"abs");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.abs(n[r]);return tt.make(t.shape,{values:e})},t.prototype.int=function(t){this.assertNotComplex(t,"int");for(var e=new Int32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=n[r];return tt.make(t.shape,{values:e},"int32")},t.prototype.sigmoid=function(t){this.assertNotComplex(t,"sigmoid");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=1/(1+Math.exp(-n[r]));return tt.make(t.shape,{values:e})},t.prototype.softplus=function(t){this.assertNotComplex(t,"softplus");for(var e=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(t.size),r=t.dataSync(),i=0;i<r.length;++i){var a,o=r[i]>-e,s=r[i]<e,u=Math.exp(r[i]);a=s?u:o?r[i]:Math.log(1+u),n[i]=a}return tt.make(t.shape,{values:n})},t.prototype.sin=function(t){this.assertNotComplex(t,"sin");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.sin(n[r]);return tt.make(t.shape,{values:e})},t.prototype.cos=function(t){this.assertNotComplex(t,"cos");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.cos(n[r]);return tt.make(t.shape,{values:e})},t.prototype.tan=function(t){this.assertNotComplex(t,"tan");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.tan(n[r]);return tt.make(t.shape,{values:e})},t.prototype.asin=function(t){this.assertNotComplex(t,"asin");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.asin(n[r]);return tt.make(t.shape,{values:e})},t.prototype.acos=function(t){this.assertNotComplex(t,"acos");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.acos(n[r]);return tt.make(t.shape,{values:e})},t.prototype.atan=function(t){this.assertNotComplex(t,"atan");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.atan(n[r]);return tt.make(t.shape,{values:e})},t.prototype.atan2=function(t,e){return this.assertNotComplex([t,e],"atan2"),this.broadcastedBinaryOp(t,e,t.dtype,function(t,e){return Math.atan2(t,e)})},t.prototype.sinh=function(t){this.assertNotComplex(t,"sinh");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.sinh(n[r]);return tt.make(t.shape,{values:e})},t.prototype.cosh=function(t){this.assertNotComplex(t,"cosh");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.cosh(n[r]);return tt.make(t.shape,{values:e})},t.prototype.tanh=function(t){this.assertNotComplex(t,"tanh");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=w(n[r]);return tt.make(t.shape,{values:e})},t.prototype.asinh=function(t){this.assertNotComplex(t,"asinh");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.asinh(n[r]);return tt.make(t.shape,{values:e})},t.prototype.acosh=function(t){this.assertNotComplex(t,"acosh");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.acosh(n[r]);return tt.make(t.shape,{values:e})},t.prototype.atanh=function(t){this.assertNotComplex(t,"atanh");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r)e[r]=Math.atanh(n[r]);return tt.make(t.shape,{values:e})},t.prototype.erf=function(t){this.assertNotComplex(t,"erf");for(var e=new Float32Array(t.size),n=t.dataSync(),r=0;r<n.length;++r){var i=n[r],a=1/(1+.3275911*i);e[r]=1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-i*i)}return tt.make(t.shape,{values:e})},t.prototype.step=function(t,e){void 0===e&&(e=0),this.assertNotComplex(t,"step");for(var n=new Float32Array(t.size),r=t.dataSync(),i=0;i<r.length;++i){var a=r[i];isNaN(a)?n[i]=NaN:n[i]=a>0?1:e}return tt.make(t.shape,{values:n})},t.prototype.conv2d=function(t,e,n){this.assertNotComplex([t,e],"conv2d");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=yi(n.outShape,t.dtype),c=t.dataSync(),f=e.dataSync(),h=l.values,p=0;p<n.batchSize;++p)for(var d=p*t.strides[0],m=p*l.strides[0],g=0;g<n.outHeight;++g)for(var v=m+g*l.strides[1],y=g*n.strideHeight-s,b=0;b<r;b++){var _=y+b*a;if(!(_<0||_>=n.inHeight))for(var x=b*e.strides[0],w=d+_*t.strides[1],S=0;S<n.outWidth;++S)for(var E=v+S*n.outChannels,k=S*n.strideWidth-u,T=0;T<i;T++){var P=k+T*o;if(!(P<0||P>=n.inWidth))for(var M=x+T*e.strides[1],C=w+P*n.inChannels,O=M,I=0;I<n.inChannels;++I){for(var N=c[C+I],A=0;A<n.outChannels;++A)h[E+A]+=N*f[O+A];O+=n.outChannels}}}return l.toTensor()},t.prototype.conv2dDerInput=function(t,e,n){this.assertNotComplex([t,e],"conv2dDerInput");for(var r=yi(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],s=a[1],u=a[2],l=t.dataSync(),c=t.strides,f=c[0],h=c[1],p=c[2],d=e.dataSync(),m=e.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,_=n.filterHeight,x=n.filterWidth,w=n.inChannels,S=n.inHeight,E=n.inWidth,k=n.outChannels,T=n.outHeight,P=n.outWidth,M=n.strideHeight,C=n.strideWidth,O=_-1-n.padInfo.top,I=x-1-n.padInfo.left,N=0;N<b;++N)for(var A=0;A<w;++A)for(var R=0;R<S;++R)for(var D=R-O,j=Math.max(0,Math.ceil(D/M)),L=Math.min(T,(_+D)/M),F=0;F<E;++F){for(var z=F-I,B=Math.max(0,Math.ceil(z/C)),U=Math.min(P,(x+z)/C),V=0,q=j;q<L;++q)for(var W=q*M-D,G=B;G<U;++G)for(var H=f*N+h*q+p*G,$=g*(_-1-W)+v*(x-1-(G*C-z))+y*A,K=0;K<k;++K)V+=l[H+K]*d[$+K];i[o*N+s*R+u*F+A]=V}return r.toTensor()},t.prototype.conv2dDerFilter=function(t,e,n){this.assertNotComplex([t,e],"conv2dDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=yi(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=0;c<a;++c)for(var f=Math.max(0,Math.ceil((l-c)/r)),h=Math.min(n.outHeight,(n.inHeight+l-c)/r),p=0;p<o;++p)for(var d=Math.max(0,Math.ceil((u-p)/i)),m=Math.min(n.outWidth,(n.inWidth+u-p)/i),g=0;g<n.inChannels;++g)for(var v=0;v<n.outChannels;++v){for(var y=0,b=0;b<n.batchSize;++b)for(var _=f;_<h;++_)for(var x=c+_*r-l,w=d;w<m;++w){var S=p+w*i-u;y+=t.get(b,x,S,g)*e.get(b,_,w,v)}s.set(y,c,p,g,v)}return s.toTensor()},t.prototype.depthwiseConv2D=function(t,e,n){this.assertNotComplex([t,e],"depthwiseConv2D");for(var r=n.filterHeight,i=n.filterWidth,a=n.dilationHeight,o=n.dilationWidth,s=n.padInfo.left,u=n.padInfo.top,l=n.outChannels/n.inChannels,c=yi(n.outShape,t.dtype),f=t.dataSync(),h=e.dataSync(),p=c.values,d=0;d<n.batchSize;++d)for(var m=d*t.strides[0],g=d*c.strides[0],v=0;v<n.outHeight;++v)for(var y=g+v*c.strides[1],b=v*n.strideHeight-s,_=0;_<r;++_){var x=b+_*a;if(!(x<0||x>=n.inHeight))for(var w=_*e.strides[0],S=m+x*t.strides[1],E=0;E<n.outWidth;++E)for(var k=y+E*c.strides[2],T=E*n.strideWidth-u,P=0;P<i;++P){var M=T+P*o;if(!(M<0||M>=n.inWidth))for(var C=w+P*e.strides[1],O=S+M*n.inChannels,I=k,N=C,A=0;A<n.inChannels;++A){for(var R=f[O+A],D=0;D<l;++D)p[I+D]+=R*h[N+D];I+=l,N+=l}}}return c.toTensor()},t.prototype.depthwiseConv2DDerInput=function(t,e,n){this.assertNotComplex([t,e],"depthwiseConv2DDerInput");for(var r=yi(n.inShape,"float32"),i=r.values,a=r.strides,o=a[0],s=a[1],u=a[2],l=t.dataSync(),c=t.strides,f=c[0],h=c[1],p=c[2],d=e.dataSync(),m=e.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,_=n.filterHeight,x=n.filterWidth,w=n.inChannels,S=n.inHeight,E=n.inWidth,k=n.outChannels,T=n.outHeight,P=n.outWidth,M=n.strideHeight,C=n.strideWidth,O=_-1-n.padInfo.top,I=x-1-n.padInfo.left,N=k/w,A=0;A<b;++A)for(var R=0;R<w;++R)for(var D=0;D<S;++D)for(var j=D-O,L=Math.max(0,Math.ceil(j/M)),F=Math.min(T,(_+j)/M),z=0;z<E;++z){for(var B=z-I,U=Math.max(0,Math.ceil(B/C)),V=Math.min(P,(x+B)/C),q=0,W=L;W<F;++W)for(var G=W*M-j,H=U;H<V;++H)for(var $=f*A+h*W+p*H,K=g*(_-1-G)+v*(x-1-(H*C-B))+y*R,X=0;X<N;++X)q+=l[$+(R*N+X)]*d[K+X];i[o*A+s*D+u*z+R]=q}return r.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(t,e,n){this.assertNotComplex([t,e],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=yi(n.filterShape,"float32"),u=n.padInfo.left,l=n.padInfo.top,c=n.outChannels/n.inChannels,f=0;f<a;++f)for(var h=Math.max(0,Math.ceil((l-f)/r)),p=Math.min(n.outHeight,(n.inHeight+l-f)/r),d=0;d<o;++d)for(var m=Math.max(0,Math.ceil((u-d)/i)),g=Math.min(n.outWidth,(n.inWidth+u-d)/i),v=0;v<n.outChannels;++v){for(var y=Math.trunc(v/c),b=v%c,_=0,x=0;x<n.batchSize;++x)for(var w=h;w<p;++w)for(var S=f+w*r-l,E=m;E<g;++E){var k=d+E*i-u;_+=t.get(x,S,k,y)*e.get(x,w,E,v)}s.set(_,f,d,y,b)}return s.toTensor()},t.prototype.tile=function(t,e){this.assertNotComplex(t,"tile");for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=yi(n,t.dtype),a=t.buffer();for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),s=new Array(t.rank),u=0;u<s.length;u++)s[u]=o[u]%t.shape[u];var l=a.locToIndex(s);i.values[r]=a.values[l]}return i.toTensor()},t.prototype.pad=function(t,e,n){this.assertNotComplex(t,"pad");var r=e.map(function(e,n){return e[0]+t.shape[n]+e[1]}),i=e.map(function(t){return t[0]}),a=t.buffer(),o=yi(r,t.dtype);0!==n&&o.values.fill(n);for(var s=0;s<t.size;s++){var u=a.indexToLoc(s),l=u.map(function(t,e){return t+i[e]});o.set.apply(o,[t.get.apply(t,u)].concat(l))}return o.toTensor()},t.prototype.transpose=function(t,e){this.assertNotComplex(t,"transpose");for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[e[r]];var i=t.dataSync(),a=yi(n,t.dtype),o=t.buffer();for(r=0;r<t.size;++r){for(var s=o.indexToLoc(r),u=new Array(s.length),l=0;l<u.length;l++)u[l]=s[e[l]];var c=a.locToIndex(u);a.values[c]=i[r]}return a.toTensor()},t.prototype.gather=function(t,e,n){this.assertNotComplex([t,e],"gather");var r=t.shape.slice(),i=e.dataSync();r[n]=i.length;for(var a=yi(r,t.dtype),o=t.buffer(),s=0;s<a.size;++s){var u=a.indexToLoc(s),l=u.slice();l[n]=i[u[n]];var c=o.locToIndex(l);a.values[s]=o.values[c]}return a.toTensor()},t.prototype.batchToSpaceND=function(t,e,n){this.assertNotComplex([t],"batchToSpaceND");var r=e.reduce(function(t,e){return t*e}),i=St(t.shape,e,r),a=Et(i.length,e.length),o=kt(t.shape,e,r),s=Tt(n,e.length),u=Pt(o,n,e.length);return t.reshape(i).transpose(a).reshape(o).slice(s,u)},t.prototype.spaceToBatchND=function(t,e,n){this.assertNotComplex([t],"spaceToBatchND");var r=e.reduce(function(t,e){return t*e}),i=[[0,0]];i.push.apply(i,n);for(var a=1+e.length;a<t.shape.length;++a)i.push([0,0]);var o=t.pad(i),s=St(o.shape,e,r,!1),u=Et(s.length,e.length,!1),l=kt(o.shape,e,r,!1);return o.reshape(s).transpose(u).reshape(l)},t.prototype.pool=function(t,e,n){this.assertNotComplex(t,"pool");for(var r=e.strideHeight,i=e.strideWidth,a=e.filterHeight,o=e.filterWidth,s=yi(e.outShape,"float32"),u=e.padInfo.top,l=e.padInfo.left,c="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=0;f<e.batchSize;++f)for(var h=0;h<e.inChannels;++h)for(var p=0;p<e.outHeight;++p)for(var d=p*r-u,m=Math.max(0,d),g=Math.min(e.inHeight,a+d),v=0;v<e.outWidth;++v){for(var y=v*i-l,b=Math.max(0,y),_=Math.min(e.inWidth,o+y),x=c,w=0,S=0,E=m;E<g;++E){for(var k=b;k<_;++k){var T=t.get(f,E,k,h);"max"===n&&T>x?x=T:"avg"===n&&(w+=T,S++)}if(isNaN(x))break}s.set("avg"===n?w/S:x,f,p,v,h)}return s.toTensor()},t.prototype.maxPool=function(t,e){return this.pool(t,e,"max")},t.prototype.maxPoolPositions=function(t,e){for(var n=yi(e.outShape,"int32"),r=e.strideHeight,i=e.strideWidth,a=e.filterHeight,o=e.filterWidth,s=e.padInfo.top,u=e.padInfo.left,l=0;l<e.batchSize;++l)for(var c=0;c<e.inChannels;++c)for(var f=0;f<e.outHeight;++f)for(var h=f*r-s,p=Math.max(0,h),d=Math.min(e.inHeight,a+h),m=0;m<e.outWidth;++m){for(var g=m*i-u,v=Math.max(0,g),y=Math.min(e.inWidth,o+g),b=Number.NEGATIVE_INFINITY,_=-1,x=p;x<d;++x)for(var w=x-h,S=v;S<y;++S){var E=S-g,k=t.get(l,x,S,c);k>b&&(b=k,_=w*o+E)}n.set(_,l,f,m,c)}return n.toTensor()},t.prototype.maxPoolBackprop=function(t,e,n,r){this.assertNotComplex([e,n],"maxPoolBackprop");for(var i=this.maxPoolPositions(e,r),a=r.strideHeight,o=r.strideWidth,s=r.filterHeight,u=r.filterWidth,l=u-1-r.padInfo.left,c=s-1-r.padInfo.top,f=yi(e.shape,"float32"),h=0;h<r.batchSize;++h)for(var p=0;p<r.inChannels;++p)for(var d=0;d<r.inHeight;++d)for(var m=0;m<r.inWidth;++m){for(var g=d-c,v=m-l,y=0,b=0;b<s;++b){var _=(g+b)/a;if(!(_<0||_>=r.outHeight||Math.floor(_)!==_))for(var x=0;x<u;++x){var w=(v+x)/o;if(!(w<0||w>=r.outWidth||Math.floor(w)!==w)){var S=s*u-1-i.get(h,_,w,p)===b*u+x?1:0;0!==S&&(y+=t.get(h,_,w,p)*S)}}}f.set(y,h,d,m,p)}return f.toTensor()},t.prototype.avgPoolBackprop=function(t,e,n){this.assertNotComplex([t,e],"avgPoolBackprop");for(var r=n.strideHeight,i=n.strideWidth,a=n.filterHeight,o=n.filterWidth,s=o-1-n.padInfo.left,u=a-1-n.padInfo.top,l=yi(e.shape,"float32"),c=1/(a*o),f=0;f<n.batchSize;++f)for(var h=0;h<n.inChannels;++h)for(var p=0;p<n.inHeight;++p)for(var d=0;d<n.inWidth;++d){for(var m=p-u,g=d-s,v=0,y=0;y<a;++y){var b=(m+y)/r;if(!(b<0||b>=n.outHeight||Math.floor(b)!==b))for(var _=0;_<o;++_){var x=(g+_)/i;x<0||x>=n.outWidth||Math.floor(x)!==x||(v+=t.get(f,b,x,h))}}l.set(v*c,f,p,d,h)}return l.toTensor()},t.prototype.cast=function(t,e){return ye(t,e,this)},t.prototype.reshape=function(t,e){return be(t,e)},t.prototype.avgPool=function(t,e){return this.assertNotComplex(t,"avgPool"),this.pool(t,e,"avg").toFloat()},t.prototype.resizeBilinear=function(t,e,n,r){this.assertNotComplex(t,"resizeBilinear");for(var i=t.shape,a=i[0],o=i[1],s=i[2],u=i[3],l=yi([a,e,n,u],t.dtype),c=[r&&e>1?o-1:o,r&&n>1?s-1:s],f=[r&&e>1?e-1:e,r&&n>1?n-1:n],h=0;h<a;h++)for(var p=0;p<e;p++)for(var d=0;d<n;d++)for(var m=0;m<u;m++){var g=c[0]*p/f[0],v=c[1]*d/f[1],y=Math.floor(g),b=Math.min(o-1,Math.ceil(g)),_=Math.floor(v),x=Math.min(s-1,Math.ceil(v)),w=t.get(h,y,_,m),S=t.get(h,b,_,m),E=v-_,k=w+(t.get(h,y,x,m)-w)*E,T=k+(S+(t.get(h,b,x,m)-S)*E-k)*(g-y);l.set(T,h,p,d,m)}return l.toTensor()},t.prototype.resizeBilinearBackprop=function(t,e,n){this.assertNotComplex([t,e],"resizeBilinearBackprop");for(var r=e.shape,i=r[0],a=r[1],o=r[2],s=r[3],u=t.shape,l=u[1],c=u[2],f=yi([i,a,o,s],e.dtype),h=[n&&l>1?a-1:a,n&&c>1?o-1:o],p=[n&&l>1?l-1:l,n&&c>1?c-1:c],d=h[0]/p[0],m=h[1]/p[1],g=0;g<i;g++)for(var v=0;v<l;v++)for(var y=v*d,b=Math.floor(y),_=Math.min(Math.ceil(y),a-1),x=y-b,w=1-x,S=0;S<c;S++)for(var E=S*m,k=Math.floor(E),T=Math.min(Math.ceil(E),o-1),P=E-k,M=1-P,C=0;C<s;C++){var O=t.get(g,v,S,C),I=f.get(g,b,k,C);I+=O*w*M,f.set(I,g,b,k,C);var N=f.get(g,b,T,C);N+=O*w*P,f.set(N,g,b,T,C);var A=f.get(g,_,k,C);A+=O*x*M,f.set(A,g,_,k,C);var R=f.get(g,_,T,C);R+=O*x*P,f.set(R,g,_,T,C)}return f.toTensor()},t.prototype.resizeNearestNeighbor=function(t,e,n,r){this.assertNotComplex(t,"resizeNearestNeighbor");for(var i=t.shape,a=i[0],o=i[1],s=i[2],u=i[3],l=yi([a,e,n,u],t.dtype),c=[r&&e>1?o-1:o,r&&n>1?s-1:s],f=[r&&e>1?e-1:e,r&&n>1?n-1:n],h=0;h<a;h++)for(var p=0;p<e;p++)for(var d=0;d<n;d++)for(var m=0;m<u;m++){var g=c[0]*p/f[0],v=c[1]*d/f[1],y=Math.min(o-1,r?Math.round(g):Math.floor(g)),b=Math.min(s-1,r?Math.round(v):Math.floor(v)),_=t.get(h,y,b,m);l.set(_,h,p,d,m)}return l.toTensor()},t.prototype.resizeNearestNeighborBackprop=function(t,e,n){this.assertNotComplex([t,e],"resizeNearestNeighborBackprop");for(var r=e.shape,i=r[0],a=r[1],o=r[2],s=r[3],u=t.shape,l=u[1],c=u[2],f=yi([i,a,o,s],e.dtype),h=[n&&l>1?a-1:a,n&&c>1?o-1:o],p=[n&&l>1?l-1:l,n&&c>1?c-1:c],d=1/(h[0]/p[0]),m=1/(h[1]/p[1]),g=2*Math.ceil(d)+2,v=2*Math.ceil(m)+2,y=0;y<i;y++)for(var b=0;b<a;b++)for(var _=0;_<o;_++)for(var x=Math.floor(b*d),w=Math.floor(x-g/2),S=Math.floor(_*m),E=Math.floor(S-v/2),k=0;k<s;k++){for(var T=0,P=0;P<g;P++){var M=P+w;if(!(M<0||M>=l))for(var C=0;C<v;C++){var O=C+E;if(!(O<0||O>=c)){var I=h[0]*(M/p[0]),N=h[1]*(O/p[1]),A=Math.min(a-1,n?Math.round(I):Math.floor(I)),R=Math.min(o-1,n?Math.round(N):Math.floor(N));b===A&&_===R&&(T+=t.get(y,M,O,k))}}}f.set(T,y,b,_,k)}return f.toTensor()},t.prototype.batchNormalization=function(t,e,n,r,i,a){this.assertNotComplex([t,e,n,i,a],"batchNormalization");for(var o=t.dataSync(),s=e.dataSync(),u=n.dataSync(),l=i?i.dataSync():new Float32Array([1]),c=a?a.dataSync():new Float32Array([0]),f=new Float32Array(o.length),h=c.length,p=l.length,d=u.length,m=s.length,g=0,v=0,y=0,b=0,_=0;_<o.length;++_)f[_]=c[g++]+(o[_]-s[v++])*l[y++]/Math.sqrt(u[b++]+r),g>=h&&(g=0),v>=m&&(v=0),y>=p&&(y=0),b>=d&&(b=0);return te(f,t.shape)},t.prototype.localResponseNormalization4D=function(t,e,n,r,i){this.assertNotComplex(t,"localResponseNormalization4D");var a=t.shape[3],o=a-1,s=t.dataSync(),u=b(t.shape),l=new Float32Array(u);function c(t){for(var n=t%a,r=t-n+Math.max(0,n-e),i=t-n+Math.min(n+e,o),u=0;r<=i;r++){var l=s[r];u+=l*l}return u}for(var f=0;f<u;f++){var h=c(f),p=s[f]*Math.pow(n+r*h,-i);l[f]=p}return te(l,t.shape)},t.prototype.LRNGrad=function(t,e,n,r,i,a,o){this.assertNotComplex(t,"LRNGrad");for(var s=t.shape[3],u=t.dataSync(),l=e.dataSync(),c=n.dataSync(),f=new Float32Array(b(t.shape)),h=b(t.shape),p=0;p<h;p++){for(var d=p%s,m=p-d+Math.max(0,d-r),g=p-d+Math.min(s,d+r+1),v=0,y=m;y<g;y++)v+=Math.pow(l[y],2);for(v=a*v+i,y=m;y<g;y++){var _=-2*a*o*l[y]*c[p]/v;p===y&&(_+=Math.pow(v,-o)),_*=u[p],f[y]+=_}}return te(f,t.shape)},t.prototype.multinomial=function(t,e,n,r){this.assertNotComplex(t,"multinomial");for(var i=e?t:Gt(t),a=i.shape[0],o=i.shape[1],s=ne([a,n],"int32"),u=s.dataSync(),l=i.dataSync(),c=0;c<a;++c){var f=c*o,h=new Float32Array(o-1);h[0]=l[f];for(var p=1;p<h.length;++p)h[p]=h[p-1]+l[f+p];for(var d=gi(r.toString()),m=c*n,g=0;g<n;++g){var v=d();u[m+g]=h.length;for(var y=0;y<h.length;y++)if(v<h[y]){u[m+g]=y;break}}}return s},t.prototype.oneHot=function(t,e,n,r){this.assertNotComplex(t,"oneHot");var i=new Float32Array(t.size*e);i.fill(r);for(var a=0;a<t.size;++a)t.get(a)>=0&&t.get(a)<e&&(i[a*e+t.get(a)]=n);return Zt(i,[t.size,e],"int32")},t.prototype.nonMaxSuppression=function(t,e,n,r,i){return this.assertNotComplex(t,"nonMaxSuppression"),xe(t.dataSync(),e.dataSync(),n,r,i)},t.prototype.depthToSpace=function(t,e,n){d("NHWC"===n,"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n),d(e>1,"blockSize should be > 1 for depthToSpace, but was: "+e);for(var r=t.shape[0],i=t.shape[1],a=t.shape[2],o=t.shape[3],s=i*e,u=a*e,l=o/(e*e),c=t.dataSync(),f=new Float32Array(r*s*u*l),h=0,p=0;p<r;++p)for(var m=0;m<s;++m)for(var g=Math.floor(m/e),v=m%e,y=0;y<u;++y)for(var b=Math.floor(y/e),_=(v*e+y%e)*l,x=0;x<l;++x){var w=x+_+o*(b+a*(g+i*p));f[h++]=c[w]}return te(f,[r,s,u,l])},t.prototype.broadcastedBinaryOp=function(t,e,n,r){var i=Ce(t.shape,e.shape),a=yi(i,n),o=t.dataSync(),s=e.dataSync(),u=Pe(t.shape,i),l=Pe(e.shape,i),c=a.values;if(u.length+l.length===0)for(var f=0;f<c.length;++f)c[f]=r(o[f%o.length],s[f%s.length]);else{var h=t.buffer(),p=e.buffer(),d=function(n){var i=a.indexToLoc(n),f=i.slice(-t.rank);u.forEach(function(t){return f[t]=0});var d=h.locToIndex(f),m=i.slice(-e.rank);l.forEach(function(t){return m[t]=0});var g=p.locToIndex(m);c[n]=r(o[d],s[g])};for(f=0;f<c.length;++f)d(f)}return a.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(t,e,n){var r=Ce(t.shape,e.shape),i=yi(r,"float32"),a=yi(r,"float32"),o=t.dataSync(),s=e.dataSync(),u=Pe(t.shape,r),l=Pe(e.shape,r),c=i.values,f=a.values;if(u.length+l.length===0)for(var h=0;h<c.length;h++){var p=h%o.length,d=h%s.length,m=n(o[2*p],o[2*p+1],s[2*d],s[2*d+1]);c[h]=m.real,f[h]=m.imag}else{var g=this.data.get(t.dataId).complexTensors.real.buffer(),v=this.data.get(e.dataId).complexTensors.real.buffer(),y=function(r){var a=i.indexToLoc(r),h=a.slice(-t.rank);u.forEach(function(t){return h[t]=0});var p=g.locToIndex(h),d=a.slice(-e.rank);l.forEach(function(t){return d[t]=0});var m=v.locToIndex(d),y=n(o[2*p],o[2*p+1],s[2*m],s[2*m+1]);c[r]=y.real,f[r]=y.imag};for(h=0;h<c.length;h++)y(h)}return this.complex(i.toTensor(),a.toTensor())},t.prototype.split=function(t,e,n){return Se(t,e,n)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.cropAndResize=function(t,e,n,r,i,a){for(var o=t.shape,s=o[0],u=o[1],l=o[2],c=o[3],f=e.shape[0],h=r[0],p=r[1],d=yi([f,h,p,c]),m=e.dataSync(),g=n.dataSync(),v=t.dataSync(),y=t.strides,b=d.strides,_=0;_<f;_++){var x=4*_,w=m[x],S=m[x+1],E=m[x+2],k=m[x+3],T=g[_];if(!(T>=s))for(var P=h>1?(E-w)*(u-1)/(h-1):0,M=p>1?(k-S)*(l-1)/(p-1):0,C=0;C<h;C++){var O=h>1?w*(u-1)+C*P:.5*(w+E)*(u-1);if(O<0||O>u-1)for(var I=0;I<p;I++)for(var N=0;N<c;N++){var A=N+I*b[2]+C*b[1]+_*b[0];d.values[A]=a}else if("bilinear"===i){var R=Math.floor(O),D=Math.ceil(O),j=O-R;for(I=0;I<p;I++)if((G=p>1?S*(l-1)+I*M:.5*(S+k)*(l-1))<0||G>l-1)for(N=0;N<c;N++)A=N+I*b[2]+C*b[1]+_*b[0],d.values[A]=a;else{var L=Math.floor(G),F=Math.ceil(G),z=G-L;for(N=0;N<c;N++){var B=v[A=N+L*y[2]+R*y[1]+T*y[0]],U=v[A=N+F*y[2]+R*y[1]+T*y[0]],V=v[A=N+L*y[2]+D*y[1]+T*y[0]],q=B+(U-B)*z,W=V+(v[A=N+F*y[2]+D*y[1]+T*y[0]]-V)*z;A=N+I*b[2]+C*b[1]+_*b[0],d.values[A]=q+(W-q)*j}}}else for(I=0;I<p;++I){var G;if((G=p>1?S*(l-1)+I*M:.5*(S+k)*(l-1))<0||G>l-1)for(N=0;N<c;N++)A=N+I*b[2]+C*b[1]+_*b[0],d.values[A]=a;else{var H=Math.round(G),$=Math.round(O);for(N=0;N<c;N++){var K=N+H*y[2]+$*y[1]+T*y[0],X=N+I*b[2]+C*b[1]+_*b[0];d.values[X]=v[K]}}}}}return d.toTensor()},t}();vt.registerBackend("cpu",function(){return new Us},1,Q);var Vs="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:i;function qs(){return new Promise(function(t){return Vs(function(){return t()})})}var Ws={float32:4,int32:4,uint16:2,uint8:1,bool:1};function Gs(t,e){for(var n={},r=0,i=function(e){var i=e.name,a=e.dtype,o=e.shape,s=b(o),u=void 0;if("quantization"in e){var l=e.quantization;if("uint8"!==l.dtype&&"uint16"!==l.dtype)throw new Error("Weight "+e.name+" has unknown quantization dtype "+l.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=Ws[l.dtype],f=t.slice(r,r+s*c),h="uint8"===l.dtype?new Uint8Array(f):new Uint16Array(f);if("float32"===a)u=Float32Array.from(h,function(t){return t*l.scale+l.min});else{if("int32"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);u=Int32Array.from(h,function(t){return Math.round(t*l.scale+l.min)})}r+=s*c}else{var p=Ws[a];if(f=t.slice(r,r+s*p),"float32"===a)u=new Float32Array(f);else if("int32"===a)u=new Int32Array(f);else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);u=new Uint8Array(f)}r+=s*p}var d=void 0;if("float32"===a)d=Xt(u,o,"float32");else if("int32"===a)d=Xt(u,o,"int32");else{if("bool"!==a)throw new Error("Unsupported dtype in weight '"+i+"': "+a);d=Xt(u,o,"bool")}n[i]=d},a=0,o=e;a<o.length;a++)i(o[a]);return n}var Hs="undefined"!=typeof a&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function $s(t){return Hs?a.byteLength(t):new Blob([t]).size}function Ks(t){var e=0;t.forEach(function(t){e+=t.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(t){n.set(new Uint8Array(t),r),r+=t.byteLength}),n.buffer}function Xs(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function Ys(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:$s(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:$s(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}var Js=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e){return t.getHandlers(e,"load")},t.getHandlers=function(t,e){var n=[];return("load"===e?this.getInstance().loadRouters:this.getInstance().saveRouters).forEach(function(e){var r=e(t);null!==r&&n.push(r)}),n},t}(),Zs="://",Qs=function(){function t(){this.managers={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.registerManager=function(e,n){d(null!=e,"scheme must not be undefined or null."),e.endsWith(Zs)&&(e=e.slice(0,e.indexOf(Zs))),d(e.length>0,"scheme must not be an empty string.");var r=t.getInstance();d(null==r.managers[e],"A model store manager is already registered for scheme '"+e+"'."),r.managers[e]=n},t.getManager=function(t){var e=this.getInstance().managers[t];if(null==e)throw new Error("Cannot find model manager for scheme '"+t+"'");return e},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function tu(t){if(-1===t.indexOf(Zs))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Qs.getSchemes().join(","));return{scheme:t.split(Zs)[0],path:t.split(Zs)[1]}}function eu(t,e,n){return void 0===n&&(n=!1),l(this,void 0,void 0,function(){var r,i,a,o,s,u,l,f,h;return c(this,function(c){switch(c.label){case 0:return d(t!==e,"Old path and new path are the same: '"+t+"'"),d((r=Js.getLoadHandlers(t)).length>0,"Copying failed because no load handler is found for source URL "+t+"."),d(r.length<2,"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."),i=r[0],d((a=Js.getSaveHandlers(e)).length>0,"Copying failed because no save handler is found for destination URL "+e+"."),d(a.length<2,"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."),o=a[0],s=tu(t).scheme,u=tu(t).path,l=s===tu(t).scheme,[4,i.load()];case 1:return f=c.sent(),n&&l?[4,Qs.getManager(s).removeModel(u)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[4,o.save(f)];case 4:return h=c.sent(),!n||l?[3,6]:[4,Qs.getManager(s).removeModel(u)];case 5:c.sent(),c.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var nu="models_store",ru="model_info_store";function iu(){if(!vt.get("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function au(t){var e=t.result;e.createObjectStore(nu,{keyPath:"modelPath"}),e.createObjectStore(ru,{keyPath:"modelPath"})}var ou=function(){function t(t){if(this.indexedDB=iu(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return t.prototype.save=function(t){return l(this,void 0,void 0,function(){return c(this,function(e){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},t.prototype.load=function(){return l(this,void 0,void 0,function(){return c(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(t,e){var n=this;return new Promise(function(t,r){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return au(i)},i.onsuccess=function(){var a=i.result;if(null==e){var o=a.transaction(nu,"readonly"),s=o.objectStore(nu).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return a.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));t(s.result.modelArtifacts)},s.onerror=function(t){return a.close(),r(s.error)},o.oncomplete=function(){return a.close()}}else{var u,l=Ys(e),c=a.transaction(ru,"readwrite"),f=c.objectStore(ru),h=f.put({modelPath:n.modelPath,modelArtifactsInfo:l});h.onsuccess=function(){var i=(u=a.transaction(nu,"readwrite")).objectStore(nu).put({modelPath:n.modelPath,modelArtifacts:e,modelArtifactsInfo:l});i.onsuccess=function(){return t({modelArtifactsInfo:l})},i.onerror=function(t){var e=(f=c.objectStore(ru)).delete(n.modelPath);e.onsuccess=function(){return a.close(),r(i.error)},e.onerror=function(t){return a.close(),r(i.error)}}},h.onerror=function(t){return a.close(),r(h.error)},c.oncomplete=function(){null==u?a.close():u.oncomplete=function(){return a.close()}}}},i.onerror=function(t){return r(i.error)}})},t.URL_SCHEME="indexeddb://",t}(),su=function(t){return vt.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ou.URL_SCHEME)?function(t){return new ou(t)}(t.slice(ou.URL_SCHEME.length)):null};Js.registerSaveRouter(su),Js.registerLoadRouter(su);var uu=function(){function t(){this.indexedDB=iu()}return t.prototype.listModels=function(){return l(this,void 0,void 0,function(){var t=this;return c(this,function(e){return[2,new Promise(function(e,n){var r=t.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return au(r)},r.onsuccess=function(){var t=r.result,i=t.transaction(ru,"readonly"),a=i.objectStore(ru).getAll();a.onsuccess=function(){for(var t={},n=0,r=a.result;n<r.length;n++){var i=r[n];t[i.modelPath]=i.modelArtifactsInfo}e(t)},a.onerror=function(e){return t.close(),n(a.error)},i.oncomplete=function(){return t.close()}},r.onerror=function(t){return n(r.error)}})]})})},t.prototype.removeModel=function(t){return l(this,void 0,void 0,function(){var e=this;return c(this,function(n){return t=function(t){return t.startsWith(ou.URL_SCHEME)?t.slice(ou.URL_SCHEME.length):t}(t),[2,new Promise(function(n,r){var i=e.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return au(i)},i.onsuccess=function(){var e,a=i.result,o=a.transaction(ru,"readwrite"),s=o.objectStore(ru),u=s.get(t);u.onsuccess=function(){if(null==u.result)return a.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var i=s.delete(t),o=function(){var i=(e=a.transaction(nu,"readwrite")).objectStore(nu).delete(t);i.onsuccess=function(){return n(u.result.modelArtifactsInfo)},i.onerror=function(t){return r(u.error)}};i.onsuccess=o,i.onerror=function(t){return o(),a.close(),r(u.error)}},u.onerror=function(t){return a.close(),r(u.error)},o.oncomplete=function(){null==e?a.close():e.oncomplete=function(){return a.close()}}},i.onerror=function(t){return r(i.error)}})]})})},t}();if(vt.get("IS_BROWSER"))try{Qs.registerManager(ou.URL_SCHEME,new uu)}catch(ot){}var lu="/",cu="tensorflowjs_models",fu="info",hu="model_topology",pu="weight_specs",du="weight_data";function mu(t){return{info:[cu,t,fu].join(lu),topology:[cu,t,hu].join(lu),weightSpecs:[cu,t,pu].join(lu),weightData:[cu,t,du].join(lu)}}function gu(t){var e=t.split(lu);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(lu)}var vu=function(){function t(t){if(!vt.get("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=mu(this.modelPath)}return t.prototype.save=function(t){return l(this,void 0,void 0,function(){var e,n,r,i;return c(this,function(o){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=Ys(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(t){return Hs?a.from(t).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(t)))}(t.weightData)),[2,{modelArtifactsInfo:r}]}catch(t){for(i in this.keys)this.LS.removeItem(this.keys[i]);throw new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}return[2]})})},t.prototype.load=function(){return l(this,void 0,void 0,function(){var t,e,n,r,i;return c(this,function(o){if(null==(t=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(e={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(e.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(e.weightSpecs=r,null==(i=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return e.weightData=function(t){if(Hs){var e=a.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}for(var n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i);return r.buffer}(i),[2,e]})})},t.URL_SCHEME="localstorage://",t}(),yu=function(t){return vt.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(vu.URL_SCHEME)?function(t){return new vu(t)}(t.slice(vu.URL_SCHEME.length)):null};Js.registerSaveRouter(yu),Js.registerLoadRouter(yu);var bu=function(){function t(){d(vt.get("IS_BROWSER"),"Current environment is not a web browser"),d(void 0!==window.localStorage,"Current browser does not appear to support localStorage"),this.LS=window.localStorage}return t.prototype.listModels=function(){return l(this,void 0,void 0,function(){var t,e,n,r,i,a;return c(this,function(o){for(t={},e=cu+lu,n=lu+fu,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(e)&&i.endsWith(n)&&(a=gu(i),t[a]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},t.prototype.removeModel=function(t){return l(this,void 0,void 0,function(){var e,n;return c(this,function(r){if(t=function(t){return t.startsWith(vu.URL_SCHEME)?t.slice(vu.URL_SCHEME.length):t}(t),e=mu(t),null==this.LS.getItem(e.info))throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(e.info)),this.LS.removeItem(e.info),this.LS.removeItem(e.topology),this.LS.removeItem(e.weightSpecs),this.LS.removeItem(e.weightData),[2,n]})})},t}();if(vt.get("IS_BROWSER"))try{Qs.registerManager(vu.URL_SCHEME,new bu)}catch(ot){}var _u="model",xu=".json",wu=".weights.bin",Su=function(){function t(e){if(!vt.get("IS_BROWSER"))throw new Error("triggerDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),null!=e&&0!==e.length||(e=_u),this.modelTopologyFileName=e+xu,this.weightDataFileName=e+wu}return t.prototype.save=function(t){return l(this,void 0,void 0,function(){var e,n,r,i,a,o;return c(this,function(s){if(e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),t.modelTopology instanceof ArrayBuffer)throw new Error("DownloadTrigger.save() does not support saving model topology in binary formats yet.");return n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(a=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,a.href=i,a.click(),null!=t.weightData&&((o=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,o.href=e,o.click()),[2,{modelArtifactsInfo:Ys(t)}]})})},t.URL_SCHEME="downloads://",t}(),Eu=function(){function t(t){if(null==t||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return t.prototype.load=function(){return l(this,void 0,void 0,function(){var t,e,n=this;return c(this,function(r){return t=this.files[0],e=this.files.slice(1),[2,new Promise(function(r,i){var a=new FileReader;a.onload=function(a){var o=JSON.parse(a.target.result),s=o.modelTopology;if(null!=s){0===e.length&&r({modelTopology:s});var u=o.weightsManifest;if(null!=u){var l;try{l=n.checkManifestAndWeightFiles(u,e)}catch(t){return void i(t)}var c=[],f=[],h=[];u.forEach(function(t){t.paths.forEach(function(t){f.push(t),h.push(null)}),c.push.apply(c,t.weights)}),u.forEach(function(t){t.paths.forEach(function(t){var e=new FileReader;e.onload=function(e){var n=e.target.result,i=f.indexOf(t);h[i]=n,-1===h.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:Ks(h)})},e.onerror=function(e){i("Failed to weights data from file of path '"+t+"'.")},e.readAsArrayBuffer(l[t])})})}else i(new Error("weightManifest field is missing from file "+t.name))}else i(new Error("modelTopology field is missing from file "+t.name))},a.onerror=function(e){i("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(t)})]})})},t.prototype.checkManifestAndWeightFiles=function(t,e){for(var n=[],r=e.map(function(t){return Xs(t.name)}),i={},a=0,o=t;a<o.length;a++)o[a].paths.forEach(function(t){var a=Xs(t);if(-1!==n.indexOf(a))throw new Error("Duplicate file basename found in weights manifest: '"+a+"'");if(n.push(a),-1===r.indexOf(a))throw new Error("Weight file with basename '"+a+"' is not provided.");i[t]=e[r.indexOf(a)]});if(n.length!==e.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+e.length+").");return i},t}();function ku(t,e){return l(this,void 0,void 0,function(){var n,r;return c(this,function(i){switch(i.label){case 0:return n=t.map(function(t){return fetch(t,e)}),[4,Promise.all(n)];case 1:return r=i.sent(),[4,Promise.all(r.map(function(t){return t.arrayBuffer()}))];case 2:return[2,i.sent()]}})})}Js.registerSaveRouter(function(t){return vt.get("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Su.URL_SCHEME)?function(t){return void 0===t&&(t="model"),new Su(t)}(t.slice(Su.URL_SCHEME.length)):null});var Tu=function(){function t(t,e){if(this.DEFAULT_METHOD="POST","undefined"==typeof fetch)throw new Error("browserHTTPRequest is not supported outside the web browser without a fetch polyfill.");if(d(null!=t&&t.length>0,"URL path for browserHTTPRequest must not be null, undefined or empty."),Array.isArray(t)&&d(2===t.length,"URL paths for browserHTTPRequest must have a length of 2, (actual length is "+t.length+")."),this.path=t,null!=e&&null!=e.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e||{}}return t.prototype.save=function(t){return l(this,void 0,void 0,function(){var e,n,r,i;return c(this,function(a){switch(a.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r={modelTopology:t.modelTopology,weightsManifest:n},e.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,fetch(this.path,e)];case 1:if(200===(i=a.sent()).status)return[2,{modelArtifactsInfo:Ys(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},t.prototype.load=function(){return l(this,void 0,void 0,function(){return c(this,function(t){return[2,Array.isArray(this.path)?this.loadBinaryModel():this.loadJSONModel()]})})},t.prototype.loadBinaryTopology=function(){return l(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,fetch(this.path[0],this.requestInit)];case 1:return[4,e.sent().arrayBuffer()];case 2:return[2,e.sent()];case 3:throw t=e.sent(),new Error(this.path[0]+" not found. "+t);case 4:return[2]}})})},t.prototype.loadBinaryModel=function(){return l(this,void 0,void 0,function(){var t,e,n,r,i,a,o,s;return c(this,function(u){switch(u.label){case 0:return t=this.loadBinaryTopology(),[4,fetch(this.path[1],this.requestInit)];case 1:return e=u.sent(),[4,Promise.all([t,e])];case 2:return n=u.sent(),r=n[0],[4,n[1].json()];case 3:return null==(i=u.sent())?[3,5]:[4,this.loadWeights(i)];case 4:s=u.sent(),a=s[0],o=s[1],u.label=5;case 5:return[2,{modelTopology:r,weightSpecs:a,weightData:o}]}})})},t.prototype.loadJSONModel=function(){return l(this,void 0,void 0,function(){var t,e,n,r,i,a,o;return c(this,function(s){switch(s.label){case 0:return[4,fetch(this.path,this.requestInit)];case 1:return[4,s.sent().json()];case 2:if(t=s.sent(),e=t.modelTopology,n=t.weightsManifest,null==e&&null==n)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==n?[3,4]:(a=t.weightsManifest,[4,this.loadWeights(a)]);case 3:o=s.sent(),r=o[0],i=o[1],s.label=4;case 4:return[2,{modelTopology:e,weightSpecs:r,weightData:i}]}})})},t.prototype.loadWeights=function(t){return l(this,void 0,void 0,function(){var e,n,r,i,a,o,s,u,l;return c(this,function(c){switch(c.label){case 0:for(e=Array.isArray(this.path)?this.path[1]:this.path,n=[],r=0,i=t;r<i.length;r++)a=i[r],n.push.apply(n,a.weights);return(o=e.substring(0,e.lastIndexOf("/"))).endsWith("/")||(o+="/"),s=[],t.forEach(function(t){t.paths.forEach(function(t){s.push(o+t)})}),u=[n],l=Ks,[4,ku(s,this.requestInit)];case 1:return[2,u.concat([l.apply(void 0,[c.sent()])])]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function Pu(t){return null!=t.match(Tu.URL_SCHEME_REGEX)}var Mu=function(t){return"undefined"==typeof fetch?null:(Array.isArray(t)?t.every(function(t){return Pu(t)}):Pu(t))?Cu(t):null};function Cu(t,e){return new Tu(t,e)}Js.registerSaveRouter(Mu),Js.registerLoadRouter(Mu);var Ou=function(){function t(t,e,n){this.modelTopology=t,this.weightSpecs=e,this.weightData=n}return t.prototype.load=function(){return l(this,void 0,void 0,function(){var t;return c(this,function(e){return t={},null!=this.modelTopology&&(t=u({modelTopology:this.modelTopology},t)),null!=this.weightSpecs&&this.weightSpecs.length>0&&(t=u({weightSpecs:this.weightSpecs},t)),null!=this.weightData&&this.weightData.byteLength>0&&(t=u({weightData:this.weightData},t)),[2,t]})})},t}(),Iu=function(){function t(t){this.saveHandler=t}return t.prototype.save=function(t){return l(this,void 0,void 0,function(){return c(this,function(e){return[2,this.saveHandler(t)]})})},t}();var Nu=Js.registerSaveRouter,Au=Js.registerLoadRouter,Ru=Js.getSaveHandlers,Du=Js.getLoadHandlers,ju=Object.freeze({browserFiles:function(t){return new Eu(t)},browserHTTPRequest:Cu,concatenateArrayBuffers:Ks,decodeWeights:Gs,encodeWeights:function(t){return l(this,void 0,void 0,function(){var e,n,r,i;return c(this,function(a){switch(a.label){case 0:for(r in e=[],n=[],t){if("float32"!==(i=t[r]).dtype&&"int32"!==i.dtype&&"bool"!==i.dtype)throw new Error("Unsupported dtype in weight '"+r+"': "+i.dtype);e.push({name:r,shape:i.shape,dtype:i.dtype}),n.push(i.data())}return[4,Promise.all(n)];case 1:return[2,{data:function(t){if(null===t)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(t){if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+t.constructor.name)});var r=new Uint8Array(e),i=0;return n.forEach(function(t){r.set(new Uint8Array(t.buffer),i),i+=t.byteLength}),r.buffer}(a.sent()),specs:e}]}})})},fromMemory:function(t,e,n){return new Ou(t,e,n)},getLoadHandlers:Du,getModelArtifactsInfoForJSON:Ys,getSaveHandlers:Ru,loadWeights:function(t,e,n,r){return void 0===e&&(e=""),l(this,void 0,void 0,function(){var i,a,o,s,u,l,f,h,p,d;return c(this,function(c){switch(c.label){case 0:if(i=t.map(function(){return!1}),a={},o=null!=n?n.map(function(){return!1}):[],s=[],t.forEach(function(t,e){var r=0;t.weights.forEach(function(t){var u="quantization"in t?t.quantization.dtype:t.dtype,l=Ws[u]*b(t.shape),c=function(){i[e]=!0,null==a[e]&&(a[e]=[]),a[e].push({manifestEntry:t,groupOffset:r,sizeBytes:l})};null!=n?n.forEach(function(e,n){e===t.name&&(c(),o[n]=!0)}):c(),s.push(t.name),r+=l})}),!o.every(function(t){return t}))throw u=n.filter(function(t,e){return!o[e]}),new Error("Could not find weights in manifest with names: "+u.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return l=i.reduce(function(t,e,n){return e&&t.push(n),t},[]),f=[],l.forEach(function(n){t[n].paths.forEach(function(t){var n=e+(e.endsWith("/")?"":"/")+t;f.push(n)})}),[4,ku(f,r)];case 1:return h=c.sent(),p={},d=0,l.forEach(function(e){for(var n=t[e].paths.length,r=0,i=0;i<n;i++)r+=h[d+i].byteLength;for(var o=new ArrayBuffer(r),s=new Uint8Array(o),u=0,l=0;l<n;l++){var c=new Uint8Array(h[d+l]);s.set(c,u),u+=c.byteLength}a[e].forEach(function(t){var e=Gs(o.slice(t.groupOffset,t.groupOffset+t.sizeBytes),[t.manifestEntry]);for(var n in e)p[n]=e[n]}),d+=n}),[2,p]}})})},registerLoadRouter:Au,registerSaveRouter:Nu,withSaveHandler:function(t){return new Iu(t)},copyModel:function(t,e){return l(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,eu(t,e,!1)];case 1:return[2,n.sent()]}})})},listModels:function(){return l(this,void 0,void 0,function(){var t,e,n,r,i,a,o;return c(this,function(s){switch(s.label){case 0:t=Qs.getSchemes(),e={},n=0,r=t,s.label=1;case 1:return n<r.length?(i=r[n],[4,Qs.getManager(i).listModels()]):[3,4];case 2:for(o in a=s.sent())e[i+Zs+o]=a[o];s.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return l(this,void 0,void 0,function(){return c(this,function(n){switch(n.label){case 0:return[4,eu(t,e,!0)];case 1:return[2,n.sent()]}})})},removeModel:function(t){return l(this,void 0,void 0,function(){var e;return c(this,function(n){switch(n.label){case 0:return e=tu(t),[4,Qs.getManager(e.scheme).removeModel(e.path)];case 1:return[2,n.sent()]}})})}}),Lu=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(t,e){return new t(e)},t}(),Fu=function(){function t(){this.classNameMap={}}return t.getMap=function(){return null==t.instance&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function zu(t){d(null!=t.className,"Class being registered does not have the static className property defined."),d("string"==typeof t.className,"className is required to be a string, but got type "+typeof t.className),d(t.className.length>0,"Class being registered has an empty-string as its className, which is disallowed."),Fu.register(t)}var Bu=Object.freeze({Serializable:Lu,SerializationMap:Fu,registerClass:zu});function Uu(t,e,n){if(null==n&&(n=vt.get("TEST_EPSILON")),t instanceof tt||e instanceof tt){if(t instanceof tt&&e instanceof tt){if(t.dtype!==e.dtype)throw new Error("Arrays are of different type actual: "+t.dtype+" vs expected: "+e.dtype+".");if(!_(t.shape,e.shape))throw new Error("Arrays are of different shape actual: "+t.shape+" vs expected: "+e.shape+".")}}else{var r=t.constructor.name,i=e.constructor.name;if(r!==i)throw new Error("Arrays are of different type actual: "+r+" vs expected: "+i)}var a,o;if(a=t instanceof tt?t.dataSync():t,o=e instanceof tt?e.dataSync():e,a.length!==o.length)throw new Error("Arrays have different lengths actual: "+a.length+" vs expected: "+o.length+".\nActual:   "+a+".\nExpected: "+o+".");for(var s=0;s<o.length;++s){var u=a[s],l=o[s];if(!Vu(u,Number(l),n))throw new Error("Arrays differ: actual["+s+"] = "+u+", expected["+s+"] = "+l+".\nActual:   "+a+".\nExpected: "+o+".")}}function Vu(t,e,n){return!(!isNaN(t)||!isNaN(e))||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}Object.freeze({WEBGL_ENVS:{HAS_WEBGL:!0},NODE_ENVS:{IS_NODE:!0},CHROME_ENVS:{IS_CHROME:!0},BROWSER_ENVS:{IS_BROWSER:!0},CPU_ENVS:{HAS_WEBGL:!1},ALL_ENVS:{},expectArraysClose:Uu,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){return Uu(t,e,0)},expectNumbersClose:function(t,e,n){if(null==n&&(n=vt.get("TEST_EPSILON")),!Vu(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){var r;r=t instanceof tt?t.dataSync():t;for(var i=0;i<r.length;i++)if(r[i]<e||r[i]>n)throw new Error("Value out of range:"+r[i]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}});var qu="0.13.2",Wu=(Object.freeze({gpgpu_util:gr,webgl_util:Kn,MathBackendWebGL:Hi,GPGPUContext:vr}),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.minimize=function(t,e,n){void 0===e&&(e=!1);var r=this.computeGradients(t,n),i=r.value,a=r.grads;return this.applyGradients(a),Object.keys(a).forEach(function(t){return a[t].dispose()}),e?i:(i.dispose(),null)},e.prototype.computeGradients=function(t,e){return function(t,e){if(d(R(t),"The f passed in variableGrads(f) must be a function"),d(null==e||Array.isArray(e)&&e.every(function(t){return t instanceof et}),"The varList passed in variableGrads(f, varList) must be an array of variables"),null==e)for(var n in e=[],vt.engine.registeredVariables)e.push(vt.engine.registeredVariables[n]);var r=e.length;d((e=e.filter(function(t){return t.trainable})).length>0,"variableGrads() expects at least one of the input variables to be trainable, but none of the "+r+" variables is trainable.");var i=vt.engine.gradients(t,e,null,!0),a=i.value,o=i.grads;d(o.some(function(t){return null!=t}),"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),d(0===a.rank,"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor");var s={};return e.forEach(function(t,e){null!=o[e]&&(s[t.name]=o[e])}),{value:a,grads:s}}(t,e)},e}(Lu)),Gu=function(t){function e(e,n,r){void 0===r&&(r=null);var i=t.call(this)||this;return i.learningRate=e,i.rho=n,i.epsilon=r,i.accumulatedGrads={},i.accumulatedUpdates={},i.c=_t(Yt(-e)),i.rhoScalar=_t(Yt(n)),i.oneMinusRho=_t(Yt(1-n)),null===r&&(r=vt.get("EPSILON")),i.epsilonScalar=_t(Yt(r)),i}return s(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var i=vt.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&bt(function(){e.accumulatedGrads[n]=pe(i).variable(!1)}),null==r.accumulatedUpdates[n]&&bt(function(){e.accumulatedUpdates[n]=pe(i).variable(!1)});var a=t[n],o=r.accumulatedGrads[n],s=r.accumulatedUpdates[n];bt(function(){var t=e.rhoScalar.mul(o).add(e.oneMinusRho.mul(a.square())),r=s.add(e.epsilonScalar).sqrt().div(o.add(e.epsilonScalar).sqrt()).mul(a),u=e.rhoScalar.mul(s).add(e.oneMinusRho.mul(r.square()));e.accumulatedGrads[n].assign(t),e.accumulatedUpdates[n].assign(u);var l=e.c.mul(r).add(i);i.assign(l)})},r=this;for(var i in t)n(i)},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsilonScalar.dispose(),this.rhoScalar.dispose(),this.oneMinusRho.dispose(),null!=this.accumulatedUpdates&&(Object.keys(this.accumulatedUpdates).forEach(function(e){return t.accumulatedUpdates[e].dispose()}),Object.keys(this.accumulatedGrads).forEach(function(e){return t.accumulatedGrads[e].dispose()}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.rho,e.epsilon)},e.className="AdadeltaOptimizer",e}(Wu);zu(Gu);var Hu=function(t){function e(e,n){void 0===n&&(n=.1);var r=t.call(this)||this;return r.learningRate=e,r.initialAccumulatorValue=n,r.accumulatedGrads={},r.c=_t(Yt(-e)),r.epsilon=_t(Yt(vt.get("EPSILON"))),r}return s(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var i=vt.engine.registeredVariables[n];null==r.accumulatedGrads[n]&&bt(function(){e.accumulatedGrads[n]=re(i.shape,e.initialAccumulatorValue).variable(!1)});var a=t[n],o=r.accumulatedGrads[n];bt(function(){var t=o.add(a.square());e.accumulatedGrads[n].assign(t);var r=e.c.mul(a.div(t.add(e.epsilon).sqrt())).add(i);i.assign(r)})},r=this;for(var i in t)n(i)},e.prototype.dispose=function(){var t=this;this.epsilon.dispose(),this.c.dispose(),null!=this.accumulatedGrads&&Object.keys(this.accumulatedGrads).forEach(function(e){return t.accumulatedGrads[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,e){return new t(e.learningRate,e.initialAccumulatorValue)},e.className="AdagradOptimizer",e}(Wu);zu(Hu);var $u=function(t){function e(e,n,r,i){void 0===i&&(i=null);var a=t.call(this)||this;return a.learningRate=e,a.beta1=n,a.beta2=r,a.epsilon=i,a.accumulatedFirstMoment={},a.accumulatedSecondMoment={},a.c=_t(Yt(-e)),a.beta1Scalar=_t(Yt(n)),a.beta2Scalar=_t(Yt(r)),bt(function(){a.accBeta1=Yt(n).variable(),a.accBeta2=Yt(r).variable()}),a.oneMinusBeta1=_t(Yt(1-n)),a.oneMinusBeta2=_t(Yt(1-r)),a.one=_t(Yt(1)),null===i&&(i=vt.get("EPSILON")),a.epsScalar=_t(Yt(i)),a}return s(e,t),e.prototype.applyGradients=function(t){var e=this;bt(function(){var n=e.one.sub(e.accBeta1),r=e.one.sub(e.accBeta2);for(var i in t){var a=vt.engine.registeredVariables[i];if(null==e.accumulatedFirstMoment[i]){var o=!1;e.accumulatedFirstMoment[i]=pe(a).variable(o)}null==e.accumulatedSecondMoment[i]&&(o=!1,e.accumulatedSecondMoment[i]=pe(a).variable(o));var s=t[i],u=e.accumulatedFirstMoment[i],l=e.accumulatedSecondMoment[i],c=e.beta1Scalar.mul(u).add(e.oneMinusBeta1.mul(s)),f=e.beta2Scalar.mul(l).add(e.oneMinusBeta2.mul(s.square())),h=c.div(n),p=f.div(r);e.accumulatedFirstMoment[i].assign(c),e.accumulatedSecondMoment[i].assign(f);var d=e.c.mul(h.div(e.epsScalar.add(p.sqrt()))).add(a);a.assign(d)}e.accBeta1.assign(e.accBeta1.mul(e.beta1Scalar)),e.accBeta2.assign(e.accBeta2.mul(e.beta2Scalar))})},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsScalar.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.accBeta1.dispose(),this.accBeta2.dispose(),this.oneMinusBeta1.dispose(),this.oneMinusBeta2.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(e){return t.accumulatedFirstMoment[e].dispose()}),null!=this.accumulatedSecondMoment&&Object.keys(this.accumulatedSecondMoment).forEach(function(e){return t.accumulatedSecondMoment[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)},e.className="AdamOptimizer",e}(Wu);zu($u);var Ku=function(t){function e(e,n,r,i,a){void 0===i&&(i=null),void 0===a&&(a=0);var o=t.call(this)||this;return o.learningRate=e,o.beta1=n,o.beta2=r,o.epsilon=i,o.decay=a,o.accumulatedFirstMoment={},o.accumulatedWeightedInfNorm={},o.c=_t(Yt(-e)),o.beta1Scalar=_t(Yt(n)),o.beta2Scalar=_t(Yt(r)),o.decayScalar=_t(Yt(a)),bt(function(){o.iteration=Yt(0).variable(),o.accBeta1=Yt(n).variable()}),o.oneMinusBeta1=_t(Yt(1-n)),o.one=_t(Yt(1)),null===i&&(i=vt.get("EPSILON")),o.epsScalar=_t(Yt(i)),o}return s(e,t),e.prototype.applyGradients=function(t){var e=this;bt(function(){var n=e.one.sub(e.accBeta1),r=e.c.div(e.one.add(e.decayScalar.mul(e.iteration)));for(var i in t){var a=vt.engine.registeredVariables[i];if(null==e.accumulatedFirstMoment[i]){var o=!1;e.accumulatedFirstMoment[i]=pe(a).variable(o)}null==e.accumulatedWeightedInfNorm[i]&&(o=!1,e.accumulatedWeightedInfNorm[i]=pe(a).variable(o));var s=t[i],u=e.accumulatedFirstMoment[i],l=e.accumulatedWeightedInfNorm[i],c=e.beta1Scalar.mul(u).add(e.oneMinusBeta1.mul(s)),f=e.beta2Scalar.mul(l),h=s.abs(),p=f.maximum(h);e.accumulatedFirstMoment[i].assign(c),e.accumulatedWeightedInfNorm[i].assign(p);var d=r.div(n).mul(c.div(e.epsScalar.add(p))).add(a);a.assign(d)}e.iteration.assign(e.iteration.add(e.one)),e.accBeta1.assign(e.accBeta1.mul(e.beta1Scalar))})},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsScalar.dispose(),this.accBeta1.dispose(),this.beta1Scalar.dispose(),this.beta2Scalar.dispose(),this.oneMinusBeta1.dispose(),this.decayScalar.dispose(),this.iteration.dispose(),this.one.dispose(),null!=this.accumulatedFirstMoment&&Object.keys(this.accumulatedFirstMoment).forEach(function(e){return t.accumulatedFirstMoment[e].dispose()}),null!=this.accumulatedWeightedInfNorm&&Object.keys(this.accumulatedWeightedInfNorm).forEach(function(e){return t.accumulatedWeightedInfNorm[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)},e.className="AdamaxOptimizer",e}(Wu);zu(Ku);var Xu=function(t){function e(e){var n=t.call(this)||this;return n.learningRate=e,n.setLearningRate(e),n}return s(e,t),e.prototype.applyGradients=function(t){var e=this;Object.keys(t).forEach(function(n){var r=t[n],i=vt.engine.registeredVariables[n];bt(function(){var t=e.c.mul(r).add(i);i.assign(t)})})},e.prototype.setLearningRate=function(t){this.learningRate=t,null!=this.c&&this.c.dispose(),this.c=_t(Yt(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,e){return new t(e.learningRate)},e.className="SGDOptimizer",e}(Wu);zu(Xu);var Yu=function(t){function e(e,n,r){void 0===r&&(r=!1);var i=t.call(this,e)||this;return i.learningRate=e,i.momentum=n,i.useNesterov=r,i.m=Yt(i.momentum),i.accumulations={},i}return s(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var i=vt.engine.registeredVariables[n];null==r.accumulations[n]&&bt(function(){e.accumulations[n]=pe(i).variable(!1)});var a=r.accumulations[n],o=t[n];bt(function(){var t,r=e.m.mul(a).add(o);t=e.useNesterov?e.c.mul(o.add(r.mul(e.m))).add(i):e.c.mul(r).add(i),e.accumulations[n].assign(r),i.assign(t)})},r=this;for(var i in t)n(i)},e.prototype.dispose=function(){if(t.prototype.dispose.call(this),this.m.dispose(),null!=this.accumulations)for(var e in this.accumulations)this.accumulations[e].dispose()},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)},e.className="MomentumOptimizer",e}(Xu);zu(Yu);var Ju=function(t){function e(e,n,r,i,a){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===a&&(a=!1);var o=t.call(this)||this;return o.learningRate=e,o.decay=n,o.momentum=r,o.epsilon=i,o.accumulatedMeanSquares={},o.accumulatedMeanGrads={},o.accumulatedMoments={},o.c=_t(Yt(e)),o.decayScalar=_t(Yt(n)),o.momentumScalar=_t(Yt(r)),o.oneMinusDecay=_t(Yt(1-n)),o.centered=a,null===i&&(i=vt.get("EPSILON")),o.epsilonScalar=_t(Yt(i)),o}return s(e,t),e.prototype.applyGradients=function(t){var e=this,n=function(n){var i=vt.engine.registeredVariables[n];null==r.accumulatedMeanSquares[n]&&bt(function(){e.accumulatedMeanSquares[n]=pe(i).variable(!1)}),null==r.accumulatedMeanGrads[n]&&r.centered&&bt(function(){e.accumulatedMeanGrads[n]=pe(i).variable(!1)}),null==r.accumulatedMoments[n]&&bt(function(){e.accumulatedMoments[n]=pe(i).variable(!1)});var a=r.accumulatedMeanSquares[n],o=r.accumulatedMeanGrads[n],s=r.accumulatedMoments[n],u=t[n];bt(function(){var t=e.decayScalar.mul(a).add(e.oneMinusDecay.mul(u.square()));if(e.centered){var r=e.decayScalar.mul(o).add(e.oneMinusDecay.mul(u)),l=e.momentumScalar.mul(s).add(e.c.mul(u).div(t.sub(r.square().add(e.epsilonScalar)).sqrt()));e.accumulatedMeanSquares[n].assign(t),e.accumulatedMeanGrads[n].assign(r),e.accumulatedMoments[n].assign(l);var c=i.sub(l);i.assign(c)}else{var f=e.decayScalar.mul(a).add(e.oneMinusDecay.mul(u.square()));l=e.momentumScalar.mul(s).add(e.c.mul(u).div(f.add(e.epsilonScalar).sqrt())),e.accumulatedMeanSquares[n].assign(f),e.accumulatedMoments[n].assign(l),c=i.sub(l),i.assign(c)}})},r=this;for(var i in t)n(i)},e.prototype.dispose=function(){var t=this;this.c.dispose(),this.epsilonScalar.dispose(),this.decayScalar.dispose(),this.momentumScalar.dispose(),this.oneMinusDecay.dispose(),null!=this.accumulatedMeanSquares&&Object.keys(this.accumulatedMeanSquares).forEach(function(e){return t.accumulatedMeanSquares[e].dispose()}),null!=this.accumulatedMeanGrads&&this.centered&&Object.keys(this.accumulatedMeanGrads).forEach(function(e){return t.accumulatedMeanGrads[e].dispose()}),null!=this.accumulatedMoments&&Object.keys(this.accumulatedMoments).forEach(function(e){return t.accumulatedMoments[e].dispose()})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)},e.className="RMSPropOptimizer",e}(Wu);zu(Ju);var Zu=function(){function t(){}return t.sgd=function(t){return new Xu(t)},t.momentum=function(t,e,n){return void 0===n&&(n=!1),new Yu(t,e,n)},t.rmsprop=function(t,e,n,r,i){return void 0===e&&(e=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new Ju(t,e,n,r,i)},t.adam=function(t,e,n,r){return void 0===t&&(t=.001),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new $u(t,e,n,r)},t.adadelta=function(t,e,n){return void 0===t&&(t=.001),void 0===e&&(e=.95),void 0===n&&(n=null),new Gu(t,e,n)},t.adamax=function(t,e,n,r,i){return void 0===t&&(t=.002),void 0===e&&(e=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new Ku(t,e,n,r,i)},t.adagrad=function(t,e){return void 0===e&&(e=.1),new Hu(t,e)},t}(),Qu={sgd:Zu.sgd,momentum:Zu.momentum,adadelta:Zu.adadelta,adagrad:Zu.adagrad,rmsprop:Zu.rmsprop,adamax:Zu.adamax,adam:Zu.adam};gt.setBackend,gt.getBackend,gt.disposeVariables,gt.memory;!function(t){Z=t}(Bs)}).call(this,n(39),n(26),n(194).setImmediate,n(23).Buffer)},function(t,e,n){var r=n(16),i=n(50),a=n(30),o=n(31),s=n(43),u=function t(e,n,u){var l,c,f,h,p=e&t.F,d=e&t.G,m=e&t.P,g=e&t.B,v=d?r:e&t.S?r[n]||(r[n]={}):(r[n]||{}).prototype,y=d?i:i[n]||(i[n]={}),b=y.prototype||(y.prototype={});for(l in d&&(u=n),u)f=((c=!p&&v&&void 0!==v[l])?v:u)[l],h=g&&c?s(f,r):m&&"function"==typeof f?s(Function.call,f):f,v&&o(v,l,f,e&t.U),y[l]!=f&&a(y,l,h),m&&b[l]!=f&&(b[l]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,t.exports=u},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(679),i=n(80);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!==typeof e?i(t):e}},function(t,e,n){var r=n(680);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){"use strict";t.exports=n(338)},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){"use strict";var r=n(47),i=n(2),a=n(7);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(9),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(60)),u=f(n(107)),l=f(n(12)),c=f(n(276));function f(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(this,t),this.arrayType=r.type||Float32Array,e&&e.length&&(e instanceof this.arrayType||e instanceof Array)?(s.checkShape(e,n),e instanceof this.arrayType?this.tensor=(0,u.default)(e,n):e instanceof Array&&(this.tensor=(0,u.default)(new this.arrayType(e),n))):!e.length&&n.length?this.tensor=(0,u.default)(new this.arrayType(n.reduce(function(t,e){return t*e},1)),n):this.tensor=(0,u.default)(new this.arrayType([]),[])}return a(t,[{key:"createGLTexture",value:function(t){var e=t.type,n=void 0===e?"2d":e,r=t.format,i=void 0===r?"float":r,a=t.supportsTextureFragments,s=void 0!==a&&a,u=[];if(1===this.tensor.shape.length)u=[1,this.tensor.shape[0]],this.is1D=!0;else if(2===this.tensor.shape.length)u=this.tensor.shape;else{if(3!==this.tensor.shape.length||"2d_array"!==n&&"3d"!==n)throw new Error("[Tensor] cannot create WebGL2 texture.");u=this.tensor.shape}if(this.glTextureShape=u,this.glTextureType=n,this.glTextureFormat=i,"2d"===n)this.glTextureShape[0]>o.MAX_TEXTURE_SIZE&&s?this._create2DRowFragmentedGLTexture():this._create2DGLTexture();else{if("2d_array"!==n&&"3d"!==n)throw new Error("[Tensor] invalid type ".concat(n,"."));this._create3DGLTexture()}}},{key:"_create2DGLTexture",value:function(){var t=o.webgl2.context,e=o.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),n=e.textureTarget,r=e.textureInternalFormat,i=e.textureFormat,a=e.textureType;this.glTexture=t.createTexture(),o.webgl2.storeRef("texture",this.glTexture),t.bindTexture(n,this.glTexture);var s=this.glTextureShape,u=this.tensor.data;t.texImage2D(n,0,r,s[1],s[0],0,i,a,u),t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(n,t.TEXTURE_MIN_FILTER,t.NEAREST)}},{key:"_create2DRowFragmentedGLTexture",value:function(){var t=o.webgl2.context,e=o.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),n=e.textureTarget,r=e.textureInternalFormat,i=e.textureFormat,a=e.textureType;this.glTextureFragments=[],this.glTextureFragmentShape=[o.MAX_TEXTURE_SIZE,this.glTextureShape[1]];for(var s=this.glTextureFragmentShape,u=Math.ceil(this.glTextureShape[0]/o.MAX_TEXTURE_SIZE),l=0,c=0;c<u;c++){var f=t.createTexture();o.webgl2.storeRef("texture",f),t.bindTexture(n,f);var h=void 0;c===u-1?(h=new this.arrayType(s[0]*s[1])).set(this.tensor.data.slice(l,l+s[0]*s[1]),0):h=this.tensor.data.slice(l,l+s[0]*s[1]),t.texImage2D(n,0,r,s[1],s[0],0,i,a,h),t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(n,t.TEXTURE_MIN_FILTER,t.NEAREST),this.glTextureFragments.push(f),l+=s[0]*s[1]}}},{key:"_create3DGLTexture",value:function(){var t=o.webgl2.context,e=o.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),n=e.textureTarget,r=e.textureInternalFormat,i=e.textureFormat,a=e.textureType;this.glTexture=t.createTexture(),o.webgl2.storeRef("texture",this.glTexture),t.bindTexture(n,this.glTexture);var u=this.glTextureShape,l=s.data3DLayoutForGL(this.arrayType,this.tensor,this.glTextureShape);t.texImage3D(n,0,r,u[1],u[0],u[2],0,i,a,l),t.texParameteri(n,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(n,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(n,t.TEXTURE_MIN_FILTER,t.NEAREST)}},{key:"convert2DRowFragmentedGLTextureToColStack",value:function(){var t=this;if(!this.glTextureFragments||!this.glTextureFragmentShape)throw new Error("[Tensor] no glTextureFragments available.");var e=o.webgl2.context,n=o.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),r=n.textureTarget,i=n.textureInternalFormat,a=n.textureFormat,s=n.textureType;if(this.glTextureFragmentsAsColStack)e.bindTexture(r,this.glTextureFragmentsAsColStack);else{this.glTextureFragmentsAsColStack=e.createTexture(),o.webgl2.storeRef("texture",this.glTextureFragmentsAsColStack),e.bindTexture(r,this.glTextureFragmentsAsColStack);var u=this.glTextureFragments.length;this.glTextureFragmentsAsColStackShape=[this.glTextureFragmentShape[0],this.glTextureFragmentShape[1]*u];var l=this.glTextureFragmentsAsColStackShape,c=new this.arrayType(l.reduce(function(t,e){return t*e},1));e.texImage2D(r,0,i,l[1],l[0],0,a,s,c),e.texParameteri(r,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(r,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(r,e.TEXTURE_MIN_FILTER,e.NEAREST)}var f=e.createFramebuffer();e.bindFramebuffer(e.READ_FRAMEBUFFER,f),this.glTextureFragments.forEach(function(n,i){e.framebufferTexture2D(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0),e.copyTexSubImage2D(r,0,i*t.glTextureFragmentShape[1],0,0,0,t.glTextureFragmentShape[1],t.glTextureFragmentShape[0])}),e.deleteFramebuffer(f)}},{key:"removeGLTextureFragmentsAsColStack",value:function(){this.glTextureFragmentsAsColStack&&(o.webgl2.context.deleteTexture(this.glTextureFragmentsAsColStack),delete this.glTextureFragmentsAsColStack,delete this.glTextureFragmentsAsColStackShape)}},{key:"deleteGLTexture",value:function(){var t=o.webgl2.context;this.glTexture&&(t.deleteTexture(this.glTexture),delete this.glTexture),this.glTextureFragments&&(this.glTextureFragments.forEach(function(e){t.deleteTexture(e)}),delete this.glTextureFragments)}},{key:"replaceTensorData",value:function(t){if(t&&t.length&&t instanceof this.arrayType)this.tensor.data.set(t);else{if(!(t&&t.length&&t instanceof Array))throw new Error("[Tensor] invalid input for replaceTensorData method.");this.tensor.data.set(new this.arrayType(t))}if(this.glTexture){var e=o.webgl2.context,n=o.webgl2.getWebGLTextureOptions(this.glTextureType,this.glTextureFormat),r=n.textureTarget,i=n.textureFormat,a=n.textureType;e.bindTexture(r,this.glTexture);var u=this.glTextureShape;if("2d"===this.glTextureType){var l=this.tensor.data;e.texSubImage2D(r,0,0,0,u[1],u[0],i,a,l,0)}else if("2d_array"===this.glTextureType||"3d"===this.glTextureType){var c=s.data3DLayoutForGL(this.arrayType,this.tensor,u);e.texSubImage3D(r,0,0,0,0,u[1],u[0],u[2],i,a,c,0)}}}},{key:"transferFromGLTexture",value:function(){if(this.glTextureFragments){this.tensor=(0,u.default)(new this.arrayType(this.glTextureShape[0]*this.glTextureShape[1]),this.glTextureShape);for(var t=0,e=0;e<this.glTextureFragments.length;e++){o.webgl2.bindOutputTexture(this.glTextureFragments[e],this.glTextureFragmentShape);var n=o.webgl2.readData(this.glTextureFragmentShape);if(e===this.glTextureFragments.length-1){var r=this.tensor.data.length-t;this.tensor.data.set(n.subarray(0,r),t)}else this.tensor.data.set(n,t);t+=n.length}}else o.webgl2.bindOutputTexture(this.glTexture,this.glTextureShape),this.tensor=(0,u.default)(new this.arrayType([]),this.glTextureShape),this.tensor.data=o.webgl2.readData(this.glTextureShape);this.is1D&&1===this.glTextureShape[0]&&(this.tensor=(0,c.default)(this.tensor,[0]))}},{key:"reshapeTo2D",value:function(){for(var t=this.tensor.shape.length-1,e=this.tensor.shape[t],n=this.tensor.shape.slice(0,t),i=n.reduce(function(t,e){return t*e},1),a=(0,u.default)(new this.arrayType(i*e),[i,e]),o=(0,u.default)(new this.arrayType(i),n),c=(0,u.default)(new this.arrayType(i),[i]),f=Array(this.tensor.shape.length).fill(null),h=0;h<e;h++){var p;f[t]=h,l.default.assign(o,(p=this.tensor).pick.apply(p,r(f))),c.data=o.data,l.default.assign(a.pick(null,h),c)}this.originalShape=this.tensor.shape,this.indicesForReshaped=s.createIndicesFor2DReshaped(this.tensor.shape,!1,t),this.tensor=a,this.is2DReshaped=!0}},{key:"reshapeFrom2D",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(!this.is2DReshaped)throw new Error("[Tensor] not in reshaped 2D representation.");if(!this.originalShape)throw new Error("[Tensor] does not contain originalShape.");t<0&&(t=this.originalShape.length+t);for(var e=this.tensor.shape[0],n=this.tensor.shape[1],i=(0,u.default)(new this.arrayType(this.originalShape.reduce(function(t,e){return t*e},1)),this.originalShape),a=(0,u.default)(new this.arrayType(e),[e]),o=r(this.originalShape.slice(0,t)).concat(r(this.originalShape.slice(t+1))),s=(0,u.default)(new this.arrayType(o.reduce(function(t,e){return t*e},1)),o),c=Array(this.originalShape.length).fill(null),f=0;f<n;f++)l.default.assign(a,this.tensor.pick(null,f)),s.data=a.data,c[t]=f,l.default.assign(i.pick.apply(i,r(c)),s);this.tensor=i}},{key:"reshapeTo2DSquare",value:function(){var t=Math.ceil(Math.sqrt(this.tensor.size)),e=(0,u.default)(new this.arrayType(Math.pow(t,2)),[t,t]);e.data.set(this.tensor.data),this.originalShape=this.tensor.shape,this.indicesForReshaped=s.createIndicesFor2DReshaped(this.tensor.shape,!0),this.tensor=e,this.is2DSquareReshaped=!0}},{key:"reshapeFrom2DSquare",value:function(){if(!this.is2DSquareReshaped)throw new Error("[Tensor] not in reshaped 2D square representation.");if(!this.originalShape)throw new Error("[Tensor] does not contain originalShape.");var t=this.originalShape.reduce(function(t,e){return t*e},1),e=(0,u.default)(new this.arrayType(t),this.originalShape);e.data.set(this.tensor.data.subarray(0,t)),this.tensor=e}}]),t}();e.default=h},function(t,e,n){"use strict";var r=n(2),i=n(7);Object.defineProperty(e,"__esModule",{value:!0}),e.MAX_TEXTURE_IMAGE_UNITS=e.MAX_TEXTURE_SIZE=e.webgl2=void 0;var a=new(function(){function t(){if(r(this,t),this.isSupported=!1,this.vertexShader=null,"undefined"!==typeof window){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("webgl2");var e=this.context;e?(this.isSupported=!0,e.getExtension("EXT_color_buffer_float"),this.MAX_TEXTURE_SIZE=e.getParameter(e.MAX_TEXTURE_SIZE),this.MAX_TEXTURE_IMAGE_UNITS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),this.init()):console.log("Unable to initialize WebGL2 -- your browser may not support it.")}this._refs={textures:[],buffers:[]}}return i(t,[{key:"init",value:function(){this.createCommonVertexShader()}},{key:"createCommonVertexShader",value:function(){var t=this.context,e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,"#version 300 es\nprecision highp float;\n\nin vec3 position;\nin vec2 texcoord;\nout vec2 outTex;\n\nvoid main () {\n  gl_Position = vec4(position, 1.0);\n\toutTex = texcoord;\n}\n"),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)||(console.error(t.getShaderInfoLog(e)),t.deleteShader(e),this.isSupported=!1),this.vertexShader=e}},{key:"compileProgram",value:function(t){var e=this.context,n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t),e.compileShader(n);var r=e.getShaderParameter(n,e.COMPILE_STATUS);r||(console.error(e.getShaderInfoLog(n)),e.deleteShader(n),this.isSupported=!1);var i=e.createProgram();return e.attachShader(i,this.vertexShader),e.attachShader(i,n),e.linkProgram(i),(r=e.getProgramParameter(i,e.LINK_STATUS))||(console.error(e.getProgramInfoLog(i)),this.isSupported=!1),this.setupVertices(i),i}},{key:"setupVertices",value:function(t){var e=this.context,n=e.getAttribLocation(t,"position"),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),this.storeRef("buffer",r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0]),e.STATIC_DRAW),e.vertexAttribPointer(n,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n);var i=e.getAttribLocation(t,"texcoord"),a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),e.STATIC_DRAW),e.vertexAttribPointer(i,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(i),this.storeRef("buffer",a);var o=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),e.STATIC_DRAW),this.storeRef("buffer",o)}},{key:"selectProgram",value:function(t){this.context.useProgram(t)}},{key:"bindUniforms",value:function(t,e){var n=this.context;e.forEach(function(e){var r=e.value,i=e.type,a=e.name,o=n.getUniformLocation(t,a);"float"===i?n.uniform1f(o,r):"int"!==i&&"bool"!==i||n.uniform1i(o,r)})}},{key:"bindInputTextures",value:function(t,e,n){var r=this,i=this.context;e.forEach(function(e,a){var o=e.input,s=e.name;if(i.activeTexture(i.TEXTURE0+a),o.glTextureFragments)if(o.glTextureFragmentsAsColStack){var u=r.getWebGLTextureOptions(o.glTextureType,o.glTextureFormat).textureTarget;i.bindTexture(u,o.glTextureFragmentsAsColStack)}else{var l=r.getWebGLTextureOptions(o.glTextureType,o.glTextureFormat).textureTarget;i.bindTexture(l,o.glTextureFragments[n])}else{var c=r.getWebGLTextureOptions(o.glTextureType,o.glTextureFormat).textureTarget;i.bindTexture(c,o.glTexture)}i.uniform1i(i.getUniformLocation(t,s),a)})}},{key:"bindOutputTexture",value:function(t,e){var n=this.context;n.viewport(0,0,e[1],e[0]),this.framebuffer=this.framebuffer||n.createFramebuffer(),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0)}},{key:"runProgram",value:function(t){var e=t.program,n=t.output,r=t.inputs,i=t.uniforms,a=t.supportsTextureFragments,o=void 0!==a&&a;if(!e)throw new Error("[WebGL2] missing program");if(!n)throw new Error("[WebGL2] missing output");if(!r)throw new Error("[WebGL2] missing inputs");var s=this.context;if(this.selectProgram(e),i&&Array.isArray(i)&&this.bindUniforms(e,i),n.glTextureFragments){if(!o)throw new Error("[WebGL2] program does not support texture fragments");var u=r.filter(function(t){return t.input.glTextureFragments&&!t.input.glTextureFragmentsAsColStack}),l=n.glTextureFragments.length;if(u.some(function(t){return t.input.glTextureFragments.length!==l}))throw new Error("[WebGL2] number of texture fragments in inputs and output do not match");for(var c=0;c<l;c++)this.bindOutputTexture(n.glTextureFragments[c],n.glTextureFragmentShape),this.bindInputTextures(e,r,c),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0)}else this.bindOutputTexture(n.glTexture,n.glTextureShape),this.bindInputTextures(e,r),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0)}},{key:"readData",value:function(t){var e=this.context,n=new ArrayBuffer(t[0]*t[1]*4*4),r=new Float32Array(n);e.readPixels(0,0,t[1],t[0],e.RGBA,e.FLOAT,r);for(var i=[],a=0;a<r.length;a+=4)i.push(r[a]);return new Float32Array(i)}},{key:"getWebGLTextureOptions",value:function(t,e){var n=this.context,r={"2d":n.TEXTURE_2D,"2d_array":n.TEXTURE_2D_ARRAY,"3d":n.TEXTURE_3D},i={float:n.R32F,int:n.R32I},a={float:n.RED,int:n.RED_INTEGER},o={float:n.FLOAT,int:n.INT};return{textureTarget:r[t],textureInternalFormat:i[e],textureFormat:a[e],textureType:o[e]}}},{key:"storeRef",value:function(t,e){"texture"===t?this._refs.textures.push(e):"buffer"===t&&this._refs.buffers.push(e)}},{key:"clearRefs",value:function(){var t=this.context;this._refs.textures.forEach(function(e){return t.deleteTexture(e)}),this._refs.buffers.forEach(function(e){return t.deleteBuffer(e)}),this._refs={textures:[],buffers:[]}}}]),t}());e.webgl2=a;var o=a.MAX_TEXTURE_SIZE;e.MAX_TEXTURE_SIZE=o;var s=a.MAX_TEXTURE_IMAGE_UNITS;e.MAX_TEXTURE_IMAGE_UNITS=s},function(t,e,n){t.exports=n(924)()},function(t,e,n){"use strict";var r=n(2),i=n(7);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(9),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this.layerClass="Layer",this.name=e.name,this.description="",this.gpu=a.webgl2.isSupported&&e.gpu,this.params=[],this.weights={},this.inbound=[],this.outbound=[]}return i(t,[{key:"throwError",value:function(t){throw new Error("[".concat(this.layerClass," layer: ").concat(this.name||"","] ").concat(t))}},{key:"toggleGPU",value:function(t){var e="undefined"===typeof t?!this.gpu:t;a.webgl2.isSupported&&e?this.gpu=!0:this.gpu=!1}},{key:"setWeights",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.params.forEach(function(r,i){e.weights[r]=t[i],e.gpu&&n&&e.weights[r].createGLTexture({type:"2d",format:"float"})})}},{key:"call",value:function(t){return this.output=t,this.output}}]),t}();e.default=o},function(t,e,n){"use strict";var r=n(274),i={body:"",args:[],thisVars:[],localVars:[]};function a(t){if(!t)return i;for(var e=0;e<t.args.length;++e){var n=t.args[e];t.args[e]=0===e?{name:n,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function o(t){for(var e=[],n=0;n<t.args.length;++n)e.push("a"+n);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return r({args:t.args,pre:a(t.pre),body:a(t.body),post:a(t.proc),funcName:t.funcName})}(t))}var s={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in s){var n=s[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:t}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:t+"eq"}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:t+"s"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:t+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in u){var n=u[t];e[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:t}),e[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in l){var n=l[t];e[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:t}),e[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:t+"s"}),e[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:t+"eq"}),e[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var c=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<c.length;++t){var n=c[t];e[n]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),e[n+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var f=["max","min","atan2","pow"];!function(){for(var t=0;t<f.length;++t){var n=f[t];e[n]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),e[n+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),e[n+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),e[n+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var h=["atan2","pow"];!function(){for(var t=0;t<h.length;++t){var n=h[t];e[n+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),e[n+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),e[n+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),e[n+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),e.any=r({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),e.all=r({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),e.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),e.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),e.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),e.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),e.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),e.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),e.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),e.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),e.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),e.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),e.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),e.equals=r({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},function(t,e){"function"===typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){var r=n(18);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(23),i=r.Buffer;function a(t,e){for(var n in t)e[n]=t[n]}function o(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(a(r,e),e.Buffer=o),a(i,o),o.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},o.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},o.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},function(t,e,n){var r=n(121)("wks"),i=n(70),a=n(16).Symbol,o="function"==typeof a;(t.exports=function(t){return r[t]||(r[t]=o&&a[t]||(o?a:i)("Symbol."+t))}).store=r},function(t,e,n){t.exports=!n(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(14),i=n(216),a=n(51),o=Object.defineProperty;e.f=n(20)?Object.defineProperty:function(t,e,n){if(r(t),e=a(e,!0),r(n),i)try{return o(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(53),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){"use strict";(function(t){var r=n(776),i=n(777),a=n(281);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(o()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return l(this,t,e,n)}function l(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?s(t,0):h(t,e);if("Buffer"===e.type&&a(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(c(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return B(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var a,o=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(t,a)===l(e,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var f=!0,h=0;h<u;h++)if(l(t,a+h)!==l(e,h)){f=!1;break}if(f)return a}return-1}function y(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=e.length;if(a%2!==0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(isNaN(s))return o;t[n+o]=s}return o}function b(t,e,n,r){return V(B(e,t.length-n),t,n,r)}function _(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return _(t,e,n,r)}function w(t,e,n,r){return V(U(e),t,n,r)}function S(t,e,n,r){return V(function(t,e){for(var n,r,i,a=[],o=0;o<t.length&&!((e-=2)<0);++o)n=t.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(e,t.length-n),t,n,r)}function E(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var a,o,s,u,l=t[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128===(192&(a=t[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=t[i+1],o=t[i+2],128===(192&a)&&128===(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=t[i+1],o=t[i+2],s=t[i+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=T));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=o(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"===typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):function(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return C(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return M(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=t.slice(e,n),f=0;f<s;++f)if(l[f]!==c[f]){a=l[f],o=c[f];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return w(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function P(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function M(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function C(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=e;a<n;++a)i+=z(t[a]);return i}function O(t,e,n){for(var r=t.slice(e,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function I(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,n,r,i,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function A(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,a=Math.min(t.length-n,2);i<a;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,a=Math.min(t.length-n,4);i<a;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,a){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(t,e,n,r,a){return a||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function L(t,e,n,r,a){return a||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=this[t],i=1,a=0;++a<e&&(i*=256);)r+=this[t+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||I(t,e,this.length);for(var r=e,i=1,a=this[t+--r];r>0&&(i*=256);)a+=this[t+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[e]=255&t;++a<n&&(i*=256);)this[e+a]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||N(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[e+i]=255&t;--i>=0&&(a*=256);)this[e+i]=t/a&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):R(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var a=0,o=1,s=0;for(this[e]=255&t;++a<n&&(o*=256);)t<0&&0===s&&0!==this[e+a-1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);N(this,t,e,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[e+a]=255&t;--a>=0&&(o*=256);)t<0&&0===s&&0!==this[e+a+1]&&(s=1),this[e+a]=(t/o>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):A(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):A(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):R(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):R(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return j(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return j(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return L(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return L(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&n<e&&e<r)for(i=a-1;i>=0;--i)t[i+e]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+a),e);return a},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var a;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(a=e;a<n;++a)this[a]=t;else{var o=u.isBuffer(t)?t:B(new u(t,r).toString()),s=o.length;for(a=0;a<n-e;++a)this[a+e]=o[a%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function z(t){return t<16?"0"+t.toString(16):t.toString(16)}function B(t,e){var n;e=e||1/0;for(var r=t.length,i=null,a=[],o=0;o<r;++o){if((n=t.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;a.push(n)}else if(n<2048){if((e-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(26))},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t,e,n){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var o;"object"===typeof t?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;try{o=n(876).Buffer}catch(E){}function s(t,e,n){for(var r=0,i=Math.min(t.length,n),a=e;a<i;a++){var o=t.charCodeAt(a)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function u(t,e,n,r){for(var i=0,a=Math.min(t.length,n),o=e;o<a;o++){var s=t.charCodeAt(o)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}a.isBN=function(t){return t instanceof a||null!==t&&"object"===typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,e,n){if("number"===typeof t)return this._initNumber(t,e,n);if("object"===typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&i++,16===e?this._parseHex(t,i):this._parseBase(t,e,i),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initArray=function(t,e,n){if(r("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===n)for(i=t.length-1,a=0;i>=0;i-=3)o=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===n)for(i=0,a=0;i<t.length;i+=3)o=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},a.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,a=0;for(n=t.length-6,r=0;n>=e;n-=6)i=s(t,n,n+6),this.words[r]|=i<<a&67108863,this.words[r+1]|=i>>>26-a&4194303,(a+=24)>=26&&(a-=26,r++);n+6!==e&&(i=s(t,e,n+6),this.words[r]|=i<<a&67108863,this.words[r+1]|=i>>>26-a&4194303),this.strip()},a.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var a=t.length-n,o=a%r,s=Math.min(a,a-o)+n,l=0,c=n;c<s;c+=r)l=u(t,c,c+r,e),this.imuln(i),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==o){var f=1;for(l=u(t,c,t.length,e),c=0;c<o;c++)f*=e;this.imuln(f),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var l=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],a=0|e.words[0],o=i*a,s=67108863&o,u=o/67108864|0;n.words[0]=s;for(var l=1;l<r;l++){for(var c=u>>>26,f=67108863&u,h=Math.min(l,e.length-1),p=Math.max(0,l-t.length+1);p<=h;p++){var d=l-p|0;c+=(o=(i=0|t.words[d])*(a=0|e.words[p])+f)/67108864|0,f=67108863&o}n.words[l]=0|f,u=0|c}return 0!==u?n.words[l]=0|u:n.length--,n.strip()}a.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],u=(16777215&(s<<i|a)).toString(16);n=0!==(a=s>>>24-i&16777215)||o!==this.length-1?l[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,o--)}for(0!==a&&(n=a.toString(16)+n);n.length%e!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var h=c[t],p=f[t];n="";var d=this.clone();for(d.negative=0;!d.isZero();){var m=d.modn(p).toString(t);n=(d=d.idivn(p)).isZero()?m+n:l[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%e!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(t,e){return r("undefined"!==typeof o),this.toArrayLike(o,t,e)},a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},a.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),a=n||Math.max(1,i);r(i<=a,"byte array longer than desired length"),r(a>0,"Requested array length <= 0"),this.strip();var o,s,u="le"===e,l=new t(a),c=this.clone();if(u){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[s]=o;for(;s<a;s++)l[s]=0}else{for(s=0;s<a-i;s++)l[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),l[a-s-1]=o}return l},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0===(8191&e)&&(n+=13,e>>>=13),0===(127&e)&&(n+=7,e>>>=7),0===(15&e)&&(n+=4,e>>>=4),0===(3&e)&&(n+=2,e>>>=2),0===(1&e)&&n++,n},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},a.prototype.ior=function(t){return r(0===(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},a.prototype.iand=function(t){return r(0===(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},a.prototype.ixor=function(t){return r(0===(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){r("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){r("number"===typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},a.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,a=0;a<r.length;a++)e=(0|n.words[a])+(0|r.words[a])+i,this.words[a]=67108863&e,i=e>>>26;for(;0!==i&&a<n.length;a++)e=(0|n.words[a])+i,this.words[a]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var a=0,o=0;o<r.length;o++)a=(e=(0|n.words[o])-(0|r.words[o])+a)>>26,this.words[o]=67108863&e;for(;0!==a&&o<n.length;o++)a=(e=(0|n.words[o])+a)>>26,this.words[o]=67108863&e;if(0===a&&o<n.length&&n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this.length=Math.max(this.length,o),n!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,a,o=t.words,s=e.words,u=n.words,l=0,c=0|o[0],f=8191&c,h=c>>>13,p=0|o[1],d=8191&p,m=p>>>13,g=0|o[2],v=8191&g,y=g>>>13,b=0|o[3],_=8191&b,x=b>>>13,w=0|o[4],S=8191&w,E=w>>>13,k=0|o[5],T=8191&k,P=k>>>13,M=0|o[6],C=8191&M,O=M>>>13,I=0|o[7],N=8191&I,A=I>>>13,R=0|o[8],D=8191&R,j=R>>>13,L=0|o[9],F=8191&L,z=L>>>13,B=0|s[0],U=8191&B,V=B>>>13,q=0|s[1],W=8191&q,G=q>>>13,H=0|s[2],$=8191&H,K=H>>>13,X=0|s[3],Y=8191&X,J=X>>>13,Z=0|s[4],Q=8191&Z,tt=Z>>>13,et=0|s[5],nt=8191&et,rt=et>>>13,it=0|s[6],at=8191&it,ot=it>>>13,st=0|s[7],ut=8191&st,lt=st>>>13,ct=0|s[8],ft=8191&ct,ht=ct>>>13,pt=0|s[9],dt=8191&pt,mt=pt>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(l+(r=Math.imul(f,U))|0)+((8191&(i=(i=Math.imul(f,V))+Math.imul(h,U)|0))<<13)|0;l=((a=Math.imul(h,V))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(d,U),i=(i=Math.imul(d,V))+Math.imul(m,U)|0,a=Math.imul(m,V);var vt=(l+(r=r+Math.imul(f,W)|0)|0)+((8191&(i=(i=i+Math.imul(f,G)|0)+Math.imul(h,W)|0))<<13)|0;l=((a=a+Math.imul(h,G)|0)+(i>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,U),i=(i=Math.imul(v,V))+Math.imul(y,U)|0,a=Math.imul(y,V),r=r+Math.imul(d,W)|0,i=(i=i+Math.imul(d,G)|0)+Math.imul(m,W)|0,a=a+Math.imul(m,G)|0;var yt=(l+(r=r+Math.imul(f,$)|0)|0)+((8191&(i=(i=i+Math.imul(f,K)|0)+Math.imul(h,$)|0))<<13)|0;l=((a=a+Math.imul(h,K)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(_,U),i=(i=Math.imul(_,V))+Math.imul(x,U)|0,a=Math.imul(x,V),r=r+Math.imul(v,W)|0,i=(i=i+Math.imul(v,G)|0)+Math.imul(y,W)|0,a=a+Math.imul(y,G)|0,r=r+Math.imul(d,$)|0,i=(i=i+Math.imul(d,K)|0)+Math.imul(m,$)|0,a=a+Math.imul(m,K)|0;var bt=(l+(r=r+Math.imul(f,Y)|0)|0)+((8191&(i=(i=i+Math.imul(f,J)|0)+Math.imul(h,Y)|0))<<13)|0;l=((a=a+Math.imul(h,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(S,U),i=(i=Math.imul(S,V))+Math.imul(E,U)|0,a=Math.imul(E,V),r=r+Math.imul(_,W)|0,i=(i=i+Math.imul(_,G)|0)+Math.imul(x,W)|0,a=a+Math.imul(x,G)|0,r=r+Math.imul(v,$)|0,i=(i=i+Math.imul(v,K)|0)+Math.imul(y,$)|0,a=a+Math.imul(y,K)|0,r=r+Math.imul(d,Y)|0,i=(i=i+Math.imul(d,J)|0)+Math.imul(m,Y)|0,a=a+Math.imul(m,J)|0;var _t=(l+(r=r+Math.imul(f,Q)|0)|0)+((8191&(i=(i=i+Math.imul(f,tt)|0)+Math.imul(h,Q)|0))<<13)|0;l=((a=a+Math.imul(h,tt)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(T,U),i=(i=Math.imul(T,V))+Math.imul(P,U)|0,a=Math.imul(P,V),r=r+Math.imul(S,W)|0,i=(i=i+Math.imul(S,G)|0)+Math.imul(E,W)|0,a=a+Math.imul(E,G)|0,r=r+Math.imul(_,$)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(x,$)|0,a=a+Math.imul(x,K)|0,r=r+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(y,Y)|0,a=a+Math.imul(y,J)|0,r=r+Math.imul(d,Q)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(m,Q)|0,a=a+Math.imul(m,tt)|0;var xt=(l+(r=r+Math.imul(f,nt)|0)|0)+((8191&(i=(i=i+Math.imul(f,rt)|0)+Math.imul(h,nt)|0))<<13)|0;l=((a=a+Math.imul(h,rt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(C,U),i=(i=Math.imul(C,V))+Math.imul(O,U)|0,a=Math.imul(O,V),r=r+Math.imul(T,W)|0,i=(i=i+Math.imul(T,G)|0)+Math.imul(P,W)|0,a=a+Math.imul(P,G)|0,r=r+Math.imul(S,$)|0,i=(i=i+Math.imul(S,K)|0)+Math.imul(E,$)|0,a=a+Math.imul(E,K)|0,r=r+Math.imul(_,Y)|0,i=(i=i+Math.imul(_,J)|0)+Math.imul(x,Y)|0,a=a+Math.imul(x,J)|0,r=r+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,tt)|0)+Math.imul(y,Q)|0,a=a+Math.imul(y,tt)|0,r=r+Math.imul(d,nt)|0,i=(i=i+Math.imul(d,rt)|0)+Math.imul(m,nt)|0,a=a+Math.imul(m,rt)|0;var wt=(l+(r=r+Math.imul(f,at)|0)|0)+((8191&(i=(i=i+Math.imul(f,ot)|0)+Math.imul(h,at)|0))<<13)|0;l=((a=a+Math.imul(h,ot)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(N,U),i=(i=Math.imul(N,V))+Math.imul(A,U)|0,a=Math.imul(A,V),r=r+Math.imul(C,W)|0,i=(i=i+Math.imul(C,G)|0)+Math.imul(O,W)|0,a=a+Math.imul(O,G)|0,r=r+Math.imul(T,$)|0,i=(i=i+Math.imul(T,K)|0)+Math.imul(P,$)|0,a=a+Math.imul(P,K)|0,r=r+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,J)|0)+Math.imul(E,Y)|0,a=a+Math.imul(E,J)|0,r=r+Math.imul(_,Q)|0,i=(i=i+Math.imul(_,tt)|0)+Math.imul(x,Q)|0,a=a+Math.imul(x,tt)|0,r=r+Math.imul(v,nt)|0,i=(i=i+Math.imul(v,rt)|0)+Math.imul(y,nt)|0,a=a+Math.imul(y,rt)|0,r=r+Math.imul(d,at)|0,i=(i=i+Math.imul(d,ot)|0)+Math.imul(m,at)|0,a=a+Math.imul(m,ot)|0;var St=(l+(r=r+Math.imul(f,ut)|0)|0)+((8191&(i=(i=i+Math.imul(f,lt)|0)+Math.imul(h,ut)|0))<<13)|0;l=((a=a+Math.imul(h,lt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(D,U),i=(i=Math.imul(D,V))+Math.imul(j,U)|0,a=Math.imul(j,V),r=r+Math.imul(N,W)|0,i=(i=i+Math.imul(N,G)|0)+Math.imul(A,W)|0,a=a+Math.imul(A,G)|0,r=r+Math.imul(C,$)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(O,$)|0,a=a+Math.imul(O,K)|0,r=r+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(P,Y)|0,a=a+Math.imul(P,J)|0,r=r+Math.imul(S,Q)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(E,Q)|0,a=a+Math.imul(E,tt)|0,r=r+Math.imul(_,nt)|0,i=(i=i+Math.imul(_,rt)|0)+Math.imul(x,nt)|0,a=a+Math.imul(x,rt)|0,r=r+Math.imul(v,at)|0,i=(i=i+Math.imul(v,ot)|0)+Math.imul(y,at)|0,a=a+Math.imul(y,ot)|0,r=r+Math.imul(d,ut)|0,i=(i=i+Math.imul(d,lt)|0)+Math.imul(m,ut)|0,a=a+Math.imul(m,lt)|0;var Et=(l+(r=r+Math.imul(f,ft)|0)|0)+((8191&(i=(i=i+Math.imul(f,ht)|0)+Math.imul(h,ft)|0))<<13)|0;l=((a=a+Math.imul(h,ht)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(F,U),i=(i=Math.imul(F,V))+Math.imul(z,U)|0,a=Math.imul(z,V),r=r+Math.imul(D,W)|0,i=(i=i+Math.imul(D,G)|0)+Math.imul(j,W)|0,a=a+Math.imul(j,G)|0,r=r+Math.imul(N,$)|0,i=(i=i+Math.imul(N,K)|0)+Math.imul(A,$)|0,a=a+Math.imul(A,K)|0,r=r+Math.imul(C,Y)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(O,Y)|0,a=a+Math.imul(O,J)|0,r=r+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(P,Q)|0,a=a+Math.imul(P,tt)|0,r=r+Math.imul(S,nt)|0,i=(i=i+Math.imul(S,rt)|0)+Math.imul(E,nt)|0,a=a+Math.imul(E,rt)|0,r=r+Math.imul(_,at)|0,i=(i=i+Math.imul(_,ot)|0)+Math.imul(x,at)|0,a=a+Math.imul(x,ot)|0,r=r+Math.imul(v,ut)|0,i=(i=i+Math.imul(v,lt)|0)+Math.imul(y,ut)|0,a=a+Math.imul(y,lt)|0,r=r+Math.imul(d,ft)|0,i=(i=i+Math.imul(d,ht)|0)+Math.imul(m,ft)|0,a=a+Math.imul(m,ht)|0;var kt=(l+(r=r+Math.imul(f,dt)|0)|0)+((8191&(i=(i=i+Math.imul(f,mt)|0)+Math.imul(h,dt)|0))<<13)|0;l=((a=a+Math.imul(h,mt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(F,W),i=(i=Math.imul(F,G))+Math.imul(z,W)|0,a=Math.imul(z,G),r=r+Math.imul(D,$)|0,i=(i=i+Math.imul(D,K)|0)+Math.imul(j,$)|0,a=a+Math.imul(j,K)|0,r=r+Math.imul(N,Y)|0,i=(i=i+Math.imul(N,J)|0)+Math.imul(A,Y)|0,a=a+Math.imul(A,J)|0,r=r+Math.imul(C,Q)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(O,Q)|0,a=a+Math.imul(O,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(P,nt)|0,a=a+Math.imul(P,rt)|0,r=r+Math.imul(S,at)|0,i=(i=i+Math.imul(S,ot)|0)+Math.imul(E,at)|0,a=a+Math.imul(E,ot)|0,r=r+Math.imul(_,ut)|0,i=(i=i+Math.imul(_,lt)|0)+Math.imul(x,ut)|0,a=a+Math.imul(x,lt)|0,r=r+Math.imul(v,ft)|0,i=(i=i+Math.imul(v,ht)|0)+Math.imul(y,ft)|0,a=a+Math.imul(y,ht)|0;var Tt=(l+(r=r+Math.imul(d,dt)|0)|0)+((8191&(i=(i=i+Math.imul(d,mt)|0)+Math.imul(m,dt)|0))<<13)|0;l=((a=a+Math.imul(m,mt)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(F,$),i=(i=Math.imul(F,K))+Math.imul(z,$)|0,a=Math.imul(z,K),r=r+Math.imul(D,Y)|0,i=(i=i+Math.imul(D,J)|0)+Math.imul(j,Y)|0,a=a+Math.imul(j,J)|0,r=r+Math.imul(N,Q)|0,i=(i=i+Math.imul(N,tt)|0)+Math.imul(A,Q)|0,a=a+Math.imul(A,tt)|0,r=r+Math.imul(C,nt)|0,i=(i=i+Math.imul(C,rt)|0)+Math.imul(O,nt)|0,a=a+Math.imul(O,rt)|0,r=r+Math.imul(T,at)|0,i=(i=i+Math.imul(T,ot)|0)+Math.imul(P,at)|0,a=a+Math.imul(P,ot)|0,r=r+Math.imul(S,ut)|0,i=(i=i+Math.imul(S,lt)|0)+Math.imul(E,ut)|0,a=a+Math.imul(E,lt)|0,r=r+Math.imul(_,ft)|0,i=(i=i+Math.imul(_,ht)|0)+Math.imul(x,ft)|0,a=a+Math.imul(x,ht)|0;var Pt=(l+(r=r+Math.imul(v,dt)|0)|0)+((8191&(i=(i=i+Math.imul(v,mt)|0)+Math.imul(y,dt)|0))<<13)|0;l=((a=a+Math.imul(y,mt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(F,Y),i=(i=Math.imul(F,J))+Math.imul(z,Y)|0,a=Math.imul(z,J),r=r+Math.imul(D,Q)|0,i=(i=i+Math.imul(D,tt)|0)+Math.imul(j,Q)|0,a=a+Math.imul(j,tt)|0,r=r+Math.imul(N,nt)|0,i=(i=i+Math.imul(N,rt)|0)+Math.imul(A,nt)|0,a=a+Math.imul(A,rt)|0,r=r+Math.imul(C,at)|0,i=(i=i+Math.imul(C,ot)|0)+Math.imul(O,at)|0,a=a+Math.imul(O,ot)|0,r=r+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,lt)|0)+Math.imul(P,ut)|0,a=a+Math.imul(P,lt)|0,r=r+Math.imul(S,ft)|0,i=(i=i+Math.imul(S,ht)|0)+Math.imul(E,ft)|0,a=a+Math.imul(E,ht)|0;var Mt=(l+(r=r+Math.imul(_,dt)|0)|0)+((8191&(i=(i=i+Math.imul(_,mt)|0)+Math.imul(x,dt)|0))<<13)|0;l=((a=a+Math.imul(x,mt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(F,Q),i=(i=Math.imul(F,tt))+Math.imul(z,Q)|0,a=Math.imul(z,tt),r=r+Math.imul(D,nt)|0,i=(i=i+Math.imul(D,rt)|0)+Math.imul(j,nt)|0,a=a+Math.imul(j,rt)|0,r=r+Math.imul(N,at)|0,i=(i=i+Math.imul(N,ot)|0)+Math.imul(A,at)|0,a=a+Math.imul(A,ot)|0,r=r+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,lt)|0)+Math.imul(O,ut)|0,a=a+Math.imul(O,lt)|0,r=r+Math.imul(T,ft)|0,i=(i=i+Math.imul(T,ht)|0)+Math.imul(P,ft)|0,a=a+Math.imul(P,ht)|0;var Ct=(l+(r=r+Math.imul(S,dt)|0)|0)+((8191&(i=(i=i+Math.imul(S,mt)|0)+Math.imul(E,dt)|0))<<13)|0;l=((a=a+Math.imul(E,mt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(F,nt),i=(i=Math.imul(F,rt))+Math.imul(z,nt)|0,a=Math.imul(z,rt),r=r+Math.imul(D,at)|0,i=(i=i+Math.imul(D,ot)|0)+Math.imul(j,at)|0,a=a+Math.imul(j,ot)|0,r=r+Math.imul(N,ut)|0,i=(i=i+Math.imul(N,lt)|0)+Math.imul(A,ut)|0,a=a+Math.imul(A,lt)|0,r=r+Math.imul(C,ft)|0,i=(i=i+Math.imul(C,ht)|0)+Math.imul(O,ft)|0,a=a+Math.imul(O,ht)|0;var Ot=(l+(r=r+Math.imul(T,dt)|0)|0)+((8191&(i=(i=i+Math.imul(T,mt)|0)+Math.imul(P,dt)|0))<<13)|0;l=((a=a+Math.imul(P,mt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(F,at),i=(i=Math.imul(F,ot))+Math.imul(z,at)|0,a=Math.imul(z,ot),r=r+Math.imul(D,ut)|0,i=(i=i+Math.imul(D,lt)|0)+Math.imul(j,ut)|0,a=a+Math.imul(j,lt)|0,r=r+Math.imul(N,ft)|0,i=(i=i+Math.imul(N,ht)|0)+Math.imul(A,ft)|0,a=a+Math.imul(A,ht)|0;var It=(l+(r=r+Math.imul(C,dt)|0)|0)+((8191&(i=(i=i+Math.imul(C,mt)|0)+Math.imul(O,dt)|0))<<13)|0;l=((a=a+Math.imul(O,mt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(F,ut),i=(i=Math.imul(F,lt))+Math.imul(z,ut)|0,a=Math.imul(z,lt),r=r+Math.imul(D,ft)|0,i=(i=i+Math.imul(D,ht)|0)+Math.imul(j,ft)|0,a=a+Math.imul(j,ht)|0;var Nt=(l+(r=r+Math.imul(N,dt)|0)|0)+((8191&(i=(i=i+Math.imul(N,mt)|0)+Math.imul(A,dt)|0))<<13)|0;l=((a=a+Math.imul(A,mt)|0)+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(F,ft),i=(i=Math.imul(F,ht))+Math.imul(z,ft)|0,a=Math.imul(z,ht);var At=(l+(r=r+Math.imul(D,dt)|0)|0)+((8191&(i=(i=i+Math.imul(D,mt)|0)+Math.imul(j,dt)|0))<<13)|0;l=((a=a+Math.imul(j,mt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863;var Rt=(l+(r=Math.imul(F,dt))|0)+((8191&(i=(i=Math.imul(F,mt))+Math.imul(z,dt)|0))<<13)|0;return l=((a=Math.imul(z,mt))+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,u[0]=gt,u[1]=vt,u[2]=yt,u[3]=bt,u[4]=_t,u[5]=xt,u[6]=wt,u[7]=St,u[8]=Et,u[9]=kt,u[10]=Tt,u[11]=Pt,u[12]=Mt,u[13]=Ct,u[14]=Ot,u[15]=It,u[16]=Nt,u[17]=At,u[18]=Rt,0!==l&&(u[19]=l,n.length++),n};function d(t,e,n){return(new m).mulp(t,e,n)}function m(t,e){this.x=t,this.y=e}Math.imul||(p=h),a.prototype.mulTo=function(t,e){var n=this.length+t.length;return 10===this.length&&10===t.length?p(this,t,e):n<63?h(this,t,e):n<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,a=0;a<n.length-1;a++){var o=i;i=0;for(var s=67108863&r,u=Math.min(a,e.length-1),l=Math.max(0,a-t.length+1);l<=u;l++){var c=a-l,f=(0|t.words[c])*(0|e.words[l]),h=67108863&f;s=67108863&(h=h+s|0),i+=(o=(o=o+(f/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}n.words[a]=s,r=o,o=i}return 0!==r?n.words[a]=r:n.length--,n.strip()}(this,t,e):d(this,t,e)},m.prototype.makeRBT=function(t){for(var e=new Array(t),n=a.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},m.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},m.prototype.permute=function(t,e,n,r,i,a){for(var o=0;o<a;o++)r[o]=e[t[o]],i[o]=n[t[o]]},m.prototype.transform=function(t,e,n,r,i,a){this.permute(a,t,e,n,r,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,u=Math.cos(2*Math.PI/s),l=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var f=u,h=l,p=0;p<o;p++){var d=n[c+p],m=r[c+p],g=n[c+p+o],v=r[c+p+o],y=f*g-h*v;v=f*v+h*g,g=y,n[c+p]=d+g,r[c+p]=m+v,n[c+p+o]=d-g,r[c+p+o]=m-v,p!==s&&(y=u*f-l*h,h=u*h+l*f,f=y)}},m.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},m.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},m.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},m.prototype.convert13b=function(t,e,n,i){for(var a=0,o=0;o<e;o++)a+=0|t[o],n[2*o]=8191&a,a>>>=13,n[2*o+1]=8191&a,a>>>=13;for(o=2*e;o<i;++o)n[o]=0;r(0===a),r(0===(-8192&a))},m.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},m.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),a=this.stub(r),o=new Array(r),s=new Array(r),u=new Array(r),l=new Array(r),c=new Array(r),f=new Array(r),h=n.words;h.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,l,r),this.transform(o,a,s,u,r,i),this.transform(l,a,c,f,r,i);for(var p=0;p<r;p++){var d=s[p]*c[p]-u[p]*f[p];u[p]=s[p]*f[p]+u[p]*c[p],s[p]=d}return this.conjugate(s,u,r),this.transform(s,u,h,a,r,i),this.conjugate(h,a,r),this.normalize13b(h,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),d(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){r("number"===typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,a=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=a>>>26,this.words[n]=67108863&a}return 0!==e&&(this.words[n]=e,this.length++),this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new a(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},a.prototype.iushln=function(t){r("number"===typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,a=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(e=0;e<this.length;e++){var s=this.words[e]&a,u=(0|this.words[e])-s<<n;this.words[e]=u|o,o=s>>>26-n}o&&(this.words[e]=o,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},a.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,n){var i;r("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var a=t%26,o=Math.min((t-a)/26,this.length),s=67108863^67108863>>>a<<a,u=n;if(i-=o,i=Math.max(0,i),u){for(var l=0;l<o;l++)u.words[l]=this.words[l];u.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(0!==c||l>=i);l--){var f=0|this.words[l];this.words[l]=c<<26-a|f>>>a,c=f&s}return u&&0!==c&&(u.words[u.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){r("number"===typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},a.prototype.imaskn=function(t){r("number"===typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return r("number"===typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(r("number"===typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,n){var i,a,o=t.length+n;this._expand(o);var s=0;for(i=0;i<t.length;i++){a=(0|this.words[i+n])+s;var u=(0|t.words[i])*e;s=((a-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&a}for(;i<this.length-n;i++)s=(a=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&a;if(0===s)return this.strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(a=-(0|this.words[i])+s)>>26,this.words[i]=67108863&a;return this.negative=1,this.strip()},a.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,o=0|i.words[i.length-1];0!==(n=26-this._countBits(o))&&(i=i.ushln(n),r.iushln(n),o=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==e){(s=new a(null)).length=u+1,s.words=new Array(s.length);for(var l=0;l<s.length;l++)s.words[l]=0}var c=r.clone()._ishlnsubmul(i,1,u);0===c.negative&&(r=c,s&&(s.words[u]=1));for(var f=u-1;f>=0;f--){var h=67108864*(0|r.words[i.length+f])+(0|r.words[i.length+f-1]);for(h=Math.min(h/o|0,67108863),r._ishlnsubmul(i,h,f);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(i,1,f),r.isZero()||(r.negative^=1);s&&(s.words[f]=h)}return s&&s.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},a.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&t.negative)?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(o=s.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:s.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,o,s},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),a=n.cmp(r);return a<0||1===i&&0===a?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},a.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new a(1),o=new a(0),s=new a(0),u=new a(1),l=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++l;for(var c=n.clone(),f=e.clone();!e.isZero();){for(var h=0,p=1;0===(e.words[0]&p)&&h<26;++h,p<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(c),o.isub(f)),i.iushrn(1),o.iushrn(1);for(var d=0,m=1;0===(n.words[0]&m)&&d<26;++d,m<<=1);if(d>0)for(n.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(c),u.isub(f)),s.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(s),o.isub(u)):(n.isub(e),s.isub(i),u.isub(o))}return{a:s,b:u,gcd:n.iushln(l)}},a.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,o=new a(1),s=new a(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var l=0,c=1;0===(e.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(u),o.iushrn(1);for(var f=0,h=1;0===(n.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(n.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(s)):(n.isub(e),s.isub(o))}return(i=0===e.cmpn(1)?o:s).cmpn(0)<0&&i.iadd(t),i},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var a=e;e=n,n=a}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return 0===(1&this.words[0])},a.prototype.isOdd=function(){return 1===(1&this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){r("number"===typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var a=i,o=n;0!==a&&o<this.length;o++){var s=0|this.words[o];a=(s+=a)>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new w(t)},a.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function b(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function x(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function w(t){if("string"===typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){w.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},i(y,v),y.prototype.split=function(t,e){for(var n=Math.min(t.length,9),r=0;r<n;r++)e.words[r]=t.words[r];if(e.length=n,t.length<=9)return t.words[0]=0,void(t.length=1);var i=t.words[9];for(e.words[e.length++]=4194303&i,r=10;r<t.length;r++){var a=0|t.words[r];t.words[r-10]=(4194303&a)<<4|i>>>22,i=a}i>>>=22,t.words[r-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(b,v),i(_,v),i(x,v),x.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new y;else if("p224"===t)e=new b;else if("p192"===t)e=new _;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new x}return g[t]=e,e},w.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},w.prototype._verify2=function(t,e){r(0===(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},w.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},w.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},w.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},w.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},w.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},w.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},w.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},w.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},w.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},w.prototype.isqr=function(t){return this.imul(t,t.clone())},w.prototype.sqr=function(t){return this.mul(t,t)},w.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2===1),3===e){var n=this.m.add(new a(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var s=new a(1).toRed(this),u=s.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);0!==this.pow(c,l).cmp(u);)c.redIAdd(u);for(var f=this.pow(c,i),h=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=o;0!==p.cmp(s);){for(var m=p,g=0;0!==m.cmp(s);g++)m=m.redSqr();r(g<d);var v=this.pow(f,new a(1).iushln(d-g-1));h=h.redMul(v),f=v.redSqr(),p=p.redMul(f),d=g}return h},w.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},w.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new a(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],o=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],c=u-1;c>=0;c--){var f=l>>c&1;i!==n[0]&&(i=this.sqr(i)),0!==f||0!==o?(o<<=1,o|=f,(4===++s||0===r&&0===c)&&(i=this.mul(i,n[o]),s=0,o=0)):s=0}u=26}return i},w.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},w.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new S(t)},i(S,w),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}("undefined"===typeof t||t,this)}).call(this,n(104)(t))},function(t,e,n){var r=n(52);t.exports=function(t){return Object(r(t))}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){"use strict";var r=n(693),i=n(274),a=["args","body"],o=["pre","post","printCode","funcName","blockSize"];t.exports=function(t){for(var e in t)a.indexOf(e)<0&&o.indexOf(e)<0&&console.warn("cwise: Unknown argument '"+e+"' passed to expression compiler");for(var n=0;n<a.length;++n)if(!t[a[n]])throw new Error("cwise: Missing argument: "+a[n]);return i({args:t.args,pre:r(t.pre||function(){}),body:r(t.body),post:r(t.post||function(){}),debug:!!t.printCode,funcName:t.funcName||t.body.name||"cwise",blockSize:t.blockSize||64})}},function(t,e,n){"use strict";var r=e;r.version=n(882).version,r.utils=n(883),r.rand=n(313),r.curve=n(150),r.curves=n(888),r.ec=n(896),r.eddsa=n(900)},function(t,e,n){var r=n(21),i=n(69);t.exports=n(20)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(16),i=n(30),a=n(35),o=n(70)("src"),s=Function.toString,u=(""+s).split("toString");n(50).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(a(n,"name")||i(n,"name",e)),t[e]!==n&&(l&&(a(n,o)||i(n,o,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||s.call(this)})},function(t,e,n){var r=n(1),i=n(17),a=n(52),o=/"/g,s=function(t,e,n,r){var i=String(a(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(r).replace(o,"&quot;")+'"'),s+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){n(3);var r=n(711);function i(e,n,a){return"undefined"!==typeof Reflect&&Reflect.get?t.exports=i=Reflect.get:t.exports=i=function(t,e,n){var i=r(t,e);if(i){var a=Object.getOwnPropertyDescriptor(i,e);return a.get?a.get.call(n):a.value}},i(e,n,a||e)}t.exports=i},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",function(){return r})},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(97),i=n(52);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(98),i=n(69),a=n(36),o=n(51),s=n(35),u=n(216),l=Object.getOwnPropertyDescriptor;e.f=n(20)?l:function(t,e){if(t=a(t),e=o(e,!0),u)try{return l(t,e)}catch(n){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(35),i=n(25),a=n(162)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e){var n,r,i=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:a}catch(t){n=a}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,l=[],c=!1,f=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):f=-1,l.length&&p())}function p(){if(!c){var t=s(h);c=!0;for(var e=l.length;e;){for(u=l,l=[];++f<e;)u&&u[f].run();f=-1,e=l.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new d(t,e)),1!==l.length||c||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(268),i=n(269),a=Object.prototype.toString;function o(t){return"[object Array]"===a.call(t)}function s(t){return null!==t&&"object"===typeof t}function u(t){return"[object Function]"===a.call(t)}function l(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===a.call(t)},isBuffer:i,isFormData:function(t){return"undefined"!==typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:s,isUndefined:function(t){return"undefined"===typeof t},isDate:function(t){return"[object Date]"===a.call(t)},isFile:function(t){return"[object File]"===a.call(t)},isBlob:function(t){return"[object Blob]"===a.call(t)},isFunction:u,isStream:function(t){return s(t)&&u(t.pipe)},isURLSearchParams:function(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product)&&"undefined"!==typeof window&&"undefined"!==typeof document},forEach:l,merge:function t(){var e={};function n(n,r){"object"===typeof e[r]&&"object"===typeof n?e[r]=t(e[r],n):e[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return e},extend:function(t,e,n){return l(e,function(e,i){t[i]=n&&"function"===typeof e?r(e,n):e}),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=n,n.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},function(t,e,n){"use strict";var r=n(6),i=n(926);if("undefined"===typeof r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var a=(new r.Component).updater;t.exports=i(r.Component,r.isValidElement,a)},function(t,e,n){var r=n(27);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){"use strict";var r=n(17);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(681),i=n(682),a=n(683);t.exports=function(t){return r(t)||i(t)||a()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"softmax",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"elu",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"selu",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"softplus",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"softsign",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"relu",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"tanh",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"sigmoid",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"hard_sigmoid",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"linear",{enumerable:!0,get:function(){return h.default}});var r=p(n(691)),i=p(n(692)),a=p(n(695)),o=p(n(696)),s=p(n(697)),u=p(n(698)),l=p(n(699)),c=p(n(700)),f=p(n(701)),h=p(n(702));function p(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),p=1;p<e;p++)n[p-1]=arguments[p];switch(t){case"add":return r.default.apply(void 0,n);case"average":return i.default.apply(void 0,n);case"concatenate":return a.default.apply(void 0,n);case"maximum":return o.default.apply(void 0,n);case"minimum":return s.default.apply(void 0,n);case"multiply":return u.default.apply(void 0,n);case"subtract":return l.default.apply(void 0,n);case"conv2d":return c.default.apply(void 0,n);case"conv2dTranspose":return f.default.apply(void 0,n);case"cam":return h.default.apply(void 0,n);default:throw new Error("GLSL program not found")}};var r=p(n(712)),i=p(n(713)),a=p(n(714)),o=p(n(718)),s=p(n(719)),u=p(n(720)),l=p(n(721)),c=p(n(722)),f=p(n(723)),h=p(n(724));function p(t){return t&&t.__esModule?t:{default:t}}},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(18);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(1),i=n(50),a=n(17);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],o={};o[t]=e(n),r(r.S+r.F*a(function(){n(1)}),"Object",o)}},function(t,e,n){var r=n(43),i=n(97),a=n(25),o=n(22),s=n(179);t.exports=function(t,e){var n=1==t,u=2==t,l=3==t,c=4==t,f=6==t,h=5==t||f,p=e||s;return function(e,s,d){for(var m,g,v=a(e),y=i(v),b=r(s,d,3),_=o(y.length),x=0,w=n?p(e,_):u?p(e,0):void 0;_>x;x++)if((h||x in y)&&(g=b(m=y[x],x,v),t))if(n)w[x]=g;else if(g)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:w.push(m)}else if(c)return!1;return f?-1:l||c?c:w}}},function(t,e,n){var r=n(250),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},function(t,e,n){"use strict";var r=n(41),i=n(13);function a(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function o(t){return 1===t.length?"0"+t:t}function s(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"===typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(t="0"+t),r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}else for(var r=0;r<t.length;r++){var i=t.charCodeAt(r),a=i>>8,o=255&i;a?n.push(a,o):n.push(o)}else for(r=0;r<t.length;r++)n[r]=0|t[r];return n},e.toHex=function(t){for(var e="",n=0;n<t.length;n++)e+=o(t[n].toString(16));return e},e.htonl=a,e.toHex32=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];"little"===e&&(i=a(i)),n+=s(i.toString(16))}return n},e.zero2=o,e.zero8=s,e.join32=function(t,e,n,i){var a=n-e;r(a%4===0);for(var o=new Array(a/4),s=0,u=e;s<o.length;s++,u+=4){var l;l="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],o[s]=l>>>0}return o},e.split32=function(t,e){for(var n=new Array(4*t.length),r=0,i=0;r<t.length;r++,i+=4){var a=t[r];"big"===e?(n[i]=a>>>24,n[i+1]=a>>>16&255,n[i+2]=a>>>8&255,n[i+3]=255&a):(n[i+3]=a>>>24,n[i+2]=a>>>16&255,n[i+1]=a>>>8&255,n[i]=255&a)}return n},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,n){return t+e+n>>>0},e.sum32_4=function(t,e,n,r){return t+e+n+r>>>0},e.sum32_5=function(t,e,n,r,i){return t+e+n+r+i>>>0},e.sum64=function(t,e,n,r){var i=t[e],a=r+t[e+1]>>>0,o=(a<r?1:0)+n+i;t[e]=o>>>0,t[e+1]=a},e.sum64_hi=function(t,e,n,r){return(e+r>>>0<e?1:0)+t+n>>>0},e.sum64_lo=function(t,e,n,r){return e+r>>>0},e.sum64_4_hi=function(t,e,n,r,i,a,o,s){var u=0,l=e;return u+=(l=l+r>>>0)<e?1:0,u+=(l=l+a>>>0)<a?1:0,t+n+i+o+(u+=(l=l+s>>>0)<s?1:0)>>>0},e.sum64_4_lo=function(t,e,n,r,i,a,o,s){return e+r+a+s>>>0},e.sum64_5_hi=function(t,e,n,r,i,a,o,s,u,l){var c=0,f=e;return c+=(f=f+r>>>0)<e?1:0,c+=(f=f+a>>>0)<a?1:0,c+=(f=f+s>>>0)<s?1:0,t+n+i+o+u+(c+=(f=f+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,n,r,i,a,o,s,u,l){return e+r+a+s+l>>>0},e.rotr64_hi=function(t,e,n){return(e<<32-n|t>>>n)>>>0},e.rotr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0},e.shr64_hi=function(t,e,n){return t>>>n},e.shr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0}},function(t,e,n){"use strict";if(n(20)){var r=n(64),i=n(16),a=n(17),o=n(1),s=n(132),u=n(185),l=n(43),c=n(76),f=n(69),h=n(30),p=n(78),d=n(53),m=n(22),g=n(242),v=n(72),y=n(51),b=n(35),_=n(99),x=n(18),w=n(25),S=n(176),E=n(73),k=n(38),T=n(74).f,P=n(178),M=n(70),C=n(19),O=n(55),I=n(122),N=n(129),A=n(181),R=n(89),D=n(126),j=n(75),L=n(180),F=n(232),z=n(21),B=n(37),U=z.f,V=B.f,q=i.RangeError,W=i.TypeError,G=i.Uint8Array,H=Array.prototype,$=u.ArrayBuffer,K=u.DataView,X=O(0),Y=O(2),J=O(3),Z=O(4),Q=O(5),tt=O(6),et=I(!0),nt=I(!1),rt=A.values,it=A.keys,at=A.entries,ot=H.lastIndexOf,st=H.reduce,ut=H.reduceRight,lt=H.join,ct=H.sort,ft=H.slice,ht=H.toString,pt=H.toLocaleString,dt=C("iterator"),mt=C("toStringTag"),gt=M("typed_constructor"),vt=M("def_constructor"),yt=s.CONSTR,bt=s.TYPED,_t=s.VIEW,xt=O(1,function(t,e){return Tt(N(t,t[vt]),e)}),wt=a(function(){return 1===new G(new Uint16Array([1]).buffer)[0]}),St=!!G&&!!G.prototype.set&&a(function(){new G(1).set({})}),Et=function(t,e){var n=d(t);if(n<0||n%e)throw q("Wrong offset!");return n},kt=function(t){if(x(t)&&bt in t)return t;throw W(t+" is not a typed array!")},Tt=function(t,e){if(!(x(t)&&gt in t))throw W("It is not a typed array constructor!");return new t(e)},Pt=function(t,e){return Mt(N(t,t[vt]),e)},Mt=function(t,e){for(var n=0,r=e.length,i=Tt(t,r);r>n;)i[n]=e[n++];return i},Ct=function(t,e,n){U(t,e,{get:function(){return this._d[n]}})},Ot=function(t){var e,n,r,i,a,o,s=w(t),u=arguments.length,c=u>1?arguments[1]:void 0,f=void 0!==c,h=P(s);if(void 0!=h&&!S(h)){for(o=h.call(s),r=[],e=0;!(a=o.next()).done;e++)r.push(a.value);s=r}for(f&&u>2&&(c=l(c,arguments[2],2)),e=0,n=m(s.length),i=Tt(this,n);n>e;e++)i[e]=f?c(s[e],e):s[e];return i},It=function(){for(var t=0,e=arguments.length,n=Tt(this,e);e>t;)n[t]=arguments[t++];return n},Nt=!!G&&a(function(){pt.call(new G(1))}),At=function(){return pt.apply(Nt?ft.call(kt(this)):kt(this),arguments)},Rt={copyWithin:function(t,e){return F.call(kt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Z(kt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return L.apply(kt(this),arguments)},filter:function(t){return Pt(this,Y(kt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return Q(kt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(kt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){X(kt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(kt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(kt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return lt.apply(kt(this),arguments)},lastIndexOf:function(t){return ot.apply(kt(this),arguments)},map:function(t){return xt(kt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(kt(this),arguments)},reduceRight:function(t){return ut.apply(kt(this),arguments)},reverse:function(){for(var t,e=kt(this).length,n=Math.floor(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this},some:function(t){return J(kt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ct.call(kt(this),t)},subarray:function(t,e){var n=kt(this),r=n.length,i=v(t,r);return new(N(n,n[vt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,m((void 0===e?r:v(e,r))-i))}},Dt=function(t,e){return Pt(this,ft.call(kt(this),t,e))},jt=function(t){kt(this);var e=Et(arguments[1],1),n=this.length,r=w(t),i=m(r.length),a=0;if(i+e>n)throw q("Wrong length!");for(;a<i;)this[e+a]=r[a++]},Lt={entries:function(){return at.call(kt(this))},keys:function(){return it.call(kt(this))},values:function(){return rt.call(kt(this))}},Ft=function(t,e){return x(t)&&t[bt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},zt=function(t,e){return Ft(t,e=y(e,!0))?f(2,t[e]):V(t,e)},Bt=function(t,e,n){return!(Ft(t,e=y(e,!0))&&x(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?U(t,e,n):(t[e]=n.value,t)};yt||(B.f=zt,z.f=Bt),o(o.S+o.F*!yt,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Bt}),a(function(){ht.call({})})&&(ht=pt=function(){return lt.call(this)});var Ut=p({},Rt);p(Ut,Lt),h(Ut,dt,Lt.values),p(Ut,{slice:Dt,set:jt,constructor:function(){},toString:ht,toLocaleString:At}),Ct(Ut,"buffer","b"),Ct(Ut,"byteOffset","o"),Ct(Ut,"byteLength","l"),Ct(Ut,"length","e"),U(Ut,mt,{get:function(){return this[bt]}}),t.exports=function(t,e,n,u){var l=t+((u=!!u)?"Clamped":"")+"Array",f="get"+t,p="set"+t,d=i[l],v=d||{},y=d&&k(d),b=!d||!s.ABV,w={},S=d&&d.prototype,P=function(t,n){U(t,n,{get:function(){return function(t,n){var r=t._d;return r.v[f](n*e+r.o,wt)}(this,n)},set:function(t){return function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[p](n*e+i.o,r,wt)}(this,n,t)},enumerable:!0})};b?(d=n(function(t,n,r,i){c(t,d,l,"_d");var a,o,s,u,f=0,p=0;if(x(n)){if(!(n instanceof $||"ArrayBuffer"==(u=_(n))||"SharedArrayBuffer"==u))return bt in n?Mt(d,n):Ot.call(d,n);a=n,p=Et(r,e);var v=n.byteLength;if(void 0===i){if(v%e)throw q("Wrong length!");if((o=v-p)<0)throw q("Wrong length!")}else if((o=m(i)*e)+p>v)throw q("Wrong length!");s=o/e}else s=g(n),a=new $(o=s*e);for(h(t,"_d",{b:a,o:p,l:o,e:s,v:new K(a)});f<s;)P(t,f++)}),S=d.prototype=E(Ut),h(S,"constructor",d)):a(function(){d(1)})&&a(function(){new d(-1)})&&D(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=n(function(t,n,r,i){var a;return c(t,d,l),x(n)?n instanceof $||"ArrayBuffer"==(a=_(n))||"SharedArrayBuffer"==a?void 0!==i?new v(n,Et(r,e),i):void 0!==r?new v(n,Et(r,e)):new v(n):bt in n?Mt(d,n):Ot.call(d,n):new v(g(n))}),X(y!==Function.prototype?T(v).concat(T(y)):T(v),function(t){t in d||h(d,t,v[t])}),d.prototype=S,r||(S.constructor=d));var M=S[dt],C=!!M&&("values"==M.name||void 0==M.name),O=Lt.values;h(d,gt,!0),h(S,bt,l),h(S,_t,!0),h(S,vt,d),(u?new d(1)[mt]==l:mt in S)||U(S,mt,{get:function(){return l}}),w[l]=d,o(o.G+o.W+o.F*(d!=v),w),o(o.S,l,{BYTES_PER_ELEMENT:e}),o(o.S+o.F*a(function(){v.of.call(d,1)}),l,{from:Ot,of:It}),"BYTES_PER_ELEMENT"in S||h(S,"BYTES_PER_ELEMENT",e),o(o.P,l,Rt),j(l),o(o.P+o.F*St,l,{set:jt}),o(o.P+o.F*!C,l,Lt),r||S.toString==ht||(S.toString=ht),o(o.P+o.F*a(function(){new d(1).slice()}),l,{slice:Dt}),o(o.P+o.F*(a(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!a(function(){S.toLocaleString.call([1,2])})),l,{toLocaleString:At}),R[l]=C?M:O,r||C||h(S,dt,O)}}else t.exports=function(){}},function(t,e,n){var r=n(237),i=n(1),a=n(121)("metadata"),o=a.store||(a.store=new(n(240))),s=function(t,e,n){var i=o.get(t);if(!i){if(!n)return;o.set(t,i=new r)}var a=i.get(e);if(!a){if(!n)return;i.set(e,a=new r)}return a};t.exports={store:o,map:s,has:function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},get:function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},set:function(t,e,n,r){s(n,r,!0).set(t,e)},keys:function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){i(i.S,"Reflect",t)}}},function(t,e,n){"use strict";var r=n(47);Object.defineProperty(e,"__esModule",{value:!0}),e.checkShape=function(t,e){if(t.length&&e.length&&t.length!==e.reduce(function(t,e){return t*e},1))throw new Error("[Tensor] specified shape incompatible with data.")},e.data3DLayoutForGL=function(t,e,n){for(var r=new t(e.data.length),i=(0,a.default)(new t(n[0]*n[1]),[n[0],n[1]]),s=0,u=0;u<n[2];u++)o.default.assign(i,e.pick(null,null,u)),r.set(i.data,s),s+=n[0]*n[1];return r},e.createIndicesFor2DReshaped=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,s=t.reduce(function(t,e){return t*e},1),u=(0,a.default)(new Int32Array(s),t);if(e){for(var l=Math.ceil(Math.sqrt(s)),c=(0,a.default)(new Int32Array(Math.pow(l,2)),[l,l]),f=(0,a.default)(new Int32Array(Math.pow(l,2)),[l,l]),h=(0,a.default)(new Int32Array(Math.pow(l,2)),[l,l]),p=0;p<l;p++)o.default.assigns(c.pick(p,null),p);for(var d=0;d<l;d++)o.default.assigns(f.pick(null,d),d);o.default.muls(h,c,l),o.default.addeq(h,f),u.data.set(h.data.subarray(0,u.size))}else{n<0&&(n=t.length+n);for(var m=t[n],g=(0,a.default)(new Int32Array(s),t),v=(0,a.default)(new Int32Array(s),t),y=r(t.slice(0,n)).concat(r(t.slice(n+1))),b=y.reduce(function(t,e){return t*e},1),_=(0,a.default)(new Int32Array((0,i.default)(b)),y),x=Array(t.length).fill(null),w=0;w<m;w++)x[n]=w,o.default.assign(g.pick.apply(g,r(x)),_),o.default.assigns(v.pick.apply(v,r(x)),w);o.default.muls(u,g,m),o.default.addeq(u,v)}return u};var i=s(n(81)),a=s(n(107)),o=s(n(12));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){var r=n(708),i=n(709),a=n(710);t.exports=function(t,e){return r(t)||i(t,e)||a()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.linear=e.hard_sigmoid=e.sigmoid=e.tanh=e.relu=e.softsign=e.softplus=e.selu=e.elu=e.softmax=void 0;e.softmax="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float maxval = 0.0;\n  for (int i = 0; i < int(size[0]); ++i) {\n    float val = texelFetch(x, ivec2(i, out_y), 0).r;\n    if (i == 0 || val > maxval) {\n      maxval = val;\n    }\n  }\n\n  float sum = 0.0;\n  for (int i = 0; i < int(size[0]); ++i) {\n    float val = texelFetch(x, ivec2(i, out_y), 0).r;\n    sum += exp(val - maxval);\n  }\n\n  outColor = exp(texture(x, vec2(outTex.x, outTex.y)) - maxval) / sum;\n}\n";e.elu="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  float alpha = 1.0;\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0) + alpha * (exp(min(v, 0.0)) - 1.0);\n}\n";e.selu="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  float alpha = 1.6732632423543772848170429916717;\n  float scale = 1.0507009873554804934193349852946;\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = scale * (max(v, 0.0) + alpha * (exp(min(v, 0.0)) - 1.0));\n}\n";e.softplus="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  outColor = log(1.0 + exp(texture(x, vec2(outTex.x, outTex.y))));\n}\n";e.softsign="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  v /= 1.0 + abs(v);\n  outColor = v;\n}\n";e.relu="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0);\n}\n";e.tanh="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = tanh(v);\n}\n";e.sigmoid="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  outColor = 1.0 / (1.0 + exp(-1.0 * texture(x, vec2(outTex.x, outTex.y))));\n}\n";e.hard_sigmoid="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  v = v * 0.2 + 0.5;\n  v = max(v, 0.0);\n  v = min(v, 1.0);\n  outColor = v;\n}\n";e.linear="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(x, vec2(outTex.x, outTex.y));\n}\n"},function(t,e,n){var r=n(70)("meta"),i=n(18),a=n(35),o=n(21).f,s=0,u=Object.isExtensible||function(){return!0},l=!n(17)(function(){return u(Object.preventExtensions({}))}),c=function(t){o(t,r,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,r)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[r].i},getWeak:function(t,e){if(!a(t,r)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[r].w},onFreeze:function(t){return l&&f.NEED&&u(t)&&!a(t,r)&&c(t),t}}},function(t,e){t.exports=!1},function(t,e,n){var r=n(19)("unscopables"),i=Array.prototype;void 0==i[r]&&n(30)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=p(n(81)),l=p(n(137)),c=p(n(11)),f=p(n(8)),h=n(9);function p(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(t=a(this,o(e).call(this,n))).layerClass="_Merge",t.isMergeLayer=!0,t}return s(e,t),i(e,[{key:"call",value:function(t){this.gpu?this._callGPU(t):(this._validateInputs(t)||this.throwError("Invalid inputs to call method."),this._callCPU(t));return this.output}},{key:"_validateInputs",value:function(t){var e=t.map(function(t){return t.tensor.shape.slice()});if(["sum","diff","mul","ave","max","min"].indexOf(this.mode)>-1&&(e.every(function(t){return(0,l.default)(t,e[0])})||this.throwError("All input shapes must be the same for mode ".concat(this.mode,"."))),"dot"===this.mode)2!==t.length&&this.throwError("Exactly 2 inputs required for mode ".concat(this.mode,".")),this.dotAxes[0]<0&&(this.dotAxes[0]=e[0].length+this.dotAxes[0]),this.dotAxes[1]<0&&(this.dotAxes[1]=e[1].length+this.dotAxes[1]),e[0][this.dotAxes[0]]!==e[1][this.dotAxes[1]]&&this.throwError("Dimensions incompatibility using dot mode.");else if("concat"===this.mode){var n=e.slice(),r=this.concatAxis<0?n[0].length+this.concatAxis:this.concatAxis;0===this.concatAxis&&(r=0),(0,u.default)(n.length).forEach(function(t){n[t].splice(r,1)}),n.every(function(t){return(0,l.default)(t,n[0])})||this.throwError("In concat mode, all shapes must be the same except along the concat axis.")}return!0}},{key:"_callCPU",value:function(){}},{key:"_callGPU",value:function(t){t.forEach(function(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})}),this.output||(this.output=new f.default([],t[0].glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),t[0].is1D?this.output.is1D=t[0].is1D:(t[0].is2DReshaped||t[0].is2DSquareReshaped)&&(t[0].is2DReshaped?this.output.is2DReshaped=t[0].is2DReshaped:t[0].is2DSquareReshaped&&(this.output.is2DSquareReshaped=t[0].is2DSquareReshaped),this.output.originalShape=t[0].originalShape.slice(),this.output.indicesForReshaped=t[0].indicesForReshaped)),h.webgl2.runProgram({program:this.mergeProgram,output:this.output,inputs:t.map(function(t,e){return{input:t,name:"inputs[".concat(e,"]")}}),supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(c.default);e.default=d},function(t,e,n){var r=n(15).Buffer,i=n(199).Transform,a=n(203).StringDecoder;function o(t){i.call(this),this.hashMode="string"===typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}n(13)(o,i),o.prototype.update=function(t,e,n){"string"===typeof t&&(t=r.from(t,e));var i=this._update(t);return this.hashMode?this:(n&&(i=this._toString(i,n)),i)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(t,e,n){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(i){r=i}finally{n(r)}},o.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(n){e=n}t(e)},o.prototype._finalOrDigest=function(t){var e=this.__final()||r.alloc(0);return t&&(e=this._toString(e,t,!0)),e},o.prototype._toString=function(t,e,n){if(this._decoder||(this._decoder=new a(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var r=this._decoder.write(t);return n&&(r+=this._decoder.end()),r},t.exports=o},function(t,e,n){var r,i;!function(){var a={version:"3.5.17"},o=[].slice,s=function(t){return o.call(t)},u=this.document;function l(t){return t&&(t.ownerDocument||t.document||t).documentElement}function c(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(u)try{s(u.documentElement.childNodes)[0].nodeType}catch($s){s=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),u)try{u.createElement("DIV").style.setProperty("opacity",0,"")}catch(Ks){var f=this.Element.prototype,h=f.setAttribute,p=f.setAttributeNS,d=this.CSSStyleDeclaration.prototype,m=d.setProperty;f.setAttribute=function(t,e){h.call(this,t,e+"")},f.setAttributeNS=function(t,e,n){p.call(this,t,e,n+"")},d.setProperty=function(t,e,n){m.call(this,t,e+"",n)}}function g(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function v(t){return null===t?NaN:+t}function y(t){return!isNaN(t)}function b(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}a.ascending=g,a.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},a.min=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},a.max=function(t,e){var n,r,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},a.extent=function(t,e){var n,r,i,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},a.sum=function(t,e){var n,r=0,i=t.length,a=-1;if(1===arguments.length)for(;++a<i;)y(n=+t[a])&&(r+=n);else for(;++a<i;)y(n=+e.call(t,t[a],a))&&(r+=n);return r},a.mean=function(t,e){var n,r=0,i=t.length,a=-1,o=i;if(1===arguments.length)for(;++a<i;)y(n=v(t[a]))?r+=n:--o;else for(;++a<i;)y(n=v(e.call(t,t[a],a)))?r+=n:--o;if(o)return r/o},a.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],a=n-r;return a?i+a*(t[r]-i):i},a.median=function(t,e){var n,r=[],i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)y(n=v(t[o]))&&r.push(n);else for(;++o<i;)y(n=v(e.call(t,t[o],o)))&&r.push(n);if(r.length)return a.quantile(r.sort(g),.5)},a.variance=function(t,e){var n,r,i=t.length,a=0,o=0,s=-1,u=0;if(1===arguments.length)for(;++s<i;)y(n=v(t[s]))&&(o+=(r=n-a)*(n-(a+=r/++u)));else for(;++s<i;)y(n=v(e.call(t,t[s],s)))&&(o+=(r=n-a)*(n-(a+=r/++u)));if(u>1)return o/(u-1)},a.deviation=function(){var t=a.variance.apply(this,arguments);return t?Math.sqrt(t):t};var _=b(g);function x(t){return t.length}a.bisectLeft=_.left,a.bisect=a.bisectRight=_.right,a.bisector=function(t){return b(1===t.length?function(e,n){return g(t(e),n)}:t)},a.shuffle=function(t,e,n){(a=arguments.length)<3&&(n=t.length,a<2&&(e=0));for(var r,i,a=n-e;a;)i=Math.random()*a--|0,r=t[a+e],t[a+e]=t[i+e],t[i+e]=r;return t},a.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},a.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},a.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=a.min(t,x),r=new Array(n);++e<n;)for(var i,o=-1,s=r[e]=new Array(i);++o<i;)s[o]=t[o][e];return r},a.zip=function(){return a.transpose(arguments)},a.keys=function(t){var e=[];for(var n in t)e.push(n);return e},a.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},a.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},a.merge=function(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--o]=r[e];return n};var w=Math.abs;function S(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function E(){this._=Object.create(null)}a.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],a=function(t){var e=1;for(;t*e%1;)e*=10;return e}(w(n)),o=-1;if(t*=a,e*=a,(n*=a)<0)for(;(r=t+n*++o)>e;)i.push(r/a);else for(;(r=t+n*++o)<e;)i.push(r/a);return i},a.map=function(t,e){var n=new E;if(t instanceof E)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(1===arguments.length)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e.call(t,r=t[i],i),r)}else for(var o in t)n.set(o,t[o]);return n};var k="__proto__",T="\0";function P(t){return(t+="")===k||t[0]===T?T+t:t}function M(t){return(t+="")[0]===T?t.slice(1):t}function C(t){return P(t)in this._}function O(t){return(t=P(t))in this._&&delete this._[t]}function I(){var t=[];for(var e in this._)t.push(M(e));return t}function N(){var t=0;for(var e in this._)++t;return t}function A(){for(var t in this._)return!1;return!0}function R(){this._=Object.create(null)}function D(t){return t}function j(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function L(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=F.length;n<r;++n){var i=F[n]+e;if(i in t)return i}}S(E,{has:C,get:function(t){return this._[P(t)]},set:function(t,e){return this._[P(t)]=e},remove:O,keys:I,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:M(e),value:this._[e]});return t},size:N,empty:A,forEach:function(t){for(var e in this._)t.call(this,M(e),this._[e])}}),a.nest=function(){var t,e,n={},r=[],i=[];function o(i,a,s){if(s>=r.length)return e?e.call(n,a):t?a.sort(t):a;for(var u,l,c,f,h=-1,p=a.length,d=r[s++],m=new E;++h<p;)(f=m.get(u=d(l=a[h])))?f.push(l):m.set(u,[l]);return i?(l=i(),c=function(t,e){l.set(t,o(i,e,s))}):(l={},c=function(t,e){l[t]=o(i,e,s)}),m.forEach(c),l}return n.map=function(t,e){return o(e,t,0)},n.entries=function(t){return function t(e,n){if(n>=r.length)return e;var a=[],o=i[n++];return e.forEach(function(e,r){a.push({key:e,values:t(r,n)})}),o?a.sort(function(t,e){return o(t.key,e.key)}):a}(o(a.map,t,0),0)},n.key=function(t){return r.push(t),n},n.sortKeys=function(t){return i[r.length-1]=t,n},n.sortValues=function(e){return t=e,n},n.rollup=function(t){return e=t,n},n},a.set=function(t){var e=new R;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},S(R,{has:C,add:function(t){return this._[P(t+="")]=!0,t},remove:O,values:I,size:N,empty:A,forEach:function(t){for(var e in this._)t.call(this,M(e))}}),a.behavior={},a.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=j(t,e,e[n]);return t};var F=["webkit","ms","moz","Moz","o","O"];function z(){}function B(){}function U(t){var e=[],n=new E;function r(){for(var n,r=e,i=-1,a=r.length;++i<a;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var a,o=n.get(r);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,a=e.indexOf(o)).concat(e.slice(a+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function V(){a.event.preventDefault()}function q(){for(var t,e=a.event;t=e.sourceEvent;)e=t;return e}function W(t){for(var e=new B,n=0,r=arguments.length;++n<r;)e[arguments[n]]=U(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=a.event;i.target=t,a.event=i,e[i.type].apply(n,r)}finally{a.event=o}}},e}a.dispatch=function(){for(var t=new B,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=U(t);return t},B.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},a.event=null,a.requote=function(t){return t.replace(G,"\\$&")};var G=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,H={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function $(t){return H(t,J),t}var K=function(t,e){return e.querySelector(t)},X=function(t,e){return e.querySelectorAll(t)},Y=function(t,e){var n=t.matches||t[L(t,"matchesSelector")];return(Y=function(t,e){return n.call(t,e)})(t,e)};"function"===typeof Sizzle&&(K=function(t,e){return Sizzle(t,e)[0]||null},X=Sizzle,Y=Sizzle.matchesSelector),a.selection=function(){return a.select(u.documentElement)};var J=a.selection.prototype=[];function Z(t){return"function"===typeof t?t:function(){return K(t,this)}}function Q(t){return"function"===typeof t?t:function(){return X(t,this)}}J.select=function(t){var e,n,r,i,a=[];t=Z(t);for(var o=-1,s=this.length;++o<s;){a.push(e=[]),e.parentNode=(r=this[o]).parentNode;for(var u=-1,l=r.length;++u<l;)(i=r[u])?(e.push(n=t.call(i,i.__data__,u,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return $(a)},J.selectAll=function(t){var e,n,r=[];t=Q(t);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],u=-1,l=o.length;++u<l;)(n=o[u])&&(r.push(e=s(t.call(n,n.__data__,u,i))),e.parentNode=n);return $(r)};var tt="http://www.w3.org/1999/xhtml",et={svg:"http://www.w3.org/2000/svg",xhtml:tt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function nt(t,e){return t=a.ns.qualify(t),null==e?t.local?function(){this.removeAttributeNS(t.space,t.local)}:function(){this.removeAttribute(t)}:"function"===typeof e?t.local?function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}:function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}:t.local?function(){this.setAttributeNS(t.space,t.local,e)}:function(){this.setAttribute(t,e)}}function rt(t){return t.trim().replace(/\s+/g," ")}function it(t){return new RegExp("(?:^|\\s+)"+a.requote(t)+"(?:\\s+|$)","g")}function at(t){return(t+"").trim().split(/^|\s+/)}function ot(t,e){var n=(t=at(t).map(st)).length;return"function"===typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function st(t){var e=it(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",rt(i+" "+t))):n.setAttribute("class",rt(i.replace(e," ")))}}function ut(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"===typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function lt(t,e){return null==e?function(){delete this[t]}:"function"===typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function ct(t){return"function"===typeof t?t:(t=a.ns.qualify(t)).local?function(){return this.ownerDocument.createElementNS(t.space,t.local)}:function(){var e=this.ownerDocument,n=this.namespaceURI;return n===tt&&e.documentElement.namespaceURI===tt?e.createElement(t):e.createElementNS(n,t)}}function ft(){var t=this.parentNode;t&&t.removeChild(this)}function ht(t){return{__data__:t}}function pt(t){return function(){return Y(this,t)}}function dt(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,a=t[n],o=0,s=a.length;o<s;o++)(i=a[o])&&e(i,o,n);return t}function mt(t){return H(t,gt),t}a.ns={prefix:et,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),et.hasOwnProperty(n)?{space:et[n],local:t}:t}},J.attr=function(t,e){if(arguments.length<2){if("string"===typeof t){var n=this.node();return(t=a.ns.qualify(t)).local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(nt(e,t[e]));return this}return this.each(nt(t,e))},J.classed=function(t,e){if(arguments.length<2){if("string"===typeof t){var n=this.node(),r=(t=at(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!it(t[i]).test(e))return!1;return!0}for(e in t)this.each(ot(e,t[e]));return this}return this.each(ot(t,e))},J.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=""),t)this.each(ut(n,t[n],e));return this}if(r<2){var i=this.node();return c(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(ut(t,e,n))},J.property=function(t,e){if(arguments.length<2){if("string"===typeof t)return this.node()[t];for(e in t)this.each(lt(e,t[e]));return this}return this.each(lt(t,e))},J.text=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},J.html=function(t){return arguments.length?this.each("function"===typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},J.append=function(t){return t=ct(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},J.insert=function(t,e){return t=ct(t),e=Z(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},J.remove=function(){return this.each(ft)},J.data=function(t,e){var n,r,i=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++i<a;)(r=n[i])&&(t[i]=r.__data__);return t}function o(t,n){var r,i,a,o=t.length,c=n.length,f=Math.min(o,c),h=new Array(c),p=new Array(c),d=new Array(o);if(e){var m,g=new E,v=new Array(o);for(r=-1;++r<o;)(i=t[r])&&(g.has(m=e.call(i,i.__data__,r))?d[r]=i:g.set(m,i),v[r]=m);for(r=-1;++r<c;)(i=g.get(m=e.call(n,a=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=a):p[r]=ht(a),g.set(m,!0);for(r=-1;++r<o;)r in v&&!0!==g.get(v[r])&&(d[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],a=n[r],i?(i.__data__=a,h[r]=i):p[r]=ht(a);for(;r<c;++r)p[r]=ht(n[r]);for(;r<o;++r)d[r]=t[r]}p.update=h,p.parentNode=h.parentNode=d.parentNode=t.parentNode,s.push(p),u.push(h),l.push(d)}var s=mt([]),u=$([]),l=$([]);if("function"===typeof t)for(;++i<a;)o(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<a;)o(n=this[i],t);return u.enter=function(){return s},u.exit=function(){return l},u},J.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},J.filter=function(t){var e,n,r,i=[];"function"!==typeof t&&(t=pt(t));for(var a=0,o=this.length;a<o;a++){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,u=n.length;s<u;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return $(i)},J.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},J.sort=function(t){t=function(t){arguments.length||(t=g);return function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},J.each=function(t){return dt(this,function(e,n,r){t.call(e,e.__data__,n,r)})},J.call=function(t){var e=s(arguments);return t.apply(e[0]=this,e),this},J.empty=function(){return!this.node()},J.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},J.size=function(){var t=0;return dt(this,function(){++t}),t};var gt=[];function vt(t,e,n){var r="__on"+t,i=t.indexOf("."),o=bt;i>0&&(t=t.slice(0,i));var u=yt.get(t);function l(){var e=this[r];e&&(this.removeEventListener(t,e,e.$),delete this[r])}return u&&(t=u,o=_t),i?e?function(){var i=o(e,s(arguments));l.call(this),this.addEventListener(t,this[r]=i,i.$=n),i._=e}:l:e?z:function(){var e,n=new RegExp("^__on([^.]+)"+a.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}}a.selection.enter=mt,a.selection.enter.prototype=gt,gt.append=J.append,gt.empty=J.empty,gt.node=J.node,gt.call=J.call,gt.size=J.size,gt.select=function(t){for(var e,n,r,i,a,o=[],s=-1,u=this.length;++s<u;){r=(i=this[s]).update,o.push(e=[]),e.parentNode=i.parentNode;for(var l=-1,c=i.length;++l<c;)(a=i[l])?(e.push(r[l]=n=t.call(i.parentNode,a.__data__,l,s)),n.__data__=a.__data__):e.push(null)}return $(o)},gt.insert=function(t,e){return arguments.length<2&&(e=function(t){var e,n;return function(r,i,a){var o,s=t[a].update,u=s.length;for(a!=n&&(n=a,e=0),i>=e&&(e=i+1);!(o=s[e])&&++e<u;);return o}}(this)),J.insert.call(this,t,e)},a.select=function(t){var e;return"string"===typeof t?(e=[K(t,u)]).parentNode=u.documentElement:(e=[t]).parentNode=l(t),$([e])},a.selectAll=function(t){var e;return"string"===typeof t?(e=s(X(t,u))).parentNode=u.documentElement:(e=s(t)).parentNode=null,$([e])},J.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=!1),t)this.each(vt(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(vt(t,e,n))};var yt=a.map({mouseenter:"mouseover",mouseleave:"mouseout"});function bt(t,e){return function(n){var r=a.event;a.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{a.event=r}}}function _t(t,e){var n=bt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}u&&yt.forEach(function(t){"on"+t in u&&yt.remove(t)});var xt,wt=0;function St(t){var e=".dragsuppress-"+ ++wt,n="click"+e,r=a.select(c(t)).on("touchmove"+e,V).on("dragstart"+e,V).on("selectstart"+e,V);if(null==xt&&(xt=!("onselectstart"in t)&&L(t.style,"userSelect")),xt){var i=l(t).style,o=i[xt];i[xt]="none"}return function(t){if(r.on(e,null),xt&&(i[xt]=o),t){var a=function(){r.on(n,null)};r.on(n,function(){V(),a()},!0),setTimeout(a,0)}}}a.mouse=function(t){return kt(t,q())};var Et=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function kt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();if(Et<0){var i=c(t);if(i.scrollX||i.scrollY){var o=(n=a.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Et=!(o.f||o.e),n.remove()}}return Et?(r.x=e.pageX,r.y=e.pageY):(r.x=e.clientX,r.y=e.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function Tt(){return a.event.changedTouches[0].identifier}a.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=q().changedTouches),e)for(var r,i=0,a=e.length;i<a;++i)if((r=e[i]).identifier===n)return kt(t,r)},a.behavior.drag=function(){var t=W(i,"drag","dragstart","dragend"),e=null,n=o(z,a.mouse,c,"mousemove","mouseup"),r=o(Tt,a.touch,D,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",r)}function o(n,r,i,o,s){return function(){var u,l=a.event.target.correspondingElement||a.event.target,c=this.parentNode,f=t.of(this,arguments),h=0,p=n(),d=".drag"+(null==p?"":"-"+p),m=a.select(i(l)).on(o+d,function(){var t,e,n=r(c,p);if(!n)return;t=n[0]-v[0],e=n[1]-v[1],h|=t|e,v=n,f({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:t,dy:e})}).on(s+d,function(){if(!r(c,p))return;m.on(o+d,null).on(s+d,null),g(h),f({type:"dragend"})}),g=St(l),v=r(c,p);u=e?[(u=e.apply(this,arguments)).x-v[0],u.y-v[1]]:[0,0],f({type:"dragstart"})}}return i.origin=function(t){return arguments.length?(e=t,i):e},a.rebind(i,t,"on")},a.touches=function(t,e){return arguments.length<2&&(e=q().touches),e?s(e).map(function(e){var n=kt(t,e);return n.identifier=e.identifier,n}):[]};var Pt=1e-6,Mt=Pt*Pt,Ct=Math.PI,Ot=2*Ct,It=Ot-Pt,Nt=Ct/2,At=Ct/180,Rt=180/Ct;function Dt(t){return t>0?1:t<0?-1:0}function jt(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Lt(t){return t>1?0:t<-1?Ct:Math.acos(t)}function Ft(t){return t>1?Nt:t<-1?-Nt:Math.asin(t)}function zt(t){return((t=Math.exp(t))+1/t)/2}function Bt(t){return(t=Math.sin(t/2))*t}var Ut=Math.SQRT2;a.interpolateZoom=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],u=e[1],l=e[2],c=s-i,f=u-a,h=c*c+f*f;if(h<Mt)r=Math.log(l/o)/Ut,n=function(t){return[i+t*c,a+t*f,o*Math.exp(Ut*t*r)]};else{var p=Math.sqrt(h),d=(l*l-o*o+4*h)/(2*o*2*p),m=(l*l-o*o-4*h)/(2*l*2*p),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(m*m+1)-m);r=(v-g)/Ut,n=function(t){var e,n=t*r,s=zt(g),u=o/(2*p)*(s*(e=Ut*n+g,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+u*c,a+u*f,o*s/zt(Ut*n+g)]}}return n.duration=1e3*r,n},a.behavior.zoom=function(){var t,e,n,r,i,o,s,l,f,h={x:0,y:0,k:1},p=[960,500],d=Wt,m=250,g=0,v="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",_="touchstart.zoom",x=W(w,"zoomstart","zoom","zoomend");function w(t){t.on(v,I).on(qt+".zoom",A).on("dblclick.zoom",R).on(_,N)}function S(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function E(t){h.k=Math.max(d[0],Math.min(d[1],t))}function k(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function T(t,n,r,i){t.__chart__={x:h.x,y:h.y,k:h.k},E(Math.pow(2,i)),k(e=n,r),t=a.select(t),m>0&&(t=t.transition().duration(m)),t.call(w.event)}function P(){s&&s.domain(o.range().map(function(t){return(t-h.x)/h.k}).map(o.invert)),f&&f.domain(l.range().map(function(t){return(t-h.y)/h.k}).map(l.invert))}function M(t){g++||t({type:"zoomstart"})}function C(t){P(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function O(t){--g||(t({type:"zoomend"}),e=null)}function I(){var t=this,e=x.of(t,arguments),n=0,r=a.select(c(t)).on(y,function(){n=1,k(a.mouse(t),i),C(e)}).on(b,function(){r.on(y,null).on(b,null),o(n),O(e)}),i=S(a.mouse(t)),o=St(t);gs.call(t),M(e)}function N(){var t,e=this,n=x.of(e,arguments),r={},o=0,s=".zoom-"+a.event.changedTouches[0].identifier,u="touchmove"+s,l="touchend"+s,c=[],f=a.select(e),p=St(e);function d(){var n=a.touches(e);return t=h.k,n.forEach(function(t){t.identifier in r&&(r[t.identifier]=S(t))}),n}function m(){var t=a.event.target;a.select(t).on(u,g).on(l,y),c.push(t);for(var n=a.event.changedTouches,s=0,f=n.length;s<f;++s)r[n[s].identifier]=null;var p=d(),m=Date.now();if(1===p.length){if(m-i<500){var v=p[0];T(e,v,r[v.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),V()}i=m}else if(p.length>1){v=p[0];var b=p[1],_=v[0]-b[0],x=v[1]-b[1];o=_*_+x*x}}function g(){var s,u,l,c,f=a.touches(e);gs.call(e);for(var h=0,p=f.length;h<p;++h,c=null)if(l=f[h],c=r[l.identifier]){if(u)break;s=l,u=c}if(c){var d=(d=l[0]-s[0])*d+(d=l[1]-s[1])*d,m=o&&Math.sqrt(d/o);s=[(s[0]+l[0])/2,(s[1]+l[1])/2],u=[(u[0]+c[0])/2,(u[1]+c[1])/2],E(m*t)}i=null,k(s,u),C(n)}function y(){if(a.event.touches.length){for(var t=a.event.changedTouches,e=0,i=t.length;e<i;++e)delete r[t[e].identifier];for(var o in r)return void d()}a.selectAll(c).on(s,null),f.on(v,I).on(_,N),p(),O(n)}m(),M(n),f.on(v,null).on(_,m)}function A(){var i=x.of(this,arguments);r?clearTimeout(r):(gs.call(this),t=S(e=n||a.mouse(this)),M(i)),r=setTimeout(function(){r=null,O(i)},50),V(),E(Math.pow(2,.002*Vt())*h.k),k(e,t),C(i)}function R(){var t=a.mouse(this),e=Math.log(h.k)/Math.LN2;T(this,t,S(t),a.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}return qt||(qt="onwheel"in u?(Vt=function(){return-a.event.deltaY*(a.event.deltaMode?120:1)},"wheel"):"onmousewheel"in u?(Vt=function(){return a.event.wheelDelta},"mousewheel"):(Vt=function(){return-a.event.detail},"MozMousePixelScroll")),w.event=function(t){t.each(function(){var t=x.of(this,arguments),n=h;bs?a.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},M(t)}).tween("zoom:zoom",function(){var r=p[0],i=p[1],o=e?e[0]:r/2,s=e?e[1]:i/2,u=a.interpolateZoom([(o-h.x)/h.k,(s-h.y)/h.k,r/h.k],[(o-n.x)/n.k,(s-n.y)/n.k,r/n.k]);return function(e){var n=u(e),i=r/n[2];this.__chart__=h={x:o-n[0]*i,y:s-n[1]*i,k:i},C(t)}}).each("interrupt.zoom",function(){O(t)}).each("end.zoom",function(){O(t)}):(this.__chart__=h,M(t),C(t),O(t))})},w.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},P(),w):[h.x,h.y]},w.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},E(+t),P(),w):h.k},w.scaleExtent=function(t){return arguments.length?(d=null==t?Wt:[+t[0],+t[1]],w):d},w.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],w):n},w.size=function(t){return arguments.length?(p=t&&[+t[0],+t[1]],w):p},w.duration=function(t){return arguments.length?(m=+t,w):m},w.x=function(t){return arguments.length?(s=t,o=t.copy(),h={x:0,y:0,k:1},w):s},w.y=function(t){return arguments.length?(f=t,l=t.copy(),h={x:0,y:0,k:1},w):f},a.rebind(w,x,"on")};var Vt,qt,Wt=[0,1/0];function Gt(){}function Ht(t,e,n){return this instanceof Ht?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Ht?new Ht(t.h,t.s,t.l):de(""+t,me,Ht):new Ht(t,e,n)}a.color=Gt,Gt.prototype.toString=function(){return this.rgb()+""},a.hsl=Ht;var $t=Ht.prototype=new Gt;function Kt(t,e,n){var r,i;function a(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new le(a(t+120),a(t),a(t-120))}function Xt(t,e,n){return this instanceof Xt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof Xt?new Xt(t.h,t.c,t.l):ae(t instanceof Zt?t.l:(t=ge((t=a.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Xt(t,e,n)}$t.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ht(this.h,this.s,this.l/t)},$t.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Ht(this.h,this.s,t*this.l)},$t.rgb=function(){return Kt(this.h,this.s,this.l)},a.hcl=Xt;var Yt=Xt.prototype=new Gt;function Jt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Zt(n,Math.cos(t*=At)*e,Math.sin(t)*e)}function Zt(t,e,n){return this instanceof Zt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Zt?new Zt(t.l,t.a,t.b):t instanceof Xt?Jt(t.h,t.c,t.l):ge((t=le(t)).r,t.g,t.b):new Zt(t,e,n)}Yt.brighter=function(t){return new Xt(this.h,this.c,Math.min(100,this.l+Qt*(arguments.length?t:1)))},Yt.darker=function(t){return new Xt(this.h,this.c,Math.max(0,this.l-Qt*(arguments.length?t:1)))},Yt.rgb=function(){return Jt(this.h,this.c,this.l).rgb()},a.lab=Zt;var Qt=18,te=.95047,ee=1,ne=1.08883,re=Zt.prototype=new Gt;function ie(t,e,n){var r=(t+16)/116,i=r+e/500,a=r-n/200;return new le(ue(3.2404542*(i=oe(i)*te)-1.5371385*(r=oe(r)*ee)-.4985314*(a=oe(a)*ne)),ue(-.969266*i+1.8760108*r+.041556*a),ue(.0556434*i-.2040259*r+1.0572252*a))}function ae(t,e,n){return t>0?new Xt(Math.atan2(n,e)*Rt,Math.sqrt(e*e+n*n),t):new Xt(NaN,NaN,t)}function oe(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function se(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ue(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function le(t,e,n){return this instanceof le?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof le?new le(t.r,t.g,t.b):de(""+t,le,Kt):new le(t,e,n)}function ce(t){return new le(t>>16,t>>8&255,255&t)}function fe(t){return ce(t)+""}re.brighter=function(t){return new Zt(Math.min(100,this.l+Qt*(arguments.length?t:1)),this.a,this.b)},re.darker=function(t){return new Zt(Math.max(0,this.l-Qt*(arguments.length?t:1)),this.a,this.b)},re.rgb=function(){return ie(this.l,this.a,this.b)},a.rgb=le;var he=le.prototype=new Gt;function pe(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function de(t,e,n){var r,i,a,o=0,s=0,u=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(ye(i[0]),ye(i[1]),ye(i[2]))}return(a=be.get(t))?e(a.r,a.g,a.b):(null==t||"#"!==t.charAt(0)||isNaN(a=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,u=15&a,u|=u<<4):7===t.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,u=255&a)),e(o,s,u))}function me(t,e,n){var r,i,a=Math.min(t/=255,e/=255,n/=255),o=Math.max(t,e,n),s=o-a,u=(o+a)/2;return s?(i=u<.5?s/(o+a):s/(2-o-a),r=t==o?(e-n)/s+(e<n?6:0):e==o?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=u>0&&u<1?0:r),new Ht(r,i,u)}function ge(t,e,n){var r=se((.4124564*(t=ve(t))+.3575761*(e=ve(e))+.1804375*(n=ve(n)))/te),i=se((.2126729*t+.7151522*e+.072175*n)/ee);return Zt(116*i-16,500*(r-i),200*(i-se((.0193339*t+.119192*e+.9503041*n)/ne)))}function ve(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ye(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}he.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new le(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new le(i,i,i)},he.darker=function(t){return new le((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},he.hsl=function(){return me(this.r,this.g,this.b)},he.toString=function(){return"#"+pe(this.r)+pe(this.g)+pe(this.b)};var be=a.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function _e(t){return"function"===typeof t?t:function(){return t}}function xe(t){return function(e,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=null),we(e,n,t,r)}}function we(t,e,n,r){var i={},o=a.dispatch("beforesend","progress","load","error"),u={},l=new XMLHttpRequest,c=null;function f(){var t,e=l.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(l)||e>=200&&e<300||304===e){try{t=n.call(i,l)}catch($s){return void o.error.call(i,$s)}o.load.call(i,t)}else o.error.call(i,l)}return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=f:l.onreadystatechange=function(){l.readyState>3&&f()},l.onprogress=function(t){var e=a.event;a.event=t;try{o.progress.call(i,l)}finally{a.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(c=t,i):c},i.response=function(t){return n=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(s(arguments)))}}),i.send=function(n,r,a){if(2===arguments.length&&"function"===typeof r&&(a=r,r=null),l.open(n,t,!0),null==e||"accept"in u||(u.accept=e+",*/*"),l.setRequestHeader)for(var s in u)l.setRequestHeader(s,u[s]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=c&&(l.responseType=c),null!=a&&i.on("error",a).on("load",function(t){a(null,t)}),o.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},a.rebind(i,o,"on"),null==r?i:i.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(r))}be.forEach(function(t,e){be.set(t,ce(e))}),a.functor=_e,a.xhr=xe(D),a.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=we(t,e,null==n?a:o(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?a:o(t)):n},i}function a(t){return i.parse(t.responseText)}function o(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(u).join(t)}function u(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i})},i.parseRows=function(t,e){var n,i,a={},o={},s=[],u=t.length,l=0,c=0;function f(){if(l>=u)return o;if(i)return i=!1,a;var e=l;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return l=n+2,13===(s=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++l):10===s&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l<u;){var s,c=1;if(10===(s=t.charCodeAt(l++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(l)&&(++l,++c);else if(s!==r)continue;return t.slice(e,l-c)}return t.slice(e)}for(;(n=f())!==o;){for(var h=[];n!==a&&n!==o;)h.push(n),n=f();e&&null==(h=e(h,c++))||s.push(h)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new R,r=[];return e.forEach(function(t){for(var e in t)n.has(e)||r.push(n.add(e))}),[r.map(u).join(t)].concat(e.map(function(e){return r.map(function(t){return u(e[t])}).join(t)})).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},a.csv=a.dsv(",","text/csv"),a.tsv=a.dsv("\t","text/tab-separated-values");var Se,Ee,ke,Te,Pe=this[L(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Me(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i={c:t,t:n+e,n:null};return Ee?Ee.n=i:Se=i,Ee=i,ke||(Te=clearTimeout(Te),ke=1,Pe(Ce)),i}function Ce(){var t=Oe(),e=Ie()-t;e>24?(isFinite(e)&&(clearTimeout(Te),Te=setTimeout(Ce,e)),ke=0):(ke=1,Pe(Ce))}function Oe(){for(var t=Date.now(),e=Se;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ie(){for(var t,e=Se,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:Se=e.n;return Ee=t,n}function Ne(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}a.timer=function(){Me.apply(this,arguments)},a.timer.flush=function(){Oe(),Ie()},a.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Ae=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var n=Math.pow(10,3*w(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}});a.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=a.round(t,Ne(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Ae[8+n/3]};var Re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,De=a.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=a.round(t,Ne(t,e))).toFixed(Math.max(0,Math.min(20,Ne(t*(1+1e-15),e))))}});function je(t){return t+""}var Le=a.time={},Fe=Date;function ze(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}ze.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Be.setUTCDate.apply(this._,arguments)},setDay:function(){Be.setUTCDay.apply(this._,arguments)},setFullYear:function(){Be.setUTCFullYear.apply(this._,arguments)},setHours:function(){Be.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Be.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Be.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Be.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Be.setUTCSeconds.apply(this._,arguments)},setTime:function(){Be.setTime.apply(this._,arguments)}};var Be=Date.prototype;function Ue(t,e,n){function r(e){var n=t(e),r=a(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Fe(n-1)),1),n}function a(t,n){return e(t=new Fe(+t),n),t}function o(t,r,a){var o=i(t),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;o<r;)s.push(new Date(+o)),e(o,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=a,t.range=o;var s=t.utc=Ve(t);return s.floor=s,s.round=Ve(r),s.ceil=Ve(i),s.offset=Ve(a),s.range=function(t,e,n){try{Fe=ze;var r=new ze;return r._=t,o(r,e,n)}finally{Fe=Date}},t}function Ve(t){return function(e,n){try{Fe=ze;var r=new ze;return r._=e,t(r,n)._}finally{Fe=Date}}}Le.year=Ue(function(t){return(t=Le.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Le.years=Le.year.range,Le.years.utc=Le.year.utc.range,Le.day=Ue(function(t){var e=new Fe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Le.days=Le.day.range,Le.days.utc=Le.day.utc.range,Le.dayOfYear=function(t){var e=Le.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Le[t]=Ue(function(t){return(t=Le.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Le[t+"s"]=n.range,Le[t+"s"].utc=n.utc.range,Le[t+"OfYear"]=function(t){var n=Le.year(t).getDay();return Math.floor((Le.dayOfYear(t)+(n+e)%7)/7)}}),Le.week=Le.sunday,Le.weeks=Le.sunday.range,Le.weeks.utc=Le.sunday.utc.range,Le.weekOfYear=Le.sundayOfYear;var qe={"-":"",_:" ",0:"0"},We=/^\s*\d+/,Ge=/^%/;function He(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function $e(t){return new RegExp("^(?:"+t.map(a.requote).join("|")+")","i")}function Ke(t){for(var e=new E,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Xe(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ye(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Je(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Ze(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Qe(t,e,n){We.lastIndex=0;var r,i=We.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function tn(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function en(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nn(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function rn(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function an(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function on(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function sn(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function un(t,e,n){We.lastIndex=0;var r=We.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ln(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=w(e)/60|0,i=w(e)%60;return n+He(r,"0",2)+He(i,"0",2)}function cn(t,e,n){Ge.lastIndex=0;var r=Ge.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function fn(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}a.locale=function(t){return{numberFormat:function(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,a=[],o=0,s=r[0],u=0;i>0&&s>0&&(u+s+1>e&&(s=Math.max(1,e-u)),a.push(t.substring(i-=s,i+s)),!((u+=s+1)>e));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:D;return function(t){var n=Re.exec(t),r=n[1]||" ",s=n[2]||">",u=n[3]||"-",l=n[4]||"",c=n[5],f=+n[6],h=n[7],p=n[8],d=n[9],m=1,g="",v="",y=!1,b=!0;switch(p&&(p=+p.substring(1)),(c||"0"===r&&"="===s)&&(c=r="0",s="="),d){case"n":h=!0,d="g";break;case"%":m=100,v="%",d="f";break;case"p":m=100,v="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+d.toLowerCase());case"c":b=!1;case"d":y=!0,p=0;break;case"s":m=-1,d="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=d||p||(d="g"),null!=p&&("g"==d?p=Math.max(1,Math.min(21,p)):"e"!=d&&"f"!=d||(p=Math.max(0,Math.min(20,p)))),d=De.get(d)||je;var _=c&&h;return function(t){var n=v;if(y&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===u?"":u;if(m<0){var l=a.formatPrefix(t,p);t=l.scale(t),n=l.symbol+v}else t*=m;var x,w,S=(t=d(t,p)).lastIndexOf(".");if(S<0){var E=b?t.lastIndexOf("e"):-1;E<0?(x=t,w=""):(x=t.substring(0,E),w=t.substring(E))}else x=t.substring(0,S),w=e+t.substring(S+1);!c&&h&&(x=o(x,1/0));var k=g.length+x.length+w.length+(_?0:i.length),T=k<f?new Array(k=f-k+1).join(r):"";return _&&(x=o(T+x,T.length?f-w.length:1/0)),i+=g,t=x+w,("<"===s?i+t+T:">"===s?T+i+t:"^"===s?T.substring(0,k>>=1)+i+t+T.substring(k):i+(_?t:T+t))+n}}}(t),timeFormat:function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,s=t.shortDays,u=t.months,l=t.shortMonths;function c(t){var e=t.length;function n(n){for(var r,i,a,o=[],s=-1,u=0;++s<e;)37===t.charCodeAt(s)&&(o.push(t.slice(u,s)),null!=(i=qe[r=t.charAt(++s)])&&(r=t.charAt(++s)),(a=x[r])&&(r=a(n,null==i?"e"===r?" ":"0":i)),o.push(r),u=s+1);return o.push(t.slice(u,s)),o.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Fe!==ze,i=new(r?ze:Fe);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return t},n}function f(t,e,n,r){for(var i,a,o,s=0,u=e.length,l=n.length;s<u;){if(r>=l)return-1;if(37===(i=e.charCodeAt(s++))){if(o=e.charAt(s++),!(a=w[o in qe?e.charAt(s++):o])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(t){var e=c(t);function n(t){try{var n=new(Fe=ze);return n._=t,e(n)}finally{Fe=Date}}return n.parse=function(t){try{Fe=ze;var n=e.parse(t);return n&&n._}finally{Fe=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=fn;var h=a.map(),p=$e(o),d=Ke(o),m=$e(s),g=Ke(s),v=$e(u),y=Ke(u),b=$e(l),_=Ke(l);i.forEach(function(t,e){h.set(t.toLowerCase(),e)});var x={a:function(t){return s[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:c(e),d:function(t,e){return He(t.getDate(),e,2)},e:function(t,e){return He(t.getDate(),e,2)},H:function(t,e){return He(t.getHours(),e,2)},I:function(t,e){return He(t.getHours()%12||12,e,2)},j:function(t,e){return He(1+Le.dayOfYear(t),e,3)},L:function(t,e){return He(t.getMilliseconds(),e,3)},m:function(t,e){return He(t.getMonth()+1,e,2)},M:function(t,e){return He(t.getMinutes(),e,2)},p:function(t){return i[+(t.getHours()>=12)]},S:function(t,e){return He(t.getSeconds(),e,2)},U:function(t,e){return He(Le.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return He(Le.mondayOfYear(t),e,2)},x:c(n),X:c(r),y:function(t,e){return He(t.getFullYear()%100,e,2)},Y:function(t,e){return He(t.getFullYear()%1e4,e,4)},Z:ln,"%":function(){return"%"}},w={a:function(t,e,n){m.lastIndex=0;var r=m.exec(e.slice(n));return r?(t.w=g.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){p.lastIndex=0;var r=p.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){v.lastIndex=0;var r=v.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return f(t,x.c.toString(),e,n)},d:nn,e:nn,H:an,I:an,j:rn,L:un,m:en,M:on,p:function(t,e,n){var r=h.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:sn,U:Ye,w:Xe,W:Je,x:function(t,e,n){return f(t,x.x.toString(),e,n)},X:function(t,e,n){return f(t,x.X.toString(),e,n)},y:Qe,Y:Ze,Z:tn,"%":cn};return c}(t)}};var hn=a.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pn(){}a.format=hn.numberFormat,a.geo={},pn.prototype={s:0,t:0,add:function(t){mn(t,this.t,dn),mn(dn.s,this.s,this),this.s?this.t+=dn.t:this.s=dn.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var dn=new pn;function mn(t,e,n){var r=n.s=t+e,i=r-t,a=r-i;n.t=t-a+(e-i)}function gn(t,e){t&&yn.hasOwnProperty(t.type)&&yn[t.type](t,e)}a.geo.stream=function(t,e){t&&vn.hasOwnProperty(t.type)?vn[t.type](t,e):gn(t,e)};var vn={Feature:function(t,e){gn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)gn(n[r].geometry,e)}},yn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){bn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)bn(n[r],e,0)},Polygon:function(t,e){_n(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)_n(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)gn(n[r],e)}};function bn(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function _n(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)bn(t[n],e,1);e.polygonEnd()}a.geo.area=function(t){return xn=0,a.geo.stream(t,Rn),xn};var xn,wn,Sn,En,kn,Tn,Pn,Mn,Cn,On,In,Nn,An=new pn,Rn={sphere:function(){xn+=4*Ct},point:z,lineStart:z,lineEnd:z,polygonStart:function(){An.reset(),Rn.lineStart=Dn},polygonEnd:function(){var t=2*An;xn+=t<0?4*Ct+t:t,Rn.lineStart=Rn.lineEnd=Rn.point=z}};function Dn(){var t,e,n,r,i;function a(t,e){e=e*At/2+Ct/4;var a=(t*=At)-n,o=a>=0?1:-1,s=o*a,u=Math.cos(e),l=Math.sin(e),c=i*l,f=r*u+c*Math.cos(s),h=c*o*Math.sin(s);An.add(Math.atan2(h,f)),n=t,r=u,i=l}Rn.point=function(o,s){Rn.point=a,n=(t=o)*At,r=Math.cos(s=(e=s)*At/2+Ct/4),i=Math.sin(s)},Rn.lineEnd=function(){a(t,e)}}function jn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function Ln(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Fn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function zn(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Bn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Un(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Vn(t){return[Math.atan2(t[1],t[0]),Ft(t[2])]}function qn(t,e){return w(t[0]-e[0])<Pt&&w(t[1]-e[1])<Pt}a.geo.bounds=function(){var t,e,n,r,i,o,s,u,l,c,f,h={point:p,lineStart:m,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=y,h.lineEnd=b,l=0,Rn.polygonStart()},polygonEnd:function(){Rn.polygonEnd(),h.point=p,h.lineStart=m,h.lineEnd=g,An<0?(t=-(n=180),e=-(r=90)):l>Pt?r=90:l<-Pt&&(e=-90),f[0]=t,f[1]=n}};function p(i,a){c.push(f=[t=i,n=i]),a<e&&(e=a),a>r&&(r=a)}function d(a,o){var s=jn([a*At,o*At]);if(u){var l=Fn(u,s),c=Fn([l[1],-l[0],0],l);Un(c),c=Vn(c);var f=a-i,h=f>0?1:-1,d=c[0]*Rt*h,m=w(f)>180;if(m^(h*i<d&&d<h*a))(g=c[1]*Rt)>r&&(r=g);else if(m^(h*i<(d=(d+360)%360-180)&&d<h*a)){var g;(g=-c[1]*Rt)<e&&(e=g)}else o<e&&(e=o),o>r&&(r=o);m?a<i?_(t,a)>_(t,n)&&(n=a):_(a,n)>_(t,n)&&(t=a):n>=t?(a<t&&(t=a),a>n&&(n=a)):a>i?_(t,a)>_(t,n)&&(n=a):_(a,n)>_(t,n)&&(t=a)}else p(a,o);u=s,i=a}function m(){h.point=d}function g(){f[0]=t,f[1]=n,h.point=p,u=null}function v(t,e){if(u){var n=t-i;l+=w(n)>180?n+(n>0?360:-360):n}else o=t,s=e;Rn.point(t,e),d(t,e)}function y(){Rn.lineStart()}function b(){v(o,s),Rn.lineEnd(),w(l)>Pt&&(t=-(n=180)),f[0]=t,f[1]=n,u=null}function _(t,e){return(e-=t)<0?e+360:e}function x(t,e){return t[0]-e[0]}function S(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(i){if(r=n=-(t=e=1/0),c=[],a.geo.stream(i,h),l=c.length){c.sort(x);for(var o=1,s=[m=c[0]];o<l;++o)S((p=c[o])[0],m)||S(p[1],m)?(_(m[0],p[1])>_(m[0],m[1])&&(m[1]=p[1]),_(p[0],m[1])>_(m[0],m[1])&&(m[0]=p[0])):s.push(m=p);for(var u,l,p,d=-1/0,m=(o=0,s[l=s.length-1]);o<=l;m=p,++o)p=s[o],(u=_(m[1],p[0]))>d&&(d=u,t=p[0],n=m[1])}return c=f=null,t===1/0||e===1/0?[[NaN,NaN],[NaN,NaN]]:[[t,e],[n,r]]}}(),a.geo.centroid=function(t){wn=Sn=En=kn=Tn=Pn=Mn=Cn=On=In=Nn=0,a.geo.stream(t,Wn);var e=On,n=In,r=Nn,i=e*e+n*n+r*r;return i<Mt&&(e=Pn,n=Mn,r=Cn,Sn<Pt&&(e=En,n=kn,r=Tn),(i=e*e+n*n+r*r)<Mt)?[NaN,NaN]:[Math.atan2(n,e)*Rt,Ft(r/Math.sqrt(i))*Rt]};var Wn={sphere:z,point:Gn,lineStart:$n,lineEnd:Kn,polygonStart:function(){Wn.lineStart=Xn},polygonEnd:function(){Wn.lineStart=$n}};function Gn(t,e){t*=At;var n=Math.cos(e*=At);Hn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Hn(t,e,n){En+=(t-En)/++wn,kn+=(e-kn)/wn,Tn+=(n-Tn)/wn}function $n(){var t,e,n;function r(r,i){r*=At;var a=Math.cos(i*=At),o=a*Math.cos(r),s=a*Math.sin(r),u=Math.sin(i),l=Math.atan2(Math.sqrt((l=e*u-n*s)*l+(l=n*o-t*u)*l+(l=t*s-e*o)*l),t*o+e*s+n*u);Sn+=l,Pn+=l*(t+(t=o)),Mn+=l*(e+(e=s)),Cn+=l*(n+(n=u)),Hn(t,e,n)}Wn.point=function(i,a){i*=At;var o=Math.cos(a*=At);t=o*Math.cos(i),e=o*Math.sin(i),n=Math.sin(a),Wn.point=r,Hn(t,e,n)}}function Kn(){Wn.point=Gn}function Xn(){var t,e,n,r,i;function a(t,e){t*=At;var a=Math.cos(e*=At),o=a*Math.cos(t),s=a*Math.sin(t),u=Math.sin(e),l=r*u-i*s,c=i*o-n*u,f=n*s-r*o,h=Math.sqrt(l*l+c*c+f*f),p=n*o+r*s+i*u,d=h&&-Lt(p)/h,m=Math.atan2(h,p);On+=d*l,In+=d*c,Nn+=d*f,Sn+=m,Pn+=m*(n+(n=o)),Mn+=m*(r+(r=s)),Cn+=m*(i+(i=u)),Hn(n,r,i)}Wn.point=function(o,s){t=o,e=s,Wn.point=a,o*=At;var u=Math.cos(s*=At);n=u*Math.cos(o),r=u*Math.sin(o),i=Math.sin(s),Hn(n,r,i)},Wn.lineEnd=function(){a(t,e),Wn.lineEnd=Kn,Wn.point=Gn}}function Yn(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Jn(){return!0}function Zn(t,e,n,r,i){var a=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(qn(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd()}else{var u=new tr(n,t,null,!0),l=new tr(n,null,u,!1);u.o=l,a.push(u),o.push(l),u=new tr(r,t,null,!1),l=new tr(r,null,u,!0),u.o=l,a.push(u),o.push(l)}}}),o.sort(e),Qn(a),Qn(o),a.length){for(var s=0,u=n,l=o.length;s<l;++s)o[s].e=u=!u;for(var c,f,h=a[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(s=0,l=c.length;s<l;++s)i.point((f=c[s])[0],f[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d)for(s=(c=p.p.z).length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,d=!d}while(!p.v);i.lineEnd()}}}function Qn(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function tr(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function er(t,e,n,r){return function(i,o){var s,u=e(o),l=i.invert(r[0],r[1]),c={point:f,lineStart:p,lineEnd:d,polygonStart:function(){c.point=_,c.lineStart=x,c.lineEnd=w,s=[],m=[]},polygonEnd:function(){c.point=f,c.lineStart=p,c.lineEnd=d,s=a.merge(s);var t=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;An.reset();for(var s=0,u=e.length;s<u;++s){var l=e[s],c=l.length;if(c)for(var f=l[0],h=f[0],p=f[1]/2+Ct/4,d=Math.sin(p),m=Math.cos(p),g=1;;){g===c&&(g=0);var v=(t=l[g])[0],y=t[1]/2+Ct/4,b=Math.sin(y),_=Math.cos(y),x=v-h,w=x>=0?1:-1,S=w*x,E=S>Ct,k=d*b;if(An.add(Math.atan2(k*w*Math.sin(S),m*_+k*Math.cos(S))),a+=E?x+w*Ot:x,E^h>=n^v>=n){var T=Fn(jn(f),jn(t));Un(T);var P=Fn(i,T);Un(P);var M=(E^x>=0?-1:1)*Ft(P[2]);(r>M||r===M&&(T[0]||T[1]))&&(o+=E^x>=0?1:-1)}if(!g++)break;h=v,d=b,m=_,f=t}}return(a<-Pt||a<Pt&&An<-Pt)^1&o}(l,m);s.length?(b||(o.polygonStart(),b=!0),Zn(s,ir,t,n,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),s=m=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function h(t,e){var n=i(t,e);u.point(n[0],n[1])}function p(){c.point=h,u.lineStart()}function d(){c.point=f,u.lineEnd()}var m,g,v=rr(),y=e(v),b=!1;function _(t,e){g.push([t,e]);var n=i(t,e);y.point(n[0],n[1])}function x(){y.lineStart(),g=[]}function w(){_(g[0][0],g[0][1]),y.lineEnd();var t,e=y.clean(),n=v.buffer(),r=n.length;if(g.pop(),m.push(g),g=null,r)if(1&e){var i,a=-1;if((r=(t=n[0]).length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(nr))}return c}}function nr(t){return t.length>1}function rr(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:z,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function ir(t,e){return((t=t.x)[0]<0?t[1]-Nt-Pt:Nt-t[1])-((e=e.x)[0]<0?e[1]-Nt-Pt:Nt-e[1])}var ar=er(Jn,function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?Ct:-Ct,u=w(a-n);w(u-Ct)<Pt?(t.point(n,r=(r+o)/2>0?Nt:-Nt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&u>=Ct&&(w(n-i)<Pt&&(n-=i*Pt),w(a-s)<Pt&&(a-=s*Pt),r=function(t,e,n,r){var i,a,o=Math.sin(t-n);return w(o)>Pt?Math.atan((Math.sin(e)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}},function(t,e,n,r){var i;if(null==t)i=n*Nt,r.point(-Ct,i),r.point(0,i),r.point(Ct,i),r.point(Ct,0),r.point(Ct,-i),r.point(0,-i),r.point(-Ct,-i),r.point(-Ct,0),r.point(-Ct,i);else if(w(t[0]-e[0])>Pt){var a=t[0]<e[0]?Ct:-Ct;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])},[-Ct,-Ct/2]);function or(t,e,n,r){return function(i){var a,o=i.a,s=i.b,u=o.x,l=o.y,c=0,f=1,h=s.x-u,p=s.y-l;if(a=t-u,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>c&&(c=a)}if(a=n-u,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<f&&(f=a)}if(a=e-l,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>c&&(c=a)}if(a=r-l,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<f&&(f=a)}return c>0&&(i.a={x:u+c*h,y:l+c*p}),f<1&&(i.b={x:u+f*h,y:l+f*p}),i}}}}}}var sr=1e9;function ur(t,e,n,r){return function(u){var l,c,f,h,p,d,m,g,v,y,b,_=u,x=rr(),w=or(t,e,n,r),S={point:T,lineStart:function(){S.point=P,c&&c.push(f=[]);y=!0,v=!1,m=g=NaN},lineEnd:function(){l&&(P(h,p),d&&v&&x.rejoin(),l.push(x.buffer()));S.point=T,v&&u.lineEnd()},polygonStart:function(){u=x,l=[],c=[],b=!0},polygonEnd:function(){u=_,l=a.merge(l);var e=function(t){for(var e=0,n=c.length,r=t[1],i=0;i<n;++i)for(var a,o=1,s=c[i],u=s.length,l=s[0];o<u;++o)a=s[o],l[1]<=r?a[1]>r&&jt(l,a,t)>0&&++e:a[1]<=r&&jt(l,a,t)<0&&--e,l=a;return 0!==e}([t,r]),n=b&&e,i=l.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),E(null,null,1,u),u.lineEnd()),i&&Zn(l,o,e,E,u),u.polygonEnd()),l=c=f=null}};function E(a,o,u,l){var c=0,f=0;if(null==a||(c=i(a,u))!==(f=i(o,u))||s(a,o)<0^u>0)do{l.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+u+4)%4)!==f);else l.point(o[0],o[1])}function k(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function T(t,e){k(t,e)&&u.point(t,e)}function P(t,e){var n=k(t=Math.max(-sr,Math.min(sr,t)),e=Math.max(-sr,Math.min(sr,e)));if(c&&f.push([t,e]),y)h=t,p=e,d=n,y=!1,n&&(u.lineStart(),u.point(t,e));else if(n&&v)u.point(t,e);else{var r={a:{x:m,y:g},b:{x:t,y:e}};w(r)?(v||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),b=!1):n&&(u.lineStart(),u.point(t,e),b=!1)}m=t,g=e,v=n}return S};function i(r,i){return w(r[0]-t)<Pt?i>0?0:3:w(r[0]-n)<Pt?i>0?2:1:w(r[1]-e)<Pt?i>0?1:0:i>0?3:2}function o(t,e){return s(t.x,e.x)}function s(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function lr(t){var e=0,n=Ct/3,r=Ar(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ct/180,n=t[1]*Ct/180):[e/Ct*180,n/Ct*180]},i}function cr(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),a=Math.sqrt(i)/r;function o(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),a-n*Math.cos(t)]}return o.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/r,Ft((i-(t*t+n*n)*r*r)/(2*r))]},o}a.geo.clipExtent=function(){var t,e,n,r,i,a,o={stream:function(t){return i&&(i.valid=!1),(i=a(t)).valid=!0,i},extent:function(s){return arguments.length?(a=ur(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[t,e],[n,r]]}};return o.extent([[0,0],[960,500]])},(a.geo.conicEqualArea=function(){return lr(cr)}).raw=cr,a.geo.albers=function(){return a.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},a.geo.albersUsa=function(){var t,e,n,r,i=a.geo.albers(),o=a.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=a.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,n){t=[e,n]}};function l(i){var a=i[0],o=i[1];return t=null,e(a,o),t||(n(a,o),t)||r(a,o),t}return l.invert=function(t){var e=i.scale(),n=i.translate(),r=(t[0]-n[0])/e,a=(t[1]-n[1])/e;return(a>=.12&&a<.234&&r>=-.425&&r<-.214?o:a>=.166&&a<.234&&r>=-.214&&r<-.115?s:i).invert(t)},l.stream=function(t){var e=i.stream(t),n=o.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},l.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),s.precision(t),l):i.precision()},l.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),s.scale(t),l.translate(i.translate())):i.scale()},l.translate=function(t){if(!arguments.length)return i.translate();var a=i.scale(),c=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[c-.455*a,f-.238*a],[c+.455*a,f+.238*a]]).stream(u).point,n=o.translate([c-.307*a,f+.201*a]).clipExtent([[c-.425*a+Pt,f+.12*a+Pt],[c-.214*a-Pt,f+.234*a-Pt]]).stream(u).point,r=s.translate([c-.205*a,f+.212*a]).clipExtent([[c-.214*a+Pt,f+.166*a+Pt],[c-.115*a-Pt,f+.234*a-Pt]]).stream(u).point,l},l.scale(1070)};var fr,hr,pr,dr,mr,gr,vr={point:z,lineStart:z,lineEnd:z,polygonStart:function(){hr=0,vr.lineStart=yr},polygonEnd:function(){vr.lineStart=vr.lineEnd=vr.point=z,fr+=w(hr/2)}};function yr(){var t,e,n,r;function i(t,e){hr+=r*t-n*e,n=t,r=e}vr.point=function(a,o){vr.point=i,t=n=a,e=r=o},vr.lineEnd=function(){i(t,e)}}var br={point:function(t,e){t<pr&&(pr=t);t>mr&&(mr=t);e<dr&&(dr=e);e>gr&&(gr=e)},lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z};function _r(){var t=xr(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(e){return t=xr(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=a}function a(t,n){e.push("L",t,",",n)}function o(){n.point=r}function s(){e.push("Z")}return n}function xr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var wr,Sr={point:Er,lineStart:kr,lineEnd:Tr,polygonStart:function(){Sr.lineStart=Pr},polygonEnd:function(){Sr.point=Er,Sr.lineStart=kr,Sr.lineEnd=Tr}};function Er(t,e){En+=t,kn+=e,++Tn}function kr(){var t,e;function n(n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a);Pn+=o*(t+n)/2,Mn+=o*(e+r)/2,Cn+=o,Er(t=n,e=r)}Sr.point=function(r,i){Sr.point=n,Er(t=r,e=i)}}function Tr(){Sr.point=Er}function Pr(){var t,e,n,r;function i(t,e){var i=t-n,a=e-r,o=Math.sqrt(i*i+a*a);Pn+=o*(n+t)/2,Mn+=o*(r+e)/2,Cn+=o,On+=(o=r*t-n*e)*(n+t),In+=o*(r+e),Nn+=3*o,Er(n=t,r=e)}Sr.point=function(a,o){Sr.point=i,Er(t=n=a,e=r=o)},Sr.lineEnd=function(){i(t,e)}}function Mr(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:o,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=o,n.point=r},pointRadius:function(t){return e=t,n},result:z};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,Ot)}function i(e,r){t.moveTo(e,r),n.point=a}function a(e,n){t.lineTo(e,n)}function o(){n.point=r}function s(){t.closePath()}return n}function Cr(t){var e=.5,n=Math.cos(30*At),r=16;function i(e){return(r?function(e){var n,i,o,s,u,l,c,f,h,p,d,m,g={point:v,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),g.lineStart=x},polygonEnd:function(){e.polygonEnd(),g.lineStart=y}};function v(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){f=NaN,g.point=b,e.lineStart()}function b(n,i){var o=jn([n,i]),s=t(n,i);a(f,h,c,p,d,m,f=s[0],h=s[1],c=n,p=o[0],d=o[1],m=o[2],r,e),e.point(f,h)}function _(){g.point=v,e.lineEnd()}function x(){y(),g.point=w,g.lineEnd=S}function w(t,e){b(n=t,e),i=f,o=h,s=p,u=d,l=m,g.point=b}function S(){a(f,h,c,p,d,m,i,o,n,s,u,l,r,e),g.lineEnd=_,_()}return g}:function(e){return Ir(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})})(e)}function a(r,i,o,s,u,l,c,f,h,p,d,m,g,v){var y=c-r,b=f-i,_=y*y+b*b;if(_>4*e&&g--){var x=s+p,S=u+d,E=l+m,k=Math.sqrt(x*x+S*S+E*E),T=Math.asin(E/=k),P=w(w(E)-1)<Pt||w(o-h)<Pt?(o+h)/2:Math.atan2(S,x),M=t(P,T),C=M[0],O=M[1],I=C-r,N=O-i,A=b*I-y*N;(A*A/_>e||w((y*I+b*N)/_-.5)>.3||s*p+u*d+l*m<n)&&(a(r,i,o,s,u,l,C,O,P,x/=k,S/=k,E,g,v),v.point(C,O),a(C,O,P,x,S,E,c,f,h,p,d,m,g,v))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Or(t){this.stream=t}function Ir(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Nr(t){return Ar(function(){return t})()}function Ar(t){var e,n,r,i,o,s,u=Cr(function(t,n){return[(t=e(t,n))[0]*l+i,o-t[1]*l]}),l=150,c=480,f=250,h=0,p=0,d=0,m=0,g=0,v=ar,y=D,b=null,_=null;function x(t){return[(t=r(t[0]*At,t[1]*At))[0]*l+i,o-t[1]*l]}function S(t){return(t=r.invert((t[0]-i)/l,(o-t[1])/l))&&[t[0]*Rt,t[1]*Rt]}function E(){r=Yn(n=Lr(d,m,g),e);var t=e(h,p);return i=c-t[0]*l,o=f+t[1]*l,k()}function k(){return s&&(s.valid=!1,s=null),x}return x.stream=function(t){return s&&(s.valid=!1),(s=Rr(v(n,u(y(t))))).valid=!0,s},x.clipAngle=function(t){return arguments.length?(v=null==t?(b=t,ar):function(t){var e=Math.cos(t),n=e>0,r=w(e)>Pt;return er(i,function(t){var e,s,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,h){var p,d=[f,h],m=i(f,h),g=n?m?0:o(f,h):m?o(f+(f<0?Ct:-Ct),h):0;if(!e&&(l=u=m)&&t.lineStart(),m!==u&&(p=a(e,d),(qn(e,p)||qn(d,p))&&(d[0]+=Pt,d[1]+=Pt,m=i(d[0],d[1]))),m!==u)c=0,m?(t.lineStart(),p=a(d,e),t.point(p[0],p[1])):(p=a(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(r&&e&&n^m){var v;g&s||!(v=a(d,e,!0))||(c=0,n?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!m||e&&qn(e,d)||t.point(d[0],d[1]),e=d,u=m,s=g},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return c|(l&&u)<<1}}},Ur(t,6*At),n?[0,-t]:[-Ct,t-Ct]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function a(t,n,r){var i=[1,0,0],a=Fn(jn(t),jn(n)),o=Ln(a,a),s=a[0],u=o-s*s;if(!u)return!r&&t;var l=e*o/u,c=-e*s/u,f=Fn(i,a),h=Bn(i,l);zn(h,Bn(a,c));var p=f,d=Ln(h,p),m=Ln(p,p),g=d*d-m*(Ln(h,h)-1);if(!(g<0)){var v=Math.sqrt(g),y=Bn(p,(-d-v)/m);if(zn(y,h),y=Vn(y),!r)return y;var b,_=t[0],x=n[0],S=t[1],E=n[1];x<_&&(b=_,_=x,x=b);var k=x-_,T=w(k-Ct)<Pt;if(!T&&E<S&&(b=S,S=E,E=b),T||k<Pt?T?S+E>0^y[1]<(w(y[0]-_)<Pt?S:E):S<=y[1]&&y[1]<=E:k>Ct^(_<=y[0]&&y[0]<=x)){var P=Bn(p,(-d+v)/m);return zn(P,h),[y,Vn(P)]}}}function o(e,r){var i=n?t:Ct-t,a=0;return e<-i?a|=1:e>i&&(a|=2),r<-i?a|=4:r>i&&(a|=8),a}}((b=+t)*At),k()):b},x.clipExtent=function(t){return arguments.length?(_=t,y=t?ur(t[0][0],t[0][1],t[1][0],t[1][1]):D,k()):_},x.scale=function(t){return arguments.length?(l=+t,E()):l},x.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],E()):[c,f]},x.center=function(t){return arguments.length?(h=t[0]%360*At,p=t[1]%360*At,E()):[h*Rt,p*Rt]},x.rotate=function(t){return arguments.length?(d=t[0]%360*At,m=t[1]%360*At,g=t.length>2?t[2]%360*At:0,E()):[d*Rt,m*Rt,g*Rt]},a.rebind(x,u,"precision"),function(){return e=t.apply(this,arguments),x.invert=e.invert&&S,E()}}function Rr(t){return Ir(t,function(e,n){t.point(e*At,n*At)})}function Dr(t,e){return[t,e]}function jr(t,e){return[t>Ct?t-Ot:t<-Ct?t+Ot:t,e]}function Lr(t,e,n){return t?e||n?Yn(zr(t),Br(e,n)):zr(t):e||n?Br(e,n):jr}function Fr(t){return function(e,n){return[(e+=t)>Ct?e-Ot:e<-Ct?e+Ot:e,n]}}function zr(t){var e=Fr(t);return e.invert=Fr(-t),e}function Br(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),a=Math.sin(e);function o(t,e){var o=Math.cos(e),s=Math.cos(t)*o,u=Math.sin(t)*o,l=Math.sin(e),c=l*n+s*r;return[Math.atan2(u*i-c*a,s*n-l*r),Ft(c*i+u*a)]}return o.invert=function(t,e){var o=Math.cos(e),s=Math.cos(t)*o,u=Math.sin(t)*o,l=Math.sin(e),c=l*i-u*a;return[Math.atan2(u*i+l*a,s*n+c*r),Ft(c*n-s*r)]},o}function Ur(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,a,o,s){var u=o*e;null!=i?(i=Vr(n,i),a=Vr(n,a),(o>0?i<a:i>a)&&(i+=o*Ot)):(i=t+o*Ot,a=t-.5*u);for(var l,c=i;o>0?c>a:c<a;c-=u)s.point((l=Vn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function Vr(t,e){var n=jn(e);n[0]-=t,Un(n);var r=Lt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Pt)%(2*Math.PI)}function qr(t,e,n){var r=a.range(t,e-Pt,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function Wr(t,e,n){var r=a.range(t,e-Pt,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function Gr(t){return t.source}function Hr(t){return t.target}a.geo.path=function(){var t,e,n,r,i,o=4.5;function s(t){return t&&("function"===typeof o&&r.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=n(r)),a.geo.stream(t,i)),r.result()}function u(){return i=null,s}return s.area=function(t){return fr=0,a.geo.stream(t,n(vr)),fr},s.centroid=function(t){return En=kn=Tn=Pn=Mn=Cn=On=In=Nn=0,a.geo.stream(t,n(Sr)),Nn?[On/Nn,In/Nn]:Cn?[Pn/Cn,Mn/Cn]:Tn?[En/Tn,kn/Tn]:[NaN,NaN]},s.bounds=function(t){return mr=gr=-(pr=dr=1/0),a.geo.stream(t,n(br)),[[pr,dr],[mr,gr]]},s.projection=function(e){return arguments.length?(n=(t=e)?e.stream||function(t){var e=Cr(function(e,n){return t([e*Rt,n*Rt])});return function(t){return Rr(e(t))}}(e):D,u()):t},s.context=function(t){return arguments.length?(r=null==(e=t)?new _r:new Mr(t),"function"!==typeof o&&r.pointRadius(o),u()):e},s.pointRadius=function(t){return arguments.length?(o="function"===typeof t?t:(r.pointRadius(+t),+t),s):o},s.projection(a.geo.albersUsa()).context(null)},a.geo.transform=function(t){return{stream:function(e){var n=new Or(e);for(var r in t)n[r]=t[r];return n}}},Or.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},a.geo.projection=Nr,a.geo.projectionMutator=Ar,(a.geo.equirectangular=function(){return Nr(Dr)}).raw=Dr.invert=Dr,a.geo.rotation=function(t){function e(e){return(e=t(e[0]*At,e[1]*At))[0]*=Rt,e[1]*=Rt,e}return t=Lr(t[0]%360*At,t[1]*At,t.length>2?t[2]*At:0),e.invert=function(e){return(e=t.invert(e[0]*At,e[1]*At))[0]*=Rt,e[1]*=Rt,e},e},jr.invert=Dr,a.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"===typeof n?n.apply(this,arguments):n,r=Lr(-t[0]*At,-t[1]*At,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=Rt,t[1]*=Rt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=Ur((t=+n)*At,r*At),i):t},i.precision=function(n){return arguments.length?(e=Ur(t*At,(r=+n)*At),i):r},i.angle(90)},a.geo.distance=function(t,e){var n,r=(e[0]-t[0])*At,i=t[1]*At,a=e[1]*At,o=Math.sin(r),s=Math.cos(r),u=Math.sin(i),l=Math.cos(i),c=Math.sin(a),f=Math.cos(a);return Math.atan2(Math.sqrt((n=f*o)*n+(n=l*c-u*f*s)*n),u*c+l*f*s)},a.geo.graticule=function(){var t,e,n,r,i,o,s,u,l,c,f,h,p=10,d=p,m=90,g=360,v=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return a.range(Math.ceil(r/m)*m,n,m).map(f).concat(a.range(Math.ceil(u/g)*g,s,g).map(h)).concat(a.range(Math.ceil(e/p)*p,t,p).filter(function(t){return w(t%m)>Pt}).map(l)).concat(a.range(Math.ceil(o/d)*d,i,d).filter(function(t){return w(t%g)>Pt}).map(c))}return y.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[f(r).concat(h(s).slice(1),f(n).reverse().slice(1),h(u).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.majorExtent(t).minorExtent(t):y.minorExtent()},y.majorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],s=+t[1][1],r>n&&(t=r,r=n,n=t),u>s&&(t=u,u=s,s=t),y.precision(v)):[[r,u],[n,s]]},y.minorExtent=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],o=+n[0][1],i=+n[1][1],e>t&&(n=e,e=t,t=n),o>i&&(n=o,o=i,i=n),y.precision(v)):[[e,o],[t,i]]},y.step=function(t){return arguments.length?y.majorStep(t).minorStep(t):y.minorStep()},y.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],y):[m,g]},y.minorStep=function(t){return arguments.length?(p=+t[0],d=+t[1],y):[p,d]},y.precision=function(a){return arguments.length?(v=+a,l=qr(o,i,90),c=Wr(e,t,v),f=qr(u,s,90),h=Wr(r,n,v),y):v},y.majorExtent([[-180,-90+Pt],[180,90-Pt]]).minorExtent([[-180,-80-Pt],[180,80+Pt]])},a.geo.greatArc=function(){var t,e,n=Gr,r=Hr;function i(){return{type:"LineString",coordinates:[t||n.apply(this,arguments),e||r.apply(this,arguments)]}}return i.distance=function(){return a.geo.distance(t||n.apply(this,arguments),e||r.apply(this,arguments))},i.source=function(e){return arguments.length?(n=e,t="function"===typeof e?null:e,i):n},i.target=function(t){return arguments.length?(r=t,e="function"===typeof t?null:t,i):r},i.precision=function(){return arguments.length?i:0},i},a.geo.interpolate=function(t,e){return function(t,e,n,r){var i=Math.cos(e),a=Math.sin(e),o=Math.cos(r),s=Math.sin(r),u=i*Math.cos(t),l=i*Math.sin(t),c=o*Math.cos(n),f=o*Math.sin(n),h=2*Math.asin(Math.sqrt(Bt(r-e)+i*o*Bt(n-t))),p=1/Math.sin(h),d=h?function(t){var e=Math.sin(t*=h)*p,n=Math.sin(h-t)*p,r=n*u+e*c,i=n*l+e*f,o=n*a+e*s;return[Math.atan2(i,r)*Rt,Math.atan2(o,Math.sqrt(r*r+i*i))*Rt]}:function(){return[t*Rt,e*Rt]};return d.distance=h,d}(t[0]*At,t[1]*At,e[0]*At,e[1]*At)},a.geo.length=function(t){return wr=0,a.geo.stream(t,$r),wr};var $r={sphere:z,point:z,lineStart:function(){var t,e,n;function r(r,i){var a=Math.sin(i*=At),o=Math.cos(i),s=w((r*=At)-t),u=Math.cos(s);wr+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=n*a-e*o*u)*s),e*a+n*o*u),t=r,e=a,n=o}$r.point=function(i,a){t=i*At,e=Math.sin(a*=At),n=Math.cos(a),$r.point=r},$r.lineEnd=function(){$r.point=$r.lineEnd=z}},lineEnd:z,polygonStart:z,polygonEnd:z};function Kr(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),a=t(r*i);return[a*i*Math.sin(e),a*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(t*a,r*o),Math.asin(r&&n*a/r)]},n}var Xr=Kr(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(a.geo.azimuthalEqualArea=function(){return Nr(Xr)}).raw=Xr;var Yr=Kr(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},D);function Jr(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Ct/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),a=n*Math.pow(r(t),i)/i;if(!i)return ti;function o(t,e){a>0?e<-Nt+Pt&&(e=-Nt+Pt):e>Nt-Pt&&(e=Nt-Pt);var n=a/Math.pow(r(e),i);return[n*Math.sin(i*t),a-n*Math.cos(i*t)]}return o.invert=function(t,e){var n=a-e,r=Dt(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Nt]},o}function Zr(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(w(r)<Pt)return Dr;function a(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return a.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-Dt(r)*Math.sqrt(t*t+n*n)]},a}(a.geo.azimuthalEquidistant=function(){return Nr(Yr)}).raw=Yr,(a.geo.conicConformal=function(){return lr(Jr)}).raw=Jr,(a.geo.conicEquidistant=function(){return lr(Zr)}).raw=Zr;var Qr=Kr(function(t){return 1/t},Math.atan);function ti(t,e){return[t,Math.log(Math.tan(Ct/4+e/2))]}function ei(t){var e,n=Nr(t),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var o=a.apply(n,arguments);if(o===n){if(e=null==t){var s=Ct*r(),u=i();a([[u[0]-s,u[1]-s],[u[0]+s,u[1]+s]])}}else e&&(o=null);return o},n.clipExtent(null)}(a.geo.gnomonic=function(){return Nr(Qr)}).raw=Qr,ti.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Nt]},(a.geo.mercator=function(){return ei(ti)}).raw=ti;var ni=Kr(function(){return 1},Math.asin);(a.geo.orthographic=function(){return Nr(ni)}).raw=ni;var ri=Kr(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function ii(t,e){return[Math.log(Math.tan(Ct/4+e/2)),-t]}function ai(t){return t[0]}function oi(t){return t[1]}function si(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&jt(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ui(t,e){return t[0]-e[0]||t[1]-e[1]}(a.geo.stereographic=function(){return Nr(ri)}).raw=ri,ii.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Nt]},(a.geo.transverseMercator=function(){var t=ei(ii),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ii,a.geom={},a.geom.hull=function(t){var e=ai,n=oi;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=_e(e),a=_e(n),o=t.length,s=[],u=[];for(r=0;r<o;r++)s.push([+i.call(this,t[r],r),+a.call(this,t[r],r),r]);for(s.sort(ui),r=0;r<o;r++)u.push([s[r][0],-s[r][1]]);var l=si(s),c=si(u),f=c[0]===l[0],h=c[c.length-1]===l[l.length-1],p=[];for(r=l.length-1;r>=0;--r)p.push(t[s[l[r]][2]]);for(r=+f;r<c.length-h;++r)p.push(t[s[c[r]][2]]);return p}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},a.geom.polygon=function(t){return H(t,li),t};var li=a.geom.polygon.prototype=[];function ci(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function fi(t,e,n,r){var i=t[0],a=n[0],o=e[0]-i,s=r[0]-a,u=t[1],l=n[1],c=e[1]-u,f=r[1]-l,h=(s*(u-l)-f*(i-a))/(f*o-s*c);return[i+h*o,u+h*c]}function hi(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}li.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},li.centroid=function(t){var e,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],a+=(e[0]+s[0])*n,o+=(e[1]+s[1])*n;return[a*t,o*t]},li.clip=function(t){for(var e,n,r,i,a,o,s=hi(t),u=-1,l=this.length-hi(this),c=this[l-1];++u<l;){for(e=t.slice(),t.length=0,i=this[u],a=e[(r=e.length-s)-1],n=-1;++n<r;)ci(o=e[n],c,i)?(ci(a,c,i)||t.push(fi(a,o,c,i)),t.push(o)):ci(a,c,i)&&t.push(fi(a,o,c,i)),a=o;s&&t.push(t[0]),c=i}return t};var pi,di,mi,gi,vi,yi=[],bi=[];function _i(){zi(this),this.edge=this.site=this.circle=null}function xi(t){var e=yi.pop()||new _i;return e.site=t,e}function wi(t){Ii(t),mi.remove(t),yi.push(t),zi(t)}function Si(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},a=t.P,o=t.N,s=[t];wi(t);for(var u=a;u.circle&&w(n-u.circle.x)<Pt&&w(r-u.circle.cy)<Pt;)a=u.P,s.unshift(u),wi(u),u=a;s.unshift(u),Ii(u);for(var l=o;l.circle&&w(n-l.circle.x)<Pt&&w(r-l.circle.cy)<Pt;)o=l.N,s.push(l),wi(l),l=o;s.push(l),Ii(l);var c,f=s.length;for(c=1;c<f;++c)l=s[c],u=s[c-1],ji(l.edge,u.site,l.site,i);u=s[0],(l=s[f-1]).edge=Ri(u.site,l.site,null,i),Oi(u),Oi(l)}function Ei(t){for(var e,n,r,i,a=t.x,o=t.y,s=mi._;s;)if((r=ki(s,o)-a)>Pt)s=s.L;else{if(!((i=a-Ti(s,o))>Pt)){r>-Pt?(e=s.P,n=s):i>-Pt?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var u=xi(t);if(mi.insert(e,u),e||n){if(e===n)return Ii(e),n=xi(e.site),mi.insert(u,n),u.edge=n.edge=Ri(e.site,u.site),Oi(e),void Oi(n);if(n){Ii(e),Ii(n);var l=e.site,c=l.x,f=l.y,h=t.x-c,p=t.y-f,d=n.site,m=d.x-c,g=d.y-f,v=2*(h*g-p*m),y=h*h+p*p,b=m*m+g*g,_={x:(g*y-p*b)/v+c,y:(h*b-m*y)/v+f};ji(n.edge,l,d,_),u.edge=Ri(l,t,null,_),n.edge=Ri(t,d,null,_),Oi(e),Oi(n)}else u.edge=Ri(e.site,u.site)}}function ki(t,e){var n=t.site,r=n.x,i=n.y,a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;var s=(n=o.site).x,u=n.y,l=u-e;if(!l)return s;var c=s-r,f=1/a-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-u+l/2+i-a/2)))/f+r:(r+s)/2}function Ti(t,e){var n=t.N;if(n)return ki(n,e);var r=t.site;return r.y===e?r.x:1/0}function Pi(t){this.site=t,this.edges=[]}function Mi(t,e){return e.angle-t.angle}function Ci(){zi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Oi(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i.x,s=i.y,u=r.x-o,l=r.y-s,c=a.x-o,f=2*(u*(g=a.y-s)-l*c);if(!(f>=-Mt)){var h=u*u+l*l,p=c*c+g*g,d=(g*h-l*p)/f,m=(u*p-c*h)/f,g=m+s,v=bi.pop()||new Ci;v.arc=t,v.site=i,v.x=d+o,v.y=g+Math.sqrt(d*d+m*m),v.cy=g,t.circle=v;for(var y=null,b=vi._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}vi.insert(y,v),y||(gi=v)}}}}function Ii(t){var e=t.circle;e&&(e.P||(gi=e.N),vi.remove(e),bi.push(e),zi(e),t.circle=null)}function Ni(t,e){var n=t.b;if(n)return!0;var r,i,a=t.a,o=e[0][0],s=e[1][0],u=e[0][1],l=e[1][1],c=t.l,f=t.r,h=c.x,p=c.y,d=f.x,m=f.y,g=(h+d)/2,v=(p+m)/2;if(m===p){if(g<o||g>=s)return;if(h>d){if(a){if(a.y>=l)return}else a={x:g,y:u};n={x:g,y:l}}else{if(a){if(a.y<u)return}else a={x:g,y:l};n={x:g,y:u}}}else if(i=v-(r=(h-d)/(m-p))*g,r<-1||r>1)if(h>d){if(a){if(a.y>=l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else{if(a){if(a.y<u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else if(p<m){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return t.a=a,t.b=n,!0}function Ai(t,e){this.l=t,this.r=e,this.a=this.b=null}function Ri(t,e,n,r){var i=new Ai(t,e);return pi.push(i),n&&ji(i,t,e,n),r&&ji(i,e,t,r),di[t.i].edges.push(new Li(i,t,e)),di[e.i].edges.push(new Li(i,e,t)),i}function Di(t,e,n){var r=new Ai(t,null);return r.a=e,r.b=n,pi.push(r),r}function ji(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Li(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Fi(){this._=null}function zi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Bi(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Ui(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Vi(t){for(;t.L;)t=t.L;return t}function qi(t,e){var n,r,i,a=t.sort(Wi).pop();for(pi=[],di=new Array(t.length),mi=new Fi,vi=new Fi;;)if(i=gi,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(di[a.i]=new Pi(a),Ei(a),n=a.x,r=a.y),a=t.pop();else{if(!i)break;Si(i.arc)}e&&(function(t){for(var e,n=pi,r=or(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Ni(e=n[i],t)||!r(e)||w(e.a.x-e.b.x)<Pt&&w(e.a.y-e.b.y)<Pt)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,a,o,s,u,l,c,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],m=di,g=m.length;g--;)if((a=m[g])&&a.prepare())for(u=(s=a.edges).length,o=0;o<u;)r=(c=s[o].end()).x,i=c.y,e=(l=s[++o%u].start()).x,n=l.y,(w(r-e)>Pt||w(i-n)>Pt)&&(s.splice(o,0,new Li(Di(a.site,c,w(r-f)<Pt&&d-i>Pt?{x:f,y:w(e-f)<Pt?n:d}:w(i-d)<Pt&&h-r>Pt?{x:w(n-d)<Pt?e:h,y:d}:w(r-h)<Pt&&i-p>Pt?{x:h,y:w(e-h)<Pt?n:p}:w(i-p)<Pt&&r-f>Pt?{x:w(n-p)<Pt?e:f,y:p}:null),a.site,null)),++u)}(e));var o={cells:di,edges:pi};return mi=vi=pi=di=null,o}function Wi(t,e){return e.y-t.y||e.x-t.x}Pi.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Mi),e.length},Li.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Fi.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Vi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Bi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ui(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Ui(this,n),n=(t=n).U),n.C=!1,r.C=!0,Bi(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?Vi(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Bi(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Ui(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Bi(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Ui(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Bi(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Ui(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},a.geom.voronoi=function(t){var e=ai,n=oi,r=e,i=n,a=Gi;if(t)return o(t);function o(t){var e=new Array(t.length),n=a[0][0],r=a[0][1],i=a[1][0],o=a[1][1];return qi(s(t),a).cells.forEach(function(a,s){var u=a.edges,l=a.site;(e[s]=u.length?u.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=n&&l.x<=i&&l.y>=r&&l.y<=o?[[n,o],[i,o],[i,r],[n,r]]:[]).point=t[s]}),e}function s(t){return t.map(function(t,e){return{x:Math.round(r(t,e)/Pt)*Pt,y:Math.round(i(t,e)/Pt)*Pt,i:e}})}return o.links=function(t){return qi(s(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},o.triangles=function(t){var e=[];return qi(s(t)).cells.forEach(function(n,r){for(var i,a,o,s,u=n.site,l=n.edges.sort(Mi),c=-1,f=l.length,h=l[f-1].edge,p=h.l===u?h.r:h.l;++c<f;)h,i=p,p=(h=l[c].edge).l===u?h.r:h.l,r<i.i&&r<p.i&&(o=i,s=p,((a=u).x-s.x)*(o.y-a.y)-(a.x-o.x)*(s.y-a.y)<0)&&e.push([t[r],t[i.i],t[p.i]])}),e},o.x=function(t){return arguments.length?(r=_e(e=t),o):e},o.y=function(t){return arguments.length?(i=_e(n=t),o):n},o.clipExtent=function(t){return arguments.length?(a=null==t?Gi:t,o):a===Gi?null:a},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):a===Gi?null:a&&a[1]},o};var Gi=[[-1e6,-1e6],[1e6,1e6]];function Hi(t){return t.x}function $i(t){return t.y}function Ki(t,e){t=a.rgb(t),e=a.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,s=e.g-r,u=e.b-i;return function(t){return"#"+pe(Math.round(n+o*t))+pe(Math.round(r+s*t))+pe(Math.round(i+u*t))}}function Xi(t,e){var n,r={},i={};for(n in t)n in e?r[n]=ta(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Yi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ji(t,e){var n,r,i,a=Zi.lastIndex=Qi.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=Zi.exec(t))&&(r=Qi.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:Yi(n,r)})),a=Qi.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?(e=u[0].x,function(t){return e(t)+""}):function(){return e}:(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})}a.geom.delaunay=function(t){return a.geom.voronoi().triangles(t)},a.geom.quadtree=function(t,e,n,r,i){var a,o=ai,s=oi;if(a=arguments.length)return o=Hi,s=$i,3===a&&(i=n,r=e,n=e=0),u(t);function u(t){var u,l,c,f,h,p,d,m,g,v=_e(o),y=_e(s);if(null!=e)p=e,d=n,m=r,g=i;else if(m=g=-(p=d=1/0),l=[],c=[],h=t.length,a)for(f=0;f<h;++f)(u=t[f]).x<p&&(p=u.x),u.y<d&&(d=u.y),u.x>m&&(m=u.x),u.y>g&&(g=u.y),l.push(u.x),c.push(u.y);else for(f=0;f<h;++f){var b=+v(u=t[f],f),_=+y(u,f);b<p&&(p=b),_<d&&(d=_),b>m&&(m=b),_>g&&(g=_),l.push(b),c.push(_)}var x=m-p,S=g-d;function E(t,e,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var u=t.x,l=t.y;if(null!=u)if(w(u-n)+w(l-r)<.01)k(t,e,n,r,i,a,o,s);else{var c=t.point;t.x=t.y=t.point=null,k(t,c,u,l,i,a,o,s),k(t,e,n,r,i,a,o,s)}else t.x=n,t.y=r,t.point=e}else k(t,e,n,r,i,a,o,s)}function k(t,e,n,r,i,a,o,s){var u=.5*(i+o),l=.5*(a+s),c=n>=u,f=r>=l,h=f<<1|c;t.leaf=!1,c?i=u:o=u,f?a=l:s=l,E(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){E(T,t,+v(t,++f),+y(t,f),p,d,m,g)}}),e,n,r,i,a,o,s)}x>S?g=d+x:m=p+S;var T={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){E(T,t,+v(t,++f),+y(t,f),p,d,m,g)}};if(T.visit=function(t){!function t(e,n,r,i,a,o){if(!e(n,r,i,a,o)){var s=.5*(r+a),u=.5*(i+o),l=n.nodes;l[0]&&t(e,l[0],r,i,s,u),l[1]&&t(e,l[1],s,i,a,u),l[2]&&t(e,l[2],r,u,s,o),l[3]&&t(e,l[3],s,u,a,o)}}(t,T,p,d,m,g)},T.find=function(t){return function(t,e,n,r,i,a,o){var s,u=1/0;return function t(l,c,f,h,p){if(!(c>a||f>o||h<r||p<i)){if(d=l.point){var d,m=e-l.x,g=n-l.y,v=m*m+g*g;if(v<u){var y=Math.sqrt(u=v);r=e-y,i=n-y,a=e+y,o=n+y,s=d}}for(var b=l.nodes,_=.5*(c+h),x=.5*(f+p),w=(n>=x)<<1|e>=_,S=w+4;w<S;++w)if(l=b[3&w])switch(3&w){case 0:t(l,c,f,_,x);break;case 1:t(l,_,f,h,x);break;case 2:t(l,c,x,_,p);break;case 3:t(l,_,x,h,p)}}}(t,r,i,a,o),s}(T,t[0],t[1],p,d,m,g)},f=-1,null==e){for(;++f<h;)E(T,t[f],l[f],c[f],p,d,m,g);--f}else t.forEach(T.add);return l=c=t=u=null,T}return u.x=function(t){return arguments.length?(o=t,u):o},u.y=function(t){return arguments.length?(s=t,u):s},u.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),u):null==e?null:[[e,n],[r,i]]},u.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),u):null==e?null:[r-e,i-n]},u},a.interpolateRgb=Ki,a.interpolateObject=Xi,a.interpolateNumber=Yi,a.interpolateString=Ji;var Zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qi=new RegExp(Zi.source,"g");function ta(t,e){for(var n,r=a.interpolators.length;--r>=0&&!(n=a.interpolators[r](t,e)););return n}function ea(t,e){var n,r=[],i=[],a=t.length,o=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(ta(t[n],e[n]));for(;n<a;++n)i[n]=t[n];for(;n<o;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}a.interpolate=ta,a.interpolators=[function(t,e){var n=typeof e;return("string"===n?be.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Ki:Ji:e instanceof Gt?Ki:Array.isArray(e)?ea:"object"===n&&isNaN(e)?Xi:Yi)(t,e)}],a.interpolateArray=ea;var na=function(){return D},ra=a.map({linear:na,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return sa},cubic:function(){return ua},sin:function(){return ca},exp:function(){return fa},circle:function(){return ha},elastic:function(t,e){var n;arguments.length<2&&(e=.45);arguments.length?n=e/Ot*Math.asin(1/t):(t=1,n=e/4);return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Ot/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return pa}}),ia=a.map({in:D,out:aa,"in-out":oa,"out-in":function(t){return oa(aa(t))}});function aa(t){return function(e){return 1-t(1-e)}}function oa(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function sa(t){return t*t}function ua(t){return t*t*t}function la(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function ca(t){return 1-Math.cos(t*Nt)}function fa(t){return Math.pow(2,10*(t-1))}function ha(t){return 1-Math.sqrt(1-t*t)}function pa(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function da(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function ma(t){var e,n,r,i=[t.a,t.b],a=[t.c,t.d],o=va(i),s=ga(i,a),u=va(((e=a)[0]+=(r=-s)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*a[1]<a[0]*i[1]&&(i[0]*=-1,i[1]*=-1,o*=-1,s*=-1),this.rotate=(o?Math.atan2(i[1],i[0]):Math.atan2(-a[0],a[1]))*Rt,this.translate=[t.e,t.f],this.scale=[o,u],this.skew=u?Math.atan2(s,u)*Rt:0}function ga(t,e){return t[0]*e[0]+t[1]*e[1]}function va(t){var e=Math.sqrt(ga(t,t));return e&&(t[0]/=e,t[1]/=e),e}a.ease=function(t){var e,n=t.indexOf("-"),r=n>=0?t.slice(0,n):t,i=n>=0?t.slice(n+1):"in";return r=ra.get(r)||na,i=ia.get(i)||D,e=i(r.apply(null,o.call(arguments,1))),function(t){return t<=0?0:t>=1?1:e(t)}},a.interpolateHcl=function(t,e){t=a.hcl(t),e=a.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,s=e.c-r,u=e.l-i;isNaN(s)&&(s=0,r=isNaN(r)?e.c:r);isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return Jt(n+o*t,r+s*t,i+u*t)+""}},a.interpolateHsl=function(t,e){t=a.hsl(t),e=a.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,s=e.s-r,u=e.l-i;isNaN(s)&&(s=0,r=isNaN(r)?e.s:r);isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return Kt(n+o*t,r+s*t,i+u*t)+""}},a.interpolateLab=function(t,e){t=a.lab(t),e=a.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,s=e.a-r,u=e.b-i;return function(t){return ie(n+o*t,r+s*t,i+u*t)+""}},a.interpolateRound=da,a.transform=function(t){var e=u.createElementNS(a.ns.prefix.svg,"g");return(a.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new ma(n?n.matrix:ya)})(t)},ma.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ya={a:1,b:0,c:0,d:1,e:0,f:0};function ba(t){return t.length?t.pop()+",":""}function _a(t,e){var n=[],r=[];return t=a.transform(t),e=a.transform(e),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Yi(t[0],e[0])},{i:i-2,x:Yi(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(t.translate,e.translate,n,r),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(ba(n)+"rotate(",null,")")-2,x:Yi(t,e)})):e&&n.push(ba(n)+"rotate("+e+")")}(t.rotate,e.rotate,n,r),function(t,e,n,r){t!==e?r.push({i:n.push(ba(n)+"skewX(",null,")")-2,x:Yi(t,e)}):e&&n.push(ba(n)+"skewX("+e+")")}(t.skew,e.skew,n,r),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(ba(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Yi(t[0],e[0])},{i:i-2,x:Yi(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(ba(n)+"scale("+e+")")}(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,a=r.length;++i<a;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function xa(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function wa(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Sa(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=Ea(t),r=Ea(e),i=n.pop(),a=r.pop(),o=null;for(;i===a;)o=i,i=n.pop(),a=r.pop();return o}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Ea(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function ka(t){t.fixed|=2}function Ta(t){t.fixed&=-7}function Pa(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Ma(t){t.fixed&=-5}a.interpolateTransform=_a,a.layout={},a.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Sa(t[n]));return e}},a.layout.chord=function(){var t,e,n,r,i,o,s,u={},l=0;function c(){var u,c,h,p,d,m={},g=[],v=a.range(r),y=[];for(t=[],e=[],u=0,p=-1;++p<r;){for(c=0,d=-1;++d<r;)c+=n[p][d];g.push(c),y.push(a.range(r)),u+=c}for(i&&v.sort(function(t,e){return i(g[t],g[e])}),o&&y.forEach(function(t,e){t.sort(function(t,r){return o(n[e][t],n[e][r])})}),u=(Ot-l*r)/u,c=0,p=-1;++p<r;){for(h=c,d=-1;++d<r;){var b=v[p],_=y[b][d],x=n[b][_],w=c,S=c+=x*u;m[b+"-"+_]={index:b,subindex:_,startAngle:w,endAngle:S,value:x}}e[b]={index:b,startAngle:h,endAngle:c,value:g[b]},c+=l}for(p=-1;++p<r;)for(d=p-1;++d<r;){var E=m[p+"-"+d],k=m[d+"-"+p];(E.value||k.value)&&t.push(E.value<k.value?{source:k,target:E}:{source:E,target:k})}s&&f()}function f(){t.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return u.matrix=function(i){return arguments.length?(r=(n=i)&&n.length,t=e=null,u):n},u.padding=function(n){return arguments.length?(l=n,t=e=null,u):l},u.sortGroups=function(n){return arguments.length?(i=n,t=e=null,u):i},u.sortSubgroups=function(e){return arguments.length?(o=e,t=null,u):o},u.sortChords=function(e){return arguments.length?(s=e,t&&f(),u):s},u.chords=function(){return t||c(),t},u.groups=function(){return e||c(),e},u},a.layout.force=function(){var t,e,n,r,i,o,s={},u=a.dispatch("start","tick","end"),l=[1,1],c=.9,f=Ca,h=Oa,p=-30,d=Ia,m=.1,g=.64,v=[],y=[];function b(t){return function(e,n,r,i){if(e.point!==t){var a=e.cx-t.x,o=e.cy-t.y,s=i-n,u=a*a+o*o;if(s*s/g<u){if(u<d){var l=e.charge/u;t.px-=a*l,t.py-=o*l}return!0}if(e.point&&u&&u<d){l=e.pointCharge/u;t.px-=a*l,t.py-=o*l}}return!e.charge}}function _(t){t.px=a.event.x,t.py=a.event.y,s.resume()}return s.tick=function(){if((n*=.99)<.005)return t=null,u.end({type:"end",alpha:n=0}),!0;var e,s,f,h,d,g,_,x,w,S=v.length,E=y.length;for(s=0;s<E;++s)h=(f=y[s]).source,(g=(x=(d=f.target).x-h.x)*x+(w=d.y-h.y)*w)&&(x*=g=n*i[s]*((g=Math.sqrt(g))-r[s])/g,w*=g,d.x-=x*(_=h.weight+d.weight?h.weight/(h.weight+d.weight):.5),d.y-=w*_,h.x+=x*(_=1-_),h.y+=w*_);if((_=n*m)&&(x=l[0]/2,w=l[1]/2,s=-1,_))for(;++s<S;)(f=v[s]).x+=(x-f.x)*_,f.y+=(w-f.y)*_;if(p)for(!function t(e,n,r){var i=0,a=0;e.charge=0;if(!e.leaf)for(var o,s=e.nodes,u=s.length,l=-1;++l<u;)null!=(o=s[l])&&(t(o,n,r),e.charge+=o.charge,i+=o.charge*o.cx,a+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*r[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,a+=c*e.point.y}e.cx=i/e.charge;e.cy=a/e.charge}(e=a.geom.quadtree(v),n,o),s=-1;++s<S;)(f=v[s]).fixed||e.visit(b(f));for(s=-1;++s<S;)(f=v[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);u.tick({type:"tick",alpha:n})},s.nodes=function(t){return arguments.length?(v=t,s):v},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(l=t,s):l},s.linkDistance=function(t){return arguments.length?(f="function"===typeof t?t:+t,s):f},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"===typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(p="function"===typeof t?t:+t,s):p},s.chargeDistance=function(t){return arguments.length?(d=t*t,s):Math.sqrt(d)},s.gravity=function(t){return arguments.length?(m=+t,s):m},s.theta=function(t){return arguments.length?(g=t*t,s):Math.sqrt(g)},s.alpha=function(e){return arguments.length?(e=+e,n?e>0?n=e:(t.c=null,t.t=NaN,t=null,u.end({type:"end",alpha:n=0})):e>0&&(u.start({type:"start",alpha:n=e}),t=Me(s.tick)),s):n},s.start=function(){var t,e,n,a=v.length,u=y.length,c=l[0],d=l[1];for(t=0;t<a;++t)(n=v[t]).index=t,n.weight=0;for(t=0;t<u;++t)"number"==typeof(n=y[t]).source&&(n.source=v[n.source]),"number"==typeof n.target&&(n.target=v[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<a;++t)n=v[t],isNaN(n.x)&&(n.x=m("x",c)),isNaN(n.y)&&(n.y=m("y",d)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(r=[],"function"===typeof f)for(t=0;t<u;++t)r[t]=+f.call(this,y[t],t);else for(t=0;t<u;++t)r[t]=f;if(i=[],"function"===typeof h)for(t=0;t<u;++t)i[t]=+h.call(this,y[t],t);else for(t=0;t<u;++t)i[t]=h;if(o=[],"function"===typeof p)for(t=0;t<a;++t)o[t]=+p.call(this,v[t],t);else for(t=0;t<a;++t)o[t]=p;function m(n,r){if(!e){for(e=new Array(a),l=0;l<a;++l)e[l]=[];for(l=0;l<u;++l){var i=y[l];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var o,s=e[t],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][n]))return o;return Math.random()*r}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(e||(e=a.behavior.drag().origin(D).on("dragstart.force",ka).on("drag.force",_).on("dragend.force",Ta)),!arguments.length)return e;this.on("mouseover.force",Pa).on("mouseout.force",Ma).call(e)},a.rebind(s,u,"on")};var Ca=20,Oa=1,Ia=1/0;function Na(t,e){return a.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=Fa,t}function Aa(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Ra(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(a=t.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(t=r.pop());)e(t)}function Da(t){return t.children}function ja(t){return t.value}function La(t,e){return e.value-t.value}function Fa(t){return a.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}a.layout.hierarchy=function(){var t=La,e=Da,n=ja;function r(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(l=e.call(r,a,a.depth))&&(u=l.length)){for(var u,l,c;--u>=0;)o.push(c=l[u]),c.parent=a,c.depth=a.depth+1;n&&(a.value=0),a.children=l}else n&&(a.value=+n.call(r,a,a.depth)||0),delete a.children;return Ra(i,function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)}),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Aa(t,function(t){t.children&&(t.value=0)}),Ra(t,function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},r},a.layout.partition=function(){var t=a.layout.hierarchy(),e=[1,1];function n(n,r){var i=t.call(this,n,r);return function t(e,n,r,i){var a=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,a&&(o=a.length)){var o,s,u,l=-1;for(r=e.value?r/e.value:0;++l<o;)t(s=a[l],n,u=s.value*r,i),n+=u}}(i[0],0,e[0],e[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}(i[0])),i}return n.size=function(t){return arguments.length?(e=t,n):e},Na(n,t)},a.layout.pie=function(){var t=Number,e=za,n=0,r=Ot,i=0;function o(s){var u,l=s.length,c=s.map(function(e,n){return+t.call(o,e,n)}),f=+("function"===typeof n?n.apply(this,arguments):n),h=("function"===typeof r?r.apply(this,arguments):r)-f,p=Math.min(Math.abs(h)/l,+("function"===typeof i?i.apply(this,arguments):i)),d=p*(h<0?-1:1),m=a.sum(c),g=m?(h-l*d)/m:0,v=a.range(l),y=[];return null!=e&&v.sort(e===za?function(t,e){return c[e]-c[t]}:function(t,n){return e(s[t],s[n])}),v.forEach(function(t){y[t]={data:s[t],value:u=c[t],startAngle:f,endAngle:f+=u*g+d,padAngle:p}}),y}return o.value=function(e){return arguments.length?(t=e,o):t},o.sort=function(t){return arguments.length?(e=t,o):e},o.startAngle=function(t){return arguments.length?(n=t,o):n},o.endAngle=function(t){return arguments.length?(r=t,o):r},o.padAngle=function(t){return arguments.length?(i=t,o):i},o};var za={};function Ba(t){return t.x}function Ua(t){return t.y}function Va(t,e,n){t.y0=e,t.y=n}a.layout.stack=function(){var t=D,e=Ga,n=Ha,r=Va,i=Ba,o=Ua;function s(u,l){if(!(p=u.length))return u;var c=u.map(function(e,n){return t.call(s,e,n)}),f=c.map(function(t){return t.map(function(t,e){return[i.call(s,t,e),o.call(s,t,e)]})}),h=e.call(s,f,l);c=a.permute(c,h),f=a.permute(f,h);var p,d,m,g,v=n.call(s,f,l),y=c[0].length;for(m=0;m<y;++m)for(r.call(s,c[0][m],g=v[m],f[0][m][1]),d=1;d<p;++d)r.call(s,c[d][m],g+=f[d-1][m][1],f[d][m][1]);return u}return s.values=function(e){return arguments.length?(t=e,s):t},s.order=function(t){return arguments.length?(e="function"===typeof t?t:qa.get(t)||Ga,s):e},s.offset=function(t){return arguments.length?(n="function"===typeof t?t:Wa.get(t)||Ha,s):n},s.x=function(t){return arguments.length?(i=t,s):i},s.y=function(t){return arguments.length?(o=t,s):o},s.out=function(t){return arguments.length?(r=t,s):r},s};var qa=a.map({"inside-out":function(t){var e,n,r=t.length,i=t.map($a),o=t.map(Ka),s=a.range(r).sort(function(t,e){return i[t]-i[e]}),u=0,l=0,c=[],f=[];for(e=0;e<r;++e)n=s[e],u<l?(u+=o[n],c.push(n)):(l+=o[n],f.push(n));return f.reverse().concat(c)},reverse:function(t){return a.range(t.length).reverse()},default:Ga}),Wa=a.map({silhouette:function(t){var e,n,r,i=t.length,a=t[0].length,o=[],s=0,u=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)u[n]=(s-o[n])/2;return u},wiggle:function(t){var e,n,r,i,a,o,s,u,l,c=t.length,f=t[0],h=f.length,p=[];for(p[0]=u=l=0,n=1;n<h;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,a=0,s=f[n][0]-f[n-1][0];e<c;++e){for(r=0,o=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)o+=(t[r][n][1]-t[r][n-1][1])/s;a+=o*t[e][n][1]}p[n]=u-=i?a/i*s:0,u<l&&(l=u)}for(n=0;n<h;++n)p[n]-=l;return p},expand:function(t){var e,n,r,i=t.length,a=t[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:Ha});function Ga(t){return a.range(t.length)}function Ha(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function $a(t){for(var e,n=1,r=0,i=t[0][1],a=t.length;n<a;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Ka(t){return t.reduce(Xa,0)}function Xa(t,e){return t+e[1]}function Ya(t,e){return Ja(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ja(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,a=[];++n<=e;)a[n]=i*n+r;return a}function Za(t){return[a.min(t),a.max(t)]}function Qa(t,e){return t.value-e.value}function to(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function eo(t,e){t._pack_next=e,e._pack_prev=t}function no(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function ro(t){if((e=t.children)&&(u=e.length)){var e,n,r,i,a,o,s,u,l=1/0,c=-1/0,f=1/0,h=-1/0;if(e.forEach(io),(n=e[0]).x=-n.r,n.y=0,b(n),u>1&&((r=e[1]).x=r.r,r.y=0,b(r),u>2))for(oo(n,r,i=e[2]),b(i),to(n,i),n._pack_prev=i,to(i,r),r=n._pack_next,a=3;a<u;a++){oo(n,r,i=e[a]);var p=0,d=1,m=1;for(o=r._pack_next;o!==r;o=o._pack_next,d++)if(no(o,i)){p=1;break}if(1==p)for(s=n._pack_prev;s!==o._pack_prev&&!no(s,i);s=s._pack_prev,m++);p?(d<m||d==m&&r.r<n.r?eo(n,r=o):eo(n=s,r),a--):(to(n,i),r=i,b(i))}var g=(l+c)/2,v=(f+h)/2,y=0;for(a=0;a<u;a++)(i=e[a]).x-=g,i.y-=v,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(ao)}function b(t){l=Math.min(t.x-t.r,l),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),h=Math.max(t.y+t.r,h)}}function io(t){t._pack_next=t._pack_prev=t}function ao(t){delete t._pack_next,delete t._pack_prev}function oo(t,e,n){var r=t.r+n.r,i=e.x-t.x,a=e.y-t.y;if(r&&(i||a)){var o=e.r+n.r,s=i*i+a*a,u=.5+((r*=r)-(o*=o))/(2*s),l=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=t.x+u*i+l*a,n.y=t.y+u*a-l*i}else n.x=t.x+r,n.y=t.y}function so(t,e){return t.parent==e.parent?1:2}function uo(t){var e=t.children;return e.length?e[0]:t.t}function lo(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function co(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function fo(t,e,n){return t.a.parent===e.parent?t.a:n}function ho(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function po(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],a=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function mo(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function go(t){return t.rangeExtent?t.rangeExtent():mo(t.range())}function vo(t,e,n,r){var i=n(t[0],t[1]),a=r(e[0],e[1]);return function(t){return a(i(t))}}function yo(t,e){var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function bo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:_o}a.layout.histogram=function(){var t=!0,e=Number,n=Za,r=Ya;function i(i,o){for(var s,u,l=[],c=i.map(e,this),f=n.call(this,c,o),h=r.call(this,f,c,o),p=(o=-1,c.length),d=h.length-1,m=t?1:1/p;++o<d;)(s=l[o]=[]).dx=h[o+1]-(s.x=h[o]),s.y=0;if(d>0)for(o=-1;++o<p;)(u=c[o])>=f[0]&&u<=f[1]&&((s=l[a.bisect(h,u,1,d)-1]).y+=m,s.push(i[o]));return l}return i.value=function(t){return arguments.length?(e=t,i):e},i.range=function(t){return arguments.length?(n=_e(t),i):n},i.bins=function(t){return arguments.length?(r="number"===typeof t?function(e){return Ja(e,t)}:_e(t),i):r},i.frequency=function(e){return arguments.length?(t=!!e,i):t},i},a.layout.pack=function(){var t,e=a.layout.hierarchy().sort(Qa),n=0,r=[1,1];function i(i,a){var o=e.call(this,i,a),s=o[0],u=r[0],l=r[1],c=null==t?Math.sqrt:"function"===typeof t?t:function(){return t};if(s.x=s.y=0,Ra(s,function(t){t.r=+c(t.value)}),Ra(s,ro),n){var f=n*(t?1:Math.max(2*s.r/u,2*s.r/l))/2;Ra(s,function(t){t.r+=f}),Ra(s,ro),Ra(s,function(t){t.r-=f})}return function t(e,n,r,i){var a=e.children;e.x=n+=i*e.x;e.y=r+=i*e.y;e.r*=i;if(a)for(var o=-1,s=a.length;++o<s;)t(a[o],n,r,i)}(s,u/2,l/2,t?1:1/Math.max(2*s.r/u,2*s.r/l)),o}return i.size=function(t){return arguments.length?(r=t,i):r},i.radius=function(e){return arguments.length?(t=null==e||"function"===typeof e?e:+e,i):t},i.padding=function(t){return arguments.length?(n=+t,i):n},Na(i,e)},a.layout.tree=function(){var t=a.layout.hierarchy().sort(null).value(null),e=so,n=[1,1],r=null;function i(i,a){var l=t.call(this,i,a),c=l[0],f=function(t){var e,n={A:null,children:[t]},r=[n];for(;null!=(e=r.pop());)for(var i,a=e.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:e,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}(c);if(Ra(f,o),f.parent.m=-f.z,Aa(f,s),r)Aa(c,u);else{var h=c,p=c,d=c;Aa(c,function(t){t.x<h.x&&(h=t),t.x>p.x&&(p=t),t.depth>d.depth&&(d=t)});var m=e(h,p)/2-h.x,g=n[0]/(p.x+e(p,h)/2+m),v=n[1]/(d.depth||1);Aa(c,function(t){t.x=(t.x+m)*g,t.y=t.depth*v})}return l}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n.length){!function(t){var e,n=0,r=0,i=t.children,a=i.length;for(;--a>=0;)(e=i[a]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var a=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,a=t,o=t,s=n,u=a.parent.children[0],l=a.m,c=o.m,f=s.m,h=u.m;s=lo(s),a=uo(a),s&&a;)u=uo(u),(o=lo(o)).a=t,(i=s.z+f-a.z-l+e(s._,a._))>0&&(co(fo(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=a.m,h+=u.m,c+=o.m;s&&!lo(o)&&(o.t=s,o.m+=f-c),a&&!uo(u)&&(u.t=a,u.m+=l-h,r=t)}return r}(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=n[0],t.y=t.depth*n[1]}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t)?u:null,i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null==(n=t)?null:u,i):r?n:null},Na(i,t)},a.layout.cluster=function(){var t=a.layout.hierarchy().sort(null).value(null),e=so,n=[1,1],r=!1;function i(i,o){var s,u=t.call(this,i,o),l=u[0],c=0;Ra(l,function(t){var n=t.children;n&&n.length?(t.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(n),t.y=function(t){return 1+a.max(t,function(t){return t.y})}(n)):(t.x=s?c+=e(t,s):0,t.y=0,s=t)});var f=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(l),h=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(l),p=f.x-e(f,h)/2,d=h.x+e(h,f)/2;return Ra(l,r?function(t){t.x=(t.x-l.x)*n[0],t.y=(l.y-t.y)*n[1]}:function(t){t.x=(t.x-p)/(d-p)*n[0],t.y=(1-(l.y?t.y/l.y:1))*n[1]}),u}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(t){return arguments.length?(r=null==(n=t),i):r?null:n},i.nodeSize=function(t){return arguments.length?(r=null!=(n=t),i):r?n:null},Na(i,t)},a.layout.treemap=function(){var t,e=a.layout.hierarchy(),n=Math.round,r=[1,1],i=null,o=ho,s=!1,u="squarify",l=.5*(1+Math.sqrt(5));function c(t,e){for(var n,r,i=-1,a=t.length;++i<a;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function f(t){var e=t.children;if(e&&e.length){var n,r,i,a=o(t),s=[],l=e.slice(),h=1/0,m="slice"===u?a.dx:"dice"===u?a.dy:"slice-dice"===u?1&t.depth?a.dy:a.dx:Math.min(a.dx,a.dy);for(c(l,a.dx*a.dy/t.value),s.area=0;(i=l.length)>0;)s.push(n=l[i-1]),s.area+=n.area,"squarify"!==u||(r=p(s,m))<=h?(l.pop(),h=r):(s.area-=s.pop().area,d(s,m,a,!1),m=Math.min(a.dx,a.dy),s.length=s.area=0,h=1/0);s.length&&(d(s,m,a,!0),s.length=s.area=0),e.forEach(f)}}function h(t){var e=t.children;if(e&&e.length){var n,r=o(t),i=e.slice(),a=[];for(c(i,r.dx*r.dy/t.value),a.area=0;n=i.pop();)a.push(n),a.area+=n.area,null!=n.z&&(d(a,n.z?r.dx:r.dy,r,!i.length),a.length=a.area=0);e.forEach(h)}}function p(t,e){for(var n,r=t.area,i=0,a=1/0,o=-1,s=t.length;++o<s;)(n=t[o].area)&&(n<a&&(a=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*l/r,r/(e*a*l)):1/0}function d(t,e,r,i){var a,o=-1,s=t.length,u=r.x,l=r.y,c=e?n(t.area/e):0;if(e==r.dx){for((i||c>r.dy)&&(c=r.dy);++o<s;)(a=t[o]).x=u,a.y=l,a.dy=c,u+=a.dx=Math.min(r.x+r.dx-u,c?n(a.area/c):0);a.z=!0,a.dx+=r.x+r.dx-u,r.y+=c,r.dy-=c}else{for((i||c>r.dx)&&(c=r.dx);++o<s;)(a=t[o]).x=u,a.y=l,a.dx=c,l+=a.dy=Math.min(r.y+r.dy-l,c?n(a.area/c):0);a.z=!1,a.dy+=r.y+r.dy-l,r.x+=c,r.dx-=c}}function m(n){var i=t||e(n),a=i[0];return a.x=a.y=0,a.value?(a.dx=r[0],a.dy=r[1]):a.dx=a.dy=0,t&&e.revalue(a),c([a],a.dx*a.dy/a.value),(t?h:f)(a),s&&(t=i),i}return m.size=function(t){return arguments.length?(r=t,m):r},m.padding=function(t){if(!arguments.length)return i;function e(e){return po(e,t)}var n;return o=null==(i=t)?ho:"function"===(n=typeof t)?function(e){var n=t.call(m,e,e.depth);return null==n?ho(e):po(e,"number"===typeof n?[n,n,n,n]:n)}:"number"===n?(t=[t,t,t,t],e):e,m},m.round=function(t){return arguments.length?(n=t?Math.round:Number,m):n!=Number},m.sticky=function(e){return arguments.length?(s=e,t=null,m):s},m.ratio=function(t){return arguments.length?(l=t,m):l},m.mode=function(t){return arguments.length?(u=t+"",m):u},Na(m,e)},a.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=a.random.normal.apply(a,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=a.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},a.scale={};var _o={floor:D,ceil:D};function xo(t,e,n,r){var i=[],o=[],s=0,u=Math.min(t.length,e.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<=u;)i.push(n(t[s-1],t[s])),o.push(r(e[s-1],e[s]));return function(e){var n=a.bisect(t,e,1,u)-1;return o[n](i[n](e))}}function wo(t,e){return a.rebind(t,e,"range","rangeRound","interpolate","clamp")}function So(t,e){return yo(t,bo(Eo(t,e)[2])),yo(t,bo(Eo(t,e)[2])),t}function Eo(t,e){null==e&&(e=10);var n=mo(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),a=e/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function ko(t,e){return a.range.apply(a,Eo(t,e))}function To(t,e,n){var r=Eo(t,e);if(n){var i=Re.exec(n);if(i.shift(),"s"===i[8]){var o=a.formatPrefix(Math.max(w(r[0]),w(r[1])));return i[7]||(i[7]="."+Mo(o.scale(r[2]))),i[8]="f",n=a.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+function(t,e){var n=Mo(e[2]);return t in Po?Math.abs(n-Mo(Math.max(w(e[0]),w(e[1]))))+ +("e"!==t):n-2*("%"===t)}(i[8],r)),n=i.join("")}else n=",."+Mo(r[2])+"f";return a.format(n)}a.scale.linear=function(){return function t(e,n,r,i){var a,o;function s(){var t=Math.min(e.length,n.length)>2?xo:vo,s=i?wa:xa;return a=t(e,n,s,r),o=t(n,e,s,ta),u}function u(t){return a(t)}u.invert=function(t){return o(t)};u.domain=function(t){return arguments.length?(e=t.map(Number),s()):e};u.range=function(t){return arguments.length?(n=t,s()):n};u.rangeRound=function(t){return u.range(t).interpolate(da)};u.clamp=function(t){return arguments.length?(i=t,s()):i};u.interpolate=function(t){return arguments.length?(r=t,s()):r};u.ticks=function(t){return ko(e,t)};u.tickFormat=function(t,n){return To(e,t,n)};u.nice=function(t){return So(e,t),s()};u.copy=function(){return t(e,n,r,i)};return s()}([0,1],[0,1],ta,!1)};var Po={s:1,g:1,p:1,r:1,e:1};function Mo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}a.scale.log=function(){return function t(e,n,r,i){function o(t){return(r?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function s(t){return r?Math.pow(n,t):-Math.pow(n,-t)}function u(t){return e(o(t))}u.invert=function(t){return s(e.invert(t))};u.domain=function(t){return arguments.length?(r=t[0]>=0,e.domain((i=t.map(Number)).map(o)),u):i};u.base=function(t){return arguments.length?(n=+t,e.domain(i.map(o)),u):n};u.nice=function(){var t=yo(i.map(o),r?Math:Oo);return e.domain(t),i=t.map(s),u};u.ticks=function(){var t=mo(i),e=[],a=t[0],u=t[1],l=Math.floor(o(a)),c=Math.ceil(o(u)),f=n%1?2:n;if(isFinite(c-l)){if(r){for(;l<c;l++)for(var h=1;h<f;h++)e.push(s(l)*h);e.push(s(l))}else for(e.push(s(l));l++<c;)for(var h=f-1;h>0;h--)e.push(s(l)*h);for(l=0;e[l]<a;l++);for(c=e.length;e[c-1]>u;c--);e=e.slice(l,c)}return e};u.tickFormat=function(t,e){if(!arguments.length)return Co;arguments.length<2?e=Co:"function"!==typeof e&&(e=a.format(e));var r=Math.max(1,n*t/u.ticks().length);return function(t){var i=t/s(Math.round(o(t)));return i*n<n-.5&&(i*=n),i<=r?e(t):""}};u.copy=function(){return t(e.copy(),n,r,i)};return wo(u,e)}(a.scale.linear().domain([0,1]),10,!0,[1,10])};var Co=a.format(".0e"),Oo={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Io(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}a.scale.pow=function(){return function t(e,n,r){var i=Io(n),a=Io(1/n);function o(t){return e(i(t))}o.invert=function(t){return a(e.invert(t))};o.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),o):r};o.ticks=function(t){return ko(r,t)};o.tickFormat=function(t,e){return To(r,t,e)};o.nice=function(t){return o.domain(So(r,t))};o.exponent=function(t){return arguments.length?(i=Io(n=t),a=Io(1/n),e.domain(r.map(i)),o):n};o.copy=function(){return t(e.copy(),n,r)};return wo(o,e)}(a.scale.linear(),1,[0,1])},a.scale.sqrt=function(){return a.scale.pow().exponent(.5)},a.scale.ordinal=function(){return function t(e,n){var r,i,o;function s(t){return i[((r.get(t)||("range"===n.t?r.set(t,e.push(t)):NaN))-1)%i.length]}function u(t,n){return a.range(e.length).map(function(e){return t+n*e})}s.domain=function(t){if(!arguments.length)return e;e=[],r=new E;for(var i,a=-1,o=t.length;++a<o;)r.has(i=t[a])||r.set(i,e.push(i));return s[n.t].apply(s,n.a)};s.range=function(t){return arguments.length?(i=t,o=0,n={t:"range",a:arguments},s):i};s.rangePoints=function(t,r){arguments.length<2&&(r=0);var a=t[0],l=t[1],c=e.length<2?(a=(a+l)/2,0):(l-a)/(e.length-1+r);return i=u(a+c*r/2,c),o=0,n={t:"rangePoints",a:arguments},s};s.rangeRoundPoints=function(t,r){arguments.length<2&&(r=0);var a=t[0],l=t[1],c=e.length<2?(a=l=Math.round((a+l)/2),0):(l-a)/(e.length-1+r)|0;return i=u(a+Math.round(c*r/2+(l-a-(e.length-1+r)*c)/2),c),o=0,n={t:"rangeRoundPoints",a:arguments},s};s.rangeBands=function(t,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var l=t[1]<t[0],c=t[l-0],f=t[1-l],h=(f-c)/(e.length-r+2*a);return i=u(c+h*a,h),l&&i.reverse(),o=h*(1-r),n={t:"rangeBands",a:arguments},s};s.rangeRoundBands=function(t,r,a){arguments.length<2&&(r=0),arguments.length<3&&(a=r);var l=t[1]<t[0],c=t[l-0],f=t[1-l],h=Math.floor((f-c)/(e.length-r+2*a));return i=u(c+Math.round((f-c-(e.length-r)*h)/2),h),l&&i.reverse(),o=Math.round(h*(1-r)),n={t:"rangeRoundBands",a:arguments},s};s.rangeBand=function(){return o};s.rangeExtent=function(){return mo(n.a[0])};s.copy=function(){return t(e,n)};return s.domain(e)}([],{t:"range",a:[[]]})},a.scale.category10=function(){return a.scale.ordinal().range(No)},a.scale.category20=function(){return a.scale.ordinal().range(Ao)},a.scale.category20b=function(){return a.scale.ordinal().range(Ro)},a.scale.category20c=function(){return a.scale.ordinal().range(Do)};var No=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(fe),Ao=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(fe),Ro=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(fe),Do=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(fe);function jo(){return 0}a.scale.quantile=function(){return function t(e,n){var r;function i(){var t=0,i=n.length;for(r=[];++t<i;)r[t-1]=a.quantile(e,t/i);return o}function o(t){if(!isNaN(t=+t))return n[a.bisect(r,t)]}o.domain=function(t){return arguments.length?(e=t.map(v).filter(y).sort(g),i()):e};o.range=function(t){return arguments.length?(n=t,i()):n};o.quantiles=function(){return r};o.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?r[t-1]:e[0],t<r.length?r[t]:e[e.length-1]]};o.copy=function(){return t(e,n)};return i()}([],[])},a.scale.quantize=function(){return function t(e,n,r){var i,a;function o(t){return r[Math.max(0,Math.min(a,Math.floor(i*(t-e))))]}function s(){return i=r.length/(n-e),a=r.length-1,o}o.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]};o.range=function(t){return arguments.length?(r=t,s()):r};o.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+e,t+1/i]};o.copy=function(){return t(e,n,r)};return s()}(0,1,[0,1])},a.scale.threshold=function(){return function t(e,n){function r(t){if(t<=t)return n[a.bisect(e,t)]}r.domain=function(t){return arguments.length?(e=t,r):e};r.range=function(t){return arguments.length?(n=t,r):n};r.invertExtent=function(t){return t=n.indexOf(t),[e[t-1],e[t]]};r.copy=function(){return t(e,n)};return r}([.5],[0,1])},a.scale.identity=function(){return function t(e){function n(t){return+t}n.invert=n;n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e};n.ticks=function(t){return ko(e,t)};n.tickFormat=function(t,n){return To(e,t,n)};n.copy=function(){return t(e)};return n}([0,1])},a.svg={},a.svg.arc=function(){var t=Fo,e=zo,n=jo,r=Lo,i=Bo,a=Uo,o=Vo;function s(){var s=Math.max(0,+t.apply(this,arguments)),l=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-Nt,f=a.apply(this,arguments)-Nt,h=Math.abs(f-c),p=c>f?0:1;if(l<s&&(d=l,l=s,s=d),h>=It)return u(l,p)+(s?u(s,1-p):"")+"Z";var d,m,g,v,y,b,_,x,w,S,E,k,T=0,P=0,M=[];if((v=(+o.apply(this,arguments)||0)/2)&&(g=r===Lo?Math.sqrt(s*s+l*l):+r.apply(this,arguments),p||(P*=-1),l&&(P=Ft(g/l*Math.sin(v))),s&&(T=Ft(g/s*Math.sin(v)))),l){y=l*Math.cos(c+P),b=l*Math.sin(c+P),_=l*Math.cos(f-P),x=l*Math.sin(f-P);var C=Math.abs(f-c-2*P)<=Ct?0:1;if(P&&qo(y,b,_,x)===p^C){var O=(c+f)/2;y=l*Math.cos(O),b=l*Math.sin(O),_=x=null}}else y=b=0;if(s){w=s*Math.cos(f-T),S=s*Math.sin(f-T),E=s*Math.cos(c+T),k=s*Math.sin(c+T);var I=Math.abs(c-f+2*T)<=Ct?0:1;if(T&&qo(w,S,E,k)===1-p^I){var N=(c+f)/2;w=s*Math.cos(N),S=s*Math.sin(N),E=k=null}}else w=S=0;if(h>Pt&&(d=Math.min(Math.abs(l-s)/2,+n.apply(this,arguments)))>.001){m=s<l^p?0:1;var A=d,R=d;if(h<Ct){var D=null==E?[w,S]:null==_?[y,b]:fi([y,b],[E,k],[_,x],[w,S]),j=y-D[0],L=b-D[1],F=_-D[0],z=x-D[1],B=1/Math.sin(Math.acos((j*F+L*z)/(Math.sqrt(j*j+L*L)*Math.sqrt(F*F+z*z)))/2),U=Math.sqrt(D[0]*D[0]+D[1]*D[1]);R=Math.min(d,(s-U)/(B-1)),A=Math.min(d,(l-U)/(B+1))}if(null!=_){var V=Wo(null==E?[w,S]:[E,k],[y,b],l,A,p),q=Wo([_,x],[w,S],l,A,p);d===A?M.push("M",V[0],"A",A,",",A," 0 0,",m," ",V[1],"A",l,",",l," 0 ",1-p^qo(V[1][0],V[1][1],q[1][0],q[1][1]),",",p," ",q[1],"A",A,",",A," 0 0,",m," ",q[0]):M.push("M",V[0],"A",A,",",A," 0 1,",m," ",q[0])}else M.push("M",y,",",b);if(null!=E){var W=Wo([y,b],[E,k],s,-R,p),G=Wo([w,S],null==_?[y,b]:[_,x],s,-R,p);d===R?M.push("L",G[0],"A",R,",",R," 0 0,",m," ",G[1],"A",s,",",s," 0 ",p^qo(G[1][0],G[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",R,",",R," 0 0,",m," ",W[0]):M.push("L",G[0],"A",R,",",R," 0 0,",m," ",W[0])}else M.push("L",w,",",S)}else M.push("M",y,",",b),null!=_&&M.push("A",l,",",l," 0 ",C,",",p," ",_,",",x),M.push("L",w,",",S),null!=E&&M.push("A",s,",",s," 0 ",I,",",1-p," ",E,",",k);return M.push("Z"),M.join("")}function u(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=_e(e),s):t},s.outerRadius=function(t){return arguments.length?(e=_e(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=_e(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==Lo?Lo:_e(t),s):r},s.startAngle=function(t){return arguments.length?(i=_e(t),s):i},s.endAngle=function(t){return arguments.length?(a=_e(t),s):a},s.padAngle=function(t){return arguments.length?(o=_e(t),s):o},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-Nt;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Lo="auto";function Fo(t){return t.innerRadius}function zo(t){return t.outerRadius}function Bo(t){return t.startAngle}function Uo(t){return t.endAngle}function Vo(t){return t&&t.padAngle}function qo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Wo(t,e,n,r,i){var a=t[0]-e[0],o=t[1]-e[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),u=s*o,l=-s*a,c=t[0]+u,f=t[1]+l,h=e[0]+u,p=e[1]+l,d=(c+h)/2,m=(f+p)/2,g=h-c,v=p-f,y=g*g+v*v,b=n-r,_=c*p-h*f,x=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-_*_)),w=(_*v-g*x)/y,S=(-_*g-v*x)/y,E=(_*v+g*x)/y,k=(-_*g+v*x)/y,T=w-d,P=S-m,M=E-d,C=k-m;return T*T+P*P>M*M+C*C&&(w=E,S=k),[[w-u,S-l],[w*n/b,S*n/b]]}function Go(t){var e=ai,n=oi,r=Jn,i=$o,a=i.key,o=.7;function s(a){var s,u=[],l=[],c=-1,f=a.length,h=_e(e),p=_e(n);function d(){u.push("M",i(t(l),o))}for(;++c<f;)r.call(this,s=a[c],c)?l.push([+h.call(this,s,c),+p.call(this,s,c)]):l.length&&(d(),l=[]);return l.length&&d(),u.length?u.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(a="function"===typeof t?i=t:(i=Ho.get(t)||$o).key,s):a},s.tension=function(t){return arguments.length?(o=t,s):o},s}a.svg.line=function(){return Go(D)};var Ho=a.map({linear:$o,"linear-closed":Ko,step:function(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":Xo,"step-after":Yo,basis:Qo,"basis-open":function(t){if(t.length<4)return $o(t);var e,n=[],r=-1,i=t.length,a=[0],o=[0];for(;++r<3;)e=t[r],a.push(e[0]),o.push(e[1]);n.push(ts(rs,a)+","+ts(rs,o)),--r;for(;++r<i;)e=t[r],a.shift(),a.push(e[0]),o.shift(),o.push(e[1]),is(n,a,o);return n.join("")},"basis-closed":function(t){var e,n,r=-1,i=t.length,a=i+4,o=[],s=[];for(;++r<4;)n=t[r%i],o.push(n[0]),s.push(n[1]);e=[ts(rs,o),",",ts(rs,s)],--r;for(;++r<a;)n=t[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),is(e,o,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,a=t[0][0],o=t[0][1],s=t[n][0]-a,u=t[n][1]-o,l=-1;++l<=n;)r=t[l],i=l/n,r[0]=e*r[0]+(1-e)*(a+i*s),r[1]=e*r[1]+(1-e)*(o+i*u);return Qo(t)},cardinal:function(t,e){return t.length<3?$o(t):t[0]+Jo(t,Zo(t,e))},"cardinal-open":function(t,e){return t.length<4?$o(t):t[1]+Jo(t.slice(1,-1),Zo(t,e))},"cardinal-closed":function(t,e){return t.length<3?Ko(t):t[0]+Jo((t.push(t[0]),t),Zo([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?$o(t):t[0]+Jo(t,function(t){var e,n,r,i,a=[],o=function(t){var e=0,n=t.length-1,r=[],i=t[0],a=t[1],o=r[0]=as(i,a);for(;++e<n;)r[e]=(o+(o=as(i=a,a=t[e+1])))/2;return r[e]=o,r}(t),s=-1,u=t.length-1;for(;++s<u;)e=as(t[s],t[s+1]),w(e)<Pt?o[s]=o[s+1]=0:(n=o[s]/e,r=o[s+1]/e,(i=n*n+r*r)>9&&(i=3*e/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));s=-1;for(;++s<=u;)i=(t[Math.min(u,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}(t))}});function $o(t){return t.length>1?t.join("L"):t+"Z"}function Ko(t){return t.join("L")+"Z"}function Xo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Yo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Jo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return $o(t);var n=t.length!=e.length,r="",i=t[0],a=t[1],o=e[0],s=o,u=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=t[1],u=2),e.length>1){s=e[1],a=t[u],u++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var l=2;l<e.length;l++,u++)a=t[u],s=e[l],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=t[u];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Zo(t,e){for(var n,r=[],i=(1-e)/2,a=t[0],o=t[1],s=1,u=t.length;++s<u;)n=a,a=o,o=t[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Qo(t){if(t.length<3)return $o(t);var e=1,n=t.length,r=t[0],i=r[0],a=r[1],o=[i,i,i,(r=t[1])[0]],s=[a,a,a,r[1]],u=[i,",",a,"L",ts(rs,o),",",ts(rs,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),is(u,o,s);return t.pop(),u.push("L",r),u.join("")}function ts(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Ho.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var es=[0,2/3,1/3,0],ns=[0,1/3,2/3,0],rs=[0,1/6,2/3,1/6];function is(t,e,n){t.push("C",ts(es,e),",",ts(es,n),",",ts(ns,e),",",ts(ns,n),",",ts(rs,e),",",ts(rs,n))}function as(t,e){return(e[1]-t[1])/(e[0]-t[0])}function os(t){for(var e,n,r,i=-1,a=t.length;++i<a;)n=(e=t[i])[0],r=e[1]-Nt,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function ss(t){var e=ai,n=ai,r=0,i=oi,a=Jn,o=$o,s=o.key,u=o,l="L",c=.7;function f(s){var f,h,p,d=[],m=[],g=[],v=-1,y=s.length,b=_e(e),_=_e(r),x=e===n?function(){return h}:_e(n),w=r===i?function(){return p}:_e(i);function S(){d.push("M",o(t(g),c),l,u(t(m.reverse()),c),"Z")}for(;++v<y;)a.call(this,f=s[v],v)?(m.push([h=+b.call(this,f,v),p=+_.call(this,f,v)]),g.push([+x.call(this,f,v),+w.call(this,f,v)])):m.length&&(S(),m=[],g=[]);return m.length&&S(),d.length?d.join(""):null}return f.x=function(t){return arguments.length?(e=n=t,f):n},f.x0=function(t){return arguments.length?(e=t,f):e},f.x1=function(t){return arguments.length?(n=t,f):n},f.y=function(t){return arguments.length?(r=i=t,f):i},f.y0=function(t){return arguments.length?(r=t,f):r},f.y1=function(t){return arguments.length?(i=t,f):i},f.defined=function(t){return arguments.length?(a=t,f):a},f.interpolate=function(t){return arguments.length?(s="function"===typeof t?o=t:(o=Ho.get(t)||$o).key,u=o.reverse||o,l=o.closed?"M":"L",f):s},f.tension=function(t){return arguments.length?(c=t,f):c},f}function us(t){return t.radius}function ls(t){return[t.x,t.y]}function cs(){return 64}function fs(){return"circle"}function hs(t){var e=Math.sqrt(t/Ct);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}a.svg.line.radial=function(){var t=Go(os);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Xo.reverse=Yo,Yo.reverse=Xo,a.svg.area=function(){return ss(D)},a.svg.area.radial=function(){var t=ss(os);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},a.svg.chord=function(){var t=Gr,e=Hr,n=us,r=Bo,i=Uo;function a(n,r){var i,a,l=o(this,t,n,r),c=o(this,e,n,r);return"M"+l.p0+s(l.r,l.p1,l.a1-l.a0)+(a=c,(i=l).a0==a.a0&&i.a1==a.a1?u(l.r,l.p1,l.r,l.p0):u(l.r,l.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+u(c.r,c.p1,l.r,l.p0))+"Z"}function o(t,e,a,o){var s=e.call(t,a,o),u=n.call(t,s,o),l=r.call(t,s,o)-Nt,c=i.call(t,s,o)-Nt;return{r:u,a0:l,a1:c,p0:[u*Math.cos(l),u*Math.sin(l)],p1:[u*Math.cos(c),u*Math.sin(c)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ct)+",1 "+e}function u(t,e,n,r){return"Q 0,0 "+r}return a.radius=function(t){return arguments.length?(n=_e(t),a):n},a.source=function(e){return arguments.length?(t=_e(e),a):t},a.target=function(t){return arguments.length?(e=_e(t),a):e},a.startAngle=function(t){return arguments.length?(r=_e(t),a):r},a.endAngle=function(t){return arguments.length?(i=_e(t),a):i},a},a.svg.diagonal=function(){var t=Gr,e=Hr,n=ls;function r(r,i){var a=t.call(this,r,i),o=e.call(this,r,i),s=(a.y+o.y)/2,u=[a,{x:a.x,y:s},{x:o.x,y:s},o];return"M"+(u=u.map(n))[0]+"C"+u[1]+" "+u[2]+" "+u[3]}return r.source=function(e){return arguments.length?(t=_e(e),r):t},r.target=function(t){return arguments.length?(e=_e(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},a.svg.diagonal.radial=function(){var t=a.svg.diagonal(),e=ls,n=t.projection;return t.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Nt;return[n*Math.cos(r),n*Math.sin(r)]}}(e=t)):e},t},a.svg.symbol=function(){var t=fs,e=cs;function n(n,r){return(ps.get(t.call(this,n,r))||hs)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=_e(e),n):t},n.size=function(t){return arguments.length?(e=_e(t),n):e},n};var ps=a.map({circle:hs,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ms)),n=e*ms;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ds),n=e*ds/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ds),n=e*ds/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});a.svg.symbolTypes=ps.keys();var ds=Math.sqrt(3),ms=Math.tan(30*At);J.transition=function(t){for(var e,n,r=bs||++ws,i=ks(t),a=[],o=_s||{time:Date.now(),ease:la,delay:0,duration:250},s=-1,u=this.length;++s<u;){a.push(e=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(n=l[c])&&Ts(n,c,i,r,o),e.push(n)}return ys(a,i,r)},J.interrupt=function(t){return this.each(null==t?gs:vs(ks(t)))};var gs=vs(ks());function vs(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ys(t,e,n){return H(t,xs),t.namespace=e,t.id=n,t}var bs,_s,xs=[],ws=0;function Ss(t,e,n,r){var i=t.id,a=t.namespace;return dt(t,"function"===typeof n?function(t,o,s){t[a][i].tween.set(e,r(n.call(t,t.__data__,o,s)))}:(n=r(n),function(t){t[a][i].tween.set(e,n)}))}function Es(t){return null==t&&(t=""),function(){this.textContent=t}}function ks(t){return null==t?"__transition__":"__transition_"+t+"__"}function Ts(t,e,n,r,i){var a,o,s,u,l,c=t[n]||(t[n]={active:0,count:0}),f=c[r];function h(n){var i=c.active,h=c[i];for(var d in h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[i],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),c)if(+d<r){var m=c[d];m.timer.c=null,m.timer.t=NaN,--c.count,delete c[d]}o.c=p,Me(function(){return o.c&&p(n||1)&&(o.c=null,o.t=NaN),1},0,a),c.active=r,f.event&&f.event.start.call(t,t.__data__,e),l=[],f.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&l.push(r)}),u=f.ease,s=f.duration}function p(i){for(var a=i/s,o=u(a),h=l.length;h>0;)l[--h].call(t,o);if(a>=1)return f.event&&f.event.end.call(t,t.__data__,e),--c.count?delete c[r]:delete t[n],1}f||(a=i.time,o=Me(function(t){var e=f.delay;if(o.t=e+a,e<=t)return h(t-e);o.c=h},0,a),f=c[r]={tween:new E,time:a,timer:o,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}xs.call=J.call,xs.empty=J.empty,xs.node=J.node,xs.size=J.size,a.transition=function(t,e){return t&&t.transition?bs?t.transition(e):t:a.selection().transition(t)},a.transition.prototype=xs,xs.select=function(t){var e,n,r,i=this.id,a=this.namespace,o=[];t=Z(t);for(var s=-1,u=this.length;++s<u;){o.push(e=[]);for(var l=this[s],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Ts(n,c,a,i,r[a][i]),e.push(n)):e.push(null)}return ys(o,a,i)},xs.selectAll=function(t){var e,n,r,i,a,o=this.id,s=this.namespace,u=[];t=Q(t);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],h=-1,p=f.length;++h<p;)if(r=f[h]){a=r[s][o],n=t.call(r,r.__data__,h,l),u.push(e=[]);for(var d=-1,m=n.length;++d<m;)(i=n[d])&&Ts(i,d,s,o,a),e.push(i)}return ys(u,s,o)},xs.filter=function(t){var e,n,r=[];"function"!==typeof t&&(t=pt(t));for(var i=0,a=this.length;i<a;i++){r.push(e=[]);for(var o,s=0,u=(o=this[i]).length;s<u;s++)(n=o[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return ys(r,this.namespace,this.id)},xs.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):dt(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},xs.attr=function(t,e){if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var n="transform"==t?_a:ta,r=a.ns.qualify(t);function i(){this.removeAttribute(r)}function o(){this.removeAttributeNS(r.space,r.local)}return Ss(this,"attr."+t,e,r.local?function(t){return null==t?o:(t+="",function(){var e,i=this.getAttributeNS(r.space,r.local);return i!==t&&(e=n(i,t),function(t){this.setAttributeNS(r.space,r.local,e(t))})})}:function(t){return null==t?i:(t+="",function(){var e,i=this.getAttribute(r);return i!==t&&(e=n(i,t),function(t){this.setAttribute(r,e(t))})})})},xs.attrTween=function(t,e){var n=a.ns.qualify(t);return this.tween("attr."+t,n.local?function(t,r){var i=e.call(this,t,r,this.getAttributeNS(n.space,n.local));return i&&function(t){this.setAttributeNS(n.space,n.local,i(t))}}:function(t,r){var i=e.call(this,t,r,this.getAttribute(n));return i&&function(t){this.setAttribute(n,i(t))}})},xs.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!==typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}return Ss(this,"style."+t,e,function(e){return null==e?i:(e+="",function(){var r,i=c(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=ta(i,e),function(e){this.style.setProperty(t,r(e),n)})})})},xs.styleTween=function(t,e,n){return arguments.length<3&&(n=""),this.tween("style."+t,function(r,i){var a=e.call(this,r,i,c(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}})},xs.text=function(t){return Ss(this,"text",t,Es)},xs.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},xs.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!==typeof t&&(t=a.ease.apply(a,arguments)),dt(this,function(r){r[n][e].ease=t}))},xs.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:dt(this,"function"===typeof t?function(r,i,a){r[n][e].delay=+t.call(r,r.__data__,i,a)}:(t=+t,function(r){r[n][e].delay=t}))},xs.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:dt(this,"function"===typeof t?function(r,i,a){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,a))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},xs.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=_s,o=bs;try{bs=n,dt(this,function(e,i,a){_s=e[r][n],t.call(e,e.__data__,i,a)})}finally{_s=i,bs=o}}else dt(this,function(i){var o=i[r][n];(o.event||(o.event=a.dispatch("start","end","interrupt"))).on(t,e)});return this},xs.transition=function(){for(var t,e,n,r=this.id,i=++ws,a=this.namespace,o=[],s=0,u=this.length;s<u;s++){o.push(t=[]);for(var l,c=0,f=(l=this[s]).length;c<f;c++)(e=l[c])&&Ts(e,c,a,i,{time:(n=e[a][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return ys(o,a,i)},a.svg.axis=function(){var t,e=a.scale.linear(),n=Ps,r=6,i=6,o=3,u=[10],l=null;function c(s){s.each(function(){var s,c=a.select(this),f=this.__chart__||e,h=this.__chart__=e.copy(),p=null==l?h.ticks?h.ticks.apply(h,u):h.domain():l,d=null==t?h.tickFormat?h.tickFormat.apply(h,u):D:t,m=c.selectAll(".tick").data(p,h),g=m.enter().insert("g",".domain").attr("class","tick").style("opacity",Pt),v=a.transition(m.exit()).style("opacity",Pt).remove(),y=a.transition(m.order()).style("opacity",1),b=Math.max(r,0)+o,_=go(h),x=c.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),a.transition(x));g.append("line"),g.append("text");var S,E,k,T,P=g.select("line"),M=y.select("line"),C=m.select("text").text(d),O=g.select("text"),I=y.select("text"),N="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(s=Cs,S="x",k="y",E="x2",T="y2",C.attr("dy",N<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+_[0]+","+N*i+"V0H"+_[1]+"V"+N*i)):(s=Os,S="y",k="x",E="y2",T="x2",C.attr("dy",".32em").style("text-anchor",N<0?"end":"start"),w.attr("d","M"+N*i+","+_[0]+"H0V"+_[1]+"H"+N*i)),P.attr(T,N*r),O.attr(k,N*b),M.attr(E,0).attr(T,N*r),I.attr(S,0).attr(k,N*b),h.rangeBand){var A=h,R=A.rangeBand()/2;f=h=function(t){return A(t)+R}}else f.rangeBand?f=h:v.call(s,h,f);g.call(s,f,h),y.call(s,h,h)})}return c.scale=function(t){return arguments.length?(e=t,c):e},c.orient=function(t){return arguments.length?(n=t in Ms?t+"":Ps,c):n},c.ticks=function(){return arguments.length?(u=s(arguments),c):u},c.tickValues=function(t){return arguments.length?(l=t,c):l},c.tickFormat=function(e){return arguments.length?(t=e,c):t},c.tickSize=function(t){var e=arguments.length;return e?(r=+t,i=+arguments[e-1],c):r},c.innerTickSize=function(t){return arguments.length?(r=+t,c):r},c.outerTickSize=function(t){return arguments.length?(i=+t,c):i},c.tickPadding=function(t){return arguments.length?(o=+t,c):o},c.tickSubdivide=function(){return arguments.length&&c},c};var Ps="bottom",Ms={top:1,right:1,bottom:1,left:1};function Cs(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Os(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}a.svg.brush=function(){var t,e,n=W(h,"brushstart","brush","brushend"),r=null,i=null,o=[0,0],s=[0,0],u=!0,l=!0,f=Ns[0];function h(t){t.each(function(){var t=a.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",g).on("touchstart.brush",g),e=t.selectAll(".background").data([0]);e.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=t.selectAll(".resize").data(f,D);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Is[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var o,s=a.transition(t),u=a.transition(e);r&&(o=go(r),u.attr("x",o[0]).attr("width",o[1]-o[0]),d(s)),i&&(o=go(i),u.attr("y",o[0]).attr("height",o[1]-o[0]),m(s)),p(s)})}function p(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+o[+/e$/.test(t)]+","+s[+/^s/.test(t)]+")"})}function d(t){t.select(".extent").attr("x",o[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",o[1]-o[0])}function m(t){t.select(".extent").attr("y",s[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function g(){var f,g,v=this,y=a.select(a.event.target),b=n.of(v,arguments),_=a.select(v),x=y.datum(),w=!/^(n|s)$/.test(x)&&r,S=!/^(e|w)$/.test(x)&&i,E=y.classed("extent"),k=St(v),T=a.mouse(v),P=a.select(c(v)).on("keydown.brush",function(){32==a.event.keyCode&&(E||(f=null,T[0]-=o[1],T[1]-=s[1],E=2),V())}).on("keyup.brush",function(){32==a.event.keyCode&&2==E&&(T[0]+=o[1],T[1]+=s[1],E=0,V())});if(a.event.changedTouches?P.on("touchmove.brush",O).on("touchend.brush",N):P.on("mousemove.brush",O).on("mouseup.brush",N),_.interrupt().selectAll("*").interrupt(),E)T[0]=o[0]-T[0],T[1]=s[0]-T[1];else if(x){var M=+/w$/.test(x),C=+/^n/.test(x);g=[o[1-M]-T[0],s[1-C]-T[1]],T[0]=o[M],T[1]=s[C]}else a.event.altKey&&(f=T.slice());function O(){var t=a.mouse(v),e=!1;g&&(t[0]+=g[0],t[1]+=g[1]),E||(a.event.altKey?(f||(f=[(o[0]+o[1])/2,(s[0]+s[1])/2]),T[0]=o[+(t[0]<f[0])],T[1]=s[+(t[1]<f[1])]):f=null),w&&I(t,r,0)&&(d(_),e=!0),S&&I(t,i,1)&&(m(_),e=!0),e&&(p(_),b({type:"brush",mode:E?"move":"resize"}))}function I(n,r,i){var a,c,h=go(r),p=h[0],d=h[1],m=T[i],g=i?s:o,v=g[1]-g[0];if(E&&(p-=m,d-=v+m),a=(i?l:u)?Math.max(p,Math.min(d,n[i])):n[i],E?c=(a+=m)+v:(f&&(m=Math.max(p,Math.min(d,2*f[i]-a))),m<a?(c=a,a=m):c=m),g[0]!=a||g[1]!=c)return i?e=null:t=null,g[0]=a,g[1]=c,!0}function N(){O(),_.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),a.select("body").style("cursor",null),P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),k(),b({type:"brushend"})}_.style("pointer-events","none").selectAll(".resize").style("display",null),a.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),O()}return h.event=function(r){r.each(function(){var r=n.of(this,arguments),i={x:o,y:s,i:t,j:e},u=this.__chart__||i;this.__chart__=i,bs?a.select(this).transition().each("start.brush",function(){t=u.i,e=u.j,o=u.x,s=u.y,r({type:"brushstart"})}).tween("brush:brush",function(){var n=ea(o,i.x),a=ea(s,i.y);return t=e=null,function(t){o=i.x=n(t),s=i.y=a(t),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){t=i.i,e=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},h.x=function(t){return arguments.length?(f=Ns[!(r=t)<<1|!i],h):r},h.y=function(t){return arguments.length?(f=Ns[!r<<1|!(i=t)],h):i},h.clamp=function(t){return arguments.length?(r&&i?(u=!!t[0],l=!!t[1]):r?u=!!t:i&&(l=!!t),h):r&&i?[u,l]:r?u:i?l:null},h.extent=function(n){var a,u,l,c,f;return arguments.length?(r&&(a=n[0],u=n[1],i&&(a=a[0],u=u[0]),t=[a,u],r.invert&&(a=r(a),u=r(u)),u<a&&(f=a,a=u,u=f),a==o[0]&&u==o[1]||(o=[a,u])),i&&(l=n[0],c=n[1],r&&(l=l[1],c=c[1]),e=[l,c],i.invert&&(l=i(l),c=i(c)),c<l&&(f=l,l=c,c=f),l==s[0]&&c==s[1]||(s=[l,c])),h):(r&&(t?(a=t[0],u=t[1]):(a=o[0],u=o[1],r.invert&&(a=r.invert(a),u=r.invert(u)),u<a&&(f=a,a=u,u=f))),i&&(e?(l=e[0],c=e[1]):(l=s[0],c=s[1],i.invert&&(l=i.invert(l),c=i.invert(c)),c<l&&(f=l,l=c,c=f))),r&&i?[[a,l],[u,c]]:r?[a,u]:i&&[l,c])},h.clear=function(){return h.empty()||(o=[0,0],s=[0,0],t=e=null),h},h.empty=function(){return!!r&&o[0]==o[1]||!!i&&s[0]==s[1]},a.rebind(h,n,"on")};var Is={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ns=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],As=Le.format=hn.timeFormat,Rs=As.utc,Ds=Rs("%Y-%m-%dT%H:%M:%S.%LZ");function js(t){return t.toISOString()}function Ls(t,e,n){function r(e){return t(e)}function i(t,n){var r=(t[1]-t[0])/n,i=a.bisect(zs,r);return i==zs.length?[e.year,Eo(t.map(function(t){return t/31536e6}),n)[2]]:i?e[r/zs[i-1]<zs[i]/r?i-1:i]:[Vs,Eo(t,n)[2]]}return r.invert=function(e){return Fs(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Fs)},r.nice=function(t,e){var n=r.domain(),a=mo(n),o=null==t?i(a,10):"number"===typeof t&&i(a,t);function s(n){return!isNaN(n)&&!t.range(n,Fs(+n+1),e).length}return o&&(t=o[0],e=o[1]),r.domain(yo(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Fs(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Fs(+e+1);return e}}:t))},r.ticks=function(t,e){var n=mo(r.domain()),a=null==t?i(n,10):"number"===typeof t?i(n,t):!t.range&&[{range:t},e];return a&&(t=a[0],e=a[1]),t.range(n[0],Fs(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Ls(t.copy(),e,n)},wo(r,t)}function Fs(t){return new Date(t)}As.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?js:Ds,js.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},js.toString=Ds.toString,Le.second=Ue(function(t){return new Fe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Le.seconds=Le.second.range,Le.seconds.utc=Le.second.utc.range,Le.minute=Ue(function(t){return new Fe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Le.minutes=Le.minute.range,Le.minutes.utc=Le.minute.utc.range,Le.hour=Ue(function(t){var e=t.getTimezoneOffset()/60;return new Fe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Le.hours=Le.hour.range,Le.hours.utc=Le.hour.utc.range,Le.month=Ue(function(t){return(t=Le.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Le.months=Le.month.range,Le.months.utc=Le.month.utc.range;var zs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Bs=[[Le.second,1],[Le.second,5],[Le.second,15],[Le.second,30],[Le.minute,1],[Le.minute,5],[Le.minute,15],[Le.minute,30],[Le.hour,1],[Le.hour,3],[Le.hour,6],[Le.hour,12],[Le.day,1],[Le.day,2],[Le.week,1],[Le.month,1],[Le.month,3],[Le.year,1]],Us=As.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Jn]]),Vs={range:function(t,e,n){return a.range(Math.ceil(t/n)*n,+e,n).map(Fs)},floor:D,ceil:D};Bs.year=Le.year,Le.scale=function(){return Ls(a.scale.linear(),Bs,Us)};var qs=Bs.map(function(t){return[t[0].utc,t[1]]}),Ws=Rs.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Jn]]);function Gs(t){return JSON.parse(t.responseText)}function Hs(t){var e=u.createRange();return e.selectNode(u.body),e.createContextualFragment(t.responseText)}qs.year=Le.year.utc,Le.scale.utc=function(){return Ls(a.scale.linear(),qs,Ws)},a.text=xe(function(t){return t.responseText}),a.json=function(t,e){return we(t,"application/json",Gs,e)},a.html=function(t,e){return we(t,"text/html",Hs,e)},a.xml=xe(function(t){return t.responseXML}),this.d3=a,void 0===(i="function"===typeof(r=a)?r.call(e,n,e,t):r)||(t.exports=i)}()},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(218),i=n(163);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(53),i=Math.max,a=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):a(t,e)}},function(t,e,n){var r=n(14),i=n(219),a=n(163),o=n(162)("IE_PROTO"),s=function(){},u=function(){var t,e=n(160)("iframe"),r=a.length;for(e.style.display="none",n(164).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[a[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[o]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(218),i=n(163).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){"use strict";var r=n(16),i=n(21),a=n(20),o=n(19)("species");t.exports=function(t){var e=r[t];a&&e&&!e[o]&&i.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(43),i=n(230),a=n(176),o=n(14),s=n(22),u=n(178),l={},c={};(e=t.exports=function(t,e,n,f,h){var p,d,m,g,v=h?function(){return t}:u(t),y=r(n,f,e?2:1),b=0;if("function"!=typeof v)throw TypeError(t+" is not iterable!");if(a(v)){for(p=s(t.length);p>b;b++)if((g=e?y(o(d=t[b])[0],d[1]):y(t[b]))===l||g===c)return g}else for(m=v.call(t);!(d=m.next()).done;)if((g=i(m,y,d.value,e))===l||g===c)return g}).BREAK=l,e.RETURN=c},function(t,e,n){var r=n(31);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){var r=n(576),i=n(579);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e,n){var r=n(684)();t.exports=r},function(t,e,n){"use strict";(function(t){var r=e;function i(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)void 0!==t[r[i]]&&n||(t[r[i]]=e[r[i]]);return t}function a(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&i(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=n(821),r.base64=n(822),r.EventEmitter=n(823),r.float=n(824),r.inquire=n(825),r.utf8=n(826),r.pool=n(827),r.LongBits=n(828),r.global="undefined"!==typeof window&&window||"undefined"!==typeof t&&t||"undefined"!==typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isNode=Boolean(r.global.process&&r.global.process.versions&&r.global.process.versions.node),r.isInteger=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"===typeof t||t instanceof String},r.isObject=function(t){return t&&"object"===typeof t},r.isset=r.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!==typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"===typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"===typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!==typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var n=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(n.lo,n.hi,e):n.toNumber(Boolean(e))},r.merge=i,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=a,r.ProtocolError=a("ProtocolError"),r.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},r.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}}).call(this,n(26))},function(t,e,n){"use strict";var r=n(147),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=f;var a=n(110);a.inherits=n(13);var o=n(293),s=n(202);a.inherits(f,o);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];f.prototype[c]||(f.prototype[c]=s.prototype[c])}function f(t){if(!(this instanceof f))return new f(t);o.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),f.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(6)),i=o(n(10)),a=o(n(42));function o(t){return t&&t.__esModule?t:{default:t}}var s=i.default.number,u=i.default.shape,l=(0,a.default)({displayName:"Chart",propTypes:{height:s.isRequired,width:s.isRequired,margin:u({top:s,bottom:s,left:s,right:s}).isRequired},render:function(){var t=this.props,e=t.width,n=t.height,i=t.margin,a=t.viewBox,o=t.preserveAspectRatio,s=t.children;return r.default.createElement("svg",{ref:"svg",width:e,height:n,viewBox:a,preserveAspectRatio:o},r.default.createElement("g",{transform:"translate("+i.left+", "+i.top+")"},s))}});e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={componentWillMount:function(){this._calculateInner(this.props)},componentWillReceiveProps:function(t){this._calculateInner(t)},_calculateInner:function(t){var e=t.height,n=t.width,r=t.margin;this._innerHeight=e-r.top-r.bottom,this._innerWidth=n-r.left-r.right}}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(339)},function(t,e,n){var r=n(21).f,i=n(35),a=n(19)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,a)&&r(t,a,{configurable:!0,value:e})}},function(t,e,n){var r=n(1),i=n(52),a=n(17),o=n(166),s="["+o+"]",u=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),c=function(t,e,n){var i={},s=a(function(){return!!o[t]()||"\u200b\x85"!="\u200b\x85"[t]()}),u=i[t]=s?e(f):o[t];n&&(i[n]=u),r(r.P+r.F*s,"String",i)},f=c.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=c},function(t,e){t.exports={}},function(t,e,n){var r=n(18);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";t.exports=function(t,e,n,s,u){void 0===s&&(s=1);void 0===u&&(u=0);var l=1!==s,c=0!==u,f=a(t),h=a(e),p=a(n);!function(t,e,n){var r=i(t),a=i(e),o=i(n);if(r[0]!==a[0]||r[1]!==o[1]||a[1]!==o[0])throw new Error("Mismatched array shapes for matrix product")}(t,e,n);var d=[f,h,p,l,c].join(":"),m=o[d];m||(m=o[d]=r(f,h,p,l,c));return m(t,e,n,s,u)};var r=n(725);function i(t){return Array.isArray(t)?[t.length,t[0].length]:t.shape}function a(t){if(Array.isArray(t)){if(Array.isArray(t))return["r","native"]}else if(t.shape&&2===t.shape.length)return t.order[0]?["r",t.dtype]:["c",t.dtype];throw new Error("Unrecognized data type")}var o={}},function(t,e,n){"use strict";(function(e,r){var i=n(15).Buffer,a=e.crypto||e.msCrypto;a&&a.getRandomValues?t.exports=function(t,n){if(t>65536)throw new Error("requested too many random bytes");var o=new e.Uint8Array(t);t>0&&a.getRandomValues(o);var s=i.from(o.buffer);if("function"===typeof n)return r.nextTick(function(){n(null,s)});return s}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}}).call(this,n(26),n(39))},function(t,e,n){var r=n(15).Buffer;function i(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}i.prototype.update=function(t,e){"string"===typeof t&&(e=e||"utf8",t=r.from(t,e));for(var n=this._block,i=this._blockSize,a=t.length,o=this._len,s=0;s<a;){for(var u=o%i,l=Math.min(a-s,i-u),c=0;c<l;c++)n[u+c]=t[s+c];s+=l,(o+=l)%i===0&&this._update(n)}return this._len+=a,this},i.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=8*this._len;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var r=(4294967295&n)>>>0,i=(n-r)/4294967296;this._block.writeUInt32BE(i,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var a=this._hash();return t?a.toString(t):a},i.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(10)),i=a(n(68));function a(t){return t&&t.__esModule?t:{default:t}}var o=r.default.oneOfType,s=r.default.object,u=r.default.array,l=r.default.shape,c=r.default.func,f=r.default.number,h={propTypes:{data:o([s,u]).isRequired,height:f.isRequired,width:f.isRequired,margin:l({top:f,bottom:f,left:f,right:f}),xScale:c,yScale:c,colorScale:c},getDefaultProps:function(){return{data:{label:"No data available",values:[{x:"No data available",y:1}]},margin:{top:0,bottom:0,left:0,right:0},xScale:null,yScale:null,colorScale:i.default.scale.category20()}}};e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=o(n(10)),a=o(n(86));function o(t){return t&&t.__esModule?t:{default:t}}var s=i.default.func,u=i.default.oneOf,l=i.default.bool,c=i.default.objectOf,f=i.default.number,h={propTypes:{tooltipHtml:s,tooltipMode:u(["mouse","element","fixed"]),tooltipContained:l,tooltipOffset:c(f)},getInitialState:function(){return{tooltip:{hidden:!0}}},getDefaultProps:function(){return{tooltipMode:"mouse",tooltipOffset:{top:-35,left:0},tooltipHtml:null,tooltipContained:!1}},componentDidMount:function(){this._svgNode=a.default.findDOMNode(this).getElementsByTagName("svg")[0]},onMouseEnter:function(t,e){if(this.props.tooltipHtml){t.preventDefault();var n=this.props,i=n.margin,a=n.tooltipMode,o=n.tooltipOffset,s=n.tooltipContained,u=this._svgNode,l=void 0;if(u.createSVGPoint){var c=u.createSVGPoint();c.x=t.clientX,c.y=t.clientY,l=[(c=c.matrixTransform(u.getScreenCTM().inverse())).x-i.left,c.y-i.top]}else{var f=u.getBoundingClientRect();l=[t.clientX-f.left-u.clientLeft-i.left,t.clientY-f.top-u.clientTop-i.top]}var h=this._tooltipHtml(e,l),p=r(h,3),d=p[0],m=p[1],g=p[2],v=u.getBoundingClientRect().top+i.top,y=u.getBoundingClientRect().left+i.left,b=0,_=0;"fixed"===a?(b=v+o.top,_=y+o.left):"element"===a?(b=v+g+o.top,_=y+m+o.left):(b=t.clientY+o.top,_=t.clientX+o.left);var x=50;if(s)x=function(t,e,n){return(1-t)*e+t*n}(l[0]/u.getBoundingClientRect().width,0,100);this.setState({tooltip:{top:b,left:_,hidden:!1,html:d,translate:x}})}},onMouseLeave:function(t){this.props.tooltipHtml&&(t.preventDefault(),this.setState({tooltip:{hidden:!0}}))}};e.default=h},function(t,e,n){var r=n(44);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(44),i=n(19)("toStringTag"),a="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(n){}}(e=Object(t),i))?n:a?r(e):"Object"==(o=r(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,n){var r=n(552),i=n(561),a=n(105);t.exports=function(t){return a(t)?r(t):i(t)}},function(t,e,n){var r=n(102),i=n(555),a=n(556),o="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:o:u&&u in Object(t)?i(t):a(t)}},function(t,e,n){var r=n(56).Symbol;t.exports=r},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){var r=n(253),i=n(187);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},function(t,e,n){var r=n(145),i=1/0;t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-i?"-0":e}},function(t,e,n){var r=n(686),i=n(269),a="undefined"!==typeof Float64Array;function o(t,e){return t[0]-e[0]}function s(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(o);var r=new Array(n.length);for(t=0;t<r.length;++t)r[t]=n[t][1];return r}function u(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var i="generic"===t;if(-1===e){var a="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(a)()}if(0===e){a="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",a)(l[t][0])}a=["'use strict'"];var o=r(e),u=o.map(function(t){return"i"+t}),c="this.offset+"+o.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),f=o.map(function(t){return"b"+t}).join(","),h=o.map(function(t){return"c"+t}).join(",");a.push("function "+n+"(a,"+f+","+h+",d){this.data=a","this.shape=["+f+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),a.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),e<4?(a.push("function "+n+"_order(){"),2===e?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+n+"_set("+u.join(",")+",v){"),i?a.push("return this.data.set("+c+",v)}"):a.push("return this.data["+c+"]=v}"),a.push("proto.get=function "+n+"_get("+u.join(",")+"){"),i?a.push("return this.data.get("+c+")}"):a.push("return this.data["+c+"]}"),a.push("proto.index=function "+n+"_index(",u.join(),"){return "+c+"}"),a.push("proto.hi=function "+n+"_hi("+u.join(",")+"){return new "+n+"(this.data,"+o.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+o.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var p=o.map(function(t){return"a"+t+"=this.shape["+t+"]"}),d=o.map(function(t){return"c"+t+"=this.stride["+t+"]"});a.push("proto.lo=function "+n+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+d.join(","));for(var m=0;m<e;++m)a.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");a.push("return new "+n+"(this.data,"+o.map(function(t){return"a"+t}).join(",")+","+o.map(function(t){return"c"+t}).join(",")+",b)}"),a.push("proto.step=function "+n+"_step("+u.join(",")+"){var "+o.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+o.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<e;++m)a.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");a.push("return new "+n+"(this.data,"+o.map(function(t){return"a"+t}).join(",")+","+o.map(function(t){return"b"+t}).join(",")+",c)}");var g=new Array(e),v=new Array(e);for(m=0;m<e;++m)g[m]="a[i"+m+"]",v[m]="b[i"+m+"]";a.push("proto.transpose=function "+n+"_transpose("+u+"){"+u.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+v.join(",")+",this.offset)}"),a.push("proto.pick=function "+n+"_pick("+u+"){var a=[],b=[],c=this.offset");for(m=0;m<e;++m)a.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map(function(t){return"shape["+t+"]"}).join(",")+","+o.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(l[t],s)}var l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=function(t,e,n,r){if(void 0===t)return(0,l.array[0])([]);"number"===typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var o=e.length;if(void 0===n){n=new Array(o);for(var s=o-1,c=1;s>=0;--s)n[s]=c,c*=e[s]}if(void 0===r)for(r=0,s=0;s<o;++s)n[s]<0&&(r-=(e[s]-1)*n[s]);for(var f=function(t){if(i(t))return"buffer";if(a)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}(t),h=l[f];h.length<=o+1;)h.push(u(f,h.length-1));return(0,h[o+1])(t,e,n,r)}},function(t,e,n){"use strict";t.exports.gemv=n(740),t.exports.gbmv=n(751),t.exports.symv=n(752),t.exports.sbmv=n(753),t.exports.spmv=n(754),t.exports.trmv=n(755),t.exports.tbmv=n(756),t.exports.trsv=n(757),t.exports.tbsv=n(758),t.exports.tpsv=n(759),t.exports.ger=n(760),t.exports.syr=n(761),t.exports.spr=n(762),t.exports.syr2=n(763),t.exports.spr2=n(764),t.exports.trmv_lower=function(e,n){return console.warn("trmv_lower is deprecated. Please use the 'isLower' flag with trmv."),t.exports.trmv(e,n,!0)},t.exports.trsv_lower=function(e,n){return console.warn("trsv_lower is deprecated. Please use the 'isLower' flag with trsv."),t.exports.trsv(e,n,!0)}},function(t,e,n){"use strict";var r=n(13),i=n(198),a=n(204),o=n(205),s=n(67);function u(t){s.call(this,"digest"),this._hash=t}r(u,s),u.prototype._update=function(t){this._hash.update(t)},u.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new i:"rmd160"===t||"ripemd160"===t?new a:new u(o(t))}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"===typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"===typeof t},e.isString=function(t){return"string"===typeof t},e.isSymbol=function(t){return"symbol"===typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"===typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"===typeof t},e.isPrimitive=function(t){return null===t||"boolean"===typeof t||"number"===typeof t||"string"===typeof t||"symbol"===typeof t||"undefined"===typeof t},e.isBuffer=t.isBuffer}).call(this,n(23).Buffer)},function(t,e,n){(function(e){t.exports=function(t,n){for(var r=Math.min(t.length,n.length),i=new e(r),a=0;a<r;++a)i[a]=t[a]^n[a];return i}}).call(this,n(23).Buffer)},function(t,e,n){"use strict";var r=n(57),i=n(41);function a(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=a,a.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},a.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},a.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,n=e-(t+this.padLength)%e,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(t<<=3,"big"===this.endian){for(var a=8;a<this.padLength;a++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=t>>>24&255,r[i++]=t>>>16&255,r[i++]=t>>>8&255,r[i++]=255&t}else for(r[i++]=255&t,r[i++]=t>>>8&255,r[i++]=t>>>16&255,r[i++]=t>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,a=8;a<this.padLength;a++)r[i++]=0;return r}},function(t,e,n){var r=e;r.bignum=n(24),r.define=n(904).define,r.base=n(114),r.constants=n(319),r.decoders=n(910),r.encoders=n(912)},function(t,e,n){var r=e;r.Reporter=n(907).Reporter,r.DecoderBuffer=n(318).DecoderBuffer,r.EncoderBuffer=n(318).EncoderBuffer,r.Node=n(908)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(6)),i=o(n(10)),a=o(n(42));function o(t){return t&&t.__esModule?t:{default:t}}var s=i.default.array,u=i.default.func,l=i.default.oneOf,c=i.default.number,f=i.default.string,h=(0,a.default)({displayName:"Axis",propTypes:{tickArguments:s,tickValues:s,tickFormat:u,tickDirection:l(["horizontal","vertical","diagonal"]),innerTickSize:c,tickPadding:c,outerTickSize:c,scale:u.isRequired,className:f,zero:c,orientation:l(["top","bottom","left","right"]).isRequired,label:f},getDefaultProps:function(){return{tickArguments:[10],tickValues:null,tickFormat:null,tickDirection:"horizontal",innerTickSize:6,tickPadding:3,outerTickSize:6,className:"axis",zero:0,label:""}},_getTranslateString:function(){var t=this.props,e=t.orientation,n=t.height,r=t.width,i=t.zero;return"top"===e?"translate(0, "+i+")":"bottom"===e?"translate(0, "+(0==i?n:i)+")":"left"===e?"translate("+i+", 0)":"right"===e?"translate("+(0==i?r:i)+", 0)":""},render:function(){var t=this.props,e=t.height,n=t.tickArguments,i=t.tickValues,a=t.tickDirection,o=t.innerTickSize,s=t.tickPadding,u=t.outerTickSize,l=t.scale,c=t.orientation,f=t.zero,h=this.props,p=h.width,d=h.className,m=h.label,g=this.props.tickFormat,v=null==i?l.ticks?l.ticks.apply(l,n):l.domain():i;g||(g=l.tickFormat?l.tickFormat.apply(l,n):function(t){return t}),f!=e&&f!=p&&0!=f&&(v=v.filter(function(t){return 0!=t}));var y=Math.max(o,0)+s,b="top"===c||"left"===c?-1:1,_=this._d3ScaleRange(l),x=l.rangeBand?function(t){return l(t)+l.rangeBand()/2}:l,w=void 0,S=void 0,E=void 0,k=void 0,T=void 0,P=void 0,M=void 0,C=void 0,O=void 0,I=0;"bottom"===c||"top"===c?(w="translate({}, 0)",S=0,E=b*y,k=0,T=b*o,P=b<0?"0em":".71em",M="middle",C="M"+_[0]+", "+b*u+"V0H"+_[1]+"V"+b*u,"vertical"===a?(I=-90,S=-y,E=-o,M="end"):"diagonal"===a&&(I=-60,S=-y,E=0,M="end"),O=r.default.createElement("text",{className:d+" label",textAnchor:"end",x:p,y:-6},m)):(w="translate(0, {})",S=b*y,E=0,k=b*o,T=0,P=".32em",M=b<0?"end":"start",C="M"+b*u+", "+_[0]+"H0V"+_[1]+"H"+b*u,"vertical"===a?(I=-90,S-=b*y,E=-(y+o),M="middle"):"diagonal"===a&&(I=-60,S-=b*y,E=-(y+o),M="middle"),O=r.default.createElement("text",{className:d+" label",textAnchor:"end",y:6,dy:"left"===c?".75em":"-1.25em",transform:"rotate(-90)"},m));var N=v.map(function(t,e){var n=x(t),i=w.replace("{}",n);return r.default.createElement("g",{key:t+"."+e,className:"tick",transform:i},r.default.createElement("line",{x2:k,y2:T,stroke:"#aaa"}),r.default.createElement("text",{x:S,y:E,dy:P,textAnchor:M,transform:"rotate("+I+")"},g(t)))}),A=r.default.createElement("path",{className:"domain",d:C,fill:"none",stroke:"#aaa"}),R=r.default.createElement("rect",{className:"axis-background",fill:"none"});return r.default.createElement("g",{ref:"axis",className:d,transform:this._getTranslateString(),style:{shapeRendering:"crispEdges"}},R,N,A,O)},_d3ScaleExtent:function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]},_d3ScaleRange:function(t){return t.rangeExtent?t.rangeExtent():this._d3ScaleExtent(t.range())}});e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(6)),i=o(n(10)),a=o(n(42));function o(t){return t&&t.__esModule?t:{default:t}}var s=i.default.number,u=i.default.node,l=(0,a.default)({displayName:"Tooltip",propTypes:{top:s.isRequired,left:s.isRequired,html:u,translate:s},getDefaultProps:function(){return{top:150,left:100,html:"",translate:50}},render:function(){var t=this.props,e=t.top,n=t.left,i=t.hidden,a=t.html,o={display:i?"none":"block",position:"fixed",top:e,left:n,transform:"translate(-"+t.translate+"%, 0)",pointerEvents:"none"};return r.default.createElement("div",{className:"tooltip",style:o},a)}});e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={componentWillMount:function(){this._arrayify(this.props)},componentWillReceiveProps:function(t){this._arrayify(t)},_arrayify:function(t){null===t.data?this._data=[{label:"No data available",values:[{x:"No data available",y:1}]}]:Array.isArray(t.data)?this._data=t.data:this._data=[t.data]}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=o(n(10)),a=o(n(68));function o(t){return t&&t.__esModule?t:{default:t}}var s={propTypes:{barPadding:i.default.number},getDefaultProps:function(){return{barPadding:.5}},componentWillMount:function(){this._makeScales(this.props)},componentWillReceiveProps:function(t){this._makeScales(t)},_makeScales:function(t){var e=t.xScale,n=t.xIntercept,i=t.yScale,a=t.yIntercept;if(e){var o=[e,n];this._xScale=o[0],this._xIntercept=o[1]}else{var s=this._makeXScale(t),u=r(s,2);this._xScale=u[0],this._xIntercept=u[1]}if(i){var l=[i,a];this._yScale=l[0],this._yIntercept=l[1]}else{var c=this._makeYScale(t),f=r(c,2);this._yScale=f[0],this._yIntercept=f[1]}},_makeXScale:function(t){var e=t.x,n=t.values,r=this._data;return"number"===typeof e(n(r[0])[0])?this._makeLinearXScale(t):"function"===typeof e(n(r[0])[0]).getMonth?this._makeTimeXScale(t):this._makeOrdinalXScale(t)},_makeLinearXScale:function(t){var e=t.x,n=t.values,r=this._data.map(function(t){return n(t).map(function(t){return e(t)})}),i=a.default.extent(Array.prototype.concat.apply([],r)),o=a.default.scale.linear().domain(i).range([0,this._innerWidth]),s=a.default.max([0,o.domain()[0]]),u=o(s);return[o,u]},_makeOrdinalXScale:function(t){var e=t.x,n=t.values,r=t.barPadding;return[a.default.scale.ordinal().domain(n(this._data[0]).map(function(t){return e(t)})).rangeRoundBands([0,this._innerWidth],r),0]},_makeTimeXScale:function(t){var e=t.x,n=t.values,r=a.default.min(n(this._data[0]),e),i=a.default.max(n(this._data[0]),e);return[a.default.time.scale().domain([r,i]).range([0,this._innerWidth]),0]},_makeYScale:function(t){return"number"===typeof(0,t.y)((0,t.values)(this._data[0])[0])?this._makeLinearYScale(t):this._makeOrdinalYScale(t)},_makeLinearYScale:function(t){var e=t.y,n=t.y0,r=t.values,i=t.groupedBars,o=this._data.map(function(t){return r(t).map(function(t){return i?e(t):n(t)+e(t)})}),s=a.default.extent(Array.prototype.concat.apply([],o));s=[a.default.min([0,s[0]]),s[1]];var u=a.default.scale.linear().domain(s).range([this._innerHeight,0]),l=a.default.max([0,u.domain()[0]]),c=u(l);return[u,c]},_makeOrdinalYScale:function(){var t=a.default.scale.ordinal().range([this._innerHeight,0]),e=t(0);return[t,e]}};e.default=s},function(t,e,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var a=typeof r;if("string"===a||"number"===a)t.push(r);else if(Array.isArray(r)&&r.length){var o=i.apply(null,r);o&&t.push(o)}else if("object"===a)for(var s in r)n.call(r,s)&&r[s]&&t.push(s)}}return t.join(" ")}"undefined"!==typeof t&&t.exports?(i.default=i,t.exports=i):void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){"use strict";var r=n(0),i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};function a(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function s(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,s)}u((r=r.apply(t,e||[])).next())})}function u(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[0,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var l=r.a.get("EPSILON");function c(){return l}var f=0;function h(){return f++}var p={};function d(t){return void 0===t&&(t=""),t in p||(p[t]=0),p[t]+=1,t+p[t].toString()}var m={float32:{},int32:{}},g="float32";function v(t,e){return void 0===e&&(e=g),null==m[e][t]&&(m[e][t]=Object(r.Qb)(t,e),Object(r.cb)(m[e][t])),m[e][t]}var y=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return a(e,t),e}(Error),b=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return a(e,t),e}(Error),_=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return a(e,t),e}(Error),x=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return a(e,t),e}(Error),w=function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}return a(e,t),e}(Error);!function(t){function e(n){var r=t.call(this,n)||this;return Object.setPrototypeOf(r,e.prototype),r}a(e,t)}(Error);function S(t,e){if(Array.isArray(t)){for(var n=[],r=0;r<e;r++)n=n.concat(t);return n}return(n=new Array(e)).fill(t),n}function E(t,e){if(!t)throw new w(e)}function k(t,e){for(var n=0,r=0,i=t;r<i.length;r++)i[r]===e&&n++;return n}function T(t){return 1===t.length?t[0]:t}function P(t){return Array.isArray(t)?t:[t]}function M(t){var e=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==e[0]?e:"private"+e}var C={};function O(t){return null===t||void 0===t?null:{className:t.getClassName(),config:t.getConfig()}}function I(t,e,n,r){if(void 0===e&&(e={}),void 0===n&&(n={}),void 0===r&&(r="object"),"string"==typeof t){var i=t,a=void 0;if(i in n)a=n[i];else if(i in C)a=C[i];else if(null==(a=e[i]))throw new _("Unknown "+r+": "+t+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return a}var s=t;if(null==s.className||null==s.config)throw new _(r+": Improper config format: "+JSON.stringify(s)+".\n'className' and 'config' must set.");var u,l,c,f=s.className,h=void 0,p=void 0;if(f in n?(h=(u=n.get(f))[0],p=u[1]):f in C?(h=(l=C.className)[0],p=l[1]):f in e&&(h=(c=e[f])[0],p=c[1]),null==h)throw new _("Unknown "+r+": "+f+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(null!=p){for(var d={},m=0,g=Object.keys(C);m<g.length;m++)d[S=g[m]]=C[S];for(var v=0,y=Object.keys(n);v<y.length;v++)d[S=y[v]]=n[S];s.config.customObjects=d;for(var b=o({},C),x=0,w=Object.keys(n);x<w.length;x++){var S=w[x];C[S]=n[S]}var E=p(h,s.config);return C=o({},b),E}b=o({},C);for(var k=0,T=Object.keys(n);k<T.length;k++)S=T[k],C[S]=n[S];return E=new h(s.config),C=o({},b),E}function N(t,e){return-1*function(t,e){return t<e?-1:t>e?1:0}(t,e)}function A(t){if(null==t)return t;for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];-1===e.indexOf(i)&&e.push(i)}return e}function R(t){if(null==t)throw new _("Invalid value in obj: "+JSON.stringify(t));for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function D(t,e,n){if(null!=n&&t.indexOf(n)<0)throw new _(n+" is not a valid "+e+".  Valid values are "+t+" or null/undefined.")}function j(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),E(n>=0),E(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(function(t){return typeof t===e})}function L(t,e){return Object(r.uc)(function(){return Object(r.hc)(Object(r.pc)(Object(r.zb)(t,t),e,!0))})}var F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.getConfig=function(){return{}},e}(r.Tb.Serializable),z=function(t){function e(e){var n=t.call(this)||this;return n.defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=e.maxValue?e.maxValue:n.defaultMaxValue,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return a(e,t),e.prototype.apply=function(t){var e=this;return Object(r.uc)(function(){var n=L(t,e.axis),i=Object(r.y)(n,0,e.maxValue);return Object(r.yb)(t,Object(r.L)(i,Object(r.g)(v(c()),n)))})},e.prototype.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},e.className="MaxNorm",e}(F);r.Tb.registerClass(z);var B=function(t){function e(e){var n=t.call(this)||this;return n.defaultAxis=0,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return a(e,t),e.prototype.apply=function(t){var e=this;return Object(r.uc)(function(){return Object(r.L)(t,Object(r.g)(v(c()),L(t,e.axis)))})},e.prototype.getConfig=function(){return{axis:this.axis}},e.className="UnitNorm",e}(F);r.Tb.registerClass(B);var U=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return Object(r.Mb)(t)},e.className="NonNeg",e}(F);r.Tb.registerClass(U);var V=function(t){function e(e){var n=t.call(this)||this;return n.defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=e.minValue?e.minValue:n.defaultMinValue,n.maxValue=null!=e.maxValue?e.maxValue:n.defaultMaxValue,n.rate=null!=e.rate?e.rate:n.defaultRate,n.axis=null!=e.axis?e.axis:n.defaultAxis,n}return a(e,t),e.prototype.apply=function(t){var e=this;return Object(r.uc)(function(){var n=L(t,e.axis),i=Object(r.g)(Object(r.yb)(v(e.rate),Object(r.y)(n,e.minValue,e.maxValue)),Object(r.yb)(v(1-e.rate),n));return Object(r.yb)(t,Object(r.L)(i,Object(r.g)(v(c()),n)))})},e.prototype.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},e.className="MinMaxNorm",e}(F);r.Tb.registerClass(V);var q={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function W(t){return O(t)}function G(t,e){return void 0===e&&(e={}),I(t,r.Tb.SerializationMap.getMap().classNameMap,e,"constraint")}function H(t){return null==t?null:"string"==typeof t?G({className:t in q?q[t]:t,config:{}}):t instanceof F?t:G(t)}Object.freeze({maxNorm:function(t){return new z(t)},unitNorm:function(t){return new B(t)},nonNeg:function(){return new U},minMaxNorm:function(t){return new V(t)}});var $=new Map,K=["channelsFirst","channelsLast"];function X(t){D(K,"DataFormat",t)}var Y=["valid","same","causal"];function J(t){D(Y,"PaddingMode",t)}var Z=["max","avg"];var Q=[],tt="/";function et(t,e){Q.push(t);try{var n=e();return Q.pop(),n}catch(t){throw Q.pop(),t}}function nt(t){if(!at(t))throw new Error("Not a valid tensor name: '"+t+"'");return(0===Q.length?"":Q.join(tt)+tt)+t}function rt(t){if(!at(t))throw new Error("Not a valid tensor name: '"+t+"'");$.has(t)||$.set(t,0);var e=$.get(t);if($.set(t,$.get(t)+1),e>0){var n=t+"_"+e;return $.set(n,1),n}return t}var it=new RegExp(/^[A-Za-z][A-Za-z0-9\._\/]*$/);function at(t){return!!t.match(it)}function ot(t){return t===parseInt(t.toString(),10)}function st(t,e,n){null==e&&(e=0),null==n&&(n=t.length);for(var r=1,i=e;i<n;++i)r*=t[i];return r}function ut(t){return t=Array.isArray(t)?new Float32Array(t):t,Object(r.tc)(t)}function lt(t){return Object(r.tb)(ut(t)).dataSync()[0]}function ct(t){return Object(r.pb)(ut(t)).dataSync()[0]}function ft(t,e){if(e<t)throw new _("end ("+e+") < begin ("+t+") is forbidden.");for(var n=[],r=t;r<e;++r)n.push(r);return n}function ht(t,e){return t.asType(e)}function pt(t,e){void 0===e&&(e=-1);var n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),t.reshape(n)}function dt(t,e,n){return Object(r.uc)(function(){switch(t.rank){case 1:return Object(r.Zb)(t,e,n);case 2:return Object(r.ac)(t,[e,0],[n,t.shape[1]]);case 3:return Object(r.bc)(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Object(r.cc)(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);default:throw new _("sliceAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}})}function mt(t,e,n){return Object(r.uc)(function(){switch(t.rank){case 1:return Object(r.Zb)(t,e,n);case 2:return Object(r.ac)(t,[0,e],[t.shape[0],n]);case 3:return Object(r.bc)(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Object(r.cc)(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new _("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function gt(t,e,n,i){return Object(r.uc)(function(){switch(t.rank){case 1:return Object(r.Zb)(t,e,n);case 2:switch(i){case 1:return dt(t,e,n);case 2:return mt(t,e,n);default:throw new _("The axis is not within the rank of the tensor "+i)}case 3:switch(i){case 1:return dt(t,e,n);case 2:return Object(r.bc)(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return mt(t,e,n);default:throw new _("The axis is not within the rank of the tensor "+i)}case 4:switch(i){case 1:return dt(t,e,n);case 2:return Object(r.cc)(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Object(r.cc)(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return mt(t,e,n);default:throw new _("The axis is not within the rank of the tensor "+i)}default:throw new _("sliceAlongLastAxis() received an unsupported tensor rank: "+t.rank)}})}function vt(t,e){var n;return void 0===e&&(e=-1),e<0&&(e=0!==(n=t[0].rank)?n:0),e===t[0].rank&&(e=-1),Object(r.z)(t,e)}function yt(t,e){switch(t.rank){case 1:return Object(r.A)([t,e]);case 2:return Object(r.B)([t,e],0);case 3:return Object(r.C)([t,e],0);case 4:return Object(r.D)([t,e],0);default:throw new _("concatAlongFirstAxis() received an unsupported tensor rank: "+t.rank)}}function bt(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new _("The length of input n ("+e.length+") does not match the number of dimensions in input x ("+t.rank+")");return Object(r.vc)(t,e)}function _t(t,e,n,i,a){return void 0===e&&(e=0),void 0===n&&(n=1),Object(r.Ib)(t,e,n,i,a)}function xt(t,e){if(t.rank<2||e.rank<2)throw new x("dot requires both inputs to be rank >= 2 but got x shape = "+t.shape+" and y shape = "+e.shape);if(e.rank>=3&&(i=t.shape.slice(-1)[0])!==(s=e.shape.slice(-2)[0]))throw new x("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+t.shape+" and  y shape = "+e.shape);if(2===t.rank&&2===e.rank)return Object(r.ob)(t,e);var n=t.shape.slice(),i=n.pop();t=t.reshape([-1,i]);var a=e.shape.slice(),o=a.pop(),s=a.pop(),u=a.concat([o]),l=Array.from({length:e.rank},function(t,n){return 0===n?e.rank-2:n<=e.rank-2?n-1:n});e=e.transpose(l).reshape([s,-1]);var c=n.concat(u);return Object(r.ob)(t,e).reshape(c)}function wt(t,e,n){return Object(r.uc)(function(){return e=Array.isArray(e)?Object(r.tc)(e,"int32"):e.toInt(),Object(r.X)(t,e,n)})}function St(t){return Object(r.zb)(t,t)}function Et(t,e,n){return Object(r.uc)(function(){if(null==n&&(n="channelsLast"),X(n),1!==e.rank&&e.rank!==t.rank)throw new _("Unexpected bias dimensions: "+e.rank+"; expected it to be 1 or "+t.rank);var r,i=e.shape;if(5===t.rank)"channelsFirst"===n?r=1===i.length?t.add(e.reshape([1,i[0],1,1,1])):t.add(e.reshape([1,i[3],i[0],i[1],i[2]])):"channelsLast"===n&&(r=1===i.length?t.add(e.reshape([1,1,1,1,i[0]])):t.add(e.reshape([1].concat(i))));else if(4===t.rank)"channelsFirst"===n?r=1===i.length?t.add(e.reshape([1,i[0],1,1])):t.add(e.reshape([1,i[2],i[0],i[1]])):"channelsLast"===n&&(r=1===i.length?t.add(e.reshape([1,1,1,i[0]])):t.add(e.reshape([1].concat(i))));else if(3===t.rank)"channelsFirst"===n?r=1===i.length?t.add(e.reshape([1,i[0],1])):t.add(e.reshape([1,i[1],i[0]])):"channelsLast"===n&&(r=1===i.length?t.add(e.reshape([1,1,i[0]])):t.add(e.reshape([1].concat(i))));else{if(!(t.rank<3))throw new _("Unsupported input rank by biasAdd: "+t.rank);r=t.add(e)}return r})}function kt(t,e,n,i){return Object(r.uc)(function(){if(null!=n&&!r.Bc.arraysEqual(t.shape,n))throw new x("Non-default noise shape is not implemented yet: "+JSON.stringify(n));if(null!=i)throw new x("seed is not implemented for dropout yet.");var a=Object(r.mc)(Object(r.g)(Object(r.Ab)(e),Object(r.Jb)(t.shape,0,1,"float32")));return a=Object(r.yb)(Object(r.L)(v(1),Object(r.oc)(v(1),e)),a),Object(r.yb)(t,a)})}function Tt(t,e,n){return void 0===n&&(n=!1),n?t():e()}var Pt=["fanIn","fanOut","fanAvg"];var Mt=["normal","uniform"];var Ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.fromConfigUsesCustomObjects=function(){return!1},e.prototype.getConfig=function(){return{}},e}(r.Tb.Serializable),Ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t,e){return Object(r.Gc)(t,e)},e.className="Zeros",e}(Ct);r.Tb.registerClass(Ot);var It=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t,e){return Object(r.Eb)(t,e)},e.className="Ones",e}(Ct);r.Tb.registerClass(It);var Nt=function(t){function e(e){var n=t.call(this)||this;if("object"!=typeof e)throw new _("Expected argument of type ConstantConfig but got "+e);if(void 0===e.value)throw new _("config must have value set but got "+e);return n.value=e.value,n}return a(e,t),e.prototype.apply=function(t,e){var n=this;return Object(r.uc)(function(){return Object(r.yb)(Object(r.Qb)(n.value),Object(r.Eb)(t,e))})},e.prototype.getConfig=function(){return{value:this.value}},e.className="Constant",e}(Ct);r.Tb.registerClass(Nt);var At=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=e.minval||n.DEFAULT_MINVAL,n.maxval=e.maxval||n.DEFAULT_MAXVAL,n.seed=e.seed,n}return a(e,t),e.prototype.apply=function(t,e){return Object(r.Jb)(t,this.minval,this.maxval,e)},e.prototype.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},e.className="RandomUniform",e}(Ct);r.Tb.registerClass(At);var Rt=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=e.mean||n.DEFAULT_MEAN,n.stddev=e.stddev||n.DEFAULT_STDDEV,n.seed=e.seed,n}return a(e,t),e.prototype.apply=function(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new x("randomNormal does not support dType "+e+".");return _t(t,this.mean,this.stddev,e,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="RandomNormal",e}(Ct);r.Tb.registerClass(Rt);var Dt=function(t){function e(e){var n=t.call(this)||this;return n.DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=e.mean||n.DEFAULT_MEAN,n.stddev=e.stddev||n.DEFAULT_STDDEV,n.seed=e.seed,n}return a(e,t),e.prototype.apply=function(t,e){if("float32"!==(e=e||"float32")&&"int32"!==e)throw new x("truncatedNormal does not support dType "+e+".");return Object(r.zc)(t,this.mean,this.stddev,e,this.seed)},e.prototype.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},e.className="TruncatedNormal",e}(Ct);r.Tb.registerClass(Dt);var jt=function(t){function e(e){var n=t.call(this)||this;return n.gain=null!=e.gain?Object(r.Qb)(e.gain):v(1),n}return a(e,t),e.prototype.apply=function(t,e){var n=this;return Object(r.uc)(function(){if(2!==t.length||t[0]!==t[1])throw new _("Identity matrix initializer can only be used for 2D square matrices.");return Object(r.yb)(n.gain,Object(r.S)(t[0]))})},e.prototype.getConfig=function(){return{gain:this.gain.get()}},e.className="Identity",e}(Ct);r.Tb.registerClass(jt);var Lt=function(t){function e(e){var n=t.call(this)||this;if(e.scale<0)throw new _("scale must be a positive float. Got: "+e.scale);return n.scale=null==e.scale?1:e.scale,n.mode=e.mode,function(t){D(Pt,"FanMode",t)}(n.mode),n.distribution=e.distribution,function(t){D(Mt,"Distribution",t)}(n.distribution),n.seed=e.seed,n}return a(e,t),e.prototype.apply=function(t,e){var n=function(t,e){var n,r;if(void 0===e&&(e="channelsLast"),X(e),2===t.length)n=t[0],r=t[1];else if(-1!==[3,4,5].indexOf(t.length))if("channelsFirst"===e){var i=st(t,2);n=t[1]*i,r=t[0]*i}else"channelsLast"===e&&(i=st(t,0,t.length-2),n=t[t.length-2]*i,r=t[t.length-1]*i);else{var a=st(t);n=Math.sqrt(a),r=Math.sqrt(a)}return[n,r]}(t),i=n[0],a=n[1],o=this.scale;if("fanIn"===this.mode?o/=Math.max(1,i):"fanOut"===this.mode?o/=Math.max(1,a):o/=Math.max(1,(i+a)/2),"normal"===this.distribution){var s=Math.sqrt(o);if("float32"!==(e=e||"float32")&&"int32"!==e)throw new x(this.getClassName()+" does not support dType "+e+".");return Object(r.zc)(t,0,s,e,this.seed)}var u=Math.sqrt(3*o);return Object(r.Jb)(t,-u,u,e)},e.prototype.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},e.className="VarianceScaling",e}(Ct);r.Tb.registerClass(Lt);var Ft=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==e?null:e.seed})||this}return a(e,t),e.prototype.getClassName=function(){return Lt.className},e}(Lt),zt=function(t){function e(e){return t.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==e?null:e.seed})||this}return a(e,t),e.prototype.getClassName=function(){return Lt.className},e}(Lt),Bt=function(t){function e(e){return t.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return a(e,t),e.prototype.getClassName=function(){return Lt.className},e}(Lt),Ut=function(t){function e(e){return t.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==e?null:e.seed})||this}return a(e,t),e.prototype.getClassName=function(){return Lt.className},e}(Lt),Vt=function(t){function e(e){var n=t.call(this)||this;if(n.DEFAULT_GAIN=1,n.gain=null==e.gain?n.DEFAULT_GAIN:e.gain,n.seed=e.seed,null!=n.seed)throw new x("Random seed is not implemented for Orthogonal Initializer yet.");return n}return a(e,t),e.prototype.apply=function(t,e){var n=this;return Object(r.uc)(function(){if(2!==t.length)throw new x("The Orthogonal Initializer does not support non-2D shapes yet.");t[0]*t[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+t[0]*t[1]+") elements: Slowness may result.");var e=_t(t[0]>t[1]?[t[1],t[0]]:t,0,1,"float32"),i=r.gb.gramSchmidt(e);return t[0]>t[1]&&(i=i.transpose()),Object(r.yb)(v(n.gain),i)})},e.prototype.getConfig=function(){return{gain:this.gain,seed:this.seed}},e.className="Orthogonal",e}(Ct);r.Tb.registerClass(Vt);var qt={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",identity:"Identity",leCunNormal:"LeCunNormal",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function Wt(t,e){return void 0===e&&(e={}),I(t,r.Tb.SerializationMap.getMap().classNameMap,e,"initializer")}function Gt(t){return O(t)}function Ht(t){if("string"==typeof t){var e=t in qt?qt[t]:t;return"GlorotUniform"===e?new Ft:"GlorotNormal"===e?new zt:"HeNormal"===e?new Bt:"LeCunNormal"===e?new Ut:Wt({className:e,config:{}})}return t instanceof Ct?t:Wt(t)}Object.freeze({zeros:function(){return new Ot},ones:function(){return new It},constant:function(t){return new Nt(t)},randomUniform:function(t){return new At(t)},randomNormal:function(t){return new Rt(t)},truncatedNormal:function(t){return new Dt(t)},identity:function(t){return new jt(t)},varianceScaling:function(t){return new Lt(t)},glorotUniform:function(t){return new Ft(t)},glorotNormal:function(t){return new zt(t)},heNormal:function(t){return new Bt(t)},leCunNormal:function(t){return new Ut(t)},orthogonal:function(t){return new Vt(t)}});function $t(t){return Array.isArray(t)&&Array.isArray(t[0])}function Kt(t){return 0===t.length?[]:Array.isArray(t[0])?t:[t]}function Xt(t){var e;if(Array.isArray(t)){if(1!==t.length)throw new _("Expected Tensor length to be 1; got "+t.length);e=t[0]}else e=t;return e}function Yt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(1===t.length)return(t=t)[0];throw new _("Expected exactly 1 Shape; got "+t.length)}return t}function Jt(t){for(var e=0,n=0,r=t;n<r.length;n++){var i=r[n];0===i.shape.length?e+=1:e+=i.shape.reduce(function(t,e){return t*e})}return e}var Zt="Variable",Qt=function(){function t(t,e,n,i,a){void 0===e&&(e="float32"),void 0===n&&(n=Zt),void 0===i&&(i=!0),void 0===a&&(a=null),this.dtype=null==e?"float32":e,this.shape=t.shape,this.id=h(),n=null==n?Zt:n,this.originalName=nt(n),this.name=rt(this.originalName),this.trainable=i,this.constraint=a,this.val=Object(r.Cc)(t,this.trainable,this.name,this.dtype)}return t.prototype.read=function(){return this.assertNotDisposed(),this.val},t.prototype.write=function(t){return this.assertNotDisposed(),function(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}(this.val,t),this.val.id!==t.id&&(this.val.assign(t),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this},t.prototype.dispose=function(){this.assertNotDisposed(),this.val.dispose()},t.prototype.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},t}();function te(t){return t.map(function(t){return t.read()})}function ee(t){t.map(function(t){t[0].write(t[1])})}var ne=function(t){this.dtype=t.dtype,this.shape=t.shape,null!=t.shape?this.ndim=t.shape.length:this.ndim=t.ndim,this.maxNDim=t.maxNDim,this.minNDim=t.minNDim,this.axes=t.axes||{}},re=function(t,e,n,r,i,a,o){this.dtype=t,this.shape=e,this.sourceLayer=n,this.inputs=r,this.callArgs=i,this.outputTensorIndex=o,this.id=h(),null!=a&&(this.originalName=nt(a),this.name=rt(this.originalName)),this.rank=e.length},ie=0,ae=function(){function t(t,e){this.callArgs=e,this.id=ie++,this.outboundLayer=t.outboundLayer,this.inboundLayers=t.inboundLayers,this.nodeIndices=t.nodeIndices,this.tensorIndices=t.tensorIndices,this.inputTensors=t.inputTensors,this.outputTensors=t.outputTensors,this.inputMasks=t.inputMasks,this.outputMasks=t.outputMasks,this.inputShapes=t.inputShapes,this.outputShapes=t.outputShapes;for(var n=0,r=t.inboundLayers;n<r.length;n++){var i=r[n];null!=i&&i.outboundNodes.push(this)}t.outboundLayer.inboundNodes.push(this)}return t.prototype.getConfig=function(){for(var t=[],e=0,n=this.inboundLayers;e<n.length;e++){var r=n[e];null!=r?t.push(r.name):t.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},t}(),oe=0,se=function(t){function e(e){var n=t.call(this)||this;n._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=oe++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=e.name;if(!r){var i=n.getClassName();r=M(i)+"_"+d(i)}if(n.name=r,n.trainable=null==e.trainable||e.trainable,n.updatable=null==e.updatable||e.updatable,null!=e.inputShape||null!=e.batchInputShape){var a=void 0;if(null!=e.batchInputShape)a=e.batchInputShape;else if(null!=e.inputShape){var o=null;null!=e.batchSize&&(o=e.batchSize),a=[o].concat(e.inputShape)}n.batchInputShape=a;var s=e.dtype;null==s&&(s=e.inputDType),null==s&&(s="float32"),n.dtype=s}return null!=e.weights?n.initialWeights=e.weights:n.initialWeights=null,n._refCount=null,n}return a(e,t),e.nodeKey=function(t,e){return t.name+"_ib-"+e.toString()},e.prototype.getNodeAtIndex=function(t,e){if(0===this.inboundNodes.length)throw new b("The layer has never been called and thus has no defined "+e+".");if(this.inboundNodes.length<=t)throw new _("Asked to get "+e+" at node "+t+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[t]},e.prototype.getInputAt=function(t){return T(this.getNodeAtIndex(t,"input").inputTensors)},e.prototype.getOutputAt=function(t){return T(this.getNodeAtIndex(t,"output").outputTensors)},Object.defineProperty(e.prototype,"input",{get:function(){if(this.inboundNodes.length>1)throw new y("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new y("Layer "+this.name+" is not connected, no input to return.");return T(this.getNodeAtIndex(0,"input").inputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){if(0===this.inboundNodes.length)throw new y("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new y("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return T(this.getNodeAtIndex(0,"output").outputTensors)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this._losses},enumerable:!0,configurable:!0}),e.prototype.calculateLosses=function(){return this.losses.map(function(t){return t()})},Object.defineProperty(e.prototype,"updates",{get:function(){return this._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"built",{get:function(){return this._built},set:function(t){this._built=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable?this._trainableWeights:[]},set:function(t){this._trainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this._nonTrainableWeights:this._trainableWeights.concat(this._nonTrainableWeights)},set:function(t){this._nonTrainableWeights=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateful",{get:function(){return this._stateful},enumerable:!0,configurable:!0}),e.prototype.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},e.prototype.assertInputCompatibility=function(t){if(t=P(t),null!=this.inputSpec&&0!==this.inputSpec.length){var e=P(this.inputSpec);if(t.length!==e.length)throw new _("Layer "+this.name+" expects "+e.length+" inputs, but it received "+t.length+" input tensors. Input received: "+t);for(var n=0;n<t.length;n++){var r=t[n],i=e[n];if(null!=i){var a=r.rank;if(null!=i.ndim&&a!==i.ndim)throw new _("Input "+n+" is incompatible with layer "+this.name+": expected ndim="+i.ndim+", found ndim="+a);if(null!=i.maxNDim&&a>i.maxNDim)throw new _("Input "+n+" is incompatible with layer "+this.name+": expected max_ndim="+i.maxNDim+", found ndim="+a);if(null!=i.minNDim&&a<i.minNDim)throw new _("Input "+n+" is incompatible with layer "+this.name+": expected min_ndim="+i.minNDim+", found ndim="+a+".");if(null!=i.dtype&&r.dtype!==i.dtype)throw new _("Input "+n+" is incompatible with layer "+this.name+" : expected dtype="+i.dtype+", found dtype="+r.dtype+".");if(i.axes){var o=r.shape;for(var s in i.axes){var u=Number(s),l=i.axes[s],c=u>=0?o[u]:o[o.length+u];if(null!=l&&-1===[l,null].indexOf(c))throw new _("Input "+n+" is incompatible with layer "+this.name+": expected axis "+u+" of input shape to have value "+l+" but got shape "+o+".")}}if(null!=i.shape)for(var f=0;f<i.shape.length;++f){var h=i.shape[f],p=r.shape[f];if(null!=h&&null!=p&&h!==p)throw new _("Input "+n+" is incompatible with layer "+this.name+": expected shape="+i.shape+", found shape=${xShape}.")}}}}},e.prototype.call=function(t,e){return t},e.prototype.invokeCallHook=function(t,e){null!=this._callHook&&this._callHook(t,e)},e.prototype.setCallHook=function(t){this._callHook=t},e.prototype.clearCallHook=function(){this._callHook=null},e.prototype.apply=function(t,e){var n=this;e=e||{},this.assertNotDisposed();for(var r=P(t),i=!0,a=0,o=r;a<o.length;a++)if(!(o[a]instanceof re)){i=!1;break}for(var s=!0,u=0,l=r;u<l.length;u++)if(l[u]instanceof re){s=!1;break}if(i===s)throw new _("Arguments to apply() must be all SymbolicTensors or all Tensors");return et(this.name,function(){if(!n.built){n.assertInputCompatibility(t);for(var i=[],a=0,o=P(t);a<o.length;a++){var u=o[a];i.push(u.shape)}n.build(T(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&s&&(n._refCount=1)}if(n.assertInputCompatibility(t),s){for(var l=[],c=0,f=P(m=n.call(t,e));c<f.length;c++){var h=f[c];-1!==r.indexOf(h)&&(h=h.clone()),l.push(h)}if(m=T(l),null!=n.activityRegularizer)throw new x("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m}var p=function(t){for(var e=[],n=0,r=t=P(t);n<r.length;n++){var i=r[n];e.push(i.shape)}return T(e)}(t),d=n.computeOutputShape(p),m=void 0,g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(t)?p[0]:p),m=null!=d&&d.length>0&&Array.isArray(d[0])?d.map(function(r,i){return new re(g,r,n,P(t),e,n.name,i)}):new re(g,d,n,P(t),e,n.name),n.addInboundNode(t,m,null,null,p,d,e),n._refCount++,null!=n.activityRegularizer)throw new x("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return m})},e.prototype.warnOnIncompatibleInputShape=function(t){if(null!=this.batchInputShape)if(t.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(t)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var e=!1;this.batchInputShape.forEach(function(n,r){null!=n&&null!=t[r]&&t[r]!==n&&(e=!0)}),e&&console.warn("The shape of the input tensor ("+JSON.stringify(t)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},Object.defineProperty(e.prototype,"outputShape",{get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new y("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var t=[],e=0,n=this.inboundNodes;e<n.length;e++){var r=n[e],i=JSON.stringify(r.outputShapes);-1===t.indexOf(i)&&t.push(i)}if(1===t.length){var a=this.inboundNodes[0].outputShapes;return Array.isArray(a)&&Array.isArray(a[0])&&1===a.length?a[0]:a}throw new y("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "outut shape" is ill-defined for the layer.')},enumerable:!0,configurable:!0}),e.prototype.countParams=function(){if(!this.built)throw new b("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return Jt(this.weights)},e.prototype.build=function(t){this.built=!0},e.prototype.getWeights=function(t){return void 0===t&&(t=!1),te(t?this.trainableWeights:this.weights)},e.prototype.setWeights=function(t){var e=this;Object(r.uc)(function(){var n=e.weights;if(n.length!==t.length)throw new _('You called setWeights(weights) on layer "'+e.name+'" with a weight list of length '+t.length+", but the layer was expecting "+n.length+" weights. Provided weights: "+t+"...");if(0!==n.length){for(var i=[],a=te(n),o=0;o<a.length;++o){var s=a[o],u=n[o],l=t[o];if(!r.Bc.arraysEqual(s.shape,l.shape))throw new _("Layer weight shape "+s.shape+" not compatible with provided weight shape "+l.shape);i.push([u,l])}ee(i)}})},e.prototype.addWeight=function(t,e,n,r,i,a,o){if(-1!==this._addedWeightNames.indexOf(t))throw new _("Duplicate weight name "+t+" for layer "+this.name);this._addedWeightNames.push(t),null==n&&(n="float32");var s=new Qt(r.apply(e,n),n,t,a,o);return null!=i&&this.addLoss(function(){return i.apply(s.read())}),null==a&&(a=!0),a?this._trainableWeights.push(s):this._nonTrainableWeights.push(s),s},e.prototype.addLoss=function(t){var e;null==t||Array.isArray(t)&&0===t.length||(t=P(t),void 0!==this._losses&&null!==this._losses&&(e=this.losses).push.apply(e,t))},e.prototype.computeOutputShape=function(t){return t},e.prototype.computeMask=function(t,e){var n=this;if(!this.supportsMasking){if(null!=e){if(!Array.isArray(e))throw new TypeError("Layer "+this.name+" does not support masking,but was passed an inputMask.");e.forEach(function(t){if(null!=t)throw new TypeError("Layer "+n.name+" does not support masking,but was passed an inputMask.")})}return null}return e},e.prototype.addInboundNode=function(t,e,n,r,i,a,o){void 0===o&&(o=null);var s=P(t);e=P(e),n=P(n),r=P(r),i=Kt(i),a=Kt(a);for(var u=[],l=[],c=[],f=0,h=s;f<h.length;f++){var p=h[f];u.push(p.sourceLayer),l.push(p.nodeIndex),c.push(p.tensorIndex)}new ae({outboundLayer:this,inboundLayers:u,nodeIndices:l,tensorIndices:c,inputTensors:s,outputTensors:e,inputMasks:n,outputMasks:r,inputShapes:i,outputShapes:a},o);for(var d=0;d<e.length;d++)e[d].sourceLayer=this,e[d].nodeIndex=this.inboundNodes.length-1,e[d].tensorIndex=d},e.prototype.getConfig=function(){var t={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(t.batchInputShape=this.batchInputShape),null!=this.dtype&&(t.dtype=this.dtype),t},e.prototype.disposeWeights=function(){return this.weights.forEach(function(t){return t.dispose()}),this.weights.length},e.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Layer '"+this.name+"' is already disposed.")},e.prototype.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var t=0;return 0==--this._refCount&&(t=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:t}},e}(r.Tb.Serializable);var ue=function(t){function e(e){var n=t.call(this,{dtype:e.dtype,name:null!=e.name?e.name:d("input").toString()})||this;if(null==e.batchSize&&(e.batchSize=null),null==e.sparse&&(e.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=e.sparse,null!=e.inputShape&&null!=e.batchInputShape)throw new _("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=e.batchInputShape;if(null==r){if(null==e.inputShape)throw new _("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[e.batchSize].concat(e.inputShape)}else if(null!=e.batchSize)throw new _("Cannot specify batchSize if batchInputShape isspecified when creating an InputLayer.");var i=e.dtype||"float32";n.batchInputShape=r,n.dtype=i,n.inputSpec=[{shape:r}];var a=new re(n.dtype,n.batchInputShape,n,[],{},n.name);return a.nodeIndex=0,a.tensorIndex=0,new ae({outboundLayer:n,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[a],outputTensors:[a],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}return a(e,t),e.prototype.apply=function(t,e){throw new _("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},e.prototype.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},e.prototype.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},e.className="InputLayer",e}(se);function le(t){if(null==t.batchShape&&null==t.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=t.batchShape&&null!=t.shape)throw new _("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var e=t.batchShape;null!=t.shape&&null==e&&(e=[null].concat(t.shape));var n=t.dtype;return null==n&&(n="float32"),new ue({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}function ce(t){return s(this,void 0,void 0,function(){var e,n,i,a,o,s,l,c;return u(this,function(u){switch(u.label){case 0:if(null==t)return[2];for(a in e=[],n=[],i=[],t)"number"!=typeof(o=t[a])&&(s=o,e.push(s.data()),n.push(a),i.push(s));return[4,Promise.all(e)];case 1:for(l=u.sent(),c=0;c<l.length;++c)t[n[c]]=l[c][0];return Object(r.K)(i),[2]}})})}r.Tb.registerClass(ue);var fe=function(){function t(){this.validationData=null}return t.prototype.setParams=function(t){this.params=t},t.prototype.onEpochBegin=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(t){return[2]})})},t.prototype.onEpochEnd=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(t){return[2]})})},t.prototype.onBatchBegin=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(t){return[2]})})},t.prototype.onBatchEnd=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(t){return[2]})})},t.prototype.onTrainBegin=function(t){return s(this,void 0,void 0,function(){return u(this,function(t){return[2]})})},t.prototype.onTrainEnd=function(t){return s(this,void 0,void 0,function(){return u(this,function(t){return[2]})})},t.prototype.setModel=function(t){},t}(),he=function(){function t(t,e){void 0===e&&(e=10),null==t&&(t=[]),this.callbacks=t,this.queueLength=e}return t.prototype.append=function(t){this.callbacks.push(t)},t.prototype.setParams=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setParams(t)},t.prototype.setModel=function(t){for(var e=0,n=this.callbacks;e<n.length;e++)n[e].setModel(t)},t.prototype.onEpochBegin=function(t,e){return s(this,void 0,void 0,function(){var n,r;return u(this,function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onEpochBegin(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onEpochEnd=function(t,e){return s(this,void 0,void 0,function(){var n,r;return u(this,function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onEpochEnd(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onBatchBegin=function(t,e){return s(this,void 0,void 0,function(){var n,r;return u(this,function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onBatchBegin(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onBatchEnd=function(t,e){return s(this,void 0,void 0,function(){var n,r;return u(this,function(i){switch(i.label){case 0:null==e&&(e={}),n=0,r=this.callbacks,i.label=1;case 1:return n<r.length?[4,r[n].onBatchEnd(t,e)]:[3,4];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t.prototype.onTrainBegin=function(t){return s(this,void 0,void 0,function(){var e,n;return u(this,function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainBegin(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t.prototype.onTrainEnd=function(t){return s(this,void 0,void 0,function(){var e,n;return u(this,function(r){switch(r.label){case 0:null==t&&(t={}),e=0,n=this.callbacks,r.label=1;case 1:return e<n.length?[4,n[e].onTrainEnd(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},t}(),pe=function(){function t(t){this.yieldEvery=t,this.batchCount=0,this.batchDurationsMillis=[],this.autoYieldEveryBatches=null,this.batchStartMillis=r.Bc.now()}return t.prototype.resolveOneTensorInLogs=function(t){return s(this,void 0,void 0,function(){var e,n,r,i,a;return u(this,function(o){switch(o.label){case 0:for(n in e=[],t)e.push(n);r=0,o.label=1;case 1:return r<e.length?(i=e[r],"number"==typeof(a=t[i])?[3,3]:[4,a.data()]):[3,4];case 2:return o.sent(),[3,4];case 3:return r++,[3,1];case 4:return[2]}})})},t.prototype.maybeYieldOnBatch=function(e){return s(this,void 0,void 0,function(){var n,i;return u(this,function(a){switch(a.label){case 0:return"auto"!==this.yieldEvery?[3,7]:(this.batchCount++,null!=this.autoYieldEveryBatches?[3,3]:[4,this.resolveOneTensorInLogs(e)]);case 1:return a.sent(),n=r.Bc.now(),[4,Object(r.Bb)()];case 2:return a.sent(),this.batchCount>t.SKIP_FIRST_BATCHES&&(this.batchDurationsMillis.push(n-this.batchStartMillis),this.batchDurationsMillis.length>=t.DECISION_BATCH_COUNT&&(i=this.batchDurationsMillis.reduce(function(t,e){return t+e})/this.batchDurationsMillis.length,this.autoYieldEveryBatches=Math.round(t.THRESHOLD_MILLIS/i),this.autoYieldEveryBatches<1&&(this.autoYieldEveryBatches=1))),this.batchStartMillis=r.Bc.now(),this.lastYieldBatchCount=this.batchCount,[3,6];case 3:return this.batchCount-this.lastYieldBatchCount>=this.autoYieldEveryBatches?[4,Object(r.Bb)()]:[3,6];case 4:return a.sent(),[4,this.resolveOneTensorInLogs(e)];case 5:a.sent(),this.lastYieldBatchCount=this.batchCount,a.label=6;case 6:return[3,9];case 7:return"batch"!==this.yieldEvery?[3,9]:[4,Object(r.Bb)()];case 8:a.sent(),a.label=9;case 9:return[2]}})})},t.prototype.maybeYieldOnEpoch=function(){return s(this,void 0,void 0,function(){return u(this,function(t){switch(t.label){case 0:return"epoch"!==this.yieldEvery?[3,2]:[4,Object(r.Bb)()];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.SKIP_FIRST_BATCHES=1,t.DECISION_BATCH_COUNT=2,t.THRESHOLD_MILLIS=16,t}(),de=function(t){function e(e){var n=t.call(this)||this;return n.yieldEvery=e||"auto",n}return a(e,t),e.prototype.onTrainBegin=function(t){return s(this,void 0,void 0,function(){return u(this,function(t){return this.autoYielder=new pe(this.yieldEvery),[2]})})},e.prototype.onEpochBegin=function(t){return s(this,void 0,void 0,function(){return u(this,function(t){return this.seen=0,this.totals={},[2]})})},e.prototype.onBatchEnd=function(t,e){return s(this,void 0,void 0,function(){var t,n,i,a,o=this;return u(this,function(s){switch(s.label){case 0:return[4,this.autoYielder.maybeYieldOnBatch(e)];case 1:for(a in s.sent(),null==e&&(e={}),t=null==e.size?0:e.size,this.seen+=t,n=function(n){var a=e[n];if("number"==typeof a)i.totals.hasOwnProperty(n)||(i.totals[n]=0),i.totals[n]=i.totals[n]+a*t;else{var s=void 0;n in i.totals?s=i.totals[n]:i.totals[n]=v(0),i.totals[n]=Object(r.uc)(function(){return Object(r.g)(o.totals[n],Object(r.yb)(a,v(t)))}),null!=s&&s.dispose()}},i=this,e)n(a);return[2]}})})},e.prototype.onEpochEnd=function(t,e){return s(this,void 0,void 0,function(){var t,n,i,a,o,s=this;return u(this,function(u){switch(u.label){case 0:return[4,this.autoYielder.maybeYieldOnEpoch()];case 1:if(u.sent(),null!=e)for(t=function(t){if(null==n.totals[t])return"continue";"number"==typeof n.totals[t]?e[t]=n.totals[t]/n.seen:Object(r.uc)(function(){e[t]=Object(r.yb)(Object(r.L)(v(1),v(s.seen)),s.totals[t]),s.totals[t].dispose(),Object(r.cb)(e[t])})},n=this,i=0,a=this.params.metrics;i<a.length;i++)o=a[i],t(o);return[2]}})})},e}(fe),me=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.onTrainBegin=function(t){return s(this,void 0,void 0,function(){return u(this,function(t){return this.epoch=[],this.history={},[2]})})},e.prototype.onEpochEnd=function(t,e){return s(this,void 0,void 0,function(){var n;return u(this,function(r){for(n in null==e&&(e={}),this.epoch.push(t),e)null==this.history[n]&&(this.history[n]=[]),this.history[n].push(e[n]);return[2]})})},e.prototype.syncData=function(){return s(this,void 0,void 0,function(){var t,e,n,r,i,a,o,s,l;return u(this,function(u){switch(u.label){case 0:for(r in t=[],e=[],n=[],this.history)for(i=this.history[r],a=0;a<i.length;++a)"number"!=typeof i[a]&&(o=i[a],t.push(o.data()),e.push(r),n.push(a));return[4,Promise.all(t)];case 1:for(s=u.sent(),l=0;l<s.length;++l)this.history[e[l]][n[l]].dispose(),this.history[e[l]][n[l]]=s[l][0];return[2]}})})},e}(fe),ge=function(t){function e(e){var n=t.call(this)||this;return n.trainBegin=e.onTrainBegin,n.trainEnd=e.onTrainEnd,n.epochBegin=e.onEpochBegin,n.epochEnd=e.onEpochEnd,n.batchBegin=e.onBatchBegin,n.batchEnd=e.onBatchEnd,n}return a(e,t),e.prototype.onEpochBegin=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return null==this.epochBegin?[3,3]:[4,ce(e)];case 1:return n.sent(),[4,this.epochBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onEpochEnd=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return null==this.epochEnd?[3,3]:[4,ce(e)];case 1:return n.sent(),[4,this.epochEnd(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onBatchBegin=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return null==this.batchBegin?[3,3]:[4,ce(e)];case 1:return n.sent(),[4,this.batchBegin(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onBatchEnd=function(t,e){return s(this,void 0,void 0,function(){return u(this,function(n){switch(n.label){case 0:return null==this.batchEnd?[3,3]:[4,ce(e)];case 1:return n.sent(),[4,this.batchEnd(t,e)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.onTrainBegin=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return null==this.trainBegin?[3,3]:[4,ce(t)];case 1:return e.sent(),[4,this.trainBegin(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e.prototype.onTrainEnd=function(t){return s(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return null==this.trainEnd?[3,3]:[4,ce(t)];case 1:return e.sent(),[4,this.trainEnd(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},e}(fe);var ve=function(){function t(){}return t.registerCallbackConstructor=function(e,n){r.Bc.assert(e>=0&&Number.isInteger(e),"Verbosity level is expected to be an integer >= 0, but got "+e),t.checkForDuplicate(n),null==t.constructors[e]&&(t.constructors[e]=[]),t.constructors[e].push(n)},t.checkForDuplicate=function(e){for(var n in t.constructors)t.constructors[+n].forEach(function(t){if(t===e)throw new _("Duplicate callback constructor.")})},t.clear=function(){t.constructors={}},t.createCallbacks=function(e){var n=[];for(var r in t.constructors){var i=+r;e>=i&&n.push.apply(n,t.constructors[i])}return n.map(function(t){return new t})},t.constructors={},t}();function ye(t,e){return Object(r.uc)(function(){var n=Object(r.pc)(St(t),e,!0),i=Object(r.yb)(Object(r.Qb)(c()),Object(r.Fb)(t)),a=Object(r.hc)(Object(r.rb)(n,i));return Object(r.L)(t,a)})}function be(t,e){return Object(r.uc)(function(){return Object(r.sb)(St(Object(r.oc)(e,t)),-1)})}function _e(t,e){return Object(r.uc)(function(){return Object(r.sb)(Object(r.d)(Object(r.oc)(e,t)),-1)})}function xe(t,e){return Object(r.uc)(function(){var n=Object(r.oc)(t,e),i=Object(r.y)(Object(r.d)(t),c(),Number.MAX_VALUE),a=Object(r.d)(Object(r.L)(n,i));return Object(r.yb)(v(100),Object(r.sb)(a,-1))})}function we(t,e){return Object(r.uc)(function(){var n=v(1),i=Object(r.y)(e,c(),Number.MAX_VALUE),a=Object(r.jb)(Object(r.g)(n,i)),o=Object(r.y)(t,c(),Number.MAX_VALUE),s=Object(r.jb)(Object(r.g)(n,o));return Object(r.sb)(St(Object(r.oc)(a,s)),-1)})}function Se(t,e){return Object(r.uc)(function(){var n=v(0),i=v(1),a=Object(r.rb)(n,Object(r.oc)(i,Object(r.yb)(t,e)));return Object(r.sb)(St(a),-1)})}function Ee(t,e){return Object(r.uc)(function(){var n=v(0),i=v(1),a=Object(r.rb)(n,Object(r.oc)(i,Object(r.yb)(t,e)));return Object(r.sb)(a,-1)})}function ke(t,e){return Object(r.uc)(function(){var n=v(0),i=v(1),a=Object(r.pc)(Object(r.yb)(t,e),-1),o=Object(r.pb)(Object(r.yb)(Object(r.oc)(i,t),e),-1);return Object(r.rb)(n,Object(r.g)(i,Object(r.oc)(o,a)))})}function Te(t,e){return Object(r.uc)(function(){var n=v(Math.log(2)),i=Object(r.oc)(e,t),a=Object(r.oc)(Object(r.g)(i,Object(r.ec)(Object(r.yb)(v(-2),i))),n);return Object(r.sb)(a,-1)})}function Pe(t,e,n){return void 0===n&&(n=!1),Object(r.uc)(function(){if(n)e=Object(r.dc)(e);else{var i=Object(r.pc)(e,e.shape.length-1,!0);e=Object(r.L)(e,i)}return e=Object(r.y)(e,c(),1-c()),Object(r.Ab)(Object(r.pc)(Object(r.yb)(t.toFloat(),Object(r.jb)(e)),e.shape.length-1))})}function Me(t,e,n){return void 0===n&&(n=!1),Object(r.uc)(function(){var i=Object(r.U)(function(t){var e=[st(t.shape)];return t.reshape(e)}(t)).toInt(),a=e.shape;return Pe(Object(r.Db)(i,a[a.length-1]).reshape(a),e,n)})}function Ce(t,e){return Object(r.uc)(function(){var n;return n=Object(r.y)(e,c(),1-c()),n=Object(r.jb)(Object(r.L)(n,Object(r.oc)(Object(r.Fb)(n),n))),Object(r.sb)(function(t,e){return Object(r.uc)(function(){var n=Object(r.rb)(e,Object(r.Hc)(e)),i=Object(r.yb)(e,t),a=Object(r.jb)(Object(r.g)(v(1),Object(r.P)(Object(r.Ab)(Object(r.d)(e)))));return Object(r.g)(Object(r.oc)(n,i),a)})}(t,n),-1)})}function Oe(t,e){return Object(r.uc)(function(){var n=Object(r.y)(t,c(),1),i=Object(r.y)(e,c(),1);return Object(r.pc)(Object(r.yb)(t,Object(r.jb)(Object(r.L)(n,i))),-1)})}function Ie(t,e){return Object(r.uc)(function(){var n=Object(r.jb)(Object(r.g)(v(c()),e));return Object(r.sb)(Object(r.oc)(e,Object(r.yb)(t,n)),-1)})}function Ne(t,e){return Object(r.uc)(function(){var n=ye(t,-1),i=ye(e,-1),a=Object(r.yb)(n,i);return Object(r.Ab)(Object(r.pc)(a,-1))})}function Ae(t){var e={meanSquaredError:be,meanAbsoluteError:_e,meanAbsolutePercentageError:xe,meanSquaredLogarithmicError:we,squaredHinge:Se,hinge:Ee,categoricalHinge:ke,logcosh:Te,categoricalCrossentropy:Pe,sparseCategoricalCrossentropy:Me,binaryCrossentropy:Ce,kullbackLeiblerDivergence:Oe,poisson:Ie,cosineProximity:Ne};if("string"==typeof t){if(t in e)return e[t];var n="Unknown loss "+t;throw t.toLowerCase().includes("softmaxcrossentropy")&&(n="Unknown loss "+t+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new _(n)}return t}function Re(t,e){return Object(r.uc)(function(){var n=Object(r.yb)(v(.5),Object(r.Fb)(e)),i=ht(Object(r.Y)(e,n),t.dtype);return Object(r.sb)(Object(r.N)(t,i),-1)})}function De(t,e){return Object(r.uc)(function(){return ht(Object(r.N)(Object(r.k)(t,-1),Object(r.k)(e,-1)),"float32")})}function je(t,e){return Object(r.uc)(function(){var n=v(1);return Object(r.lb)(t.equal(n),e.equal(n)).sum().cast("float32")})}function Le(t,e){return Object(r.uc)(function(){var n=v(0),i=je(t,e),a=function(t,e){return Object(r.uc)(function(){var n=v(1),i=v(0);return Object(r.lb)(t.equal(i),e.equal(n)).sum().cast("float32")})}(t,e),o=i.add(a);return Object(r.Ec)(Object(r.Y)(o,n),i.div(o),n).cast("float32")})}function Fe(t,e){return Object(r.uc)(function(){var n=v(0),i=je(t,e),a=function(t,e){return Object(r.uc)(function(){var n=v(1),i=v(0);return Object(r.lb)(t.equal(n),e.equal(i)).sum().cast("float32")})}(t,e),o=i.add(a);return Object(r.Ec)(Object(r.Y)(o,n),i.div(o),n).cast("float32")})}function ze(t,e){return Ce(t,e)}function Be(t,e){throw new x}var Ue=be,Ve=be,qe=_e,We=_e,Ge=xe,He=xe,$e=Pe,Ke=Ne,Xe=Me;function Ye(t,e,n,r){void 0===r&&(r=console.log);var i,a=function(t){var e=!0,n=[],r=[];for(var i in t.nodesByDepth)n.push(t.nodesByDepth[i]);for(var a=0,o=n;a<o.length;a++){var s=o[a];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){e=!1;break}r.push.apply(r,s)}if(e)for(var u=0,l=t.layers;u<l.length;u++){for(var c=!1,f=0,h=l[u].inboundNodes;f<h.length;f++){var p=h[f];if(-1!==r.indexOf(p)){if(c){e=!1;break}c=!0}}if(!e)break}return e}(t),o=["Layer (type)","Output shape","Param #"];if(a?(e=e||65,n=n||[.45,.85,1]):(e=e||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map(function(t){return Math.floor(e*t)})),!a)for(var s in o.push("Receives inputs"),i=[],t.nodesByDepth)i.push.apply(i,t.nodesByDepth[s]);r("_".repeat(e)),Je(o,n,r),r("=".repeat(e));for(var u=t.layers,l=0;l<u.length;++l)a?Ze(u[l],n,r):Qe(u[l],n,i,r),r((l===u.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();var c=function(t){return null!=t.collectedTrainableWeights?Jt(t.collectedTrainableWeights):Jt(t.trainableWeights)}(t),f=Jt(t.nonTrainableWeights);r("Total params: "+(c+f)),r("Trainable params: "+c),r("Non-trainable params: "+f),r("_".repeat(e))}function Je(t,e,n){void 0===n&&(n=console.log);for(var r="",i=0;i<t.length;++i)i>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=t[i]).slice(0,e[i]),r+=" ".repeat(e[i]-r.length);n(r)}function Ze(t,e,n){var r;try{r=JSON.stringify(t.outputShape)}catch(t){r="multiple"}Je([t.name+" ("+t.getClassName()+")",r,t.countParams().toString()],e,n)}function Qe(t,e,n,r){var i;try{i=JSON.stringify(t.outputShape)}catch(t){i="multiple"}for(var a=[],o=0,s=t.inboundNodes;o<s.length;o++){var u=s[o];if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l){var c=u.inboundLayers[l].name,f=u.nodeIndices[l],h=u.tensorIndices[l];a.push(c+"["+f+"]["+h+"]")}}var p=t.name,d=t.getClassName(),m=0===a.length?"":a[0];for(Je([p+" ("+d+")",i,t.countParams().toString(),m],e,r),l=1;l<a.length;++l)Je(["","","",a[l]],e,r)}function tn(t,e){return void 0===e&&(e={}),I(t,r.Tb.SerializationMap.getMap().classNameMap,e,"layer")}function en(t,e,n){return("inboundNodes"===t||"outputLayers"===t||"inputLayers"===t)&&0===e&&"string"==typeof n}function nn(t,e,n,r){if(!n.startsWith("2."))throw new _("Unsupported Keras version in weights being loaded: "+n);return e}function rn(t,e,n){var i=function(t){switch(t){case"float32":return"float32";default:throw new _("Invalid dtype: "+t)}}(t);return r.c.make(e,{values:0===e.length?n:r.Bc.flatten(n)},i)}var an=function(t){function e(n){var r=t.call(this,{})||this;if(r.containerNodes=new Set,r.name=n.name,null==r.name){var i=r.getClassName().toLowerCase();r.name=d(i)}if(r.supportsMasking=!1,r.trainable=!0,r.updatable=!0,Array.isArray(n.inputs)?r.inputs=n.inputs.slice():r.inputs=[n.inputs],Array.isArray(n.outputs)?r.outputs=n.outputs.slice():r.outputs=[n.outputs],A(r.inputs).length!==r.inputs.length)throw new _("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map(function(t){return t.name}));A(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map(function(t){return t.name})),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[];for(var a=0,o=r.outputs;a<o.length;a++){var s=(O=o[a]).sourceLayer,u=O.nodeIndex,l=O.tensorIndex;r.outputLayers.push(s),r.outputLayersNodeIndices.push(u),r.outputLayersTensorIndices.push(l)}for(var c=0,f=r.inputs;c<f.length;c++)s=(O=f[c]).sourceLayer,u=O.nodeIndex,l=O.tensorIndex,E(0===u,"input layer has >1 nodes"),E(0===l,"input layer has >1 tensors"),r.inputLayers.push(s),r.inputLayersNodeIndices.push(u),r.inputLayersTensorIndices.push(l);r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var h=0;h<r.inputLayers.length;h++){if(!((s=r.inputLayers[h])instanceof ue))throw new TypeError("Input layers to a Model must be InputLayer objects. Received inputs: "+n.inputs+". Input "+h+" (0-based) originates from layer type "+s.getClassName()+".");r.inputNames.push(s.name),r.feedInputShapes.push(s.batchInputShape),r.feedInputNames.push(s.name)}for(var p=0,m=r.outputLayers;p<m.length;p++)s=m[p],r.outputNames.push(s.name);r.internalInputShapes=r.inputs.map(function(t){return t.shape}),r.internalOutputShapes=r.outputs.map(function(t){return t.shape});for(var g={},v={},y={},x={},w={},S=[],k=function t(n,i,a,o,s,u){null!=o&&null!=s&&null!=u||(o=n.sourceLayer,s=n.nodeIndex,u=n.tensorIndex);var l=o.inboundNodes[s];if(-1!==a.indexOf(l))throw new b("The tensor "+n.name+' at layer "'+o.name+'" is part of a cycle.');if(-1===i.indexOf(l)){r.containerNodes.add(e.nodeKey(o,s)),o.id in w||(w[o.id]=Object.keys(w).length),-1===a.indexOf(l)&&a.push(l);for(var c=l.inboundLayers.length,f=0;f<c;f++){t(l.inputTensors[f],i,a,l.inboundLayers[f],l.nodeIndices[f],l.tensorIndices[f])}for(i.push(l);a.indexOf(l)>=0;)a.splice(a.indexOf(l),1);S.push(l)}},T=[],P=[],M=0,C=r.outputs;M<C.length;M++){var O=C[M];k(O,T,P)}for(var I=0,R=S.slice().reverse();I<R.length;I++){v[(nt=R[I]).id]=nt,nt.id in g||(g[nt.id]=0);var D=g[nt.id],j=null==y[nt.outboundLayer.id]?0:y[nt.outboundLayer.id];for(D=Math.max(D,j),y[nt.outboundLayer.id]=D,x[nt.outboundLayer.id]=nt.outboundLayer,g[nt.id]=D,h=0;h<nt.inboundLayers.length;h++){var L=nt.inboundLayers[h],F=(u=nt.nodeIndices[h],L.inboundNodes[u]),z=null==g[F.id]?0:g[F.id];g[F.id]=Math.max(D+1,z),v[F.id]=F}}var B={};for(var U in g)(D=g[U])in B||(B[D]=[]),B[D].push(v[U]);var V={};for(var q in y)(D=y[q])in V||(V[D]=[]),V[D].push(x[q]);var W=Object.keys(V).map(function(t){return parseInt(t,10)}).sort(N);r.layers=[];for(var G=0,H=W;G<H.length;G++){var $=V[D=H[G]];$.sort(function(t,e){var n=w[t.id],r=w[e.id];return n<r?-1:n>r?1:0});for(var K=0,X=$;K<X.length;K++)s=X[K],r.layers.push(s)}r.layersByDepth=V,W=Object.keys(B).map(function(t){return parseInt(t,10)}).sort(N);for(var Y=r.inputs.slice(),J=[],Z=0,Q=W;Z<Q.length;Z++)for(var tt=0,et=B[D=Q[Z]];tt<et.length;tt++){var nt;if(null!=(s=(nt=et[tt]).outboundLayer)){for(var rt=0,it=nt.inputTensors;rt<it.length;rt++)if(O=it[rt],-1===Y.indexOf(O))throw new b("Graph disconnected: cannot obtain value for tensor "+O+' at layer "'+s.name+'". The following previous layers were accessed without issue: '+J);for(var at=0,ot=nt.outputTensors;at<ot.length;at++)O=ot[at],Y.push(O);J.push(s.name)}}r.nodesByDepth=B;for(var st=r.layers.map(function(t){return t.name}),ut=function(t){var e=st.filter(function(e){return e===t}).length;if(1!==e)throw new b('The name "'+t+'" is used '+e+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(st))},lt=0,ct=st;lt<ct.length;lt++)ut(ct[lt]);return r.outboundNodes=[],r.inboundNodes=[],new ae({outboundLayer:r,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map(function(t){return null}),outputMasks:r.outputs.map(function(t){return null}),inputShapes:r.inputs.map(function(t){return t.shape}),outputShapes:r.outputs.map(function(t){return t.shape})}),r.built=!0,r._refCount=1,r}return a(e,t),e.prototype.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Container '"+this.name+"' is already disposed.")},e.prototype.dispose=function(){this.assertNotDisposed();var t={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount)for(var e=0,n=this.layers;e<n.length;e++){var r=n[e];t.numDisposedVariables+=r.dispose().numDisposedVariables}return t.refCountAfterDispose=this._refCount,t},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(this._trainableWeights.length>0)throw new _("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t=t.concat(r.trainableWeights)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var i=[],a=0,o=this.layers;a<o.length;a++)r=o[a],i.push.apply(i,r.trainableWeights);return i.concat(t)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.loadWeights=function(t,e,n,i){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===i&&(i=!0),n?function(t,e,n){void 0===n&&(n=!0);for(var r={},i=0,a=0,o=e;a<o.length;a++)for(var s=0,u=o[a].weights;s<u.length;s++){var l=u[s];if(null!=r[l.originalName])throw new _("Duplicate weight name: "+l.originalName);r[l.originalName]=l,i++}var c=[];for(var f in t){if(null!=r[f])c.push([r[f],t[f]]);else if(n)throw new _("Provided weight data has no target variable: "+f);delete r[f]}if(n){var h=[];for(var p in r)h.push(p);if(h.length>0)throw new _(h.length+" of "+i+" weights are not set: "+h)}ee(c)}(t,this.layers,i):function(t,e,n){void 0===n&&(n=!1);for(var i=t.keras_version,a=(t.backend,e.map(function(t){return t.name})),o={},s=0,u=e;s<u.length;s++)null!=(b=u[s]).name&&(null==o[b.name]&&(o[b.name]=[]),o[b.name].push(b));for(var l=t.weights,c=[],f=0;f<a.length;++f){var h=a[f],p=l[h];null==p&&(p=[]);for(var d=[],m=0;m<p.length;++m){var g=p[m];d.push(new Qt(rn(g.dtype,g.shape,g.value)))}for(var v=0,y=o[h];v<y.length;v++){var b,x=(b=y[v]).weights;if((d=nn(0,d,i)).length!==x.length){if(!n)throw new _("Layer #"+f+' (named "'+b.name+'") expects '+x.length+" weight(s), but the saved weights have "+d.length+" element(s).");console.warn("Skipping loading of weights of layer "+b.name+" due to mismatch in number of weights: ("+d.length+" vs "+x.length+").")}for(var w=0;w<d.length;++w)!n||r.Bc.arraysEqual(x[w].shape,d[w].shape)?c.push([x[w],d[w].read()]):console.warn("Skipping loading of weights for layer "+b.name+" due to mismatch in shape ("+x[w].shape+" vs "+d[w].shape+")")}}ee(c)}(t,this.layers,e)},e.prototype.updatedConfig=function(){var t=this.getConfig();return{className:this.getClassName(),config:t,kerasVersion:"tfjs-layers 0.8.1",backend:"TensorFlow.js"}},e.prototype.toJSON=function(t,e){void 0===e&&(e=!0);var n=function t(e,n){if(null===e||void 0===e)return null;if("string"==typeof e)return M(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var r=[],i=e.length,a=0;a<i;++a){var o=e[a];en(n,a,o)?r.push(o):r.push(t(o,n))}return r}for(var s={},u=0,l=Object.keys(e);u<l.length;u++){var c=l[u],f=e[c];s[M(c)]="name"!==c&&"className"!==c||"string"!=typeof f?t(f,c):f}return s}(this.updatedConfig());return e?JSON.stringify(n):n},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var r;return t=P(t),r="mask"in e?P(e.mask):S(null,t.length),n.runInternalGraph(t,r)[0]})},e.prototype.computeMask=function(t,e){var n=this;return Object(r.uc)(function(){var r;return t=P(t),r=null==e?S(null,t.length):P(e),n.runInternalGraph(t,r)[1]})},e.prototype.computeOutputShape=function(t){var e=Kt(t);if(e.length!==this.inputLayers.length)throw new _("Invalid inputShape argument "+t+": model has "+this.inputLayers.length+" tensor inputs.");for(var n={},r=0;r<e.length;r++){var i=this.inputLayers[r],a=e[r];n[k=i.name+"_0_0"]=a}var o=Object.keys(this.nodesByDepth).map(function(t){return parseInt(t,10)}).sort(N);if(o.length>1)for(var s=0,u=o;s<u.length;s++)for(var l=u[s],c=0,f=this.nodesByDepth[l];c<f.length;c++){var h=f[c];if(i=h.outboundLayer,-1===this.inputLayers.map(function(t){return t.id}).indexOf(i.id)){for(var p=[],d=0;d<h.inboundLayers.length;d++){var m=h.inboundLayers[d],g=h.nodeIndices[d],v=h.tensorIndices[d],y=n[k=m.name+"_"+g+"_"+v];p.push(y)}var b=Kt(i.computeOutputShape(T(p))),x=i.inboundNodes.indexOf(h);for(d=0;d<b.length;d++)n[k=i.name+"_"+x+"_"+d]=b[d]}}var w=[],S=[];for(r=0;r<this.outputLayers.length;r++){i=this.outputLayers[r],x=this.outputLayersNodeIndices[r],v=this.outputLayersTensorIndices[r];var k=i.name+"_"+x+"_"+v;S.push(k)}for(r=0;r<S.length;r++){var P=S[r];E(P in n),w.push(n[P])}return T(w)},e.prototype.runInternalGraph=function(t,e){null==e&&(e=S(null,t.length));for(var n={},r=0;r<this.inputs.length;++r){var i=this.inputs[r],a=t[r],o=e[r];n[i.id]=[a,o]}for(var s=0,u=Object.keys(this.nodesByDepth).map(function(t){return parseInt(t,10)}).sort(N);s<u.length;s++)for(var l=u[s],c=0,f=this.nodesByDepth[l];c<f.length;c++){for(var h=f[c],p=h.outboundLayer,d=h.inputTensors,m=h.outputTensors,g=new Array,v=0,y=d;v<y.length;v++)(i=y[v]).id in n&&g.push(n[i.id]);if(g.length===d.length){var b={},_=void 0,w=void 0,k=void 0,T=void 0;if(null!=h.callArgs&&(b=h.callArgs),1===g.length){var M=g[0],C=M[0],O=M[1];null==b.mask&&(b.mask=O),k=P(p.call(C,b)),T=P(p.computeMask(C,O)),_=[C],w=[O]}else _=g.map(function(t){return t[0]}),w=g.map(function(t){return t[1]}),null==b.mask&&(b.mask=w),k=P(p.call(_,b)),T=P(p.computeMask(_,w));if(p.activityRegularizer)throw new x("Model invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(r=0;r<m.length;++r)i=m[r],a=k[r],o=T[r],n[i.id]=[a,o]}}for(var I=[],A=[],R=[],D=0,j=this.outputs;D<j.length;D++){E((i=j[D]).id in n,"Could not compute output "+i.name+" : "+i.id);var L=n[i.id],F=L[0];o=L[1],R.push(F.shape),I.push(F),A.push(o)}return[I,A,R]},e.prototype.buildNodeConversionMap=function(t){for(var n,r={},i=0,a=this.layers;i<a.length;i++){var o=a[i];n=o instanceof e?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=e.nodeKey(o,s);u in this.containerNodes&&(r[u]=n,n+=1)}}return r},e.prototype.getLayer=function(t,e){if(null!=e){if(this.layers.length<=e)throw new _("Was asked to retrieve layer at index "+e+", but model only has "+this.layers.length+" layer(s).");return this.layers[e]}if(null==t)throw new _("Provide either a layer name or layer index");for(var n=0,r=this.layers;n<r.length;n++){var i=r[n];if(i.name===t)return i}throw new _("No such layer: "+t)},e.prototype.calculateLosses=function(){var t=this;return Object(r.uc)(function(){for(var n=[],r=0,i=t.layers;r<i.length;r++)for(var a=i[r],o=0;o<a.inboundNodes.length;++o){var s=e.nodeKey(a,o);t.containerNodes.has(s)&&n.push.apply(n,a.calculateLosses())}return n})},e.prototype.getConfig=function(){for(var t={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[],i=0,a=this.layers;i<a.length;i++){for(var o=(b=a[i]).getClassName(),s=b.getConfig(),u=[],l=0;l<b.inboundNodes.length;l++){var c=b.inboundNodes[l],f=e.nodeKey(b,l),h={};if(this.containerNodes.has(f)){if(c.callArgs)try{JSON.stringify(c.callArgs),h=c.callArgs}catch(t){console.warn("Layer "+b.name+" was passed non-serializable keyword arguments: "+c.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),h={}}if(c.inboundLayers.length>0){for(var p=[],d=0;d<c.inboundLayers.length;d++){var m=c.inboundLayers[d],g=c.nodeIndices[d],v=c.tensorIndices[d];null!==(x=n[e.nodeKey(m,g)])&&void 0!==x||(x=0),p.push([m.name,x,v,h])}u.push(p)}}}r.push({name:b.name,className:o,config:s,inboundNodes:u})}t.layers=r;var y=[];for(d=0;d<this.inputLayers.length;d++){var b=this.inputLayers[d];g=this.inputLayersNodeIndices[d],f=e.nodeKey(b,g),this.containerNodes.has(f)&&(null!==(x=n[f])&&void 0!==x||(x=0),v=this.inputLayersTensorIndices[d],y.push([b.name,x,v]))}t.inputLayers=y;var _=[];for(d=0;d<this.outputLayers.length;d++){var x;if(b=this.outputLayers[d],g=this.outputLayersNodeIndices[d],f=e.nodeKey(b,g),this.containerNodes.has(f))null!==(x=n[f])&&void 0!==x||(x=0),v=this.outputLayersTensorIndices[d],_.push([b.name,x,v])}return t.outputLayers=_,t},e.fromConfig=function(t,e){var n={},r={};function i(t,e){t.name in r?r[t.name].push(e):r[t.name]=[e]}function a(t,e){for(var r,a=[],o=0,s=e;o<s.length;o++){var u=s[o],l=u[0],c=u[1],f=u[2];if(3===u.length)r={};else{if(4!==u.length)throw new _("Improperly formatted model config for layer "+JSON.stringify(t)+": "+JSON.stringify(u));r=u[3]}if(!(l in n))return void i(t,e);var h=n[l];if(h.inboundNodes.length<=c)return void i(t,e);var p=h.inboundNodes[c];a.push(p.outputTensors[f])}a.length>0&&t.apply(T(a),r)}function o(t){var r=t.name,a=tn(t,null!=e.customObjects?e.customObjects:{});n[r]=a;for(var o=0,s=t.inboundNodes;o<s.length;o++){var u=s[o];if(!(u instanceof Array))throw new _("Corrupted configuration, expected array for nodeData: "+u);i(a,u)}}for(var s=e.name,u=e.layers,l=0,c=u;l<c.length;l++)o(p=c[l]);for(;!R(r);)for(var f=0,h=u;f<h.length;f++){var p=h[f];if((C=n[p.name]).name in r){for(var d=0,m=r[C.name];d<m.length;d++)a(C,m[d]);delete r[C.name]}}for(var g=[],v=[],y=0,b=e.inputLayers;y<b.length;y++){var x=(p=b[y])[0],w=p[1],S=p[2];E(x in n);var k=(C=n[x]).inboundNodes[w].outputTensors;g.push(k[S])}for(var P=0,M=e.outputLayers;P<M.length;P++){var C;x=(p=M[P])[0],w=p[1],S=p[2],E(x in n),k=(C=n[x]).inboundNodes[w].outputTensors,v.push(k[S])}return new t({inputs:g,outputs:v,name:s})},Object.defineProperty(e.prototype,"stateful",{get:function(){if(this._stateful)throw new _("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var t=0,e=this.layers;t<e.length;t++)if(e[t].stateful)return!0;return!1},enumerable:!0,configurable:!0}),e.prototype.resetStates=function(){var t=this;Object(r.uc)(function(){t.layers.forEach(function(t){t.stateful&&t.resetStates()})})},e}(se);var on,sn,un=function(){function t(e){if(this.id2Value={},e instanceof t)for(var n in e.id2Value)this.id2Value[n]=e.id2Value[n];else{if(null==e)return;for(var r=0,i=e;r<i.length;r++){var a=i[r];this.add(a.key,a.value)}}}return t.prototype.add=function(t,e){if(null!=this.id2Value[t.id])throw new _("Duplicate key: name="+t.name+", id="+t.id);return this.id2Value[t.id]=function(t,e){if(null!=t.shape){if(t.shape.length!==e.shape.length)throw new _("The rank of feed ("+e.shape.length+") does not match the rank of the key ("+t.shape.length+").");for(var n=0;n<t.shape.length;++n)if(null!=t.shape[n]&&t.shape[n]!==e.shape[n])throw new _("The "+n+"-th dimension of the feed ("+e.shape[n]+") is incompatible with that of the key ("+t.shape[n]+").")}if(null==t.dtype||t.dtype===e.dtype)return e;try{return Object(r.w)(e,t.dtype)}catch(n){throw new _("The dtype of the feed ("+e.dtype+") can not be cast to the dtype of the key '"+t.name+"' ("+t.dtype+").")}}(t,e),this},t.prototype.addFeed=function(t){this.add(t.key,t.value)},t.prototype.hasKey=function(t){return null!=this.id2Value[t.id]},t.prototype.getValue=function(t){if(null==this.id2Value[t.id])throw new _("Nonexistent key: "+JSON.stringify(t));return this.id2Value[t.id]},t}();function ln(t,e,n){for(var r=Array.isArray(t),i=r?t:[t],a=[],o=new un(e),s=0,u=i;s<u.length;s++){var l=u[s];a.push(cn(l,o,n))}return r?a:a[0]}function cn(t,e,n){if(e.hasKey(t))return e.getValue(t);if(t.sourceLayer instanceof ue)throw new _("Missing a feed value for SymbolicTensor from InputLayer '"+ue.name+"'");for(var r=[],i=0,a=t.inputs;i<a.length;i++){var o=cn(a[i],e,n);r.push(o)}var s=t.sourceLayer.apply(r,n);Array.isArray(s)||(s=[s]);for(var u=function(t){var e;if(1===t.sourceLayer.inboundNodes.length)e=t.sourceLayer.output;else{for(var n=null,r=0;r<t.sourceLayer.inboundNodes.length;++r)for(var i=0,a=t.sourceLayer.inboundNodes[r].outputTensors;i<a.length;i++)if(a[i].id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}(t),l=Array.isArray(u)?u:[u],c=0;c<l.length;++c)e.add(l[c],s[c]);return 1===s.length?s[0]:s[t.outputTensorIndex]}function fn(t){return Array.isArray(t)}function hn(t){return!function(t){return t instanceof r.c}(t)&&!fn(t)}function pn(t,e,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=""),null==e||0===e.length){if(null!=t){var a=!1;if(fn(t)&&t.length>0)a=!0;else if(hn(t)){for(var o in t)if(t.hasOwnProperty(o)){a=!0;break}}else a=!0;if(a)throw new _("Error when checking model "+i+" expected no data, but got "+t)}return[]}if(null==t)return e.map(function(t){return null});var s;if(hn(t)){t=t,s=[];for(var u=0,l=e;u<l.length;u++){var c=l[u];if(null==t[c])throw new _('No data provided for "'+c+'". Need data for each key in: '+e);s.push(t[c])}}else if(fn(t)){if((t=t).length!==e.length)throw new _("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+e.length+" Tensor(s), but instead got the following list of Tensor(s): "+t);s=t}else{if(t=t,e.length>1)throw new _("The model "+i+" expects "+e.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+t.shape);s=[t]}for(var f=0;f<e.length;++f)1===(h=s[f]).shape.length&&(s[f]=pt(h,1));if(null!=n)for(f=0;f<e.length;++f)if(null!=n[f]){var h;if((h=s[f]).shape.length!==n[f].length)throw new _("Error when checking "+i+": expected "+e[f]+" to have "+n[f].length+" dimension(s). but got array with shape "+h.shape);for(var p=0;p<n[f].length;++p)if(0!==p||r){var d=h.shape[p],m=n[f][p];if(null!=m&&m>=0&&d!==m)throw new _("Error when checking "+i+": expected "+e[f]+" to have shape ["+n[f]+"], but got array with shape ["+h.shape+"].")}}return s}function dn(t,e){for(var n=[],r=0,i=null;r<t;)(i=r+e)>=t&&(i=t),n.push([r,i]),r=i;return n}function mn(t,e,n){return null==t?[null]:Array.isArray(t)?t.map(function(t){return dt(t,e,n-e)}):dt(t,e,n-e)}function gn(t,e){return Object(r.uc)(function(){return null==t?null:Array.isArray(t)?t.map(function(t){return gn(t,e)}):wt(t,"int32"===e.dtype?e:e.toInt())})}function vn(t,e,n,r,i){var a;if(void 0===r&&(r=!0),void 0===i&&(i=""),Array.isArray(t)){if(t.length!==e.length)throw new _("Error when checking model "+i+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+e.length+" Tensor(s), but instead got "+t.length+" Tensors(s).");a=t}else{if(e.length>1)throw new _("The model expects "+e.length+" "+i+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(t.shape)+".");a=[t]}if(null!=n)for(var o=0;o<e.length;++o)if(null!=n[o]){var s=a[o];if(s.shape.length!==n[o].length)throw new _("Error when checking "+i+": expected "+e[o]+" to have "+n[o].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var u=0;u<n[o].length;++u)if(0!==u||r){var l=s.shape[u],c=n[o][u];if(null!=c&&c!==l)throw new _("Error when checking "+i+": expected "+e[o]+" to have shape "+JSON.stringify(n[o])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}function yn(t){r.Bc.assert(t>0&&Number.isInteger(t),"batchSize is required to be a positive integer, but got "+t)}(sn=on||(on={}))[sn.SILENT=0]="SILENT",sn[sn.VERBOSE=1]="VERBOSE";var bn=function(t){function e(e){var n=t.call(this,e)||this;return n.isTraining=!1,n}return a(e,t),e.prototype.summary=function(t,e,n){if(void 0===n&&(n=console.log),!this.built)throw new _("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Ye(this,t,e,n)},e.prototype.compile=function(t){var e=this;if(null==t.loss&&(t.loss=[]),this.loss=t.loss,"string"==typeof t.optimizer)this.optimizer=function(t){var e={Adagrad:function(){return r.xc.adagrad(.01)},Adadelta:function(){return r.xc.adadelta(1,.95,c())},Adam:function(){return r.xc.adam(.001,.9,.999,c())},Adamax:function(){return r.xc.adamax(.002,.9,.999,c(),0)},RMSProp:function(){return r.xc.rmsprop(.001,.9,0,c())},SGD:function(){return r.xc.sgd(.01)}};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new _("Unknown Optimizer "+t)}(t.optimizer);else{if(!(t.optimizer instanceof r.b))throw new _("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer=t.optimizer}var n=[];if(Array.isArray(t.loss)||"string"==typeof t.loss||"function"==typeof t.loss)if(Array.isArray(t.loss)){if(t.loss.length!==this.outputs.length)throw new _("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+t.loss+".");var i=t.loss;n=i.map(function(t){return Ae(t)})}else{var a=Ae(t.loss);this.outputs.map(function(t){n.push(a)})}else{for(var o in t.loss=t.loss,t.loss)if(-1===this.outputNames.indexOf(o))throw new _('Unknown entry in loss dictionary: "'+o+'". Only expect the following keys: '+this.outputNames);for(var s in this.outputNames)null==t.loss[s]&&console.warn('Output "'+s+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+s+" during training"),n.push(Ae(t.loss[s]))}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var u=0;u<this.outputs.length;++u){var l=this.internalOutputShapes[u],f=this.outputNames[u];this.feedOutputNames.push(f),this.feedOutputShapes.push(l),this.feedLossFns.push(this.lossFunctions[u])}var h=[];this.metrics=t.metrics,this.metricsNames=["loss"],this.metricsTensors=[],et("loss",function(){for(var t=0;t<e.outputs.length;++t)if(-1===h.indexOf(t)){var n=e.lossFunctions[t];e.outputs.length>1&&(e.metricsTensors.push([n,t]),e.metricsNames.push(e.outputNames[t]+"_loss"))}});var p=function(t,e){if(null==t||Array.isArray(t)&&0===t.length)return e.map(function(t){return[]});if(Array.isArray(t))return e.map(function(e){return t});if(null!=t){for(var n=[],r=0,i=e;r<i.length;r++){var a=i[r],o=t.hasOwnProperty(a)?t[a]:[];Array.isArray(o)||(o=[o]),n.push(o)}return n}throw new TypeError("Type of metrics argument not understood. Expected an Array or Object, found: "+t)}(t.metrics,this.outputNames);et("metric",function(){for(var t=function(t){if(-1!==h.indexOf(t))return"continue";!function(n){for(var r,i,a,o=function(n){if(-1!==["accuracy","acc","crossentropy","ce"].indexOf(n)){var o=e.internalOutputShapes[t];1===o[o.length-1]||e.lossFunctions[t]===Ce?-1!==["accuracy","acc"].indexOf(n)?i=Re:-1!==["crossentropy","ce"].indexOf(n)&&(i=ze):e.lossFunctions[t]===Me?-1!==["accuracy","acc"].indexOf(n)?i=Be:-1!==["crossentropy","ce"].indexOf(n)&&(i=Xe):-1!==["accuracy","acc"].indexOf(n)?i=De:-1!==["crossentropy","ce"].indexOf(n)&&(i=$e);var s=void 0;-1!==["accuracy","acc"].indexOf(n)?s="acc":-1!==["crossentropy","ce"].indexOf(n)&&(s="ce"),a=i,r=""+s}else{var u=function(t){var e={binaryAccuracy:Re,categoricalAccuracy:De,precision:Le,categoricalCrossentropy:$e,sparseCategoricalCrossentropy:Xe,mse:Ue,MSE:Ve,mae:qe,MAE:We,mape:Ge,MAPE:He,cosine:Ke};if("string"==typeof t&&t in e)return e[t];if("string"!=typeof t&&null!=t)return t;throw new _("Unknown metric "+t)}(n);a=u,r=""+n}var l;et(r,function(){l=a}),function(t,n,r){e.outputNames.length>1&&(n=e.outputNames[t]+"_"+n),e.metricsNames.push(n),e.metricsTensors.push([r,t])}(t,r,l)},s=0,u=p[t];s<u.length;s++)o(u[s])}()},n=0;n<e.outputs.length;++n)t(n)}),this.collectedTrainableWeights=this.trainableWeights},e.prototype.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},e.prototype.evaluate=function(t,e,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize;yn(r);var i=this.standardizeUserData(t,e,!0,r),a=i[0].concat(i[1]);this.makeTestFunction();var o=this.testFunction;return T(this.testLoop(o,a,r,n.verbose,n.steps))},e.prototype.checkNumSamples=function(t,e,n,r){var i;if(void 0===r&&(r="steps"),null!=n){if(i=null,null!=e)throw new _("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+e)}else{if(null==t)throw new _("Either the input data should have a defined shape, or "+r+" shoud be specified.");i=Array.isArray(t)?t[0].shape[0]:t.shape[0]}return i},e.prototype.execute=function(t,e){if(Array.isArray(e)&&0===e.length)throw new _("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(e),i=n?e:[e],a=this.retrieveSymbolicTensors(i),o=new un;if(t instanceof r.c&&(t=[t]),Array.isArray(t)){if(t.length!==this.inputs.length)throw new _("The number of inputs provided ("+t.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var s=0;s<this.inputs.length;++s)o.add(this.inputs[s],t[s])}else for(var u=0,l=this.inputs;u<l.length;u++){var c=l[u],f=t[c.name];if(null==f)throw new _("No value is provided for the model's input "+c.name);o.add(c,f)}var h=ln(a,o);return n?h:h[0]},e.prototype.retrieveSymbolicTensors=function(t){for(var e=S(null,t.length),n=t.length,r=0,i=this.layers;r<i.length;r++){for(var a=i[r],o=Array.isArray(a.output)?a.output:[a.output],s=o.map(function(t){return t.name}),u=0;u<t.length;++u){var l=s.indexOf(t[u]);if(-1!==l&&(e[u]=o[l],n--),0===n)break}if(0===n)break}if(n>0){var c=[];throw e.forEach(function(e,n){null==e&&c.push(t[n])}),new _("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(c))}return e},e.prototype.predictLoop=function(t,e,n){var i=this;return void 0===e&&(e=32),void 0===n&&(n=!1),Object(r.uc)(function(){var a=i.checkNumSamples(t);if(n)throw new x("Verbose predictLoop() is not implemented yet.");for(var o=dn(a,e),s=[],u=function(e){var n=Object(r.uc)(function(){var n=o[e][0],r=o[e][1],a=mn(t,n,r),s=[];if(Array.isArray(a))for(var u=0;u<a.length;++u)s.push({key:i.inputs[u],value:a[u]});else s.push({key:i.inputs[0],value:a});var l=new un(s);return ln(i.outputs,l)});if(0===e)for(var a=0,u=n;a<u.length;a++){var l=u[a];s.push(l)}else for(var c=0;c<n.length;++c)s[c]=yt(s[c],n[c])},l=0;l<o.length;++l)u(l);return T(s)})},e.prototype.predict=function(t,e){void 0===e&&(e={}),vn(t,this.inputNames,this.feedInputShapes,!1);var n=null==e.batchSize?32:e.batchSize;return yn(n),this.predictLoop(t,n)},e.prototype.predictOnBatch=function(t){return vn(t,this.inputNames,this.feedInputShapes,!0),this.predictLoop(t,t.shape[0])},e.prototype.standardizeUserData=function(t,e,n,i){if(void 0===n&&(n=!0),null==this.optimizer)throw new b("You must compile a model before training/testing. Use Model.compile(modelCompileConfig).");for(var a=[],o=0;o<this.feedOutputShapes.length;++o){var s=this.feedOutputShapes[o];this.feedLossFns[o]===Me?a.push(s.slice(0,s.length-1).concat([1])):a.push(s)}if(function(t,e,n){var i=A(t.map(function(t){return t.shape[0]}));i.sort();var a=A(e.map(function(t){return t.shape[0]}));if(a.sort(),i.length>1)throw new _("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map(function(t){return t.shape})));if(a.length>1)throw new _("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map(function(t){return t.shape})));if(i.length>0&&a.length>0&&!r.Bc.arraysEqual(i,a))throw new _("Input Tensors should have the same number of samples as target Tensors. Found "+i[0]+" input sample(s) and "+a[0]+" target sample(s).")}(t=pn(t,this.feedInputNames,this.feedInputShapes,!1,"input"),e=pn(e,this.feedOutputNames,a,!1,"target")),function(t,e,n){for(var r=[be,Ce,Pe],i=0;i<t.length;++i){var a=t[i],o=e[i],s=n[i];if(null!=o){if(o===Pe&&1===a.shape[a.shape.length-1])throw new _("You are passing a target array of shape "+a.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=a.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var f=u[c],h=l[c];if(null!=h&&f!==h)throw new _("A target Tensor with shape "+a.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}(e,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=i&&i>0&&t[0].shape[0]%i!=0)throw new _("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+i+". Found: "+t[0].shape[0]+" sample(s).");return[t,e,null]},e.prototype.fitLoop=function(t,e,n,i,a,o,l,c,f,h,p,d,m,g,v){return s(this,void 0,void 0,function(){var s,y,b,w,S,E,k,T,P=this;return u(this,function(M){switch(M.label){case 0:if(null==i&&(i=32),null==a&&(a=1),null==h&&(h=!0),null==d&&(d=0),s=!1,null!=c&&null!=f&&(s=!0),null!=g&&(s=!0,null==m))throw new _("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");return null!=(y=this.checkNumSamples(e,i,m,"steps_per_epoch"))&&(b=ft(0,y)),null==o&&(o=1),this.history=new me,w=[new de(v)].concat(ve.createCallbacks(o)),null!=l&&w.push.apply(w,l),w.push(this.history),(S=new he(w)).setModel(this),S.setParams({epochs:a,initialEpoch:d,samples:y,steps:m,batchSize:i,verbose:o,doValidation:s,metrics:p}),[4,S.onTrainBegin()];case 1:M.sent(),this.stopTraining_=!1,E=function(a){var o,l,p,d,g;return u(this,function(v){switch(v.label){case 0:return[4,S.onEpochBegin(a)];case 1:if(v.sent(),o={},null==m)return[3,2];throw new x("stepsPerEpoch mode is not implemented yet.");case 2:if("batch"===h)throw new x("batch shuffling is not implemneted yet");h&&r.Bc.shuffle(b),l=Object(r.tc)(b),p=dn(y,i),d=function(a){var h;return u(this,function(u){switch(u.label){case 0:return h={},[4,S.onBatchBegin(a,h)];case 1:return u.sent(),Object(r.uc)(function(){var u=p[a][0],d=p[a][1],m=dt(l,u,d-u);h.batch=a,h.size=d-u;for(var g=gn(e,m),v=t(g),y=0;y<n.length;++y){var b=n[y],_=v[y];h[b]=_,Object(r.cb)(_)}if(a===p.length-1&&s){var x=P.testLoop(c,f,i);for(y=0;y<n.length;++y)b=n[y],_=x[y],Object(r.cb)(_),o["val_"+b]=_}}),[4,S.onBatchEnd(a,h)];case 2:return u.sent(),function(t){if(null!=t)for(var e in t){var n=t[e];"number"!=typeof n&&n.dispose()}}(h),k.stopTraining_?[2,"break"]:[2]}})},g=0,v.label=3;case 3:return g<p.length?[5,d(g)]:[3,6];case 4:if("break"===v.sent())return[3,6];v.label=5;case 5:return++g,[3,3];case 6:l.dispose(),v.label=7;case 7:return[4,S.onEpochEnd(a,o)];case 8:return v.sent(),k.stopTraining_?[2,"break"]:[2]}})},k=this,T=d,M.label=2;case 2:return T<a?[5,E(T)]:[3,5];case 3:if("break"===M.sent())return[3,5];M.label=4;case 4:return++T,[3,2];case 5:return[4,S.onTrainEnd()];case 6:return M.sent(),[4,this.history.syncData()];case 7:return M.sent(),[2,this.history]}})})},e.prototype.testLoop=function(t,e,n,i,a){var o=this;return void 0===i&&(i=0),Object(r.uc)(function(){var s=o.checkNumSamples(e,n,a,"steps"),u=[];if(1===i)throw new x("Verbose mode is not implemented yet.");if(null!=a)throw new x("steps mode in testLoop() is not implemented yet");for(var l=dn(s,n),c=Object(r.tc)(ft(0,s)),f=0;f<l.length;++f){var h=l[f][0],p=l[f][1],d=dt(c,h,p-h),m=gn(e,d),g=t(m);if(0===f)for(var y=0;y<g.length;++y)u.push(v(0));for(y=0;y<g.length;++y){var b=g[y];u[y]=Object(r.g)(u[y],Object(r.yb)(v(p-h),b))}}for(y=0;y<u.length;++y)u[y]=Object(r.L)(u[y],v(s));return u})},e.prototype.getDedupedMetricsNames=function(){for(var t=this.metricsNames,e=[],n=0;n<t.length;++n){var r=t[n],i=r;k(t,r)>1&&(i+="_"+k(t.slice(0,n),r)),e.push(i)}return e},e.prototype.makeTestFunction=function(){var t=this;this.testFunction=function(e){return Object(r.uc)(function(){for(var n,i=[],a=e.slice(0,t.inputs.length),o=e.slice(t.inputs.length,t.inputs.length+t.outputs.length),s=[],u=0;u<t.inputs.length;++u)s.push({key:t.inputs[u],value:a[u]});var l=new un(s),c=ln(t.outputs,l);for(u=0;u<t.lossFunctions.length;++u){var f=t.lossFunctions[u],h=Object(r.sb)(f(o[u],c[u]));n=0===u?h:Object(r.g)(n,h),i.push(n)}for(u=0;u<t.metricsTensors.length;++u){var p=t.metricsTensors[u][0],d=t.metricsTensors[u][1],m=Object(r.sb)(p(o[d],c[d]));i.push(m)}return i})}},e.prototype.fit=function(t,e,n){return void 0===n&&(n={}),s(this,void 0,void 0,function(){var i,a,o,s,l,c,f,h,p,d,m,g,v,y,b,w,S,E,k,T=this;return u(this,function(u){switch(u.label){case 0:if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0,u.label=1;case 1:if(u.trys.push([1,,3,4]),yn(i=null==n.batchSize?32:n.batchSize),a=this.standardizeUserData(t,e,!1,i),o=a[0],s=a[1],l=!1,c=void 0,f=void 0,h=void 0,p=!1,null!=n.validationData&&n.validationData.length>0){if(l=!0,2!==n.validationData.length)throw 3===n.validationData.length?new x("validationData including sample weights is not supported yet."):new _("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+n.validationData+" is invalid.");c=n.validationData[0],f=n.validationData[1],d=this.standardizeUserData(c,f,!0,i),c=d[0],f=d[1],h=c.concat(f)}else null!=n.validationSplit&&n.validationSplit>0&&n.validationSplit<1?(l=!0,m=Math.floor(o[0].shape[0]*(1-n.validationSplit)),g=o[0].shape[0],c=mn(o,m,g),o=mn(o,0,m),f=mn(s,m,g),s=mn(s,0,m),p=!0,h=c.concat(f)):null!=n.validationSteps&&(l=!0);return v=o.concat(s),this.checkTrainableWeightsConsistency(),y=function(t){var e=t.slice(0,T.inputs.length),n=t.slice(T.inputs.length,T.inputs.length+T.outputs.length),i=[],a=T.collectedTrainableWeights.map(function(t){return t.read()});return[T.optimizer.minimize(function(){for(var t=[],a=0;a<T.inputs.length;++a)t.push({key:T.inputs[a],value:e[a]});var o,s=new un(t),u=ln(T.outputs,s,{training:!0});for(a=0;a<T.lossFunctions.length;++a){var l=(0,T.lossFunctions[a])(n[a],u[a]);Object(r.sb)(l),o=0===a?l:Object(r.g)(o,l)}for(a=0;a<T.metricsTensors.length;++a){var c=T.metricsTensors[a][0],f=T.metricsTensors[a][1],h=Object(r.sb)(c(n[f],u[f]));Object(r.cb)(h),i.push(h)}return o=Object(r.sb)(o),T.calculateLosses().forEach(function(t){o=Object(r.g)(o,t)}),o},!0,a)].concat(i)},b=this.getDedupedMetricsNames(),w=void 0,S=void 0,l?(this.makeTestFunction(),w=this.testFunction,S=b.slice().concat(b.map(function(t){return"val_"+t}))):(w=null,h=[],S=b.slice()),E=function(t){return null==t?null:t instanceof fe?[t]:Array.isArray(t)&&t[0]instanceof fe?t:P(t).map(function(t){return new ge(t)})}(n.callbacks),[4,this.fitLoop(y,v,b,i,n.epochs,n.verbose,E,w,h,n.shuffle,S,n.initialEpoch,null,null,n.yieldEvery)];case 2:return k=u.sent(),p&&(h.forEach(function(t){return t.dispose()}),o.forEach(function(t){return t.dispose()}),s.forEach(function(t){return t.dispose()})),this.isTraining=!1,[2,k];case 3:return this.isTraining=!1,[7];case 4:return[2]}})})},e.prototype.getNamedWeights=function(t){for(var e={},n=null!=t&&t.trainableOnly,r=n?this.trainableWeights:this.weights,i=this.getWeights(n),a=0;a<r.length;++a)n&&!r[a].trainable||(e[r[a].originalName]=i[a]);return e},Object.defineProperty(e.prototype,"stopTraining",{set:function(t){this.stopTraining_=t},enumerable:!0,configurable:!0}),e.prototype.save=function(t,e){return s(this,void 0,void 0,function(){var n,i,a;return u(this,function(o){switch(o.label){case 0:if("string"==typeof t){if(0===(n=r.bb.getSaveHandlers(t)).length)throw new _("Cannot find any save handlers for URL '"+t+"'");if(n.length>1)throw new _("Found more than one ("+n.length+") save handlers for URL '"+t+"'");t=n[0]}if(null==t.save)throw new _("Model.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return[4,r.bb.encodeWeights(this.getNamedWeights(e))];case 1:return i=o.sent(),!1,null,a=this.toJSON(null,!1),[2,t.save({modelTopology:a,weightData:i.data,weightSpecs:i.specs})]}})})},e.className="Model",e}(an);r.Tb.registerClass(bn);var _n=function(t){function e(e){var n=t.call(this,{inputs:[],outputs:[]})||this;if(e=e||{},n.trainable=!0,n._updatable=!0,n.built=!1,n.name=null!=e.name?e.name:d("sequential_"),null!=e.layers)for(var r=0,i=e.layers;r<i.length;r++){var a=i[r];n.add(a)}return n}return a(e,t),e.prototype.checkShape=function(t){if(t.inboundNodes[0].outputTensors[0].shape.some(function(t){return t<0}))throw new _("Negative dimension size caused by adding layer "+t.name+" with input shape ["+t.inboundNodes[0].inputTensors[0].shape+"]")},e.prototype.add=function(t){var n,r=t instanceof e||t instanceof bn;if(r){if(1!==(n=t).outputs.length)throw new _("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new _("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===t.inboundNodes.length){if(null==t.batchInputShape)throw new _("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var i=le({batchShape:t.batchInputShape,dtype:t.dtype,name:t.name+"_input"});t.apply(i)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==t.inboundNodes.length)throw new _("A layer added to a Sequential model must not already be connected somewhere else. Model received layer "+t.name+" which has "+t.inboundNodes.length+" pre-existing inbound connections.");if(1!==t.inboundNodes[0].outputTensors.length)throw new _("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[t.inboundNodes[0].outputTensors[0]],this.inputs=function t(e,n,r){if((null==n||null!=r&&r>0)&&(n=e.sourceLayer,r=e.nodeIndex),0===n.inboundNodes.length)return[e];var i=n.inboundNodes[r];if(0===i.inboundLayers.length)return i.inputTensors;for(var a=[],o=0;o<i.inboundLayers.length;o++)for(var s=0,u=t(i.inputTensors[o],i.inboundLayers[o],i.nodeIndices[o]);s<u.length;s++){var l=u[s];-1===a.indexOf(l)&&a.push(l)}return a}(this.outputs[0])}this.inboundNodes=[],new ae({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:S(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(function(t){return t.shape}),outputShapes:this.outputs[0].shape})}else{var a=t.apply(this.outputs[0]);if(Array.isArray(a))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(t),this.outputs=[a],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(t),this.built=!1},e.prototype.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var t=this.layers.length-1;this.layers[t].outboundNodes=[],this.outputs=[this.layers[t].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},e.prototype.call=function(t,e){return null==this.model&&this.build(),this.model.call(t,e)},e.prototype.build=function(t){if(Yt(t),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new bn({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.model.updatable=this.updatable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},e.prototype.countParams=function(){return this.built||this.build(),t.prototype.countParams.call(this)},e.prototype.summary=function(e,n,r){void 0===r&&(r=console.log),this.built||this.build(),t.prototype.summary.call(this,e,n,r)},e.prototype.setWeights=function(t){null==this.model&&this.build(),this.model.setWeights(t)},Object.defineProperty(e.prototype,"updatable",{get:function(){return this._updatable},set:function(t){this.built&&(this.model.updatable=t),this._updatable=t},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t,e,n){if(void 0===n&&(n={}),!this.built)throw new b("The model needs to be compiled before being used.");return this.model.evaluate(t,e,n)},e.prototype.predict=function(t,e){return void 0===e&&(e={}),null==this.model&&this.build(),this.model.predict(t,e)},e.prototype.predictOnBatch=function(t){return null==this.model&&this.build(),this.model.predictOnBatch(t)},e.prototype.compile=function(t){this.build(),this.model.compile(t),this.optimizer=this.model.optimizer,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},e.prototype.fit=function(t,e,n){return void 0===n&&(n={}),s(this,void 0,void 0,function(){return u(this,function(r){if(!this.built)throw new b("The model needs to be compiled before being used.");return[2,this.model.fit(t,e,n)]})})},e.fromConfig=function(t,n){var r=new t({});if(!(r instanceof e))throw new _("Sequential.fromConfig called on non-Sequential input: "+r);if(!(n instanceof Array))throw new _("Sequential.fromConfig called without an array of configs");if(null==n[0].className||"Merge"===n[0].className)throw new _("Legacy serialization format not supported yet.");for(var i=0,a=n;i<a.length;i++){var o=tn(a[i]);r.add(o)}return r},Object.defineProperty(e.prototype,"stopTraining",{set:function(t){this.model.stopTraining=t},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){for(var t=[],e=0,n=this.layers;e<n.length;e++){var r=n[e];t.push({className:r.getClassName(),config:r.getConfig()})}return t},e.className="Sequential",e}(bn);r.Tb.registerClass(_n);var xn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.getConfig=function(){return{}},e}(r.Tb.Serializable),wn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=1),function(t,e){if(void 0===e&&(e=1),1!==e)throw new x("Support for alpha values other than 1 ("+e+") is not implemented yet.");return Object(r.M)(t)}(t,e)},e.className="elu",e}(xn);r.Tb.registerClass(wn);var Sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return Object(r.Rb)(t)},e.className="selu",e}(xn);r.Tb.registerClass(Sn);var En=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return Object(r.Mb)(t)},e.className="relu",e}(xn);r.Tb.registerClass(En);var kn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return Object(r.uc)(function(){return Object(r.ub)(v(6),Object(r.Mb)(t))})},e.className="relu6",e}(xn);r.Tb.registerClass(kn);var Tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return t},e.className="linear",e}(xn);r.Tb.registerClass(Tn);var Pn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return Object(r.Ub)(t)},e.className="sigmoid",e}(xn);r.Tb.registerClass(Pn);var Mn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return function(t){return Object(r.uc)(function(){var e=Object(r.g)(v(.5),Object(r.yb)(v(.2),t));return Object(r.y)(e,0,1)})}(t)},e.className="hardSigmoid",e}(xn);r.Tb.registerClass(Mn);var Cn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return Object(r.ec)(t)},e.className="softplus",e}(xn);r.Tb.registerClass(Cn);var On=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return function(t){return Object(r.uc)(function(){return Object(r.L)(t,Object(r.g)(v(1),Object(r.d)(t)))})}(t)},e.className="softsign",e}(xn);r.Tb.registerClass(On);var In=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t){return Object(r.rc)(t)},e.className="tanh",e}(xn);r.Tb.registerClass(In);var Nn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t,e){return void 0===e&&(e=-1),Object(r.dc)(t,e)},e.className="softmax",e}(xn);function An(t){return t.getClassName()}function Rn(t,e){return void 0===e&&(e={}),I(t,r.Tb.SerializationMap.getMap().classNameMap,e,"activation")}function Dn(t){return null==t?Rn({className:"linear",config:{}}):"string"==typeof t?Rn({className:t,config:{}}):t instanceof xn?t:Rn(t)}r.Tb.registerClass(Nn);var jn=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.supportsMasking=!0,null!=e&&(n.maxValue=e.maxValue),n}return a(e,t),e.prototype.call=function(t,e){t=Xt(t);var n=Object(r.Mb)(t);return null!=this.maxValue&&(n=Object(r.y)(n,0,this.maxValue)),n},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={maxValue:this.maxValue},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ReLU",e}(se);r.Tb.registerClass(jn);var Ln=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_ALPHA=.3,null==e&&(e={}),n.alpha=null==e.alpha?n.DEFAULT_ALPHA:e.alpha,n}return a(e,t),e.prototype.call=function(t,e){var n=Xt(t);return Object(r.db)(n,this.alpha)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={alpha:this.alpha},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="LeakyReLU",e}(se);r.Tb.registerClass(Ln);var Fn=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;if(n.DEFAULT_ALPHA=1,null==e&&(e={}),null!=e.alpha&&e.alpha!==n.DEFAULT_ALPHA)throw new x("Non-default alpha value ("+e.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==e.alpha?n.DEFAULT_ALPHA:e.alpha,n}return a(e,t),e.prototype.call=function(t,e){var n=Xt(t);return Object(r.M)(n)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={alpha:this.alpha},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ELU",e}(se);r.Tb.registerClass(Fn);var zn=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_THETA=1,null==e&&(e={}),n.theta=null==e.theta?n.DEFAULT_THETA:e.theta,n.thetaTensor=v(n.theta),n}return a(e,t),e.prototype.call=function(t,e){var n=Xt(t);return n.mul(ht(n.greater(this.thetaTensor),"float32"))},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={theta:this.theta},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ThresholdedReLU",e}(se);r.Tb.registerClass(zn);var Bn=function(t){function e(e){var n=t.call(this,null==e?{}:e)||this;return n.DEFAULT_AXIS=1,null==e&&(e={}),n.softmax=(new Nn).apply,n.axis=null==e.axis?n.DEFAULT_AXIS:e.axis,n}return a(e,t),e.prototype.call=function(t,e){var n=Xt(t);return this.softmax(n,this.axis)},e.prototype.computeOutputShape=function(t){return t},e.prototype.getConfig=function(){var e={axis:this.axis},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Softmax",e}(se);r.Tb.registerClass(Bn);var Un=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(r.Tb.Serializable),Vn=function(t){function e(e){var n=t.call(this)||this,r=null==e||null==e.l1?.01:e.l1,i=null==e||null==e.l2?.01:e.l2;return n.hasL1=0!==r,n.hasL2=0!==i,n.l1=v(r),n.l2=v(i),n}return a(e,t),e.prototype.apply=function(t){var e=this;return Object(r.uc)(function(){var n=Object(r.Gc)([1]);return e.hasL1&&(n=Object(r.g)(n,Object(r.pc)(Object(r.yb)(e.l1,Object(r.d)(t))))),e.hasL2&&(n=Object(r.g)(n,Object(r.pc)(Object(r.yb)(e.l2,St(t))))),n.asScalar()})},e.prototype.getConfig=function(){return{l1:this.l1.dataSync()[0],l2:this.l2.dataSync()[0]}},e.fromConfig=function(t,e){return new t({l1:e.l1,l2:e.l2})},e.className="L1L2",e}(Un);r.Tb.registerClass(Vn);var qn={l1l2:"L1L2"};function Wn(t){return O(t)}function Gn(t,e){return void 0===e&&(e={}),I(t,r.Tb.SerializationMap.getMap().classNameMap,e,"regularizer")}function Hn(t){return null==t?null:"string"==typeof t?Gn({className:t in qn?qn[t]:t,config:{}}):t instanceof Un?t:Gn(t)}function $n(t,e,n){if("number"==typeof t)return S(t,e);if(t.length!==e)throw new _("The "+n+" argument must be a tuple of "+e+" integers. Received: "+t.length+" elements.");for(var r=0;r<e;++r){var i=t[r];if(!ot(i))throw new _("The "+n+" argument must be a tuple of "+e+" integers. Received: "+JSON.stringify(t)+" including a non-integer number "+i)}return t}function Kn(t,e,n,r,i){return void 0===i&&(i=1),null==t?t:(a="same"===n?t:t-(e+(e-1)*(i-1))+1,Math.floor((a+r-1)/r));var a}function Xn(t,e,n,r){if(null==t)return null;if("valid"===r)t=t*e+ct([n-e,0]);else{if("same"!==r)throw new _("Unsupport padding mode: "+r+".");t*=e}return t}function Yn(t,e){return Object(r.uc)(function(){return X(e),"channelsFirst"===e?Object(r.yc)(t,[0,2,3,1]):t})}var Jn=function(t){function e(n,r){var i=t.call(this,r)||this;if(i.bias=null,i.DEFAULT_KERNEL_INITIALIZER="glorotNormal",i.DEFAULT_BIAS_INITIALIZER="zeros",e.verifyConfig(r),i.rank=n,1!==i.rank&&2!==i.rank)throw new x("Convolution layer for rank other than 1 or 2 ("+i.rank+") is not implemented yet.");if(i.kernelSize=$n(r.kernelSize,n,"kernelSize"),i.strides=$n(null==r.strides?1:r.strides,n,"strides"),i.padding=null==r.padding?"valid":r.padding,J(i.padding),i.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,X(i.dataFormat),i.activation=Dn(r.activation),i.useBias=null==r.useBias||r.useBias,i.biasInitializer=Ht(r.biasInitializer||i.DEFAULT_BIAS_INITIALIZER),i.biasConstraint=H(r.biasConstraint),i.biasRegularizer=Hn(r.biasRegularizer),i.activityRegularizer=Hn(r.activityRegularizer),i.dilationRate=$n(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===i.rank&&Array.isArray(i.dilationRate)&&1!==i.dilationRate.length)throw new _("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(i.dilationRate));if(2===i.rank)if("number"==typeof i.dilationRate)i.dilationRate=[i.dilationRate,i.dilationRate];else if(2!==i.dilationRate.length)throw new _("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(i.dilationRate));return i}return a(e,t),e.verifyConfig=function(t){if(E("kernelSize"in t,"required key 'kernelSize' not in config"),"number"!=typeof t.kernelSize&&!j(t.kernelSize,"number",1,2))throw new _("BaseConv expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(t.kernelSize)+".")},e.prototype.getConfig=function(){var e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:An(this.activation),useBias:this.useBias,biasInitializer:Gt(this.biasInitializer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),biasConstraint:W(this.biasConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(se),Zn=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.kernel=null,e.verifyConfig(r),i.filters=r.filters,i.kernelInitializer=Ht(r.kernelInitializer||i.DEFAULT_KERNEL_INITIALIZER),i.kernelConstraint=H(r.kernelConstraint),i.kernelRegularizer=Hn(r.kernelRegularizer),i}return a(e,t),e.prototype.build=function(t){t=Yt(t);var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new _("The channel dimension of the input should be defined. Found "+t[e]);var n,r=t[e],i=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",i,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(n={},n[e]=r,n)}],this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var e;t=Xt(t);var i=null==n.bias?null:n.bias.read();if(1===n.rank)e=function(t,e,n,i,a,o,s){return void 0===i&&(i=1),void 0===a&&(a="valid"),void 0===s&&(s=1),Object(r.uc)(function(){if(null==o&&(o="channelsLast"),X(o),3!==t.shape.length)throw new _("The input of a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead.");if(3!==e.shape.length)throw new _("The kernel for a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new _("The bias for a conv1dWithBias operation should be 1, but is "+e.shape.length+" instead");if("channelsFirst"===o&&(t=Object(r.yc)(t,[0,2,1])),"causal"===a)throw new x("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var u=Object(r.E)(t,e,i,"same"===a?"same":"valid","NWC",s);return null!=n&&(u=Et(u,n)),u})}(t,n.kernel.read(),i,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)e=function(t,e,n,i,a,o,s){return void 0===i&&(i=[1,1]),void 0===a&&(a="valid"),Object(r.uc)(function(){if(null==o&&(o="channelsLast"),X(o),3!==t.rank&&4!==t.rank)throw new _("conv2dWithBias expects input to be of rank 3 or 4, but received "+t.rank+".");if(3!==e.rank&&4!==e.rank)throw new _("conv2dWithBias expects kernel to be of rank 3 or 4, but received "+t.rank+".");var u=Yn(t,o);if("causal"===a)throw new x("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=Object(r.F)(u,e,i,"same"===a?"same":"valid","NHWC",s),null!=n&&(u=Et(u,n)),"channelsFirst"===o&&(u=Object(r.yc)(u,[0,3,1,2])),u})}(t,n.kernel.read(),i,n.strides,n.padding,n.dataFormat,n.dilationRate);else if(3===n.rank)throw new x("3D convolution is not implemented yet.");return null!=n.activation&&(e=n.activation.apply(e)),e})},e.prototype.computeOutputShape=function(t){t=Yt(t);for(var e=[],n="channelsLast"===this.dataFormat?t.slice(1,t.length-1):t.slice(2),r=0;r<n.length;++r){var i=Kn(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);e.push(i)}var a=[t[0]];return"channelsLast"===this.dataFormat?(a=a.concat(e)).push(this.filters):(a.push(this.filters),a=a.concat(e)),a},e.prototype.getConfig=function(){var e={filters:this.filters,kernelInitializer:Gt(this.kernelInitializer),kernelRegularizer:Wn(this.kernelRegularizer),kernelConstraint:W(this.kernelConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.verifyConfig=function(t){if(!("filters"in t)||"number"!=typeof t.filters||t.filters<1)throw new _("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(t.filters))},e}(Jn),Qn=function(t){function e(n){var r=t.call(this,2,n)||this;return e.verifyConfig(n),r}return a(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,e},e.verifyConfig=function(t){if("number"!=typeof t.kernelSize&&!j(t.kernelSize,"number",1,2))throw new _("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv2D",e}(Zn);r.Tb.registerClass(Qn);var tr=function(t){function e(e){var n=t.call(this,e)||this;if(n.inputSpec=[new ne({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new _("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}return a(e,t),e.prototype.build=function(t){if(4!==(t=Yt(t)).length)throw new _("Input should have rank 4; Received input shape: "+JSON.stringify(t));var e="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[e])throw new _("The channel dimension of the inputs should be defined. Found `None`.");var n,r=t[e],i=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",i,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new ne({ndim:4,axes:(n={},n[e]=r,n)})],this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var e=Xt(t);if(4!==e.shape.length)throw new _("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+e.shape.length);var i,a,o=e.shape,s=o[0];"channelsFirst"===n.dataFormat?(i=2,a=3):(i=1,a=2);var u=o[i],l=o[a],c=n.kernelSize[0],f=n.kernelSize[1],h=n.strides[0],p=n.strides[1],d=[s,Xn(u,h,c,n.padding),Xn(l,p,f,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(e=Object(r.yc)(e,[0,2,3,1]));var m=Object(r.G)(e,n.kernel.read(),d,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(m=Object(r.yc)(m,[0,3,1,2])),null!=n.bias&&(m=Et(m,n.bias.read(),n.dataFormat)),null!=n.activation&&(m=n.activation.apply(m)),m})},e.prototype.computeOutputShape=function(t){var e,n,r,i=(t=Yt(t)).slice();"channelsFirst"===this.dataFormat?(e=1,n=2,r=3):(e=3,n=1,r=2);var a=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return i[e]=this.filters,i[n]=Xn(i[n],s,a,this.padding),i[r]=Xn(i[r],u,o,this.padding),i},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.dilationRate,e},e.className="Conv2DTranspose",e}(Qn);r.Tb.registerClass(tr);var er=function(t){function e(e){return t.call(this,2,e)||this}return a(e,t),e.className="SeparableConv2D",e}(function(t){function e(e,n){var r=t.call(this,e,n)||this;if(r.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new _("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new _("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new _("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=Ht(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=Hn(n.depthwiseRegularizer),r.depthwiseConstraint=H(n.depthwiseConstraint),r.pointwiseInitializer=Ht(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=Hn(n.pointwiseRegularizer),r.pointwiseConstraint=H(n.pointwiseConstraint),r}return a(e,t),e.prototype.build=function(t){if((t=Yt(t)).length<this.rank+2)throw new _("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(t));var e,n="channelsFirst"===this.dataFormat?1:t.length-1;if(null==t[n]||t[n]<0)throw new _("The channel dimension of the inputs should be defined, but found "+JSON.stringify(t[n]));for(var r=t[n],i=this.kernelSize.concat([r,this.depthMultiplier]),a=[],o=0;o<this.rank;++o)a.push(1);a.push(r*this.depthMultiplier,this.filters),this.depthwiseKernel=this.addWeight("depthwise_kernel",i,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",a,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,!0,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.inputSpec=[new ne({ndim:this.rank+2,axes:(e={},e[n]=r,e)})],this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var e;if(t=Xt(t),1===n.rank)throw new x("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(t=Object(r.yc)(t,[0,2,3,1])),e=Object(r.Sb)(t,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(e=Et(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),"channelsFirst"===n.dataFormat&&(e=Object(r.yc)(e,[0,3,1,2])),e})},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Gt(this.depthwiseInitializer),e.pointwiseInitializer=Gt(this.pointwiseInitializer),e.depthwiseRegularizer=Wn(this.depthwiseRegularizer),e.pointwiseRegularizer=Wn(this.pointwiseRegularizer),e.depthwiseConstraint=W(this.depthwiseConstraint),e.pointwiseConstraint=W(this.pointwiseConstraint),e},e.className="SeparableConv",e}(Zn));r.Tb.registerClass(er);var nr=function(t){function e(n){var r=t.call(this,1,n)||this;return e.verifyConfig(n),r.inputSpec=[{ndim:3}],r}return a(e,t),e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return delete e.rank,delete e.dataFormat,e},e.verifyConfig=function(t){if("number"!=typeof t.kernelSize&&!j(t.kernelSize,"number",1,1))throw new _("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(t.kernelSize)+".")},e.className="Conv1D",e}(Zn);r.Tb.registerClass(nr);var rr=function(t){function e(e){var n=t.call(this,e)||this;return"number"==typeof e.cropping?n.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:"number"==typeof e.cropping[0]?n.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:n.cropping=e.cropping,n.dataFormat=void 0===e.dataFormat?"channelsLast":e.dataFormat,n.inputSpec=[{ndim:4}],n}return a(e,t),e.prototype.computeOutputShape=function(t){return"channelsFirst"===this.dataFormat?[t[0],t[1],t[2]-this.cropping[0][0]-this.cropping[0][1],t[3]-this.cropping[1][0]-this.cropping[1][1]]:[t[0],t[1]-this.cropping[0][0]-this.cropping[0][1],t[2]-this.cropping[1][0]-this.cropping[1][1],t[3]]},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){return t=Xt(t),"channelsLast"===n.dataFormat?gt(gt(t,n.cropping[0][0],t.shape[1]-n.cropping[0][0]-n.cropping[0][1],2),n.cropping[1][0],t.shape[2]-n.cropping[1][1]-n.cropping[1][0],3):gt(gt(t,n.cropping[0][0],t.shape[2]-n.cropping[0][0]-n.cropping[0][1],3),n.cropping[1][0],t.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)})},e.prototype.getConfig=function(){var e={cropping:this.cropping,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Cropping2D",e}(se);r.Tb.registerClass(rr);var ir=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==e.size?n.DEFAULT_SIZE:e.size,n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,n}return a(e,t),e.prototype.computeOutputShape=function(t){if("channelsFirst"===this.dataFormat){var e=null==t[2]?null:this.size[0]*t[2],n=null==t[3]?null:this.size[1]*t[3];return[t[0],t[1],e,n]}return e=null==t[1]?null:this.size[0]*t[1],n=null==t[2]?null:this.size[1]*t[2],[t[0],e,n,t[3]]},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var e=Xt(t),i=e.shape;if("channelsFirst"===n.dataFormat){e=Object(r.yc)(e,[0,2,3,1]);var a=n.size[0]*i[2],o=n.size[1]*i[3],s=e.resizeNearestNeighbor([a,o]);return Object(r.yc)(s,[0,3,1,2])}return a=n.size[0]*i[1],o=n.size[1]*i[2],e.resizeNearestNeighbor([a,o])})},e.prototype.getConfig=function(){var e={size:this.size,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="UpSampling2D",e}(se);r.Tb.registerClass(ir);var ar=function(t){function e(e){var n=t.call(this,2,e)||this;return n.depthwiseKernel=null,n.depthMultiplier=null==e.depthMultiplier?1:e.depthMultiplier,n.depthwiseInitializer=Ht(e.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=H(e.depthwiseConstraint),n.depthwiseRegularizer=Hn(e.depthwiseRegularizer),n}return a(e,t),e.prototype.build=function(t){if((t=Yt(t)).length<4)throw new _("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(t)+".");var e="channelsFirst"===this.dataFormat?1:3;if(null==t[e]||t[e]<0)throw new _("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+t[e]+").");var n=t[e],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var e=function(t,e,n,i,a,o){return void 0===n&&(n=[1,1]),void 0===i&&(i="valid"),Object(r.uc)(function(){null==a&&(a="channelsLast"),X(a);var s=Yn(t,a);if(4!==t.rank)throw new _("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(4!==e.rank)throw new _("depthwiseKernel is required to be 4-D, but is instead "+e.rank+"-D");return s=Object(r.J)(s,e,n,"same"===i?"same":"valid","NHWC",o),"channelsFirst"===a&&(s=Object(r.yc)(s,[0,3,1,2])),s})}(t=Xt(t),n.depthwiseKernel.read(),n.strides,n.padding,n.dataFormat,null);return n.useBias&&(e=Et(e,n.bias.read(),n.dataFormat)),null!=n.activation&&(e=n.activation.apply(e)),e})},e.prototype.computeOutputShape=function(t){t=Yt(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2],r="channelsFirst"===this.dataFormat?t[1]*this.depthMultiplier:t[3]*this.depthMultiplier,i=Kn(e,this.kernelSize[0],this.padding,this.strides[0]),a=Kn(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[t[0],r,i,a]:[t[0],i,a,r]},e.prototype.getConfig=function(){var e=t.prototype.getConfig.call(this);return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Gt(this.depthwiseInitializer),e.depthwiseRegularizer=Wn(this.depthwiseRegularizer),e.depthwiseConstraint=W(this.depthwiseRegularizer),e},e.className="DepthwiseConv2D",e}(Jn);r.Tb.registerClass(ar);var or=function(t){function e(e){var n=t.call(this,e)||this;if(n.rate=Math.max(Math.min(e.rate,1),0),n.rateScalar=v(n.rate),n.noiseShape=e.noiseShape,n.seed=e.seed,null!=n.seed)throw new x("Non-default seed is not implemented in Dropout layer yet: "+n.seed);return n.supportsMasking=!0,n}return a(e,t),e.prototype.getNoiseShape=function(t){if(null==this.noiseShape)return this.noiseShape;for(var e=t.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?e[r]:this.noiseShape[r]);return n},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){n.invokeCallHook(t,e);var i=Xt(t);if(null!=n.noiseShape&&!r.Bc.arraysEqual(i.shape,n.noiseShape))throw new x("Non-default noise shape is not implemented in Dropout layer yet: "+JSON.stringify(n.noiseShape));if(0<n.rate&&n.rate<1){var a=null!=e.training&&e.training,o=n.getNoiseShape(i);return Tt(function(){return kt(i,n.rateScalar,o,n.seed)},function(){return i},a)}return t})},e.prototype.getConfig=function(){var e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Dropout",e}(se);r.Tb.registerClass(or);var sr=function(t){function e(e){var n=t.call(this,e)||this;if(n.activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==e.batchInputShape&&null==e.inputShape&&null!=e.inputDim){var r=null;null!=e.batchSize&&(r=e.batchSize),n.batchInputShape=[r,e.inputDim]}return n.units=e.units,n.activation=Dn(e.activation),null!=e.useBias&&(n.useBias=e.useBias),n.kernelInitializer=Ht(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=Ht(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=H(e.kernelConstraint),n.biasConstraint=H(e.biasConstraint),n.kernelRegularizer=Hn(e.kernelRegularizer),n.biasRegularizer=Hn(e.biasRegularizer),n.activityRegularizer=Hn(e.activityRegularizer),n.inputSpec=[{minNDim:2}],n}return a(e,t),e.prototype.build=function(t){var e,n=(t=Yt(t))[t.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(e={},e[-1]=n,e)}],this.built=!0},e.prototype.computeOutputShape=function(t){var e=(t=Yt(t)).slice();return e[e.length-1]=this.units,e},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){n.invokeCallHook(t,e);var r=xt(Xt(t),n.kernel.read());return null!=n.bias&&(r=Et(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r)),r})},e.prototype.getConfig=function(){var e={units:this.units,activation:An(this.activation),useBias:this.useBias,kernelInitializer:Gt(this.kernelInitializer),biasInitializer:Gt(this.biasInitializer),kernelRegularizer:Wn(this.kernelRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:W(this.kernelConstraint),biasConstraint:W(this.biasConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Dense",e}(se);r.Tb.registerClass(sr);var ur=function(t){function e(e){var n=t.call(this,e||{})||this;return n.inputSpec=[{minNDim:3}],n}return a(e,t),e.prototype.computeOutputShape=function(t){for(var e=0,n=(t=Yt(t)).slice(1);e<n.length;e++)if(null==n[e])throw new _('The shape of the input to "Flatten" is not fully defined (got '+t.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.');return[t[0],st(t,1)]},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){return n.invokeCallHook(t,e),function(t){if(t.rank<=1)throw new _("batchFlatten requires a minimum rank of 2. Got rank: "+t.rank+".");var e=[t.shape[0],st(t.shape,1)];return t.reshape(e)}(Xt(t))})},e.className="Flatten",e}(se);r.Tb.registerClass(ur);var lr=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n.activation=Dn(e.activation),n}return a(e,t),e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){n.invokeCallHook(t,e);var r=Xt(t);return n.activation.apply(r)})},e.prototype.getConfig=function(){var e={activation:An(this.activation)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Activation",e}(se);r.Tb.registerClass(lr);var cr=function(t){function e(e){var n=t.call(this,e)||this;return n.n=e.n,n.inputSpec=[{ndim:2}],n}return a(e,t),e.prototype.computeOutputShape=function(t){return[t[0],this.n,t[1]]},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){return function(t,e){return Object(r.uc)(function(){if(2!==t.shape.length)throw new _("repeat() expects a rank-2 tensor, but received a rank-"+t.shape.length+" tensor.");return bt(pt(t,1),[1,e,1])})}(t=Xt(t),n.n)})},e.prototype.getConfig=function(){var e={n:this.n},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="RepeatVector",e}(se);r.Tb.registerClass(cr);var fr=function(t){function e(e){var n=t.call(this,e)||this;n.targetShape=e.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}return a(e,t),e.prototype.isUnknown=function(t){return t<0||null==t},e.prototype.fixUnknownDimension=function(t,e){for(var n="Total size of new array must be unchanged.",r=e.slice(),i=1,a=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==a)throw new _("Can only specifiy one unknown dimension.");a=o}else i*=s}var u=st(t);if(null!==a){if(0===i||u%i!=0)throw new _(n);r[a]=u/i}else if(u!==i)throw new _(n);return r},e.prototype.computeOutputShape=function(t){for(var e=!1,n=0;n<t.length;++n)if(this.isUnknown(t[n])){e=!0;break}return e?t.slice(0,1).concat(this.targetShape):t.slice(0,1).concat(this.fixUnknownDimension(t.slice(1),this.targetShape))},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){n.invokeCallHook(t,e);var r=Xt(t),i=r.shape,a=i.slice(0,1).concat(n.fixUnknownDimension(i.slice(1),n.targetShape));return r.reshape(a)})},e.prototype.getConfig=function(){var e={targetShape:this.targetShape},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Reshape",e}(se);r.Tb.registerClass(fr);var hr=function(t){function e(e){var n=t.call(this,e)||this;if(null==e.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+e.dims+" instead.");var i=ft(1,e.dims.length+1);if(!r.Bc.arraysEqual(e.dims.slice().sort(),i))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");return n.dims=e.dims,n.dimsIncludingBatch=[0].concat(n.dims),n.inputSpec=[new ne({ndim:n.dims.length+1})],n}return a(e,t),e.prototype.computeOutputShape=function(t){var e=(t=Yt(t)).slice();return this.dims.forEach(function(n,r){e[r+1]=t[n]}),e},e.prototype.call=function(t,e){return Object(r.yc)(Xt(t),this.dimsIncludingBatch)},e.prototype.getConfig=function(){var e={dims:this.dims},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Permute",e}(se);r.Tb.registerClass(hr);var pr=function(t){function e(e){var n=t.call(this,e)||this;if(n.embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==e.batchInputShape&&null==e.inputShape){var r=null;null!=e.batchSize&&(r=e.batchSize),null==e.inputLength?n.batchInputShape=[r,null]:n.batchInputShape=[r].concat(P(e.inputLength))}return n.inputDim=e.inputDim,n.outputDim=e.outputDim,n.embeddingsInitializer=Ht(e.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=Hn(e.embeddingsRegularizer),n.activityRegularizer=Hn(e.activityRegularizer),n.embeddingsConstraint=H(e.embeddingsConstraint),n.maskZero=e.maskZero,n.inputLength=e.inputLength,n}return a(e,t),e.prototype.build=function(t){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},e.prototype.warnOnIncompatibleInputShape=function(t){},e.prototype.computeMask=function(t,e){throw new x("computeMask has not been implemented for Embedding yet")},e.prototype.computeOutputShape=function(t){if(t=Yt(t),null==this.inputLength)return t.concat([this.outputDim]);var e=P(this.inputLength);if(e.length!==t.length-1)throw new _('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);for(var n=0,r=0;r<e.length;++r){var i=e[r],a=t[r+1];if(null!=i&&null!=a&&i!==a)throw new _('"inputLength" is '+this.inputLength+", but received input shape has shape "+t);null==i&&(e[n]=a),n++}return[t[0]].concat(e,[this.outputDim])},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){n.invokeCallHook(t,e);var r=Xt(t);return"int32"!==r.dtype&&(r=ht(r,"int32")),wt(n.embeddings.read(),r.as1D()).reshape(Yt(n.computeOutputShape(r.shape)))})},e.prototype.getConfig=function(){var e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Gt(this.embeddingsInitializer),embeddingsRegularizer:Wn(this.embeddingsRegularizer),activityRegularizer:Wn(this.activityRegularizer),embeddingsConstraint:W(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Embedding",e}(se);r.Tb.registerClass(pr);var dr=function(t){function e(e){var n=t.call(this,e||{})||this;return n.supportsMasking=!0,n}return a(e,t),e.prototype.mergeFunction=function(t){throw new x},e.prototype.computeElementwiseOpOutputShape=function(t,e){if(null==t||null==e)return null;if(t.length<e.length)return this.computeElementwiseOpOutputShape(e,t);if(0===e.length)return t;for(var n=t.slice(0,t.length-e.length),r=0;r<e.length;++r){var i=t[t.length-e.length+r],a=e[r];if(null==i||null==a||i<0||a<0)n.push(null);else if(1===i)n.push(a);else if(1===a)n.push(i);else{if(i!==a)throw new _("Operands could not be broadcast together with shapes "+JSON.stringify(t)+" "+JSON.stringify(e));n.push(i)}}return n},e.prototype.build=function(t){if(Array.isArray(t)&&!Array.isArray(t[0])&&(t=[Yt(t)]),(t=t).length<2)throw new _("A merge layer should be called on an Array of at least 2 inputs. Got "+t.length+" input(s).");for(var e=[],n=0,r=t;n<r.length;n++)null!=(o=r[n])&&null!==o[0]&&e.push(o[0]);if((e=A(e)).length>1)throw new _("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(t)+".");for(var i=null==t[0]?null:t[0].slice(1),a=1;a<t.length;++a){var o=null==t[a]?null:t[a].slice(1);i=this.computeElementwiseOpOutputShape(i,o)}var s=t.map(function(t){return t.length});-1===t.indexOf(null)&&1===A(s).length?this.reshapeRequired=!1:this.reshapeRequired=!0},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){if(t=t,n.reshapeRequired){var e=[],i=t.map(function(t){return t.rank});if(-1===i.indexOf(null)){for(var a=ct(i),o=0,s=t;o<s.length;o++){for(var u=(p=s[o]).rank,l=0;l<a-u;++l)p=pt(p,1);e.push(p)}return n.mergeFunction(e)}for(var c=!1,f=0,h=t;f<h.length;f++){var p;if(null==(u=(p=h[f]).rank)){var d=p.shape,m=d[0],g=d.slice(1).concat([m]),v=p.reshape([m].concat(st(d.slice(1))));v=(v=Object(r.yc)(v,[1,0])).reshape(g),e.push(v),c=!0}else if(u>1){var y=ft(1,u).concat([0]);e.push(Object(r.yc)(p,y)),c=!0}else e.push(p)}var b=n.mergeFunction(e),_=b.rank;if(c)if(null==_){var x=b.shape;g=[m=x[x.length-1]].concat(x.slice(0,x.length-1)),b=Object(r.yc)(b.reshape([-1,m]),[1,0]).reshape(g)}else _>1&&(y=[_-1].concat(ft(0,_-1)),b=Object(r.yc)(b,y));return b}return n.mergeFunction(t)})},e.prototype.computeOutputShape=function(t){var e;e=null==(t=t)[0]?null:t[0].slice(1);for(var n=1;n<t.length;++n){var r=null==t[n]?null:t[n].slice(1);e=this.computeElementwiseOpOutputShape(e,r)}for(var i=[],a=0,o=t;a<o.length;a++)null!=(r=o[a])&&null!==r[0]&&i.push(r[0]);return 1===(i=A(i)).length?i.concat(e):[null].concat(e)},e}(se),mr=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.mergeFunction=function(t){return Object(r.uc)(function(){for(var e=t[0].clone(),n=1;n<t.length;++n)e=Object(r.g)(e,t[n]);return e})},e.className="Add",e}(dr);r.Tb.registerClass(mr);var gr=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.mergeFunction=function(t){return Object(r.uc)(function(){for(var e=t[0].clone(),n=1;n<t.length;++n)e=Object(r.yb)(e,t[n]);return e})},e.className="Multiply",e}(dr);r.Tb.registerClass(gr);var vr=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.mergeFunction=function(t){return Object(r.uc)(function(){for(var e=t[0].clone(),n=1;n<t.length;++n)e=Object(r.g)(e,t[n]);return Object(r.yb)(v(1/t.length),e)})},e.className="Average",e}(dr);r.Tb.registerClass(vr);var yr=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.mergeFunction=function(t){return Object(r.uc)(function(){for(var e=t[0],n=1;n<t.length;++n)e=Object(r.rb)(e,t[n]);return e})},e.className="Maximum",e}(dr);r.Tb.registerClass(yr);var br=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.mergeFunction=function(t){return Object(r.uc)(function(){for(var e=t[0],n=1;n<t.length;++n)e=Object(r.ub)(e,t[n]);return e})},e.className="Minimum",e}(dr);r.Tb.registerClass(br);var _r=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_AXIS=-1,null==e&&(e={}),n.axis=null==e.axis?n.DEFAULT_AXIS:e.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}return a(e,t),e.prototype.build=function(t){if(!Array.isArray(t)||!Array.isArray(t[0])||1===t.length)throw new _("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var e=!0,n=0,i=t=t;n<i.length;n++)if(null!=(f=i[n])){e=!1;break}if(!e){for(var a=[],o=0;o<t.length;++o){var s=t[o].slice();s.splice(this.axis,1);for(var u=!1,l=0,c=a;l<c.length;l++){var f=c[l];if(r.Bc.arraysEqual(f,s)){u=!0;break}}u||a.push(s)}if(a.length>1)throw new _("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(t))}},e.prototype.mergeFunction=function(t){var e=this;return Object(r.uc)(function(){return vt(t,e.axis)})},e.prototype.computeOutputShape=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))throw new _("A `Concatenate` layer should be called on a list of inputs.");for(var e=t,n=e[0].slice(),r=this.axis<0?n.length+this.axis:this.axis,i=0,a=e.slice(1);i<a.length;i++){var o=a[i];if(null==n[r]||null==o[r]){n[r]=null;break}n[r]+=o[r]}return n},e.prototype.getConfig=function(){var e={axis:this.axis},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="Concatenate",e}(dr);function xr(t,e,n,i,a,o){var s;if(void 0===o&&(o=.001),2===t.rank)s=Object(r.s)(t,e,n,o,a,i);else if(3===t.rank)s=Object(r.t)(t,e,n,o,a,i);else{if(4!==t.rank)throw new x("batchNormalization is not implememnted for array of rank "+t.rank+" yet");s=Object(r.u)(t,e,n,o,a,i)}return s}function wr(t,e,n,i,a){return void 0===a&&(a=.001),r.Bc.arraysEqual(i.slice().sort(),ft(0,t.rank-1))?function(t,e,n,i,a){return void 0===a&&(a=.001),Object(r.uc)(function(){var o=Object(r.wb)(t,i),s=o.mean,u=o.variance;return[xr(t,s,u,n,e,a),s,u]})}(t,e,n,i,a):function(t,e,n,i,a){return void 0===a&&(a=.001),Object(r.uc)(function(){for(var o=Object(r.wb)(t,i),s=o.mean,u=o.variance,l=[],c=0,f=ft(0,t.rank);c<f.length;c++){var h=f[c];-1!==i.indexOf(h)?l.push(1):l.push(t.shape[h])}var p=s.reshape(l),d=u.reshape(l),m=null==e?null:e.reshape(l),g=null==n?null:n.reshape(l);return[xr(t,p,d,g,m,a),s,u]})}(t,e,n,i,a)}r.Tb.registerClass(_r);var Sr=function(t){function e(e){var n=this;return null==e&&(e={}),(n=t.call(this,e)||this).supportsMasking=!0,n.axis=null==e.axis?-1:e.axis,n.momentum=null==e.momentum?.99:e.momentum,n.epsilon=null==e.epsilon?.001:e.epsilon,n.center=null==e.center||e.center,n.scale=null==e.scale||e.scale,n.betaInitializer=Ht(e.betaInitializer||"zeros"),n.gammaInitializer=Ht(e.gammaInitializer||"ones"),n.movingMeanInitializer=Ht(e.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=Ht(e.movingVarianceInitializer||"ones"),n.betaConstraint=H(e.betaConstraint),n.gammaConstraint=H(e.gammaConstraint),n.betaRegularizer=Hn(e.betaRegularizer),n.gammaRegularizer=Hn(e.gammaRegularizer),n.stepCount=0,n}return a(e,t),e.prototype.build=function(t){t=Yt(t);var e=this.axis>=0?this.axis:this.axis+t.length,n=t[e];if(null==n)throw new _("Axis "+e+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(t)+".");this.inputSpec=[new ne({ndim:t.length,axes:(r={},r[e]=n,r)})];var r,i=[n];this.scale&&(this.gamma=this.addWeight("gamma",i,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",i,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",i,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",i,null,this.movingVarianceInitializer,null,!1),this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var i=null!=e.training&&e.training,a=Xt(t),o=a.shape,s=o.length,u=ft(0,s),l=n.axis>=0?n.axis:n.axis+s;u.splice(l,1);var c=S(1,s);c[l]=o[l];var f=u.slice();f.sort();var h=!r.Bc.arraysEqual(f,ft(0,s).slice(0,s-1));if(!i)return function(){if(h){var t=n.movingMean.read().reshape(c),e=n.movingVariance.read().reshape(c),r=n.center?n.beta.read().reshape(c):null,i=n.scale?n.gamma.read().reshape(c):null;return xr(a,t,e,r,i,n.epsilon)}return xr(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var p=wr(a,n.gamma.read(),n.beta.read(),u,n.epsilon),d=p[0],m=p[1],g=p[2],y=st(u.map(function(t){return a.shape[t]})),b=g.mul(v(y/(y-(1+n.epsilon))));return function(){n.stepCount++;var t=Object(r.xb)(n.movingMean.read(),m,n.momentum,n.stepCount);n.movingMean.write(t);var e=Object(r.xb)(n.movingVariance.read(),b,n.momentum,n.stepCount);n.movingVariance.write(e)}(),d})},e.prototype.getConfig=function(){var e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Gt(this.betaInitializer),gammaInitializer:Gt(this.gammaInitializer),movingMeanInitializer:Gt(this.movingMeanInitializer),movingVarianceInitializer:Gt(this.movingVarianceInitializer),betaRegularizer:Wn(this.betaRegularizer),gammaRegularizer:Wn(this.gammaRegularizer),betaConstraint:W(this.betaConstraint),gammaConstraint:W(this.gammaConstraint)},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="BatchNormalization",e}(se);r.Tb.registerClass(Sr);var Er=function(t){function e(e){var n=this;if(null==e&&(e={}),(n=t.call(this,e)||this).dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,null==e.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof e.padding)n.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,2!==e.padding.length)throw new _("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+e.padding.length+" array.");var r=void 0,i=void 0;if("number"==typeof e.padding[0])r=[e.padding[0],e.padding[0]],i=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,2!==e.padding[0].length)throw new _("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+e.padding[0].length+" array.");if(r=e.padding[0],2!==e.padding[1].length)throw new _("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+e.padding[1].length+" array.");i=e.padding[1]}n.padding=[r,i]}return n.inputSpec=[new ne({ndim:4})],n}return a(e,t),e.prototype.computeOutputShape=function(t){var e,n;return t=Yt(t),"channelsFirst"===this.dataFormat?(e=null!=t[2]&&t[2]>=0?t[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[3]&&t[3]>=0?t[3]+this.padding[1][0]+this.padding[1][1]:null,[t[0],t[1],e,n]):(e=null!=t[1]&&t[1]>=0?t[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=t[2]&&t[2]>=0?t[2]+this.padding[1][0]+this.padding[1][1]:null,[t[0],e,n,t[3]])},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){return function(t,e,n){return Object(r.uc)(function(){if(4!==t.rank)throw new _("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(null==e&&(e=[[1,1],[1,1]]),2!==e.length||2!==e[0].length||2!==e[1].length)throw new _("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==n&&(n="channelsLast"),"channelsLast"!==n&&"channelsFirst"!==n)throw new _("Unknown data format: "+n+". Supported data formats are 'channelsLast' and 'channelsFirst.");var i;return i="channelsFirst"===n?[[0,0],[0,0],e[0],e[1]]:[[0,0],e[0],e[1],[0,0]],Object(r.Gb)(t,i)})}(Xt(t),n.padding,n.dataFormat)})},e.prototype.getConfig=function(){var e={padding:this.padding,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="ZeroPadding2D",e}(se);function kr(t,e,n,i,a,o){return Object(r.uc)(function(){var s;X(a),function(t){D(Z,"PoolMode",t)}(o),J(i),null==n&&(n=[1,1]),null==i&&(i="valid"),null==a&&(a="channelsLast"),null==o&&(o="max"),t=Yn(t,a);var u="same"===i?"same":"valid";return s="max"===o?Object(r.qb)(t,e,n,u):Object(r.q)(t,e,n,u),"channelsFirst"===a&&(s=Object(r.yc)(s,[0,3,1,2])),s})}r.Tb.registerClass(Er);var Tr=function(t){function e(e){var n=this;if(null==e.poolSize&&(e.poolSize=2),n=t.call(this,e)||this,"number"==typeof e.poolSize)n.poolSize=[e.poolSize];else{if(!Array.isArray(e.poolSize)||1!==e.poolSize.length||"number"!=typeof e.poolSize[0])throw new _("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.poolSize));n.poolSize=e.poolSize}if(null==e.strides)n.strides=n.poolSize;else if("number"==typeof e.strides)n.strides=[e.strides];else{if(!Array.isArray(e.strides)||1!==e.strides.length||"number"!=typeof e.strides[0])throw new _("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(e.strides));n.strides=e.strides}return n.padding=null==e.padding?"valid":e.padding,J(n.padding),n.inputSpec=[new ne({ndim:3})],n}return a(e,t),e.prototype.computeOutputShape=function(t){var e=Kn((t=Yt(t))[1],this.poolSize[0],this.padding,this.strides[0]);return[t[0],e,t[2]]},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){n.invokeCallHook(t,e),t=pt(Xt(t),2);var i=n.poolingFunction(Xt(t),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return Object(r.kc)(i,[2])})},e.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(se),Pr=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return X(i),J(r),kr(t,e,n,r,i,"max")},e.className="MaxPooling1D",e}(Tr);r.Tb.registerClass(Pr);var Mr=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return X(i),J(r),kr(t,e,n,r,i,"avg")},e.className="AveragePooling1D",e}(Tr);r.Tb.registerClass(Mr);var Cr=function(t){function e(e){var n=this;if(null==e.poolSize&&(e.poolSize=[2,2]),(n=t.call(this,e)||this).poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],null==e.strides)n.strides=n.poolSize;else if(Array.isArray(e.strides)){if(2!==e.strides.length)throw new _("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+e.strides.length+".");n.strides=e.strides}else n.strides=[e.strides,e.strides];return n.padding=null==e.padding?"valid":e.padding,n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,X(n.dataFormat),J(n.padding),n.inputSpec=[new ne({ndim:4})],n}return a(e,t),e.prototype.computeOutputShape=function(t){t=Yt(t);var e="channelsFirst"===this.dataFormat?t[2]:t[1],n="channelsFirst"===this.dataFormat?t[3]:t[2];return e=Kn(e,this.poolSize[0],this.padding,this.strides[0]),n=Kn(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[t[0],t[1],e,n]:[t[0],e,n,t[3]]},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){return n.invokeCallHook(t,e),n.poolingFunction(Xt(t),n.poolSize,n.strides,n.padding,n.dataFormat)})},e.prototype.getConfig=function(){var e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(se),Or=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return X(i),J(r),kr(t,e,n,r,i,"max")},e.className="MaxPooling2D",e}(Cr);r.Tb.registerClass(Or);var Ir=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.poolingFunction=function(t,e,n,r,i){return X(i),J(r),kr(t,e,n,r,i,"avg")},e.className="AveragePooling2D",e}(Cr);r.Tb.registerClass(Ir);var Nr=function(t){function e(e){var n=t.call(this,e)||this;return n.inputSpec=[new ne({ndim:3})],n}return a(e,t),e.prototype.computeOutputShape=function(t){return[t[0],t[2]]},e.prototype.call=function(t,e){throw new x},e}(se),Ar=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.call=function(t,e){return Object(r.uc)(function(){var e=Xt(t);return Object(r.sb)(e,1)})},e.className="GlobalAveragePooling1D",e}(Nr);r.Tb.registerClass(Ar);var Rr=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.call=function(t,e){return Object(r.uc)(function(){var e=Xt(t);return Object(r.pb)(e,1)})},e.className="GlobalMaxPooling1D",e}(Nr);r.Tb.registerClass(Rr);var Dr=function(t){function e(e){var n=t.call(this,e)||this;return n.dataFormat=null==e.dataFormat?"channelsLast":e.dataFormat,X(n.dataFormat),n.inputSpec=[new ne({ndim:4})],n}return a(e,t),e.prototype.computeOutputShape=function(t){return t=t,"channelsLast"===this.dataFormat?[t[0],t[3]]:[t[0],t[1]]},e.prototype.call=function(t,e){throw new x},e.prototype.getConfig=function(){var e={dataFormat:this.dataFormat},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e}(se),jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var e=Xt(t);return"channelsLast"===n.dataFormat?Object(r.sb)(e,[1,2]):Object(r.sb)(e,[2,3])})},e.className="GlobalAveragePooling2D",e}(Dr);r.Tb.registerClass(jr);var Lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var e=Xt(t);return"channelsLast"===n.dataFormat?Object(r.pb)(e,[1,2]):Object(r.pb)(e,[2,3])})},e.className="GlobalMaxPooling2D",e}(Dr);function Fr(t,e,n,r){if(Array.isArray(t)){if(null!=e||null!=n)throw new _("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function i(t){return null==t||Array.isArray(t)?t:[t]}return{inputs:t,initialState:e=i(e),constants:n=i(n)}}function zr(t,e,n,i,a,o,s,u){void 0===i&&(i=!1),void 0===s&&(s=!1),void 0===u&&(u=!1);var l=e.shape.length;if(l<3)throw new _("Input should be at least 3D, but is "+l+"D.");var c,f,h=[1,0].concat(ft(2,l));if(e=Object(r.yc)(e,h),null!=a)throw new x("The rnn() function of the deeplearn.js backend does not support masking yet.");if(null!=o)throw new x("The rnn() functoin of the deeplearn.js backend does not support constants yet.");s&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),i&&(e=Object(r.Ob)(e,0));for(var p=n,d=e.shape[0],m=function(n){var i=dt(e,n,1);i=i.reshape(i.shape.slice(1));var a=Object(r.uc)(function(){return t(i,p)});if(f=a[0],u)if(0===n)c=f.expandDims(1);else{var o=Object(r.z)([c,f.expandDims(1)],1);c.dispose(),c=o}p=a[1]},g=0;g<d;++g)m(g);return[f,c,p]}r.Tb.registerClass(Lr);var Br=function(t){function e(e){var n,r=t.call(this,e)||this;if(null==e.cell)throw new _("cell property is missing for the constructor of RNN.");if(null==(n=Array.isArray(e.cell)?new Kr({cells:e.cell}):e.cell).stateSize)throw new _("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return r.cell=n,r.returnSequences=null!=e.returnSequences&&e.returnSequences,r.returnState=null!=e.returnState&&e.returnState,r.goBackwards=null!=e.goBackwards&&e.goBackwards,r._stateful=null!=e.stateful&&e.stateful,r.unroll=null!=e.unroll&&e.unroll,r.supportsMasking=!0,r.inputSpec=[new ne({ndim:3})],r.stateSpec=null,r.states=null,r.numConstants=null,r.keptStates=[],r}return a(e,t),e.prototype.getStates=function(){return null==this.states?ft(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map(function(t){return null}):this.states},e.prototype.setStates=function(t){this.states=t},e.prototype.computeOutputShape=function(t){$t(t)&&(t=t[0]),t=t;var e=this.cell.stateSize;Array.isArray(e)||(e=[e]);var n,r=e[0];if(n=this.returnSequences?[t[0],t[1],r]:[t[0],r],this.returnState){for(var i=[],a=0,o=e;a<o.length;a++){var s=o[a];i.push([t[0],s])}return[n].concat(i)}return n},e.prototype.computeMask=function(t,e){throw new x("computeMask has not been implemented for RNN yet")},e.prototype.build=function(t){if(null!=this.numConstants)throw new x("Constants support is not implemented in RNN yet.");$t(t)&&(t=t[0]),t=t;var e=this.stateful?t[0]:null,n=t[t.length-1];this.inputSpec[0]=new ne({shape:[e,null,n]});var i,a=[t[0]].concat(t.slice(2));if(this.cell.build(a),i=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!r.Bc.arraysEqual(this.stateSpec.map(function(t){return t.shape[t.shape.length-1]}),i))throw new _("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=i.map(function(t){return new ne({shape:[null,t]})});this.stateful&&this.resetStates()},e.prototype.resetStates=function(t){var e=this;Object(r.uc)(function(){if(!e.stateful)throw new y("Cannot call resetStates() on an RNN Layer that is not stateful.");var n=e.inputSpec[0].shape[0];if(null==n)throw new _("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==e.states)Array.isArray(e.cell.stateSize)?e.states=e.cell.stateSize.map(function(t){return Object(r.Gc)([n,t])}):e.states=[Object(r.Gc)([n,e.cell.stateSize])];else if(null==t)Object(r.K)(e.states),null!=e.keptStates&&(Object(r.K)(e.keptStates),e.keptStates=[]),Array.isArray(e.cell.stateSize)?e.states=e.cell.stateSize.map(function(t){return Object(r.Gc)([n,t])}):e.states[0]=Object(r.Gc)([n,e.cell.stateSize]);else{if(e.keptStates.push(e.states.slice()),Array.isArray(t)||(t=[t]),t.length!==e.states.length)throw new _("Layer "+e.name+" expects "+e.states.length+" state(s), but it received "+t.length+" state value(s). Input received: "+t);for(var i=0;i<e.states.length;++i){var a=t[i],o=Array.isArray(e.cell.stateSize)?e.cell.stateSize[i]:e.cell.stateSize,s=[n,o];if(!r.Bc.arraysEqual(a.shape,s))throw new _("State "+i+" is incompatible with layer "+e.name+": expected shape="+s+", received shape="+a.shape);e.states[i]=a}}e.states.forEach(function(t){return Object(r.cb)(t)})})},e.prototype.apply=function(e,n){var r=null==n?null:n.initialState,i=null==n?null:n.constants;null==n&&(n={});var a=Fr(e,r,i,this.numConstants);e=a.inputs,r=a.initialState,i=a.constants;var o=[],s=[];if(null!=r){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(var u=0,l=r;u<l.length;u++){var c=l[u];this.stateSpec.push(new ne({shape:c.shape}))}s=s.concat(this.stateSpec)}if(null!=i&&(n.constants=i,o=o.concat(i),this.numConstants=i.length),o[0]instanceof re){var f=[e].concat(o),h=this.inputSpec.concat(s),p=this.inputSpec;this.inputSpec=h;var d=t.prototype.apply.call(this,f,n);return this.inputSpec=p,d}return t.prototype.apply.call(this,e,n)},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var r=null==e?null:e.mask,i=null==e?null:e.training,a=null==e?null:e.initialState;if(t=Xt(t),null==a&&(a=n.stateful?n.states:n.getInitialState(t)),null!=r)throw new x("Masking is not implemented for RNN yet");var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(a.length!==o)throw new _("RNN Layer has "+o+" state(s) but was passed "+a.length+" initial state(s).");n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:i},u=zr(function(t,e){var r=n.cell.call([t].concat(e),s);return[r[0],r.slice(1)]},t,a,n.goBackwards,null,null,n.unroll,n.returnSequences),l=u[0],c=u[1],f=u[2];n.stateful&&n.resetStates(f);var h=n.returnSequences?c:l;return n.returnState?[h].concat(f):h})},e.prototype.getInitialState=function(t){var e=this;return Object(r.uc)(function(){var n=Object(r.Gc)(t.shape);return n=pt(n=Object(r.pc)(n,[1,2])),Array.isArray(e.cell.stateSize)?e.cell.stateSize.map(function(t){return t>1?bt(n,[1,t]):n}):e.cell.stateSize>1?[bt(n,[1,e.cell.stateSize])]:[n]})},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.trainable?this.cell.trainableWeights:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(e.numConstants=this.numConstants);var n=this.cell.getConfig();e.cell={className:this.cell.getClassName(),config:n};var r=t.prototype.getConfig.call(this);return Object.assign(e,r),e},e.className="RNN",e}(se);r.Tb.registerClass(Br);var Ur=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(se),Vr=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,n.activation=Dn(null==e.activation?n.DEFAULT_ACTIVATION:e.activation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=Ht(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=Ht(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=Ht(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Hn(e.kernelRegularizer),n.recurrentRegularizer=Hn(e.recurrentRegularizer),n.biasRegularizer=Hn(e.biasRegularizer),n.kernelConstraint=H(e.kernelConstraint),n.recurrentConstraint=H(e.recurrentConstraint),n.biasConstraint=H(e.biasConstraint),n.dropout=lt([1,ct([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=lt([1,ct([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return a(e,t),e.prototype.build=function(t){t=Yt(t),this.kernel=this.addWeight("kernel",[t[t.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){if(2!==(t=t).length)throw new _("SimpleRNNCell expects 2 input Tensors, got "+t.length+".");var i=t[1];t=t[0];var a,o=null!=e.training&&e.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Xr(function(){return Object(r.Fb)(t)},n.dropout,o)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Xr(function(){return Object(r.Fb)(i)},n.recurrentDropout,o));var s=n.dropoutMask,u=n.recurrentDropoutMask;a=xt(null!=s?Object(r.yb)(t,s):t,n.kernel.read()),null!=n.bias&&(a=Et(a,n.bias.read())),null!=u&&(i=Object(r.yb)(i,u));var l=Object(r.g)(a,xt(i,n.recurrentKernel.read()));return null!=n.activation&&(l=n.activation.apply(l)),[l,l]})},e.prototype.getConfig=function(){var e={units:this.units,activation:An(this.activation),useBias:this.useBias,kernelInitializer:Gt(this.kernelInitializer),recurrentInitializer:Gt(this.recurrentInitializer),biasInitializer:Gt(this.biasInitializer),kernelRegularizer:Wn(this.kernelRegularizer),recurrentRegularizer:Wn(this.recurrentRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:W(this.kernelConstraint),recurrentConstraint:W(this.recurrentConstraint),biasConstraint:W(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="SimpleRNNCell",e}(Ur);r.Tb.registerClass(Vr);var qr=function(t){function e(e){return e.cell=new Vr(e),t.call(this,e)||this}return a(e,t),e.prototype.call=function(e,n){var i=this;return Object(r.uc)(function(){null!=i.cell.dropoutMask&&(Object(r.K)(i.cell.dropoutMask),i.cell.dropoutMask=null),null!=i.cell.recurrentDropoutMask&&(Object(r.K)(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,o=null==n?null:n.training,s=null==n?null:n.initialState;return t.prototype.call.call(i,e,{mask:a,training:o,initialState:s})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:An(this.activation),useBias:this.useBias,kernelInitializer:Gt(this.kernelInitializer),recurrentInitializer:Gt(this.recurrentInitializer),biasInitializer:Gt(this.biasInitializer),kernelRegularizer:Wn(this.kernelRegularizer),recurrentRegularizer:Wn(this.recurrentRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:W(this.kernelConstraint),recurrentConstraint:W(this.recurrentConstraint),biasConstraint:W(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.className="SimpleRNN",e}(Br);r.Tb.registerClass(qr);var Wr=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,n.activation=Dn(void 0===e.activation?n.DEFAULT_ACTIVATION:e.activation),n.recurrentActivation=Dn(void 0===e.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=Ht(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=Ht(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=Ht(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=Hn(e.kernelRegularizer),n.recurrentRegularizer=Hn(e.recurrentRegularizer),n.biasRegularizer=Hn(e.biasRegularizer),n.kernelConstraint=H(e.kernelConstraint),n.recurrentConstraint=H(e.recurrentConstraint),n.biasConstraint=H(e.biasConstraint),n.dropout=lt([1,ct([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=lt([1,ct([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.implementation=e.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}return a(e,t),e.prototype.build=function(t){var e=(t=Yt(t))[t.length-1];this.kernel=this.addWeight("kernel",[e,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){if(2!==(t=t).length)throw new _("GRUCell expects 2 input Tensors (inputs, h, c), got "+t.length+".");var i=null!=e.training&&e.training,a=t[1];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Xr(function(){return Object(r.Fb)(t)},n.dropout,i,3)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Xr(function(){return Object(r.Fb)(a)},n.recurrentDropout,i,3));var o,s,u,l=n.dropoutMask,c=n.recurrentDropoutMask;if(1===n.implementation){var f=mt(n.kernel.read(),0,n.units),h=mt(n.kernel.read(),n.units,n.units),p=mt(n.kernel.read(),2*n.units,n.units),d=mt(n.recurrentKernel.read(),0,n.units),m=mt(n.recurrentKernel.read(),n.units,n.units),g=mt(n.recurrentKernel.read(),2*n.units,n.units),y=void 0,b=void 0,x=void 0;0<n.dropout&&n.dropout<1?(y=Object(r.yb)(t,l[0]),b=Object(r.yb)(t,l[1]),x=Object(r.yb)(t,l[2])):(y=t,b=t,x=t);var w=xt(y,f),S=xt(b,h),E=xt(x,p);if(n.useBias){var k=dt(n.bias.read(),0,n.units),T=dt(n.bias.read(),n.units,n.units),P=dt(n.bias.read(),2*n.units,n.units);w=Et(w,k),S=Et(S,T),E=Et(E,P)}var M=void 0,C=void 0,O=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(M=Object(r.yb)(a,c[0]),C=Object(r.yb)(a,c[1]),O=Object(r.yb)(a,c[2])):(M=a,C=a,O=a),o=n.recurrentActivation.apply(Object(r.g)(w,xt(M,d))),s=n.recurrentActivation.apply(Object(r.g)(S,xt(C,m))),u=n.activation.apply(Object(r.g)(E,xt(Object(r.yb)(s,O),g)))}else{0<n.dropout&&n.dropout<1&&(t=Object(r.yb)(t,l[0]));var I=xt(t,n.kernel.read());n.useBias&&(I=Et(I,n.bias.read())),0<n.dropout&&n.dropout<1&&(a=Object(r.yb)(a,c[0]));var N=xt(a,mt(n.recurrentKernel.read(),0,2*n.units)),A=(w=mt(I,0,n.units),S=mt(I,n.units,n.units),mt(N,0,n.units)),R=mt(N,n.units,n.units);o=n.recurrentActivation.apply(Object(r.g)(w,A)),s=n.recurrentActivation.apply(Object(r.g)(S,R)),E=mt(I,2*n.units,n.units);var D=xt(Object(r.yb)(s,a),mt(n.recurrentKernel.read(),2*n.units,n.units));u=n.activation.apply(Object(r.g)(E,D))}var j=Object(r.g)(Object(r.yb)(o,a),Object(r.yb)(Object(r.g)(v(1),Object(r.Ab)(o)),u));return[j,j]})},e.prototype.getConfig=function(){var e={units:this.units,activation:An(this.activation),recurrentActivation:An(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Gt(this.kernelInitializer),recurrentInitializer:Gt(this.recurrentInitializer),biasInitializer:Gt(this.biasInitializer),kernelRegularizer:Wn(this.kernelRegularizer),recurrentRegularizer:Wn(this.recurrentRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:W(this.kernelConstraint),recurrentConstraint:W(this.recurrentConstraint),biasConstraint:W(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="GRUCell",e}(Ur);r.Tb.registerClass(Wr);var Gr=function(t){function e(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Wr(e),t.call(this,e)||this}return a(e,t),e.prototype.call=function(e,n){var i=this;return Object(r.uc)(function(){null!=i.cell.dropoutMask&&(Object(r.K)(i.cell.dropoutMask),i.cell.dropoutMask=null),null!=i.cell.recurrentDropoutMask&&(Object(r.K)(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,o=null==n?null:n.training,s=null==n?null:n.initialState;return t.prototype.call.call(i,e,{mask:a,training:o,initialState:s})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:An(this.activation),recurrentActivation:An(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Gt(this.kernelInitializer),recurrentInitializer:Gt(this.recurrentInitializer),biasInitializer:Gt(this.biasInitializer),kernelRegularizer:Wn(this.kernelRegularizer),recurrentRegularizer:Wn(this.recurrentRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:W(this.kernelConstraint),recurrentConstraint:W(this.recurrentConstraint),biasConstraint:W(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},e.className="GRU",e}(Br);r.Tb.registerClass(Gr);var Hr=function(t){function e(e){var n=t.call(this,e)||this;return n.DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=e.units,n.activation=Dn(void 0===e.activation?n.DEFAULT_ACTIVATION:e.activation),n.recurrentActivation=Dn(void 0===e.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),n.useBias=null==e.useBias||e.useBias,n.kernelInitializer=Ht(e.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=Ht(e.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=Ht(e.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=e.unitForgetBias,n.kernelRegularizer=Hn(e.kernelRegularizer),n.recurrentRegularizer=Hn(e.recurrentRegularizer),n.biasRegularizer=Hn(e.biasRegularizer),n.kernelConstraint=H(e.kernelConstraint),n.recurrentConstraint=H(e.recurrentConstraint),n.biasConstraint=H(e.biasConstraint),n.dropout=lt([1,ct([0,null==e.dropout?0:e.dropout])]),n.recurrentDropout=lt([1,ct([0,null==e.recurrentDropout?0:e.recurrentDropout])]),n.implementation=e.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}return a(e,t),e.prototype.build=function(t){var e,n,r=(t=Yt(t))[t.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var i=this.biasInitializer,o=this.units;e=new((n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.apply=function(t,e){var n=i.apply([o]),r=(new It).apply([o]),a=i.apply([2*o]);return yt(yt(n,r),a)},e}(Ct)).className="CustomInit",n)}else e=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,e,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){var i=null!=e.training&&e.training;if(3!==(t=t).length)throw new _("LSTMCell expects 3 input Tensors (inputs, h, c), got "+t.length+".");var a=t[1],o=t[2];t=t[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=Xr(function(){return Object(r.Fb)(t)},n.dropout,i,4)),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=Xr(function(){return Object(r.Fb)(a)},n.recurrentDropout,i,4));var s,u,l,c,f=n.dropoutMask,h=n.recurrentDropoutMask;if(1===n.implementation){var p=mt(n.kernel.read(),0,n.units),d=mt(n.kernel.read(),n.units,n.units),m=mt(n.kernel.read(),2*n.units,n.units),g=mt(n.kernel.read(),3*n.units,n.units),v=mt(n.recurrentKernel.read(),0,n.units),y=mt(n.recurrentKernel.read(),n.units,n.units),b=mt(n.recurrentKernel.read(),2*n.units,n.units),x=mt(n.recurrentKernel.read(),3*n.units,n.units),w=void 0,S=void 0,E=void 0,k=void 0;0<n.dropout&&n.dropout<1?(w=Object(r.yb)(t,f[0]),S=Object(r.yb)(t,f[1]),E=Object(r.yb)(t,f[2]),k=Object(r.yb)(t,f[3])):(w=t,S=t,E=t,k=t);var T=xt(w,p),P=xt(S,d),M=xt(E,m),C=xt(k,g);if(n.useBias){var O=dt(n.bias.read(),0,n.units),I=dt(n.bias.read(),n.units,n.units),N=dt(n.bias.read(),2*n.units,n.units),A=dt(n.bias.read(),3*n.units,n.units);T=Et(T,O),P=Et(P,I),M=Et(M,N),C=Et(C,A)}var R=void 0,D=void 0,j=void 0,L=void 0;0<n.recurrentDropout&&n.recurrentDropout<1?(R=Object(r.yb)(a,h[0]),D=Object(r.yb)(a,h[1]),j=Object(r.yb)(a,h[2]),L=Object(r.yb)(a,h[3])):(R=a,D=a,j=a,L=a),s=n.recurrentActivation.apply(Object(r.g)(T,xt(R,v))),u=n.recurrentActivation.apply(Object(r.g)(P,xt(D,y))),l=Object(r.g)(Object(r.yb)(u,o),Object(r.yb)(s,n.activation.apply(Object(r.g)(M,xt(j,b))))),c=n.recurrentActivation.apply(Object(r.g)(C,xt(L,x)))}else{0<n.dropout&&n.dropout<1&&(t=Object(r.yb)(t,f[0]));var F=xt(t,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=Object(r.yb)(a,h[0])),F=Object(r.g)(F,xt(a,n.recurrentKernel.read())),n.useBias&&(F=Et(F,n.bias.read()));var z=mt(F,0,n.units),B=mt(F,n.units,n.units),U=mt(F,2*n.units,n.units),V=mt(F,3*n.units,n.units);s=n.recurrentActivation.apply(z),u=n.recurrentActivation.apply(B),l=Object(r.g)(Object(r.yb)(u,o),Object(r.yb)(s,n.activation.apply(U))),c=n.recurrentActivation.apply(V)}var q=Object(r.yb)(c,n.activation.apply(l));return[q,q,l]})},e.prototype.getConfig=function(){var e={units:this.units,activation:An(this.activation),recurrentActivation:An(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Gt(this.kernelInitializer),recurrentInitializer:Gt(this.recurrentInitializer),biasInitializer:Gt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Wn(this.kernelRegularizer),recurrentRegularizer:Wn(this.recurrentRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:W(this.kernelConstraint),recurrentConstraint:W(this.recurrentConstraint),biasConstraint:W(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.className="LSTMCell",e}(Ur);r.Tb.registerClass(Hr);var $r=function(t){function e(e){return 0===e.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new Hr(e),t.call(this,e)||this}return a(e,t),e.prototype.call=function(e,n){var i=this;return Object(r.uc)(function(){null!=i.cell.dropoutMask&&(Object(r.K)(i.cell.dropoutMask),i.cell.dropoutMask=null),null!=i.cell.recurrentDropoutMask&&(Object(r.K)(i.cell.recurrentDropoutMask),i.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,o=null==n?null:n.training,s=null==n?null:n.initialState;return t.prototype.call.call(i,e,{mask:a,training:o,initialState:s})})},Object.defineProperty(e.prototype,"units",{get:function(){return this.cell.units},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activation",{get:function(){return this.cell.activation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentActivation",{get:function(){return this.cell.recurrentActivation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBias",{get:function(){return this.cell.useBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelInitializer",{get:function(){return this.cell.kernelInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentInitializer",{get:function(){return this.cell.recurrentInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasInitializer",{get:function(){return this.cell.biasInitializer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unitForgetBias",{get:function(){return this.cell.unitForgetBias},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelRegularizer",{get:function(){return this.cell.kernelRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentRegularizer",{get:function(){return this.cell.recurrentRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasRegularizer",{get:function(){return this.cell.biasRegularizer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"kernelConstraint",{get:function(){return this.cell.kernelConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentConstraint",{get:function(){return this.cell.recurrentConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"biasConstraint",{get:function(){return this.cell.biasConstraint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropout",{get:function(){return this.cell.dropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recurrentDropout",{get:function(){return this.cell.recurrentDropout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"implementation",{get:function(){return this.cell.implementation},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={units:this.units,activation:An(this.activation),recurrentActivation:An(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Gt(this.kernelInitializer),recurrentInitializer:Gt(this.recurrentInitializer),biasInitializer:Gt(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:Wn(this.kernelRegularizer),recurrentRegularizer:Wn(this.recurrentRegularizer),biasRegularizer:Wn(this.biasRegularizer),activityRegularizer:Wn(this.activityRegularizer),kernelConstraint:W(this.kernelConstraint),recurrentConstraint:W(this.recurrentConstraint),biasConstraint:W(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation},n=t.prototype.getConfig.call(this);return delete n.cell,Object.assign(e,n),e},e.fromConfig=function(t,e){return 0===e.implmentation&&(e.implementation=1),new t(e)},e.className="LSTM",e}(Br);r.Tb.registerClass($r);var Kr=function(t){function e(e){var n=t.call(this,e)||this;return n.cells=e.cells,n}return a(e,t),Object.defineProperty(e.prototype,"stateSize",{get:function(){for(var t=[],e=0,n=this.cells.slice().reverse();e<n.length;e++){var r=n[e];Array.isArray(r.stateSize)?t.push.apply(t,r.stateSize):t.push(r.stateSize)}return t},enumerable:!0,configurable:!0}),e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){for(var r=(t=t).slice(1),i=[],a=0,o=n.cells.slice().reverse();a<o.length;a++){var s=o[a];Array.isArray(s.stateSize)?i.push(r.splice(0,s.stateSize.length)):i.push(r.splice(0,1))}i.reverse();for(var u,l=[],c=0;c<n.cells.length;++c)s=n.cells[c],r=i[c],u=0===c?[t[0]].concat(r):[u[0]].concat(r),u=s.call(u,e),l.push(u.slice(1));r=[];for(var f=0,h=l.slice().reverse();f<h.length;f++){var p=h[f];r.push.apply(r,p)}return[u[0]].concat(r)})},e.prototype.build=function(t){var e;$t(t)&&(t=t[0]),t=t;for(var n=0,r=this.cells;n<r.length;n++){var i=r[n];i.build(t),e=Array.isArray(i.stateSize)?i.stateSize[0]:i.stateSize,t=[t[0],e]}this.built=!0},e.prototype.getConfig=function(){for(var e=[],n=0,r=this.cells;n<r.length;n++){var i=r[n];e.push({className:this.getClassName(),config:i.getConfig()})}var a={cells:e},o=t.prototype.getConfig.call(this);return Object.assign(a,o),a},e.fromConfig=function(t,e,n){void 0===n&&(n={});for(var r=[],i=0,a=e.cells;i<a.length;i++){var o=a[i];r.push(tn(o,n))}return new t({cells:r})},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){if(!this.trainable)return[];for(var t=[],e=0,n=this.cells;e<n.length;e++){var r=n[e];t.push.apply(t,r.trainableWeights)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){for(var t=[],e=0,n=this.cells;e<n.length;e++){var r=n[e];t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var i=[],a=0,o=this.cells;a<o.length;a++)r=o[a],i.push.apply(i,r.trainableWeights);return i.concat(t)}return t},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){for(var t=[],e=0,n=this.cells;e<n.length;e++){var r=n[e];t.push.apply(t,r.weights)}return te(t)},e.prototype.setWeights=function(t){for(var e=[],n=0,r=this.cells;n<r.length;n++)for(var i=r[n],a=i.weights.length,o=t.splice(a),s=0;s<i.weights.length;++s)e.push([i.weights[s],o[s]]);ee(e)},e.className="StackedRNNCells",e}(Ur);function Xr(t,e,n,i){function a(){return kt(t(),v(e))}if(void 0===n&&(n=null),void 0===i&&(i=1),i>1){for(var o=[],s=0;s<i;s++)o.push(Tt(a,t,n));return o.forEach(function(t){return Object(r.cb)(t)}),o}return Object(r.cb)(Tt(a,t,n))}r.Tb.registerClass(Kr);var Yr=function(t){function e(e){var n=t.call(this,e)||this;return n.layer=e.layer,n}return a(e,t),e.prototype.build=function(t){this.built=!0},Object.defineProperty(e.prototype,"trainable",{get:function(){return null!=this.layer&&this.layer.trainable},set:function(t){null!=this.layer&&(this.layer.trainable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.layer.trainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.layer.nonTrainableWeights},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updates",{get:function(){return this.layer._updates},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"losses",{get:function(){return this.layer.losses},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.layer.getWeights()},e.prototype.setWeights=function(t){this.layer.setWeights(t)},e.prototype.getConfig=function(){var e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.fromConfig=function(t,e,n){void 0===n&&(n={});var r=tn(e.layer,n);delete e.layer;var i={layer:r};return Object.assign(i,e),new t(i)},e}(se),Jr=function(t){function e(e){var n=t.call(this,e)||this;return n.supportsMasking=!0,n}return a(e,t),e.prototype.build=function(e){if((e=Yt(e)).length<3)throw new _("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(e));this.inputSpec=[{shape:e}];var n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),t.prototype.build.call(this,e)},e.prototype.computeOutputShape=function(t){var e=[(t=Yt(t))[0]].concat(t.slice(2)),n=this.layer.computeOutputShape(e),r=t[1];return[n[0],r].concat(n.slice(1))},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){return zr(function(t,r){return[Xt(n.layer.call(t,e)),[]]},t=Xt(t),[],!1,null,null,!1,!0)[1]})},e.className="TimeDistributed",e}(Yr);r.Tb.registerClass(Jr);var Zr=["sum","mul","concat","ave"];var Qr=function(t){function e(e){var n=t.call(this,e)||this,r=e.layer.getConfig();if(n.forwardLayer=tn({className:e.layer.getClassName(),config:r}),r.goBackwards=!0!==r.goBackwards,n.backwardLayer=tn({className:e.layer.getClassName(),config:r}),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,function(t){D(Zr,"BidirectionalMergeMode",t)}(e.mergeMode),n.mergeMode=e.mergeMode,e.weights)throw new x("weights support is not implemented for Bidirectional layer yet.");return n._stateful=e.layer.stateful,n.returnSequences=e.layer.returnSequences,n.returnState=e.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=e.layer.inputSpec,n.numConstants=null,n}return a(e,t),Object.defineProperty(e.prototype,"trainable",{get:function(){return this._trainable},set:function(t){this._trainable=t,null!=this.forwardLayer&&(this.forwardLayer.trainable=t),null!=this.backwardLayer&&(this.backwardLayer.trainable=t)},enumerable:!0,configurable:!0}),e.prototype.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},e.prototype.setWeights=function(t){var e=t.length,n=Math.floor(e/2);this.forwardLayer.setWeights(t.slice(0,n)),this.backwardLayer.setWeights(t.slice(n))},e.prototype.computeOutputShape=function(t){var e,n,r,i=this.forwardLayer.computeOutputShape(t);return Array.isArray(i)&&Array.isArray(i[0])||(i=[i]),i=i,this.returnState?(r=i.slice(1),e=i[0]):e=i[0],e=e,"concat"===this.mergeMode?(e[e.length-1]*=2,n=[e]):n=null==this.mergeMode?[e,e.slice()]:[e],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[e].concat(r).concat(r.slice()):T(n)},e.prototype.apply=function(e,n){var r=null==n?null:n.initialState,i=null==n?null:n.constants;null==n&&(n={});var a=Fr(e,r,i,this.numConstants);if(e=a.inputs,r=a.initialState,i=a.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(null==r||0===r.length)&&null==i)return t.prototype.apply.call(this,e,n);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new _("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push.apply(o,r);var l=r.map(function(t){return new ne({shape:t.shape})});this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,l)}if(null!=i)throw new x("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof re,f=0,h=o;f<h.length;f++)if(h[f]instanceof re!==c)throw new _("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(c){var p=[e].concat(o),d=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=d;var g=t.prototype.apply.call(this,p,n);return this.inputSpec=m,g}return t.prototype.apply.call(this,e,n)},e.prototype.call=function(t,e){var n=this;return Object(r.uc)(function(){if(null!=e.mask)throw new x("The support for masking is not implemented for Bidirectional layers yet.");var i,a,o,s,u=e.initialState;if(null==u)i=n.forwardLayer.call(t,e),a=n.backwardLayer.call(t,e);else{var l=u.slice(0,u.length/2),c=u.slice(u.length/2);i=n.forwardLayer.call(t,Object.assign(e,{initialState:l})),a=n.backwardLayer.call(t,Object.assign(e,{initialState:c}))}return n.returnState&&(Array.isArray(i)&&(o=i.slice(1).concat(a.slice(1))),i=i[0],a=a[0]),n.returnSequences&&(a=Object(r.Ob)(a,1)),"concat"===n.mergeMode?s=vt([i,a]):"sum"===n.mergeMode?s=Object(r.g)(i,a):"ave"===n.mergeMode?s=Object(r.yb)(v(.5),Object(r.g)(i,a)):"mul"===n.mergeMode?s=Object(r.yb)(i,a):null==n.mergeMode&&(s=[i,a]),n.returnState?null==n.mergeMode?s.concat(o):[s].concat(o):s})},e.prototype.resetStates=function(t){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},e.prototype.build=function(t){var e=this;et(this.forwardLayer.name,function(){e.forwardLayer.build(t)}),et(this.backwardLayer.name,function(){e.backwardLayer.build(t)}),this.built=!0},Object.defineProperty(e.prototype,"trainableWeights",{get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonTrainableWeights",{get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)},enumerable:!0,configurable:!0}),e.prototype.getConfig=function(){var e={mergeMode:this.mergeMode},n=t.prototype.getConfig.call(this);return Object.assign(e,n),e},e.fromConfig=function(t,e){var n=tn(e.layer);if(delete e.layer,null!=e.numConstants)throw new x("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=e;return r.layer=n,new t(r)},e.className="Bidirectional",e}(Yr);function ti(t){return new Mr(t)}function ei(t){return new Ir(t)}function ni(t){return new Rr(t)}function ri(t){return new Lr(t)}function ii(t){return new Pr(t)}function ai(t){return new Or(t)}r.Tb.registerClass(Qr);var oi=ni,si=ri,ui=ii,li=ai;Object.freeze({inputLayer:function(t){return new ue(t)},elu:function(t){return new Fn(t)},reLU:function(t){return new jn(t)},leakyReLU:function(t){return new Ln(t)},softmax:function(t){return new Bn(t)},thresholdedReLU:function(t){return new zn(t)},conv1d:function(t){return new nr(t)},conv2d:function(t){return new Qn(t)},conv2dTranspose:function(t){return new tr(t)},separableConv2d:function(t){return new er(t)},cropping2D:function(t){return new rr(t)},upSampling2d:function(t){return new ir(t)},depthwiseConv2d:function(t){return new ar(t)},activation:function(t){return new lr(t)},dense:function(t){return new sr(t)},dropout:function(t){return new or(t)},flatten:function(t){return new ur(t)},repeatVector:function(t){return new cr(t)},reshape:function(t){return new fr(t)},permute:function(t){return new hr(t)},embedding:function(t){return new pr(t)},add:function(t){return new mr(t)},average:function(t){return new vr(t)},concatenate:function(t){return new _r(t)},maximum:function(t){return new yr(t)},minimum:function(t){return new br(t)},multiply:function(t){return new gr(t)},batchNormalization:function(t){return new Sr(t)},zeroPadding2d:function(t){return new Er(t)},averagePooling1d:ti,avgPool1d:function(t){return ti(t)},avgPooling1d:function(t){return ti(t)},averagePooling2d:ei,avgPool2d:function(t){return ei(t)},avgPooling2d:function(t){return ei(t)},globalAveragePooling1d:function(t){return new Ar(t)},globalAveragePooling2d:function(t){return new jr(t)},globalMaxPooling1d:ni,globalMaxPooling2d:ri,maxPooling1d:ii,maxPooling2d:ai,gru:function(t){return new Gr(t)},gruCell:function(t){return new Wr(t)},lstm:function(t){return new $r(t)},lstmCell:function(t){return new Hr(t)},simpleRNN:function(t){return new qr(t)},simpleRNNCell:function(t){return new Vr(t)},rnn:function(t){return new Br(t)},stackedRNNCells:function(t){return new Kr(t)},bidirectional:function(t){return new Qr(t)},timeDistributed:function(t){return new Jr(t)},globalMaxPool1d:oi,globalMaxPool2d:si,maxPool1d:ui,maxPool2d:li,Layer:se,RNN:Br,RNNCell:Ur,input:function(t){return le(t)}});Object.freeze({binaryAccuracy:function(t,e){return Re(t,e)},binaryCrossentropy:function(t,e){return ze(t,e)},categoricalAccuracy:function(t,e){return De(t,e)},categoricalCrossentropy:function(t,e){return $e(t,e)},precision:function(t,e){return Le(t,e)},recall:function(t,e){return Fe(t,e)},cosineProximity:function(t,e){return Ne(t,e)},meanAbsoluteError:function(t,e){return _e(t,e)},meanAbsolutePercentageError:function(t,e){return xe(t,e)},MAPE:function(t,e){return xe(t,e)},mape:function(t,e){return xe(t,e)},meanSquaredError:function(t,e){return be(t,e)},MSE:function(t,e){return be(t,e)},mse:function(t,e){return be(t,e)}});Object.freeze({l1l2:function(t){return new Vn(t)},l1:function(t){return function(t){return new Vn({l1:null!=t?t.l1:null,l2:0})}(t)},l2:function(t){return function(t){return new Vn({l2:null!=t?t.l2:null,l1:0})}(t)}}),function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.model=null,e}a(e,t),e.prototype.setModel=function(t){if(!(t instanceof bn))throw new Error("model must be a Model, not some other Container");this.model=t}}(fe);var ci=n(152);n.d(e,"b",function(){return r.ab}),n.d(e,"a",function(){return r.W}),n.d(e,"c",function(){return r.Qb}),n.d(e,"d",function(){return r.uc});r.Dc,ci.a},function(t,e,n){var r=n(50),i=n(16),a=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(64)?"pure":"global",copyright:"\xa9 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(36),i=n(22),a=n(72);t.exports=function(t){return function(e,n,o){var s,u=r(e),l=i(u.length),c=a(o,l);if(t&&n!=n){for(;l>c;)if((s=u[c++])!=s)return!0}else for(;l>c;c++)if((t||c in u)&&u[c]===n)return t||c||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(44);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(18),i=n(44),a=n(19)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(19)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(o){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var a=[7],s=a[r]();s.next=function(){return{done:n=!0}},a[r]=function(){return s},t(a)}catch(o){}return n}},function(t,e,n){"use strict";var r=n(14);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";var r=n(30),i=n(31),a=n(17),o=n(52),s=n(19);t.exports=function(t,e,n){var u=s(t),l=n(o,u,""[t]),c=l[0],f=l[1];a(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,c),r(RegExp.prototype,u,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)}))}},function(t,e,n){var r=n(14),i=n(27),a=n(19)("species");t.exports=function(t,e){var n,o=r(t).constructor;return void 0===o||void 0==(n=r(o)[a])?e:i(n)}},function(t,e,n){var r=n(16).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(16),i=n(1),a=n(31),o=n(78),s=n(63),u=n(77),l=n(76),c=n(18),f=n(17),h=n(126),p=n(87),d=n(167);t.exports=function(t,e,n,m,g,v){var y=r[t],b=y,_=g?"set":"add",x=b&&b.prototype,w={},S=function(t){var e=x[t];a(x,t,"delete"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(v&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return v&&!c(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(v||x.forEach&&!f(function(){(new b).entries().next()}))){var E=new b,k=E[_](v?{}:-0,1)!=E,T=f(function(){E.has(1)}),P=h(function(t){new b(t)}),M=!v&&f(function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)});P||((b=e(function(e,n){l(e,b,t);var r=d(new y,e,b);return void 0!=n&&u(n,g,r[_],r),r})).prototype=x,x.constructor=b),(T||M)&&(S("delete"),S("has"),g&&S("get")),(M||k)&&S(_),v&&x.clear&&delete x.clear}else b=m.getConstructor(e,t,g,_),o(b.prototype,n),s.NEED=!0;return p(b,t),w[t]=b,i(i.G+i.W+i.F*(b!=y),w),v||m.setStrong(b,t,g),b}},function(t,e,n){for(var r,i=n(16),a=n(30),o=n(70),s=o("typed_array"),u=o("view"),l=!(!i.ArrayBuffer||!i.DataView),c=l,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(a(r.prototype,s,!0),a(r.prototype,u,!0)):c=!1;t.exports={ABV:l,CONSTR:c,TYPED:s,VIEW:u}},function(t,e,n){"use strict";t.exports=n(64)||!n(17)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(16)[t]})},function(t,e,n){"use strict";var r=n(1);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){"use strict";var r=n(1),i=n(27),a=n(43),o=n(77);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,s,u=arguments[1];return i(this),(e=void 0!==u)&&i(u),void 0==t?new this:(n=[],e?(r=0,s=a(u,arguments[2],2),o(t,!1,function(t){n.push(s(t,r++))})):o(t,!1,n.push,n),new this(n))}})}},function(t,e){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?n:e)&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var r=n(188);t.exports=function(t,e){return r(t,e)}},function(t,e,n){var r=n(566),i=n(567),a=n(568),o=n(569),s=n(570);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(140);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},function(t,e){t.exports=function(t,e){return t===e||t!==t&&e!==e}},function(t,e,n){var r=n(79)(Object,"create");t.exports=r},function(t,e,n){var r=n(588);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var r=n(613),i=n(616),a=n(193),o=n(46),s=n(625);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?o(t)?i(t[0],t[1]):r(t):s(t)}},function(t,e,n){var r=n(46),i=n(192),a=n(618),o=n(621);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:a(o(t))}},function(t,e,n){var r=n(101),i=n(103),a="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==a}},function(t,e,n){"use strict";t.exports.swap=n(741),t.exports.scal=n(742),t.exports.copy=n(743),t.exports.axpy=n(744),t.exports.dot=n(745),t.exports.cpsc=n(746),t.exports.nrm2=n(747),t.exports.asum=n(748),t.exports.iamax=n(749),t.exports.rotg=n(750)},function(t,e,n){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!==typeof t)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return e.nextTick(function(){t.apply(null,a)})}}}:t.exports=e}).call(this,n(39))},function(t,e,n){var r=n(15).Buffer;function i(t){r.isBuffer(t)||(t=r.from(t));for(var e=t.length/4|0,n=new Array(e),i=0;i<e;i++)n[i]=t.readUInt32BE(4*i);return n}function a(t){for(;0<t.length;t++)t[0]=0}function o(t,e,n,r,i){for(var a,o,s,u,l=n[0],c=n[1],f=n[2],h=n[3],p=t[0]^e[0],d=t[1]^e[1],m=t[2]^e[2],g=t[3]^e[3],v=4,y=1;y<i;y++)a=l[p>>>24]^c[d>>>16&255]^f[m>>>8&255]^h[255&g]^e[v++],o=l[d>>>24]^c[m>>>16&255]^f[g>>>8&255]^h[255&p]^e[v++],s=l[m>>>24]^c[g>>>16&255]^f[p>>>8&255]^h[255&d]^e[v++],u=l[g>>>24]^c[p>>>16&255]^f[d>>>8&255]^h[255&m]^e[v++],p=a,d=o,m=s,g=u;return a=(r[p>>>24]<<24|r[d>>>16&255]<<16|r[m>>>8&255]<<8|r[255&g])^e[v++],o=(r[d>>>24]<<24|r[m>>>16&255]<<16|r[g>>>8&255]<<8|r[255&p])^e[v++],s=(r[m>>>24]<<24|r[g>>>16&255]<<16|r[p>>>8&255]<<8|r[255&d])^e[v++],u=(r[g>>>24]<<24|r[p>>>16&255]<<16|r[d>>>8&255]<<8|r[255&m])^e[v++],[a>>>=0,o>>>=0,s>>>=0,u>>>=0]}var s=[0,1,2,4,8,16,32,64,128,27,54],u=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var n=[],r=[],i=[[],[],[],[]],a=[[],[],[],[]],o=0,s=0,u=0;u<256;++u){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,n[o]=l,r[l]=o;var c=t[o],f=t[c],h=t[f],p=257*t[l]^16843008*l;i[0][o]=p<<24|p>>>8,i[1][o]=p<<16|p>>>16,i[2][o]=p<<8|p>>>24,i[3][o]=p,p=16843009*h^65537*f^257*c^16843008*o,a[0][l]=p<<24|p>>>8,a[1][l]=p<<16|p>>>16,a[2][l]=p<<8|p>>>24,a[3][l]=p,0===o?o=s=1:(o=c^t[t[t[h^c]]],s^=t[t[s]])}return{SBOX:n,INV_SBOX:r,SUB_MIX:i,INV_SUB_MIX:a}}();function l(t){this._key=i(t),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var t=this._key,e=t.length,n=e+6,r=4*(n+1),i=[],a=0;a<e;a++)i[a]=t[a];for(a=e;a<r;a++){var o=i[a-1];a%e===0?(o=o<<8|o>>>24,o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o],o^=s[a/e|0]<<24):e>6&&a%e===4&&(o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o]),i[a]=i[a-e]^o}for(var l=[],c=0;c<r;c++){var f=r-c,h=i[f-(c%4?0:4)];l[c]=c<4||f<=4?h:u.INV_SUB_MIX[0][u.SBOX[h>>>24]]^u.INV_SUB_MIX[1][u.SBOX[h>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[h>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&h]]}this._nRounds=n,this._keySchedule=i,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(t){return o(t=i(t),this._keySchedule,u.SUB_MIX,u.SBOX,this._nRounds)},l.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),n=r.allocUnsafe(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n},l.prototype.decryptBlock=function(t){var e=(t=i(t))[1];t[1]=t[3],t[3]=e;var n=o(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX,this._nRounds),a=r.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[1],12),a},l.prototype.scrub=function(){a(this._keySchedule),a(this._invKeySchedule),a(this._key)},t.exports.AES=l},function(t,e,n){var r=n(15).Buffer,i=n(198);t.exports=function(t,e,n,a){if(r.isBuffer(t)||(t=r.from(t,"binary")),e&&(r.isBuffer(e)||(e=r.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=n/8,s=r.alloc(o),u=r.alloc(a||0),l=r.alloc(0);o>0||a>0;){var c=new i;c.update(l),c.update(t),e&&c.update(e),l=c.digest();var f=0;if(o>0){var h=s.length-o;f=Math.min(o,l.length),l.copy(s,h,0,f),o-=f}if(f<l.length&&a>0){var p=u.length-a,d=Math.min(a,l.length-f);l.copy(u,p,f,f+d),a-=d}}return l.fill(0),{key:s,iv:u}}},function(t,e,n){"use strict";var r=e;r.base=n(884),r.short=n(885),r.mont=n(886),r.edwards=n(887)},function(t,e,n){(function(e){var r=n(903),i=n(915),a=n(916),o=n(207),s=n(302);function u(t){var n;"object"!==typeof t||e.isBuffer(t)||(n=t.passphrase,t=t.key),"string"===typeof t&&(t=new e(t));var u,l,c=a(t,n),f=c.tag,h=c.data;switch(f){case"CERTIFICATE":l=r.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=r.PublicKey.decode(h,"der")),u=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=r.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+u)}throw new Error("unknown key type "+f);case"ENCRYPTED PRIVATE KEY":h=function(t,n){var r=t.algorithm.decrypt.kde.kdeparams.salt,a=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),u=i[t.algorithm.decrypt.cipher.algo.join(".")],l=t.algorithm.decrypt.cipher.iv,c=t.subjectPrivateKey,f=parseInt(u.split("-")[1],10)/8,h=s.pbkdf2Sync(n,r,a,f),p=o.createDecipheriv(u,h,l),d=[];return d.push(p.update(c)),d.push(p.final()),e.concat(d)}(h=r.EncryptedPrivateKey.decode(h,"der"),n);case"PRIVATE KEY":switch(u=(l=r.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:r.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=r.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+u)}throw new Error("unknown key type "+f);case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=r.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+f)}}t.exports=u,u.signature=r.signature}).call(this,n(23).Buffer)},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(global){__webpack_require__.d(__webpack_exports__,"a",function(){return version});var _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),__assign=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function __awaiter(t,e,n,r){return new(n||(n=Promise))(function(i,a){function o(t){try{u(r.next(t))}catch(t){a(t)}}function s(t){try{u(r.throw(t))}catch(t){a(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(o,s)}u((r=r.apply(t,e||[])).next())})}function __generator(t,e){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=r[2&a[0]?"return":a[0]?"throw":"next"])&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[0,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(t){a=[6,t],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var aspromise=asPromise;function asPromise(t,e){for(var n=new Array(arguments.length-1),r=0,i=2,a=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise(function(i,o){n[r]=function(t){if(a)if(a=!1,t)o(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];i.apply(null,e)}};try{t.apply(e||null,n)}catch(t){a&&(a=!1,o(t))}})}var base64_1=createCommonjsModule(function(t,e){var n=e;n.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var r=new Array(64),i=new Array(123),a=0;a<64;)i[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;n.encode=function(t,e,n){for(var i,a=null,o=[],s=0,u=0;e<n;){var l=t[e++];switch(u){case 0:o[s++]=r[l>>2],i=(3&l)<<4,u=1;break;case 1:o[s++]=r[i|l>>4],i=(15&l)<<2,u=2;break;case 2:o[s++]=r[i|l>>6],o[s++]=r[63&l],u=0}s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0)}return u&&(o[s++]=r[i],o[s++]=61,1===u&&(o[s++]=61)),a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))},n.decode=function(t,e,n){for(var r,a=n,o=0,s=0;s<t.length;){var u=t.charCodeAt(s++);if(61===u&&o>1)break;if(void 0===(u=i[u]))throw Error("invalid encoding");switch(o){case 0:r=u,o=1;break;case 1:e[n++]=r<<2|(48&u)>>4,r=u,o=2;break;case 2:e[n++]=(15&r)<<4|(60&u)>>2,r=u,o=3;break;case 3:e[n++]=(3&r)<<6|u,o=0}}if(1===o)throw Error("invalid encoding");return n-a},n.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}),eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},EventEmitter.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},EventEmitter.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this};var float_1=factory(factory);function factory(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function a(t,r,i){e[0]=t,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function o(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function s(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?i:a,t.writeFloatBE=r?a:i,t.readFloatLE=r?o:s,t.readFloatBE=r?s:o}():function(){function e(t,e,n,r){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>3.4028234663852886e38)t((i<<31|2139095040)>>>0,n,r);else if(e<1.1754943508222875e-38)t((i<<31|Math.round(e/1.401298464324817e-45))>>>0,n,r);else{var a=Math.floor(Math.log(e)/Math.LN2);t((i<<31|a+127<<23|8388607&Math.round(e*Math.pow(2,-a)*8388608))>>>0,n,r)}}function n(t,e,n){var r=t(e,n),i=2*(r>>31)+1,a=r>>>23&255,o=8388607&r;return 255===a?o?NaN:i*(1/0):0===a?1.401298464324817e-45*i*o:i*Math.pow(2,a-150)*(o+8388608)}t.writeFloatLE=e.bind(null,writeUintLE),t.writeFloatBE=e.bind(null,writeUintBE),t.readFloatLE=n.bind(null,readUintLE),t.readFloatBE=n.bind(null,readUintBE)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function a(t,r,i){e[0]=t,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function o(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function s(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?i:a,t.writeDoubleBE=r?a:i,t.readDoubleLE=r?o:s,t.readDoubleBE=r?s:o}():function(){function e(t,e,n,r,i,a){var o=r<0?1:0;if(o&&(r=-r),0===r)t(0,i,a+e),t(1/r>0?0:2147483648,i,a+n);else if(isNaN(r))t(0,i,a+e),t(2146959360,i,a+n);else if(r>1.7976931348623157e308)t(0,i,a+e),t((o<<31|2146435072)>>>0,i,a+n);else{var s;if(r<2.2250738585072014e-308)t((s=r/5e-324)>>>0,i,a+e),t((o<<31|s/4294967296)>>>0,i,a+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(s=r*Math.pow(2,-u))>>>0,i,a+e),t((o<<31|u+1023<<20|1048576*s&1048575)>>>0,i,a+n)}}}function n(t,e,n,r,i){var a=t(r,i+e),o=t(r,i+n),s=2*(o>>31)+1,u=o>>>20&2047,l=4294967296*(1048575&o)+a;return 2047===u?l?NaN:s*(1/0):0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496)}t.writeDoubleLE=e.bind(null,writeUintLE,0,4),t.writeDoubleBE=e.bind(null,writeUintBE,4,0),t.readDoubleLE=n.bind(null,readUintLE,0,4),t.readDoubleBE=n.bind(null,readUintBE,4,0)}(),t}function writeUintLE(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function writeUintBE(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function readUintLE(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod$$1=eval("quire".replace(/^/,"re"))(moduleName);if(mod$$1&&(mod$$1.length||Object.keys(mod$$1).length))return mod$$1}catch(e){}return null}var utf8_1=createCommonjsModule(function(t,e){var n=e;n.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296==(64512&n)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},n.read=function(t,e,n){if(n-e<1)return"";for(var r,i=null,a=[],o=0;e<n;)(r=t[e++])<128?a[o++]=r:r>191&&r<224?a[o++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,a[o++]=55296+(r>>10),a[o++]=56320+(1023&r)):a[o++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))},n.write=function(t,e,n){for(var r,i,a=n,o=0;o<t.length;++o)(r=t.charCodeAt(o))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=t.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&i),++o,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-a}}),pool_1=pool;function pool(t,e,n){var r=n||8192,i=r>>>1,a=null,o=r;return function(n){if(n<1||n>i)return t(n);o+n>r&&(a=t(r),o=0);var s=e.call(a,o,o+=n);return 7&o&&(o=1+(7|o)),s}}var longbits=LongBits;function LongBits(t,e){this.lo=t>>>0,this.hi=e>>>0}var zero=LongBits.zero=new LongBits(0,0);zero.toNumber=function(){return 0},zero.zzEncode=zero.zzDecode=function(){return this},zero.length=function(){return 1};var zeroHash=LongBits.zeroHash="\0\0\0\0\0\0\0\0";LongBits.fromNumber=function(t){if(0===t)return zero;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new LongBits(n,r)},LongBits.from=function(t){if("number"==typeof t)return LongBits.fromNumber(t);if(minimal.isString(t)){if(!minimal.Long)return LongBits.fromNumber(parseInt(t,10));t=minimal.Long.fromString(t)}return t.low||t.high?new LongBits(t.low>>>0,t.high>>>0):zero},LongBits.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},LongBits.prototype.toLong=function(t){return minimal.Long?new minimal.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var charCodeAt=String.prototype.charCodeAt;LongBits.fromHash=function(t){return t===zeroHash?zero:new LongBits((charCodeAt.call(t,0)|charCodeAt.call(t,1)<<8|charCodeAt.call(t,2)<<16|charCodeAt.call(t,3)<<24)>>>0,(charCodeAt.call(t,4)|charCodeAt.call(t,5)<<8|charCodeAt.call(t,6)<<16|charCodeAt.call(t,7)<<24)>>>0)},LongBits.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},LongBits.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},LongBits.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},LongBits.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10};var minimal=createCommonjsModule(function(t,e){var n=e;function r(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;++i)void 0!==t[r[i]]&&n||(t[r[i]]=e[r[i]]);return t}function i(t){function e(t,n){if(!(this instanceof e))return new e(t,n);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}n.asPromise=aspromise,n.base64=base64_1,n.EventEmitter=eventemitter,n.float=float_1,n.inquire=inquire_1,n.utf8=utf8_1,n.pool=pool_1,n.LongBits=longbits,n.emptyArray=Object.freeze?Object.freeze([]):[],n.emptyObject=Object.freeze?Object.freeze({}):{},n.isNode=Boolean(commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),n.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},n.isString=function(t){return"string"==typeof t||t instanceof String},n.isObject=function(t){return t&&"object"==typeof t},n.isset=n.isSet=function(t,e){var n=t[e];return!(null==n||!t.hasOwnProperty(e))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},n.Buffer=function(){try{var t=n.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),n._Buffer_from=null,n._Buffer_allocUnsafe=null,n.newBuffer=function(t){return"number"==typeof t?n.Buffer?n._Buffer_allocUnsafe(t):new n.Array(t):n.Buffer?n._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},n.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,n.Long=commonjsGlobal.dcodeIO&&commonjsGlobal.dcodeIO.Long||n.inquire("long"),n.key2Re=/^true|false|0|1$/,n.key32Re=/^-?(?:0|[1-9][0-9]*)$/,n.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,n.longToHash=function(t){return t?n.LongBits.from(t).toHash():n.LongBits.zeroHash},n.longFromHash=function(t,e){var r=n.LongBits.fromHash(t);return n.Long?n.Long.fromBits(r.lo,r.hi,e):r.toNumber(Boolean(e))},n.merge=r,n.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},n.newError=i,n.ProtocolError=i("ProtocolError"),n.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var t=Object.keys(this),n=t.length-1;n>-1;--n)if(1===e[t[n]]&&void 0!==this[t[n]]&&null!==this[t[n]])return t[n]}},n.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}},n.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},n._configure=function(){var t=n.Buffer;t?(n._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,n){return new t(e,n)},n._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):n._Buffer_from=n._Buffer_allocUnsafe=null}}),writer=Writer,BufferWriter,LongBits$1=minimal.LongBits,base64=minimal.base64,utf8=minimal.utf8;function Op(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function noop(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer(){this.len=0,this.head=new Op(noop,0,0),this.tail=this.head,this.states=null}function writeByte(t,e,n){e[n]=255&t}function writeVarint32(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}function writeVarint64(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function writeFixed32(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}Writer.create=minimal.Buffer?function(){return(Writer.create=function(){return new BufferWriter})()}:function(){return new Writer},Writer.alloc=function(t){return new minimal.Array(t)},minimal.Array!==Array&&(Writer.alloc=minimal.pool(Writer.alloc,minimal.Array.prototype.subarray)),Writer.prototype._push=function(t,e,n){return this.tail=this.tail.next=new Op(t,e,n),this.len+=e,this},VarintOp.prototype=Object.create(Op.prototype),VarintOp.prototype.fn=writeVarint32,Writer.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new VarintOp((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},Writer.prototype.int32=function(t){return t<0?this._push(writeVarint64,10,LongBits$1.fromNumber(t)):this.uint32(t)},Writer.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},Writer.prototype.uint64=function(t){var e=LongBits$1.from(t);return this._push(writeVarint64,e.length(),e)},Writer.prototype.int64=Writer.prototype.uint64,Writer.prototype.sint64=function(t){var e=LongBits$1.from(t).zzEncode();return this._push(writeVarint64,e.length(),e)},Writer.prototype.bool=function(t){return this._push(writeByte,1,t?1:0)},Writer.prototype.fixed32=function(t){return this._push(writeFixed32,4,t>>>0)},Writer.prototype.sfixed32=Writer.prototype.fixed32,Writer.prototype.fixed64=function(t){var e=LongBits$1.from(t);return this._push(writeFixed32,4,e.lo)._push(writeFixed32,4,e.hi)},Writer.prototype.sfixed64=Writer.prototype.fixed64,Writer.prototype.float=function(t){return this._push(minimal.float.writeFloatLE,4,t)},Writer.prototype.double=function(t){return this._push(minimal.float.writeDoubleLE,8,t)};var writeBytes=minimal.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};Writer.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(writeByte,1,0);if(minimal.isString(t)){var n=Writer.alloc(e=base64.length(t));base64.decode(t,n,0),t=n}return this.uint32(e)._push(writeBytes,e,t)},Writer.prototype.string=function(t){var e=utf8.length(t);return e?this.uint32(e)._push(utf8.write,e,t):this._push(writeByte,1,0)},Writer.prototype.fork=function(){return this.states=new State(this),this.head=this.tail=new Op(noop,0,0),this.len=0,this},Writer.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop,0,0),this.len=0),this},Writer.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},Writer.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},Writer._configure=function(t){BufferWriter=t};var writer_buffer=BufferWriter$1;(BufferWriter$1.prototype=Object.create(writer.prototype)).constructor=BufferWriter$1;var Buffer=minimal.Buffer;function BufferWriter$1(){writer.call(this)}BufferWriter$1.alloc=function(t){return(BufferWriter$1.alloc=minimal._Buffer_allocUnsafe)(t)};var writeBytesBuffer=Buffer&&Buffer.prototype instanceof Uint8Array&&"set"===Buffer.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]};function writeStringBuffer(t,e,n){t.length<40?minimal.utf8.write(t,e,n):e.utf8Write(t,n)}BufferWriter$1.prototype.bytes=function(t){minimal.isString(t)&&(t=minimal._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(writeBytesBuffer,e,t),this},BufferWriter$1.prototype.string=function(t){var e=Buffer.byteLength(t);return this.uint32(e),e&&this._push(writeStringBuffer,e,t),this};var reader=Reader,BufferReader,LongBits$2=minimal.LongBits,utf8$1=minimal.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader(t){this.buf=t,this.pos=0,this.len=t.length}var create_array="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Reader(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Reader(t);throw Error("illegal buffer")};function readLongVarint(){var t=new LongBits$2(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$2(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader.create=minimal.Buffer?function(t){return(Reader.create=function(t){return minimal.Buffer.isBuffer(t)?new BufferReader(t):create_array(t)})(t)}:create_array,Reader.prototype._slice=minimal.Array.prototype.subarray||minimal.Array.prototype.slice,Reader.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return t}}(),Reader.prototype.int32=function(){return 0|this.uint32()},Reader.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},Reader.prototype.bool=function(){return 0!==this.uint32()},Reader.prototype.fixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.sfixed32=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return 0|readFixed32_end(this.buf,this.pos+=4)},Reader.prototype.float=function(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var t=minimal.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},Reader.prototype.double=function(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var t=minimal.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},Reader.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw indexOutOfRange(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},Reader.prototype.string=function(){var t=this.bytes();return utf8$1.read(t,0,t.length)},Reader.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw indexOutOfRange(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw indexOutOfRange(this)}while(128&this.buf[this.pos++]);return this},Reader.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},Reader._configure=function(t){BufferReader=t;var e=minimal.Long?"toLong":"toNumber";minimal.merge(Reader.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader$1;function BufferReader$1(t){reader.call(this,t)}(BufferReader$1.prototype=Object.create(reader.prototype)).constructor=BufferReader$1,minimal.Buffer&&(BufferReader$1.prototype._slice=minimal.Buffer.prototype.slice),BufferReader$1.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))};var service=Service;function Service(t,e,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");minimal.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(Service.prototype=Object.create(minimal.EventEmitter.prototype)).constructor=Service,Service.prototype.rpcCall=function t(e,n,r,i,a){if(!i)throw TypeError("request must be specified");var o=this;if(!a)return minimal.asPromise(t,o,e,n,r,i);if(o.rpcImpl)try{return o.rpcImpl(e,n[o.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(t,n){if(t)return o.emit("error",t,e),a(t);if(null!==n){if(!(n instanceof r))try{n=r[o.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return o.emit("error",t,e),a(t)}return o.emit("data",n,e),a(null,n)}o.end(!0)})}catch(t){return o.emit("error",t,e),void setTimeout(function(){a(t)},0)}else setTimeout(function(){a(Error("already ended"))},0)},Service.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var rpc_1=createCommonjsModule(function(t,e){e.Service=service}),roots={},indexMinimal=createCommonjsModule(function(t,e){var n=e;function r(){n.Reader._configure(n.BufferReader),n.util._configure()}n.build="minimal",n.Writer=writer,n.BufferWriter=writer_buffer,n.Reader=reader,n.BufferReader=reader_buffer,n.util=minimal,n.rpc=rpc_1,n.roots=roots,n.configure=r,n.Writer._configure(n.BufferWriter),r()}),minimal$1=indexMinimal,minimal_1=minimal$1.roots,minimal_2=minimal$1.Reader,minimal_3=minimal$1.util,$Reader=minimal$1.Reader,$util=minimal$1.util,$root=minimal$1.roots.default||(minimal$1.roots.default={});$root.tensorflow=function(){var t,e,n={};return n.Any=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.typeUrl="",t.prototype.value=$util.newBuffer([]),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.Any;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.typeUrl=t.string();break;case 2:r.value=t.bytes();break;default:t.skipType(7&i)}}return r},t}(),n.DataType=(t={},(e=Object.create(t))[t[0]="DT_INVALID"]=0,e[t[1]="DT_FLOAT"]=1,e[t[2]="DT_DOUBLE"]=2,e[t[3]="DT_INT32"]=3,e[t[4]="DT_UINT8"]=4,e[t[5]="DT_INT16"]=5,e[t[6]="DT_INT8"]=6,e[t[7]="DT_STRING"]=7,e[t[8]="DT_COMPLEX64"]=8,e[t[9]="DT_INT64"]=9,e[t[10]="DT_BOOL"]=10,e[t[11]="DT_QINT8"]=11,e[t[12]="DT_QUINT8"]=12,e[t[13]="DT_QINT32"]=13,e[t[14]="DT_BFLOAT16"]=14,e[t[101]="DT_FLOAT_REF"]=101,e[t[102]="DT_DOUBLE_REF"]=102,e[t[103]="DT_INT32_REF"]=103,e[t[104]="DT_UINT8_REF"]=104,e[t[105]="DT_INT16_REF"]=105,e[t[106]="DT_INT8_REF"]=106,e[t[107]="DT_STRING_REF"]=107,e[t[108]="DT_COMPLEX64_REF"]=108,e[t[109]="DT_INT64_REF"]=109,e[t[110]="DT_BOOL_REF"]=110,e[t[111]="DT_QINT8_REF"]=111,e[t[112]="DT_QUINT8_REF"]=112,e[t[113]="DT_QINT32_REF"]=113,e[t[114]="DT_BFLOAT16_REF"]=114,e),n.TensorShape=function(){function t(t){if(this.dim=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dim=$util.emptyArray,t.prototype.unknownRank=!1,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorShape;t.pos<n;){var i=t.uint32();switch(i>>>3){case 2:r.dim&&r.dim.length||(r.dim=[]),r.dim.push($root.tensorflow.TensorShape.Dim.decode(t,t.uint32()));break;case 3:r.unknownRank=t.bool();break;default:t.skipType(7&i)}}return r},t.Dim=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.size=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.name="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorShape.Dim;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.size=t.int64();break;case 2:r.name=t.string();break;default:t.skipType(7&i)}}return r},t}(),t}(),n.Tensor=function(){function t(t){if(this.floatVal=[],this.doubleVal=[],this.intVal=[],this.stringVal=[],this.scomplexVal=[],this.int64Val=[],this.boolVal=[],this.uint32Val=[],this.uint64Val=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.dtype=0,t.prototype.tensorShape=null,t.prototype.versionNumber=0,t.prototype.tensorContent=$util.newBuffer([]),t.prototype.floatVal=$util.emptyArray,t.prototype.doubleVal=$util.emptyArray,t.prototype.intVal=$util.emptyArray,t.prototype.stringVal=$util.emptyArray,t.prototype.scomplexVal=$util.emptyArray,t.prototype.int64Val=$util.emptyArray,t.prototype.boolVal=$util.emptyArray,t.prototype.uint32Val=$util.emptyArray,t.prototype.uint64Val=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.Tensor;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.dtype=t.int32();break;case 2:r.tensorShape=$root.tensorflow.TensorShape.decode(t,t.uint32());break;case 3:r.versionNumber=t.int32();break;case 4:r.tensorContent=t.bytes();break;case 5:if(r.floatVal&&r.floatVal.length||(r.floatVal=[]),2==(7&i))for(var a=t.uint32()+t.pos;t.pos<a;)r.floatVal.push(t.float());else r.floatVal.push(t.float());break;case 6:if(r.doubleVal&&r.doubleVal.length||(r.doubleVal=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.doubleVal.push(t.double());else r.doubleVal.push(t.double());break;case 7:if(r.intVal&&r.intVal.length||(r.intVal=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.intVal.push(t.int32());else r.intVal.push(t.int32());break;case 8:r.stringVal&&r.stringVal.length||(r.stringVal=[]),r.stringVal.push(t.bytes());break;case 9:if(r.scomplexVal&&r.scomplexVal.length||(r.scomplexVal=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.scomplexVal.push(t.float());else r.scomplexVal.push(t.float());break;case 10:if(r.int64Val&&r.int64Val.length||(r.int64Val=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.int64Val.push(t.int64());else r.int64Val.push(t.int64());break;case 11:if(r.boolVal&&r.boolVal.length||(r.boolVal=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.boolVal.push(t.bool());else r.boolVal.push(t.bool());break;case 16:if(r.uint32Val&&r.uint32Val.length||(r.uint32Val=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.uint32Val.push(t.uint32());else r.uint32Val.push(t.uint32());break;case 17:if(r.uint64Val&&r.uint64Val.length||(r.uint64Val=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.uint64Val.push(t.uint64());else r.uint64Val.push(t.uint64());break;default:t.skipType(7&i)}}return r},t}(),n.AttrValue=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.list=null,t.prototype.s=$util.newBuffer([]),t.prototype.i=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.f=0,t.prototype.b=!1,t.prototype.type=0,t.prototype.shape=null,t.prototype.tensor=null,t.prototype.placeholder="",t.prototype.func=null,Object.defineProperty(t.prototype,"value",{get:$util.oneOfGetter(e=["list","s","i","f","b","type","shape","tensor","placeholder","func"]),set:$util.oneOfSetter(e)}),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.AttrValue;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.list=$root.tensorflow.AttrValue.ListValue.decode(t,t.uint32());break;case 2:r.s=t.bytes();break;case 3:r.i=t.int64();break;case 4:r.f=t.float();break;case 5:r.b=t.bool();break;case 6:r.type=t.int32();break;case 7:r.shape=$root.tensorflow.TensorShape.decode(t,t.uint32());break;case 8:r.tensor=$root.tensorflow.Tensor.decode(t,t.uint32());break;case 9:r.placeholder=t.string();break;case 10:r.func=$root.tensorflow.NameAttrList.decode(t,t.uint32());break;default:t.skipType(7&i)}}return r},t.ListValue=function(){function t(t){if(this.s=[],this.i=[],this.f=[],this.b=[],this.type=[],this.shape=[],this.tensor=[],this.func=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.s=$util.emptyArray,t.prototype.i=$util.emptyArray,t.prototype.f=$util.emptyArray,t.prototype.b=$util.emptyArray,t.prototype.type=$util.emptyArray,t.prototype.shape=$util.emptyArray,t.prototype.tensor=$util.emptyArray,t.prototype.func=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.AttrValue.ListValue;t.pos<n;){var i=t.uint32();switch(i>>>3){case 2:r.s&&r.s.length||(r.s=[]),r.s.push(t.bytes());break;case 3:if(r.i&&r.i.length||(r.i=[]),2==(7&i))for(var a=t.uint32()+t.pos;t.pos<a;)r.i.push(t.int64());else r.i.push(t.int64());break;case 4:if(r.f&&r.f.length||(r.f=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.f.push(t.float());else r.f.push(t.float());break;case 5:if(r.b&&r.b.length||(r.b=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.b.push(t.bool());else r.b.push(t.bool());break;case 6:if(r.type&&r.type.length||(r.type=[]),2==(7&i))for(a=t.uint32()+t.pos;t.pos<a;)r.type.push(t.int32());else r.type.push(t.int32());break;case 7:r.shape&&r.shape.length||(r.shape=[]),r.shape.push($root.tensorflow.TensorShape.decode(t,t.uint32()));break;case 8:r.tensor&&r.tensor.length||(r.tensor=[]),r.tensor.push($root.tensorflow.Tensor.decode(t,t.uint32()));break;case 9:r.func&&r.func.length||(r.func=[]),r.func.push($root.tensorflow.NameAttrList.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t}(),t}(),n.NameAttrList=function(){function t(t){if(this.attr={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.attr=$util.emptyObject,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,i=new $root.tensorflow.NameAttrList;t.pos<r;){var a=t.uint32();switch(a>>>3){case 1:i.name=t.string();break;case 2:t.skip().pos++,i.attr===$util.emptyObject&&(i.attr={}),n=t.string(),t.pos++,i.attr[n]=$root.tensorflow.AttrValue.decode(t,t.uint32());break;default:t.skipType(7&a)}}return i},t}(),n.NodeDef=function(){function t(t){if(this.input=[],this.attr={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.op="",t.prototype.input=$util.emptyArray,t.prototype.device="",t.prototype.attr=$util.emptyObject,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,i=new $root.tensorflow.NodeDef;t.pos<r;){var a=t.uint32();switch(a>>>3){case 1:i.name=t.string();break;case 2:i.op=t.string();break;case 3:i.input&&i.input.length||(i.input=[]),i.input.push(t.string());break;case 4:i.device=t.string();break;case 5:t.skip().pos++,i.attr===$util.emptyObject&&(i.attr={}),n=t.string(),t.pos++,i.attr[n]=$root.tensorflow.AttrValue.decode(t,t.uint32());break;default:t.skipType(7&a)}}return i},t}(),n.VersionDef=function(){function t(t){if(this.badConsumers=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.producer=0,t.prototype.minConsumer=0,t.prototype.badConsumers=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.VersionDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.producer=t.int32();break;case 2:r.minConsumer=t.int32();break;case 3:if(r.badConsumers&&r.badConsumers.length||(r.badConsumers=[]),2==(7&i))for(var a=t.uint32()+t.pos;t.pos<a;)r.badConsumers.push(t.int32());else r.badConsumers.push(t.int32());break;default:t.skipType(7&i)}}return r},t}(),n.GraphDef=function(){function t(t){if(this.node=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.node=$util.emptyArray,t.prototype.versions=null,t.prototype.library=null,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.GraphDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.node&&r.node.length||(r.node=[]),r.node.push($root.tensorflow.NodeDef.decode(t,t.uint32()));break;case 4:r.versions=$root.tensorflow.VersionDef.decode(t,t.uint32());break;case 2:r.library=$root.tensorflow.FunctionDefLibrary.decode(t,t.uint32());break;default:t.skipType(7&i)}}return r},t}(),n.CollectionDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.nodeList=null,t.prototype.bytesList=null,t.prototype.int64List=null,t.prototype.floatList=null,t.prototype.anyList=null,Object.defineProperty(t.prototype,"kind",{get:$util.oneOfGetter(e=["nodeList","bytesList","int64List","floatList","anyList"]),set:$util.oneOfSetter(e)}),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.nodeList=$root.tensorflow.CollectionDef.NodeList.decode(t,t.uint32());break;case 2:r.bytesList=$root.tensorflow.CollectionDef.BytesList.decode(t,t.uint32());break;case 3:r.int64List=$root.tensorflow.CollectionDef.Int64List.decode(t,t.uint32());break;case 4:r.floatList=$root.tensorflow.CollectionDef.FloatList.decode(t,t.uint32());break;case 5:r.anyList=$root.tensorflow.CollectionDef.AnyList.decode(t,t.uint32());break;default:t.skipType(7&i)}}return r},t.NodeList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.NodeList;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(t.string());break;default:t.skipType(7&i)}}return r},t}(),t.BytesList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.BytesList;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push(t.bytes());break;default:t.skipType(7&i)}}return r},t}(),t.Int64List=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.Int64List;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2==(7&i))for(var a=t.uint32()+t.pos;t.pos<a;)r.value.push(t.int64());else r.value.push(t.int64());break;default:t.skipType(7&i)}}return r},t}(),t.FloatList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.FloatList;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:if(r.value&&r.value.length||(r.value=[]),2==(7&i))for(var a=t.uint32()+t.pos;t.pos<a;)r.value.push(t.float());else r.value.push(t.float());break;default:t.skipType(7&i)}}return r},t}(),t.AnyList=function(){function t(t){if(this.value=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.value=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.CollectionDef.AnyList;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.value&&r.value.length||(r.value=[]),r.value.push($root.tensorflow.Any.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t}(),t}(),n.SaverDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e,n;return t.prototype.filenameTensorName="",t.prototype.saveTensorName="",t.prototype.restoreOpName="",t.prototype.maxToKeep=0,t.prototype.sharded=!1,t.prototype.keepCheckpointEveryNHours=0,t.prototype.version=0,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.SaverDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.filenameTensorName=t.string();break;case 2:r.saveTensorName=t.string();break;case 3:r.restoreOpName=t.string();break;case 4:r.maxToKeep=t.int32();break;case 5:r.sharded=t.bool();break;case 6:r.keepCheckpointEveryNHours=t.float();break;case 7:r.version=t.int32();break;default:t.skipType(7&i)}}return r},t.CheckpointFormatVersion=(e={},(n=Object.create(e))[e[0]="LEGACY"]=0,n[e[1]="V1"]=1,n[e[2]="V2"]=2,n),t}(),n.TensorInfo=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}var e;return t.prototype.name="",t.prototype.cooSparse=null,t.prototype.dtype=0,t.prototype.tensorShape=null,Object.defineProperty(t.prototype,"encoding",{get:$util.oneOfGetter(e=["name","cooSparse"]),set:$util.oneOfSetter(e)}),t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorInfo;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.name=t.string();break;case 4:r.cooSparse=$root.tensorflow.TensorInfo.CooSparse.decode(t,t.uint32());break;case 2:r.dtype=t.int32();break;case 3:r.tensorShape=$root.tensorflow.TensorShape.decode(t,t.uint32());break;default:t.skipType(7&i)}}return r},t.CooSparse=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.valuesTensorName="",t.prototype.indicesTensorName="",t.prototype.denseShapeTensorName="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.TensorInfo.CooSparse;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.valuesTensorName=t.string();break;case 2:r.indicesTensorName=t.string();break;case 3:r.denseShapeTensorName=t.string();break;default:t.skipType(7&i)}}return r},t}(),t}(),n.SignatureDef=function(){function t(t){if(this.inputs={},this.outputs={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.inputs=$util.emptyObject,t.prototype.outputs=$util.emptyObject,t.prototype.methodName="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,i=new $root.tensorflow.SignatureDef;t.pos<r;){var a=t.uint32();switch(a>>>3){case 1:t.skip().pos++,i.inputs===$util.emptyObject&&(i.inputs={}),n=t.string(),t.pos++,i.inputs[n]=$root.tensorflow.TensorInfo.decode(t,t.uint32());break;case 2:t.skip().pos++,i.outputs===$util.emptyObject&&(i.outputs={}),n=t.string(),t.pos++,i.outputs[n]=$root.tensorflow.TensorInfo.decode(t,t.uint32());break;case 3:i.methodName=t.string();break;default:t.skipType(7&a)}}return i},t}(),n.AssetFileDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.tensorInfo=null,t.prototype.filename="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.AssetFileDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.tensorInfo=$root.tensorflow.TensorInfo.decode(t,t.uint32());break;case 2:r.filename=t.string();break;default:t.skipType(7&i)}}return r},t}(),n.OpDef=function(){function t(t){if(this.inputArg=[],this.outputArg=[],this.attr=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.inputArg=$util.emptyArray,t.prototype.outputArg=$util.emptyArray,t.prototype.attr=$util.emptyArray,t.prototype.deprecation=null,t.prototype.summary="",t.prototype.description="",t.prototype.isCommutative=!1,t.prototype.isAggregate=!1,t.prototype.isStateful=!1,t.prototype.allowsUninitializedInput=!1,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.name=t.string();break;case 2:r.inputArg&&r.inputArg.length||(r.inputArg=[]),r.inputArg.push($root.tensorflow.OpDef.ArgDef.decode(t,t.uint32()));break;case 3:r.outputArg&&r.outputArg.length||(r.outputArg=[]),r.outputArg.push($root.tensorflow.OpDef.ArgDef.decode(t,t.uint32()));break;case 4:r.attr&&r.attr.length||(r.attr=[]),r.attr.push($root.tensorflow.OpDef.AttrDef.decode(t,t.uint32()));break;case 8:r.deprecation=$root.tensorflow.OpDef.OpDeprecation.decode(t,t.uint32());break;case 5:r.summary=t.string();break;case 6:r.description=t.string();break;case 18:r.isCommutative=t.bool();break;case 16:r.isAggregate=t.bool();break;case 17:r.isStateful=t.bool();break;case 19:r.allowsUninitializedInput=t.bool();break;default:t.skipType(7&i)}}return r},t.ArgDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.description="",t.prototype.type=0,t.prototype.typeAttr="",t.prototype.numberAttr="",t.prototype.typeListAttr="",t.prototype.isRef=!1,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef.ArgDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.name=t.string();break;case 2:r.description=t.string();break;case 3:r.type=t.int32();break;case 4:r.typeAttr=t.string();break;case 5:r.numberAttr=t.string();break;case 6:r.typeListAttr=t.string();break;case 16:r.isRef=t.bool();break;default:t.skipType(7&i)}}return r},t}(),t.AttrDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.name="",t.prototype.type="",t.prototype.defaultValue=null,t.prototype.description="",t.prototype.hasMinimum=!1,t.prototype.minimum=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.allowedValues=null,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef.AttrDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.name=t.string();break;case 2:r.type=t.string();break;case 3:r.defaultValue=$root.tensorflow.AttrValue.decode(t,t.uint32());break;case 4:r.description=t.string();break;case 5:r.hasMinimum=t.bool();break;case 6:r.minimum=t.int64();break;case 7:r.allowedValues=$root.tensorflow.AttrValue.decode(t,t.uint32());break;default:t.skipType(7&i)}}return r},t}(),t.OpDeprecation=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.version=0,t.prototype.explanation="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpDef.OpDeprecation;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.version=t.int32();break;case 2:r.explanation=t.string();break;default:t.skipType(7&i)}}return r},t}(),t}(),n.OpList=function(){function t(t){if(this.op=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.op=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.OpList;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.op&&r.op.length||(r.op=[]),r.op.push($root.tensorflow.OpDef.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t}(),n.MetaGraphDef=function(){function t(t){if(this.collectionDef={},this.signatureDef={},this.assetFileDef=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.metaInfoDef=null,t.prototype.graphDef=null,t.prototype.saverDef=null,t.prototype.collectionDef=$util.emptyObject,t.prototype.signatureDef=$util.emptyObject,t.prototype.assetFileDef=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,i=new $root.tensorflow.MetaGraphDef;t.pos<r;){var a=t.uint32();switch(a>>>3){case 1:i.metaInfoDef=$root.tensorflow.MetaGraphDef.MetaInfoDef.decode(t,t.uint32());break;case 2:i.graphDef=$root.tensorflow.GraphDef.decode(t,t.uint32());break;case 3:i.saverDef=$root.tensorflow.SaverDef.decode(t,t.uint32());break;case 4:t.skip().pos++,i.collectionDef===$util.emptyObject&&(i.collectionDef={}),n=t.string(),t.pos++,i.collectionDef[n]=$root.tensorflow.CollectionDef.decode(t,t.uint32());break;case 5:t.skip().pos++,i.signatureDef===$util.emptyObject&&(i.signatureDef={}),n=t.string(),t.pos++,i.signatureDef[n]=$root.tensorflow.SignatureDef.decode(t,t.uint32());break;case 6:i.assetFileDef&&i.assetFileDef.length||(i.assetFileDef=[]),i.assetFileDef.push($root.tensorflow.AssetFileDef.decode(t,t.uint32()));break;default:t.skipType(7&a)}}return i},t.MetaInfoDef=function(){function t(t){if(this.tags=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.metaGraphVersion="",t.prototype.strippedOpList=null,t.prototype.anyInfo=null,t.prototype.tags=$util.emptyArray,t.prototype.tensorflowVersion="",t.prototype.tensorflowGitVersion="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.MetaGraphDef.MetaInfoDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.metaGraphVersion=t.string();break;case 2:r.strippedOpList=$root.tensorflow.OpList.decode(t,t.uint32());break;case 3:r.anyInfo=$root.tensorflow.Any.decode(t,t.uint32());break;case 4:r.tags&&r.tags.length||(r.tags=[]),r.tags.push(t.string());break;case 5:r.tensorflowVersion=t.string();break;case 6:r.tensorflowGitVersion=t.string();break;default:t.skipType(7&i)}}return r},t}(),t}(),n.SavedModel=function(){function t(t){if(this.metaGraphs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.savedModelSchemaVersion=$util.Long?$util.Long.fromBits(0,0,!1):0,t.prototype.metaGraphs=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.SavedModel;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.savedModelSchemaVersion=t.int64();break;case 2:r.metaGraphs&&r.metaGraphs.length||(r.metaGraphs=[]),r.metaGraphs.push($root.tensorflow.MetaGraphDef.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t}(),n.FunctionDefLibrary=function(){function t(t){if(this.function=[],this.gradient=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.function=$util.emptyArray,t.prototype.gradient=$util.emptyArray,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.FunctionDefLibrary;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.function&&r.function.length||(r.function=[]),r.function.push($root.tensorflow.FunctionDef.decode(t,t.uint32()));break;case 2:r.gradient&&r.gradient.length||(r.gradient=[]),r.gradient.push($root.tensorflow.GradientDef.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return r},t}(),n.FunctionDef=function(){function t(t){if(this.attr={},this.nodeDef=[],this.ret={},t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.signature=null,t.prototype.attr=$util.emptyObject,t.prototype.nodeDef=$util.emptyArray,t.prototype.ret=$util.emptyObject,t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n,r=void 0===e?t.len:t.pos+e,i=new $root.tensorflow.FunctionDef;t.pos<r;){var a=t.uint32();switch(a>>>3){case 1:i.signature=$root.tensorflow.OpDef.decode(t,t.uint32());break;case 5:t.skip().pos++,i.attr===$util.emptyObject&&(i.attr={}),n=t.string(),t.pos++,i.attr[n]=$root.tensorflow.AttrValue.decode(t,t.uint32());break;case 3:i.nodeDef&&i.nodeDef.length||(i.nodeDef=[]),i.nodeDef.push($root.tensorflow.NodeDef.decode(t,t.uint32()));break;case 4:t.skip().pos++,i.ret===$util.emptyObject&&(i.ret={}),n=t.string(),t.pos++,i.ret[n]=t.string();break;default:t.skipType(7&a)}}return i},t}(),n.GradientDef=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.functionName="",t.prototype.gradientFunc="",t.decode=function(t,e){t instanceof $Reader||(t=$Reader.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new $root.tensorflow.GradientDef;t.pos<n;){var i=t.uint32();switch(i>>>3){case 1:r.functionName=t.string();break;case 2:r.gradientFunc=t.string();break;default:t.skipType(7&i)}}return r},t}(),n}();var compiled_api=$root,compiled_api_1=compiled_api.tensorflow;function getParamValue(t,e,n,r){var i=e.params[t];if(i&&void 0!==i.inputIndex){if("tensor"===i.type)return getTensor(e.inputNames[i.inputIndex],n,r);if("tensors"===i.type)return(0===i.inputIndex?0===i.inputParamLength?e.inputNames:e.inputNames.slice(i.inputIndex,-i.inputParamLength):e.inputNames.splice(i.inputIndex)).map(function(t){return getTensor(t,n,r)});var a=Array.prototype.slice.call(getTensor(e.inputNames.slice(i.inputIndex)[0],n,r).dataSync());return"number"===i.type?a[0]:a}return i&&i.value}function getTensor(t,e,n){var r=parseNodeName(t),i=r[0],a=r[1],o=n.currentContextIds.find(function(t){return!!e[getNodeNameWithContextId(i,t)]});return void 0!==o?e[getNodeNameWithContextId(i,o)][a]:void 0}function getNodeNameAndIndex(t,e){var n=parseNodeName(t),r=n[0],i=n[1];return[getNodeNameWithContextId(r,e&&e.currentContextId),i]}function getNodeNameWithContextId(t,e){return e?t+"-"+e:t}function parseNodeName(t){var e=t.lastIndexOf(":");return-1===e?[t,0]:[t.substring(0,e),Number(t.substring(e+1))]}function split$1(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}var json=[{tfOpName:"Add",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",dlOpName:"addN",category:"arithmetic",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",dlOpName:"add",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",dlOpName:"sub",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",dlOpName:"div",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",dlOpName:"floorDiv",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",dlOpName:"mul",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",dlOpName:"maximum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Minimum",dlOpName:"minimum",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"}]},{tfOpName:"Pow",dlOpName:"pow",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",dlOpName:"squaredDifference",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",dlOpName:"mod",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",dlOpName:"mod",category:"arithmetic",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],arithmetic=Object.freeze({json:json}),json$1=[{tfOpName:"Abs",dlOpName:"abs",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",dlOpName:"acos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",dlOpName:"asin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"atan",dlOpName:"atan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",dlOpName:"ceil",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"clip_value_min",dlParamName:"clipValueMin",type:"number"},{tfParamName:"clip_value_max",dlParamName:"clipValueMax",type:"number"}]},{tfOpName:"Cos",dlOpName:"cos",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",dlOpName:"cosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",dlOpName:"elu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",dlOpName:"exp",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",dlOpName:"floor",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",dlOpName:"log",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",dlOpName:"neg",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",dlOpName:"relu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",dlOpName:"clipByValue",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{dlParamName:"clipValueMin",type:"number",defaultValue:0},{dlParamName:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",dlOpName:"selu",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",dlOpName:"sigmoid",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",dlOpName:"sin",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",dlOpName:"sinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",dlOpName:"sqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",dlOpName:"rsqrt",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",dlOpName:"square",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",dlOpName:"tan",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",dlOpName:"tanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",dlOpName:"sign",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",dlOpName:"round",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",dlOpName:"expm1",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",dlOpName:"log1p",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",dlOpName:"reciprocal",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",dlOpName:"softplus",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",dlOpName:"asinh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",dlOpName:"acosh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",dlOpName:"atanh",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",dlOpName:"erf",category:"basic_math",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],basicMath=Object.freeze({json:json$1}),json$2=[{tfOpName:"LoopCond",dlOpName:"loopCond",category:"control",params:[{tfInputIndex:0,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Switch",dlOpName:"switch",category:"control",params:[{tfInputIndex:0,dlParamName:"data",type:"tensor"},{tfInputIndex:1,dlParamName:"pred",type:"tensor"}]},{tfOpName:"Merge",dlOpName:"merge",category:"control",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"}]},{tfOpName:"Enter",dlOpName:"enter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"frame_name",dlParamName:"frameName",type:"string"},{tfParamName:"is_constant",dlParamName:"isConstant",type:"bool"}]},{tfOpName:"Exit",dlOpName:"exit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",dlOpName:"nextIteration",category:"control",params:[{tfInputIndex:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",dlOpName:"tensorArray",category:"control",params:[{tfInputIndex:0,dlParamName:"size",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"},{tfParamName:"dynamic_size",dlParamName:"dynamicSize",type:"bool"},{tfParamName:"clear_after_read",dlParamName:"clearAfterRead",type:"bool"},{tfParamName:"identical_element_shapes",dlParamName:"identicalElementShapes",type:"bool"},{tfParamName:"tensor_array_name",dlParamName:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",dlOpName:"tensorArrayWrite",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",dlOpName:"tensorArrayRead",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"index",type:"number"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",dlOpName:"tensorArrayGather",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape",dlParamName:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",dlOpName:"tensorArrayScatter",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"indices",type:"number[]"},{tfInputIndex:2,dlParamName:"tensor",type:"tensor"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",dlOpName:"tensorArrayConcat",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"element_shape_except0",dlParamName:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",dlOpName:"tensorArraySplit",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"tensor",type:"tensor"},{tfInputIndex:2,dlParamName:"lengths",type:"number[]"},{tfInputIndex:3,dlParamName:"flowIn",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",dlOpName:"tensorArraySize",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"},{tfInputIndex:1,dlParamName:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",dlOpName:"tensorArrayClose",category:"control",params:[{tfInputIndex:0,dlParamName:"tensorArrayId",type:"number"}]}],control=Object.freeze({json:json$2}),json$3=[{tfOpName:"AvgPool",dlOpName:"avgPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",dlOpName:"maxPool",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0},{tfParamName:"ksize",dlParamName:"kernelSize",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",dlOpName:"conv1d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"stride",dlParamName:"stride",type:"number"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NWC"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"dilation",dlParamName:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",dlOpName:"conv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"useCudnnOnGpu",dlParamName:"useCudnnOnGpu",type:"bool"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"Conv2DBackpropInput",dlOpName:"conv2dTranspose",category:"convolution",params:[{tfInputIndex:2,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfInputIndex:0,dlParamName:"outputShape",type:"number[]"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",dlOpName:"depthwiseConv2d",category:"convolution",params:[{tfInputIndex:0,dlParamName:"input",type:"tensor"},{tfInputIndex:1,dlParamName:"filter",type:"tensor"},{tfParamName:"strides",dlParamName:"strides",type:"number[]"},{tfParamName:"padding",dlParamName:"pad",type:"string"},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",defaultValue:"NHWC"},{tfParamName:"dilations",dlParamName:"dilations",type:"number[]"}]}],convolution=Object.freeze({json:json$3}),json$4=[{tfOpName:"Fill",dlOpName:"fill",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfInputIndex:1,dlParamName:"value",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",dlOpName:"linspace",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"num",type:"number"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",dlOpName:"oneHot",category:"creation",params:[{tfInputIndex:0,dlParamName:"indices",type:"tensor"},{tfInputIndex:1,dlParamName:"depth",type:"number"},{tfInputIndex:2,dlParamName:"onValue",type:"number",defaultValue:1},{tfInputIndex:3,dlParamName:"offValue",type:"number",defaultValue:0},{tfParamName:"axis",dlParamName:"axis",type:"number",notSupported:!0},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",dlOpName:"ones",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",dlOpName:"onesLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",dlOpName:"randomUniform",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"minval",dlParamName:"minval",type:"number",defaultValue:0},{tfParamName:"maxval",dlParamName:"maxval",type:"number",defaultValue:1},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"seed",dlParamName:"seed",type:"number",defaultValue:0},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",dlOpName:"range",category:"creation",params:[{tfInputIndex:0,dlParamName:"start",type:"number"},{tfInputIndex:1,dlParamName:"stop",type:"number"},{tfInputIndex:2,dlParamName:"step",type:"number",defaultValue:0},{tfParamName:"Tidx",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"truncatedNormal",dlOpName:"truncatedNormal",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"means",dlParamName:"mean",type:"number",defaultValue:0},{tfParamName:"stddev",dlParamName:"stdDev",type:"number",defaultValue:1},{tfParamName:"seed",dlParamName:"seed",type:"number"},{tfParamName:"seed2",dlParamName:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"},{tfParamName:"T",dlParamName:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",dlOpName:"zeros",category:"creation",params:[{tfInputIndex:0,dlParamName:"shape",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",dlOpName:"zerosLike",category:"creation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype"}]}],creation=Object.freeze({json:json$4}),json$5=[{tfOpName:"NonMaxSuppressionV2",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",dlOpName:"nonMaxSuppression",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"boxes",type:"tensor"},{tfInputIndex:1,dlParamName:"scores",type:"tensor"},{tfInputIndex:2,dlParamName:"maxOutputSize",type:"number"},{tfInputIndex:3,dlParamName:"iouThreshold",type:"number"},{tfInputIndex:4,dlParamName:"scoreThreshold",type:"number"}]},{tfOpName:"Where",dlOpName:"whereAsync",category:"dynamic",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],dynamic=Object.freeze({json:json$5}),json$6=[{tfOpName:"TopKV2",dlOpName:"topK",category:"evaluation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"k",type:"number"},{tfParamName:"sorted",dlParamName:"sorted",type:"bool"}]}],evaluation=Object.freeze({json:json$6}),json$7=[{tfOpName:"PlaceholderWithDefault",dlOpName:"placeholder",category:"graph",params:[{tfInputIndex:0,dlParamName:"default",type:"tensor"},{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",dlOpName:"placeholder",category:"graph",params:[{tfParamName:"shape",dlParamName:"shape",type:"shape"},{tfParamName:"dtype",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"Const",dlOpName:"const",category:"graph"},{tfOpName:"Identity",dlOpName:"identity",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Snapshot",dlOpName:"snapshot",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Rank",dlOpName:"rank",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Size",dlOpName:"size",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"Shape",dlOpName:"shape",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"ShapeN",dlOpName:"shapeN",category:"graph",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"x",type:"tensors"}]},{tfOpName:"Print",dlOpName:"print",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfInputParamLength:1,dlParamName:"data",type:"tensors"},{tfParamName:"message",dlParamName:"message",type:"string"},{tfParamName:"first_n",dlParamName:"firstN",type:"number",notSupprted:!0},{tfParamName:"summarize",dlParamName:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",dlOpName:"noop",category:"graph",params:[]},{tfOpName:"StopGradient",dlOpName:"stopGradient",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",dlOpName:"fakeQuantWithMinMaxVars",category:"graph",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"min",dlParamName:"min",type:"number"},{tfParamName:"max",dlParamName:"max",type:"number"}]}],graph=Object.freeze({json:json$7}),json$8=[{tfOpName:"ResizeBilinear",dlOpName:"resizeBilinear",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",dlOpName:"resizeNearestNeighbor",category:"image",params:[{tfInputIndex:0,dlParamName:"images",type:"tensor"},{tfInputIndex:1,dlParamName:"size",type:"number[]"},{tfParamName:"align_corners",dlParamName:"alignCorners",type:"bool"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",dlOpName:"cropAndResize",category:"image",params:[{tfInputIndex:0,dlParamName:"image",type:"tensor"},{tfInputIndex:1,dlParamName:"boxes",type:"tensor"},{tfInputIndex:2,dlParamName:"boxInd",type:"tensor"},{tfInputIndex:3,dlParamName:"cropSize",type:"number[]"},{tfParamName:"method",dlParamName:"method",type:"string"},{tfParamName:"extrapolation_value",dlParamName:"extrapolationValue",type:"number"}]}],image$1=Object.freeze({json:json$8}),json$9=[{tfOpName:"Equal",dlOpName:"equal",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",dlOpName:"notEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",dlOpName:"greater",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",dlOpName:"greaterEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",dlOpName:"less",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",dlOpName:"lessEqual",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",dlOpName:"logicalAnd",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",dlOpName:"logicalNot",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",dlOpName:"logicalOr",category:"logical",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",dlOpName:"where",category:"logical",params:[{tfInputIndex:0,dlParamName:"condition",type:"tensor"},{tfInputIndex:1,dlParamName:"a",type:"tensor"},{tfInputIndex:2,dlParamName:"b",type:"tensor"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],logical=Object.freeze({json:json$9}),json$10=[{tfOpName:"MatMul",dlOpName:"matMul",category:"matrices",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"transpose_a",dlParamName:"transposeA",type:"bool",defaultValue:!1},{tfParamName:"transpose_b",dlParamName:"transposeB",type:"bool",defaultValue:!1},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",dlOpName:"matMul",category:"matrices",params:[{tfInputIndex:0,dlParamName:"a",type:"tensor"},{tfInputIndex:1,dlParamName:"b",type:"tensor"},{tfParamName:"adj_x",dlParamName:"transposeA",type:"bool",defaultValue:!1},{tfParamName:"adj_y",dlParamName:"transposeB",type:"bool",defaultValue:!1},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",dlOpName:"transpose",category:"matrices",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"perm",type:"number[]"},{tfParamName:"T",dlParamName:"dtype",type:"dtype",notSupported:!0}]}],matrices=Object.freeze({json:json$10}),json$11=[{tfOpName:"FusedBatchNorm",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",dlOpName:"batchNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"scale",type:"tensor"},{tfInputIndex:2,dlParamName:"offset",type:"tensor"},{tfInputIndex:3,dlParamName:"mean",type:"tensor"},{tfInputIndex:4,dlParamName:"variance",type:"tensor"},{tfParamName:"epsilon",dlParamName:"epsilon",type:"number",defaultValue:.001},{tfParamName:"data_format",dlParamName:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",dlOpName:"localResponseNormalization",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"depth_radius",dlParamName:"radius",type:"number",defaultValue:5},{tfParamName:"bias",dlParamName:"bias",type:"number",defaultValue:1},{tfParamName:"alpha",dlParamName:"alpha",type:"number",defaultValue:1},{tfParamName:"beta",dlParamName:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",dlOpName:"softmax",category:"normalization",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"}]}],normalization=Object.freeze({json:json$11}),json$12=[{tfOpName:"Max",dlOpName:"max",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Mean",dlOpName:"mean",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Min",dlOpName:"min",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Sum",dlOpName:"sum",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"All",dlOpName:"all",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"Any",dlOpName:"any",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number[]"},{tfParamName:"keep_dims",dlParamName:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",dlOpName:"argMax",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ArgMin",dlOpName:"argMin",category:"reduction",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]}],reduction=Object.freeze({json:json$12}),json$13=[{tfOpName:"ConcatV2",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:-1,dlParamName:"axis",type:"number"}]},{tfOpName:"Concat",dlOpName:"concat",category:"slice_join",params:[{tfInputIndex:1,tfInputParamLength:1,dlParamName:"tensors",type:"tensors"},{tfInputIndex:0,dlParamName:"axis",type:"number"}]},{tfOpName:"GatherV2",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",dlOpName:"gather",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"indices",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"validate_indices",dlParamName:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"ReverseV2",dlOpName:"reverse",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"axis",type:"number"}]},{tfOpName:"Slice",dlOpName:"slice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"size",type:"number[]"}]},{tfOpName:"StridedSlice",dlOpName:"stridedSlice",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"begin",type:"number[]"},{tfInputIndex:2,dlParamName:"end",type:"number[]"},{tfInputIndex:3,dlParamName:"strides",type:"number[]"},{tfParamName:"begin_mask",dlParamName:"beginMask",type:"number",defaultValue:0},{tfParamName:"end_mask",dlParamName:"endMask",type:"number",defaultValue:0},{tfParamName:"new_axis_mask",dlParamName:"newAxisMask",type:"number",defaultValue:0},{tfParamName:"ellipsis_mask",dlParamName:"ellipsisMask",type:"number",defaultValue:0},{tfParamName:"shrink_axis_mask",dlParamName:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",dlOpName:"stack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensors",type:"tensors"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",dlOpName:"unstack",category:"slice_join",params:[{tfInputIndex:0,tfInputParamLength:0,dlParamName:"tensor",type:"tensor"},{tfParamName:"axis",dlParamName:"axis",type:"number",defaultValue:0},{tfParamName:"num",dlParamName:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",dlOpName:"tile",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"reps",type:"number[]"}]},{tfOpName:"Split",dlOpName:"split",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"axis",type:"number",defaultValue:0},{tfInputIndex:1,dlParamName:"x",type:"tensor"},{tfParamName:"num_split",dlParamName:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",dlOpName:"split",category:"slice_join",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"numOrSizeSplits",type:"number[]"},{tfInputIndex:2,dlParamName:"axis",type:"number",defaultValue:0}]}],sliceJoin=Object.freeze({json:json$13}),json$14=[{tfOpName:"Cast",dlOpName:"cast",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"SrcT",dlParamName:"sdtype",type:"dtype",notSupported:!0},{tfParamName:"DstT",dlParamName:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",dlOpName:"expandDims",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,tfParamNameDeprecated:"dim",dlParamName:"axis",type:"number"}]},{tfOpName:"Pad",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfParamName:"constant_value",dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",dlOpName:"pad",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"padding",type:"number[]"},{tfInputIndex:2,dlParamName:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",dlOpName:"reshape",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"shape",type:"number[]"}]},{tfOpName:"Squeeze",dlOpName:"squeeze",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfParamName:"axis",tfParamNameDeprecated:"squeeze_dims",dlParamName:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",dlOpName:"spaceToBatchND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",dlOpName:"batchToSpaceND",category:"transformation",params:[{tfInputIndex:0,dlParamName:"x",type:"tensor"},{tfInputIndex:1,dlParamName:"blockShape",type:"number[]"},{tfInputIndex:2,dlParamName:"crops",type:"number[]"}]}],transformation=Object.freeze({json:json$14}),CONTROL_FLOW_OPS=["Switch","Merge","Enter","Exit","NextIteration"],DYNAMIC_SHAPE_OPS=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"],OperationMapper=function(){function t(){var t=[arithmetic,basicMath,control,convolution,creation,dynamic,evaluation,logical,image$1,graph,matrices,normalization,reduction,sliceJoin,transformation],e=[].concat.apply([],t.map(function(t){return t.json}));this.opMappers=e.reduce(function(t,e){return t[e.tfOpName]=e,t},{})}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),t.prototype.isControlFlow=function(t){return CONTROL_FLOW_OPS.some(function(e){return e===t.op})},t.prototype.isDynamicShape=function(t){return DYNAMIC_SHAPE_OPS.some(function(e){return e===t.op})},t.prototype.transformGraph=function(t){var e=this,n=!1,r=!1,i=[],a=[],o=t.node.reduce(function(t,o){return t[o.name]=e.mapNode(o),e.isControlFlow(o)&&(n=!0),e.isDynamicShape(o)&&(r=!0),"Placeholder"===o.op&&i.push(t[o.name]),"Const"===o.op&&a.push(t[o.name]),t},{}),s=[],u=[];return Object.keys(o).forEach(function(t){var e=o[t];e.inputNames.forEach(function(t){var n=getNodeNameAndIndex(t)[0];e.inputs.push(o[n]),o[n].children.push(e)}),0===e.inputs.length&&s.push(e)}),Object.keys(o).forEach(function(t){var e=o[t];0===e.children.length&&u.push(e)}),{nodes:o,inputs:s,outputs:u,weights:a,placeholders:i,withControlFlow:n,withDynamicShape:r}},t.prototype.mapNode=function(t){var e=this,n=this.opMappers[t.op];if(void 0===n)throw new Error("Tensorflow Op is not supported: "+t.op);var r={name:t.name,op:n.dlOpName,category:n.category,inputNames:(t.input||[]).map(function(t){return t.startsWith("^")?t.substr(1):t}),inputs:[],children:[],params:{}};return n.params&&(r.params=n.params.reduce(function(n,r){var i=r.tfInputIndex,a=r.tfInputParamLength,o=r.type,s=void 0;if(void 0===i)switch(r.type){case"string":void 0===(s=e.getStringParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getStringParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number":void 0===(s=e.getNumberParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getNumberParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"number[]":void 0===(s=e.getNumericArrayParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getNumericArrayParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"bool":void 0===(s=e.getBoolParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getBoolParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"shape":void 0===(s=e.getTensorShapeParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getTensorShapeParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"dtype":void 0===(s=e.getDtypeParam(t.attr,r.tfParamName,r.defaultValue))&&r.tfParamNameDeprecated&&(s=e.getDtypeParam(t.attr,r.tfParamNameDeprecated,r.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+r.type+" for op: "+t.op)}return n[r.dlParamName]={value:s,inputIndex:i,type:o,inputParamLength:a},n},{})),r},t.prototype.getStringParam=function(t,e,n,r){void 0===r&&(r=!1);var i=t[e];if(void 0!==i){var a=String.fromCharCode.apply(null,i.s);return r?a:a.toLowerCase()}return n},t.prototype.getBoolParam=function(t,e,n){var r=t[e];return r?r.b:n},t.prototype.getNumberParam=function(t,e,n){var r=t[e],i=r?r[r.value]:n;return"number"==typeof i?i:i.toInt()},t.prototype.getDtypeParam=function(t,e,n){var r=t[e];if(r&&r.type)switch(r.type){case compiled_api_1.DataType.DT_FLOAT:return"float32";case compiled_api_1.DataType.DT_INT32:return"int32";case compiled_api_1.DataType.DT_BOOL:return"bool";default:return n}return n},t.prototype.getTensorShapeParam=function(t,e,n){var r=t[e];return r&&r.shape?r.shape.dim.map(function(t){return"number"==typeof t.size?t.size:t.size.toInt()}):n},t.prototype.getNumericArrayParam=function(t,e,n){var r=t[e];return r?(r.list.f&&r.list.f.length?r.list.f:r.list.i).map(function(t){return"number"==typeof t?t:t.toInt()}):n},t}(),executeOp=function(t,e,n){switch(t.op){case"add":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.g)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"addN":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.h)(getParamValue("tensors",t,e,n))];case"mod":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"mul":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.yb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"div":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.L)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"floorDiv":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.V)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"sub":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.oc)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"minimum":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ub)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"maximum":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"pow":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Hb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"squaredDifference":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.jc)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$1=function(t,e,n){switch(t.op){case"abs":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.d)(getParamValue("x",t,e,n))];case"acos":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.e)(getParamValue("x",t,e,n))];case"acosh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.f)(getParamValue("x",t,e,n))];case"asin":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.m)(getParamValue("x",t,e,n))];case"asinh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.n)(getParamValue("x",t,e,n))];case"atan":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.o)(getParamValue("x",t,e,n))];case"atanh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.p)(getParamValue("x",t,e,n))];case"ceil":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.x)(getParamValue("x",t,e,n))];case"cos":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.H)(getParamValue("x",t,e,n))];case"cosh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.I)(getParamValue("x",t,e,n))];case"elu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.M)(getParamValue("x",t,e,n))];case"erf":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.O)(getParamValue("x",t,e,n))];case"exp":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.P)(getParamValue("x",t,e,n))];case"expm1":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.R)(getParamValue("x",t,e,n))];case"floor":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.U)(getParamValue("x",t,e,n))];case"log":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.jb)(getParamValue("x",t,e,n))];case"log1p":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.kb)(getParamValue("x",t,e,n))];case"neg":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ab)(getParamValue("x",t,e,n))];case"reciprocal":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Lb)(getParamValue("x",t,e,n))];case"relu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Mb)(getParamValue("x",t,e,n))];case"round":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Pb)(getParamValue("x",t,e,n))];case"selu":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Rb)(getParamValue("x",t,e,n))];case"sigmoid":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ub)(getParamValue("x",t,e,n))];case"sin":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Wb)(getParamValue("x",t,e,n))];case"sign":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Vb)(getParamValue("x",t,e,n))];case"sinh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Xb)(getParamValue("x",t,e,n))];case"softplus":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ec)(getParamValue("x",t,e,n))];case"sqrt":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hc)(getParamValue("x",t,e,n))];case"square":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ic)(getParamValue("x",t,e,n))];case"tanh":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.rc)(getParamValue("x",t,e,n))];case"tan":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.qc)(getParamValue("x",t,e,n))];case"clipByValue":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.y)(getParamValue("x",t,e,n),getParamValue("clipValueMin",t,e,n),getParamValue("clipValueMax",t,e,n))];case"rsqrt":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.L)(Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(1,"float32"),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hc)(getTensor(t.inputNames[0],e,n)))];default:throw TypeError("Node type "+t.op+" is not implemented")}},TensorArray=function(){function t(e,n,r,i,a,o,s){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=a,this.dynamicSize=o,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=t.nextId++}return Object.defineProperty(t.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(){this.tensors.forEach(function(t){return t.tensor.dispose()}),this.tensors=[],this.closed_=!0},t.prototype.size=function(){return this.tensors.length},t.prototype.read=function(t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(t<0||t>=this.tensors.length)throw new Error("Tried to read from index "+t+", but array size is: "+this.tensors.length);var e=this.tensors[t];if(e.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+t+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor},t.prototype.readMany=function(t){var e=this;return t.map(function(t){return e.read(t)})},t.prototype.write=function(t,e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error("Tried to write to index "+t+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+",\n          because the value dtype is "+e.dtype+", but TensorArray dtype is "+this.dtype+".");if(0===this.size()&&0===this.elementShape.length&&(this.elementShape=e.shape),this.assertShapesMatch(this.elementShape,e.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+t+"."),n&&n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been read.");if(n&&n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+t+", because it has already been written.");n.tensor=e,n.written=!0,this.tensors[t]=n},t.prototype.writeMany=function(t,e){var n=this;if(t.length!==e.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+t.length+" is not the same as tensors size: "+e.length+".");t.forEach(function(t,r){return n.write(t,e[r])})},t.prototype.gather=function(t,e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+e);if(!t){t=[];for(var n=0;n<this.size();n++)t.push(n)}if(0===t.length)return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.sc)([],[0].concat(this.elementShape));var r=this.readMany(t);return this.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lc)(r,0)},t.prototype.concat=function(t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+t);if(0===this.size())return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.sc)([],[0].concat(this.elementShape));for(var e=[],n=0;n<this.size();n++)e.push(n);var r=this.readMany(e);return this.assertShapesMatch(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.z)(r,0)},t.prototype.scatter=function(t,e){if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+t.length+" vs. "+e.shape[0]);var n=Math.max.apply(Math,t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(t,Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ac)(e,0))},t.prototype.split=function(t,e){var n=this;if(e.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+e.dtype);var r=0,i=t.map(function(t){return r+=t});if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+e.shape);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+t.length+"), and the TensorArray is not marked as dynamically resizeable");var a=0===r?0:e.size/r,o=[];Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.uc)(function(){e=e.reshape([1,r,a]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:i[s-1],0],l=[1,t[s],a];o[s]=Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Yb)(e,u,l).reshape(n.elementShape)}return o});for(var s=[],u=0;u<t.length;u++)s[u]=u;this.writeMany(s,o)},t.prototype.assertShapesMatch=function(t,e,n){void 0===n&&(n=""),_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Bc.assert(this.arraysEqual(t,e),n+" Shapes "+t+" and "+e+" must match")},t.prototype.arraysEqual=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(-1!==t[n]&&-1!==e[n]&&t[n]!==e[n])return!1;return!0},t.nextId=0,t}();function executeOp$2(t,e,n){return __awaiter(this,void 0,void 0,function(){var r,i,a,o,s,u,l,c,f,h,p,d,m,g,v,y,b,_,x,w,S,E,k,T,P,M,C,O,I,N,A,R,D,j,L;return __generator(this,function(F){switch(F.label){case 0:switch(t.op){case"loopCond":return[3,1];case"switch":return[3,2];case"merge":return[3,4];case"enter":return[3,5];case"exit":return[3,6];case"nextIteration":return[3,7];case"tensorArray":return[3,8];case"tensorArrayWrite":return[3,9];case"tensorArrayRead":return[3,10];case"tensorArrayGather":return[3,11];case"tensorArrayScatter":return[3,12];case"tensorArrayConcat":return[3,13];case"tensorArraySplit":return[3,14];case"tensorArraySize":return[3,15];case"tensorArrayClose":return[3,16]}return[3,17];case 1:return[2,[getParamValue("pred",t,e,n)]];case 2:return r=getParamValue("pred",t,e,n),i=getParamValue("data",t,e,n),[4,r.data()];case 3:return[2,F.sent()[0]?[void 0,i]:[i,void 0]];case 4:return[2,(a=t.inputNames.find(function(t){return void 0!==getTensor(t,e,n)}))?[getTensor(a,e,n)]:void 0];case 5:return o=getParamValue("frameName",t,e,n),s=getParamValue("tensor",t,e,n),n.enterFrame(o),[2,[s]];case 6:return u=getParamValue("tensor",t,e,n),n.exitFrame(),[2,[u]];case 7:return l=getParamValue("tensor",t,e,n),n.nextIteration(),[2,[l]];case 8:return c=getParamValue("size",t,e,n),f=getParamValue("dtype",t,e,n),h=getParamValue("elementShape",t,e,n),p=getParamValue("dynamicSize",t,e,n),d=getParamValue("clearAfterRead",t,e,n),m=getParamValue("identicalElementShapes",t,e,n),g=getParamValue("name",t,e,n),v=new TensorArray(g,f,c,h,m,p,d),n.addTensorArray(v),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(v.id),Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(1)]];case 9:return y=getParamValue("tensorArrayId",t,e,n),b=getParamValue("index",t,e,n),_=getParamValue("tensor",t,e,n),n.getTensorArray(y).write(b,_),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(1)]];case 10:return x=getParamValue("tensorArrayId",t,e,n),w=getParamValue("index",t,e,n),[2,[n.getTensorArray(x).read(w)]];case 11:return S=getParamValue("tensorArrayId",t,e,n),E=getParamValue("indices",t,e,n),k=getParamValue("dtype",t,e,n),[2,[n.getTensorArray(S).gather(E,k)]];case 12:return T=getParamValue("tensorArrayId",t,e,n),P=getParamValue("indices",t,e,n),M=getParamValue("tensor",t,e,n),n.getTensorArray(T).scatter(P,M),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(1)]];case 13:return C=getParamValue("tensorArrayId",t,e,n),O=n.getTensorArray(C),I=getParamValue("dtype",t,e,n),[2,[O.concat(I)]];case 14:return N=getParamValue("tensorArrayId",t,e,n),A=getParamValue("tensor",t,e,n),R=getParamValue("lengths",t,e,n),n.getTensorArray(N).split(R,A),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(1)]];case 15:return D=getParamValue("tensorArrayId",t,e,n),j=n.getTensorArray(D),[2,[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(j.size(),"int32")]];case 16:return L=getParamValue("tensorArrayId",t,e,n),n.getTensorArray(L).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+t.op+" is not implemented")}})})}var executeOp$3=function(t,e,n){switch(t.op){case"conv1d":var r=getParamValue("stride",t,e,n),i=getParamValue("pad",t,e,n),a=getParamValue("dataFormat",t,e,n).toUpperCase(),o=getParamValue("dilation",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.E)(getParamValue("x",t,e,n),getParamValue("filter",t,e,n),r,i,a,o)];case"conv2d":r=getParamValue("strides",t,e,n),i=getParamValue("pad",t,e,n),a=getParamValue("dataFormat",t,e,n).toUpperCase();var s=getParamValue("dilations",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.F)(getParamValue("x",t,e,n),getParamValue("filter",t,e,n),[r[1],r[2]],i,a,[s[0],s[1]])];case"conv2dTranspose":var u=getParamValue("outputShape",t,e,n);return r=getParamValue("strides",t,e,n),i=getParamValue("pad",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.G)(getParamValue("x",t,e,n),getParamValue("filter",t,e,n),u,[r[1],r[2]],i)];case"depthwiseConv2d":return r=getParamValue("strides",t,e,n),i=getParamValue("pad",t,e,n),s=getParamValue("dilations",t,e,n),a=getParamValue("dataFormat",t,e,n).toUpperCase(),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.J)(getParamValue("input",t,e,n),getParamValue("filter",t,e,n),[r[1],r[2]],i,a,[s[0],s[1]])];case"avgPool":r=getParamValue("strides",t,e,n),i=getParamValue("pad",t,e,n);var l=getParamValue("kernelSize",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.q)(getParamValue("x",t,e,n),[l[1],l[2]],[r[1],r[2]],i)];case"maxPool":return r=getParamValue("strides",t,e,n),i=getParamValue("pad",t,e,n),l=getParamValue("kernelSize",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.qb)(getParamValue("x",t,e,n),[l[1],l[2]],[r[1],r[2]],i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$4=function(t,e,n){switch(t.op){case"fill":var r=getParamValue("shape",t,e,n),i=getParamValue("dtype",t,e,n),a=getParamValue("value",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.T)(r,a,i)];case"linspace":var o=getParamValue("start",t,e,n),s=getParamValue("stop",t,e,n),u=getParamValue("num",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.hb)(o,s,u)];case"oneHot":var l=getParamValue("indices",t,e,n),c=getParamValue("depth",t,e,n),f=getParamValue("onValue",t,e,n),h=getParamValue("offValue",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Db)(l,c,f,h)];case"ones":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Eb)(getParamValue("shape",t,e,n),getParamValue("dtype",t,e,n))];case"onesLike":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fb)(getParamValue("x",t,e,n))];case"randomUniform":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Jb)(getParamValue("shape",t,e,n),getParamValue("minval",t,e,n),getParamValue("maxval",t,e,n),getParamValue("dtype",t,e,n))];case"range":o=getParamValue("start",t,e,n);var p=getParamValue("stop",t,e,n),d=getParamValue("step",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Kb)(o,p,d,getParamValue("dtype",t,e,n))];case"truncatedNormal":r=getParamValue("shape",t,e,n);var m=getParamValue("mean",t,e,n),g=getParamValue("stdDev",t,e,n),v=getParamValue("seed",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.zc)(r,m,g,getParamValue("dtype",t,e,n),v)];case"zeros":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Gc)(getParamValue("shape",t,e,n),getParamValue("dtype",t,e,n))];case"zerosLike":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Hc)(getParamValue("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}};function executeOp$5(t,e,n){return __awaiter(this,void 0,void 0,function(){var r,i,a,o,s;return __generator(this,function(u){switch(u.label){case 0:switch(t.op){case"nonMaxSuppression":return[3,1];case"whereAsync":return[3,3]}return[3,5];case 1:return r=getParamValue("boxes",t,e,n),i=getParamValue("scores",t,e,n),a=getParamValue("maxOutputSize",t,e,n),o=getParamValue("iouThreshold",t,e,n),s=getParamValue("scoreThreshold",t,e,n),[4,_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ab.nonMaxSuppressionAsync(r,i,a,o,s)];case 2:return[2,[u.sent()]];case 3:return[4,Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Fc)(getParamValue("condition",t,e,n))];case 4:return[2,[u.sent()]];case 5:throw TypeError("Node type "+t.op+" is not implemented")}})})}var executeOp$6=function(t,e,n){switch(t.op){case"topK":var r=getParamValue("x",t,e,n),i=getParamValue("k",t,e,n),a=getParamValue("sorted",t,e,n),o=Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.wc)(r,i,a);return[o.values,o.indices];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$7=function(t,e,n){switch(t.op){case"const":return e[t.name];case"placeholder":var r=getParamValue("default",t,e,n);return[getTensor(t.name,e,n)||r];case"identity":case"stopGradient":case"fakeQuantWithMinMaxVars":return[getParamValue("x",t,e,n)];case"snapshot":return[getParamValue("x",t,e,n).clone()];case"shape":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tc)(getParamValue("x",t,e,n).shape,"int32")];case"shapeN":return getParamValue("x",t,e,n).map(function(t){return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tc)(t.shape)});case"size":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(getParamValue("x",t,e,n).size,"int32")];case"rank":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Qb)(getParamValue("x",t,e,n).rank,"int32")];case"noop":return[];case"print":var i=getParamValue("x",t,e,n),a=getParamValue("data",t,e,n),o=getParamValue("message",t,e,n),s=getParamValue("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[0].dataSync()).slice(0,s));return[i];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$8=function(t,e,n){switch(t.op){case"resizeBilinear":var r=getParamValue("images",t,e,n),i=getParamValue("size",t,e,n),a=getParamValue("alignCorners",t,e,n);return[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ab.resizeBilinear(r,[i[0],i[1]],a)];case"resizeNearestNeighbor":return r=getParamValue("images",t,e,n),i=getParamValue("size",t,e,n),a=getParamValue("alignCorners",t,e,n),[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ab.resizeNearestNeighbor(r,[i[0],i[1]],a)];case"cropAndResize":var o=getParamValue("image",t,e,n),s=getParamValue("boxes",t,e,n),u=getParamValue("boxInd",t,e,n),l=getParamValue("cropSize",t,e,n),c=getParamValue("method",t,e,n),f=getParamValue("extrapolationValue",t,e,n);return[_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ab.cropAndResize(o,s,u,l,c,f)];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$9=function(t,e,n){switch(t.op){case"equal":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.N)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"notEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Cb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"greater":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Y)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"greaterEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Z)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"less":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.eb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"lessEqual":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.fb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"logicalAnd":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"logicalNot":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.mb)(getParamValue("a",t,e,n))];case"logicalOr":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nb)(getParamValue("a",t,e,n),getParamValue("b",t,e,n))];case"where":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ec)(getParamValue("condition",t,e,n),getParamValue("a",t,e,n),getParamValue("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$10=function(t,e,n){switch(t.op){case"matMul":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ob)(getParamValue("a",t,e,n),getParamValue("b",t,e,n),getParamValue("transposeA",t,e,n),getParamValue("transposeB",t,e,n))];case"transpose":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.yc)(getParamValue("x",t,e,n),getParamValue("perm",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$11=function(t,e,n){switch(t.op){case"batchNormalization":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.r)(getParamValue("x",t,e,n),getParamValue("mean",t,e,n),getParamValue("variance",t,e,n),getParamValue("epsilon",t,e,n),getParamValue("scale",t,e,n),getParamValue("offset",t,e,n))];case"localResponseNormalization":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.ib)(getParamValue("x",t,e,n),getParamValue("radius",t,e,n),getParamValue("bias",t,e,n),getParamValue("alpha",t,e,n),getParamValue("beta",t,e,n))];case"softmax":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.dc)(getParamValue("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$12=function(t,e,n){switch(t.op){case"max":var r=getParamValue("axis",t,e,n),i=getParamValue("keepDims",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.pb)(getParamValue("x",t,e,n),r,i)];case"mean":return r=getParamValue("axis",t,e,n),i=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.sb)(getParamValue("x",t,e,n),r,i)];case"min":return r=getParamValue("axis",t,e,n),i=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.tb)(getParamValue("x",t,e,n),r,i)];case"sum":return r=getParamValue("axis",t,e,n),i=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.pc)(getParamValue("x",t,e,n),r,i)];case"all":return r=getParamValue("axis",t,e,n),i=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.i)(getParamValue("x",t,e,n),r,i)];case"any":return r=getParamValue("axis",t,e,n),i=getParamValue("keepDims",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.j)(getParamValue("x",t,e,n),r,i)];case"argMax":return r=getParamValue("axis",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.k)(getParamValue("x",t,e,n),r)];case"argMin":return r=getParamValue("axis",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.l)(getParamValue("x",t,e,n),r)];default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$13=function(t,e,n){switch(t.op){case"concat":var r=getParamValue("axis",t,e,n),i=getParamValue("tensors",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.z)(i,r)];case"gather":r=getParamValue("axis",t,e,n);var a=getParamValue("x",t,e,n),o=getParamValue("indices",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.X)(a,o,r)];case"reverse":return r=getParamValue("axis",t,e,n),a=getParamValue("x",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ob)(a,r)];case"slice":var s=getParamValue("begin",t,e,n),u=getParamValue("size",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Yb)(getParamValue("x",t,e,n),s,u)];case"stridedSlice":s=getParamValue("begin",t,e,n);var l=getParamValue("end",t,e,n),c=getParamValue("strides",t,e,n),f=getParamValue("beginMask",t,e,n),h=getParamValue("endMask",t,e,n),p=getParamValue("ellipsisMask",t,e,n),d=getParamValue("newAxisMask",t,e,n),m=getParamValue("shrinkAxisMask",t,e,n),g=getParamValue("x",t,e,n);if(1===s.length&&g.shape.length>1)for(var v=1;v<g.shape.length;v++)s.push(0),l.push(g.shape[v]),c.push(c[0]);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.nc)(g,s,l,c,f,h,p,d,m)];case"stack":return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.uc)(function(){var r=getParamValue("axis",t,e,n),i=getParamValue("tensors",t,e,n),a=i[0].shape,o=i[0].squeeze().shape,s=i.map(function(t){var e=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Bc.arraysEqual(t.shape,a);if(!e&&!_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Bc.arraysEqual(t.squeeze().shape,o))throw new Error("the input tensors shape does not match");return e?t:t.reshape(a)});return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.lc)(s,r)]});case"unstack":return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.uc)(function(){var r=getParamValue("axis",t,e,n),i=getParamValue("tensor",t,e,n);return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Ac)(i,r)});case"tile":var y=getParamValue("reps",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.vc)(getParamValue("x",t,e,n),y)];case"split":r=getParamValue("axis",t,e,n);var b=getParamValue("numOrSizeSplits",t,e,n);return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.gc)(getParamValue("x",t,e,n),b,r);default:throw TypeError("Node type "+t.op+" is not implemented")}},executeOp$14=function(t,e,n){switch(t.op){case"cast":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.w)(getParamValue("x",t,e,n),getParamValue("dtype",t,e,n))];case"expandDims":var r=getParamValue("axis",t,e,n);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Q)(getParamValue("x",t,e,n),r)];case"squeeze":return r=getParamValue("axis",t,e,n),[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.kc)(getParamValue("x",t,e,n),r)];case"reshape":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Nb)(getParamValue("x",t,e,n),getParamValue("shape",t,e,n))];case"pad":return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Gb)(getParamValue("x",t,e,n),split$1(getParamValue("padding",t,e,n),2),getParamValue("constantValue",t,e,n))];case"spaceToBatchND":var i=getParamValue("blockShape",t,e,n),a=split$1(getParamValue("paddings",t,e,n),2);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.fc)(getParamValue("x",t,e,n),i,a)];case"batchToSpaceND":i=getParamValue("blockShape",t,e,n);var o=split$1(getParamValue("crops",t,e,n),2);return[Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.v)(getParamValue("x",t,e,n),i,o)];default:throw TypeError("Node type "+t.op+" is not implemented")}};function executeOp$15(t,e,n){switch(t.category){case"arithmetic":return executeOp(t,e,n);case"basic_math":return executeOp$1(t,e,n);case"control":return executeOp$2(t,e,n);case"convolution":return executeOp$3(t,e,n);case"creation":return executeOp$4(t,e,n);case"dynamic":return executeOp$5(t,e,n);case"evaluation":return executeOp$6(t,e,n);case"image":return executeOp$8(t,e,n);case"graph":return executeOp$7(t,e,n);case"logical":return executeOp$9(t,e,n);case"matrices":return executeOp$10(t,e,n);case"normalization":return executeOp$11(t,e,n);case"reduction":return executeOp$12(t,e,n);case"slice_join":return executeOp$13(t,e,n);case"transformation":return executeOp$14(t,e,n);default:throw TypeError("Node type "+t.op+" is not implemented")}}var ExecutionContext=function(){function t(t,e){this.weightMap=t,this.tensorArrayMap=e,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return t.prototype.newFrame=function(t,e){return{id:t,frameName:e,iterationId:0}},Object.defineProperty(t.prototype,"currentContext",{get:function(){return this.contexts},set:function(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),t.prototype.generateCurrentContextIds=function(){for(var t=[],e=0;e<this.contexts.length-1;e++){var n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t},t.prototype.contextIdforContexts=function(t){return t?t.map(function(t){return 0===t.id&&0===t.iterationId?"":t.frameName+"-"+t.iterationId}).join("/"):""},t.prototype.enterFrame=function(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},t.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},t.prototype.getWeight=function(t){return this.weightMap[t]},t.prototype.addTensorArray=function(t){this.tensorArrayMap[t.id]=t},t.prototype.getTensorArray=function(t){return this.tensorArrayMap[t]},t}(),GraphExecutor=function(){function t(t){this.graph=t,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this.placeholders=t.placeholders,this._outputs=t.outputs,this.compile()}return Object.defineProperty(t.prototype,"weightMap",{get:function(){return this._weightMap},set:function(t){var e=Object.keys(t).map(function(e){return t[e].map(function(t){return t.id})});this.weightIds=[].concat.apply([],e),this._weightMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.placeholders.map(function(t){return{name:t.name,shape:t.params.shape?t.params.shape.value:void 0,dtype:t.params.dtype?t.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs.map(function(t){return{name:t.name,shape:t.params.shape?t.params.shape.value:void 0,dtype:t.params.dtype?t.params.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.outputs.map(function(t){return t.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isControlFlowModel",{get:function(){return this.graph.withControlFlow},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDynamicShapeModel",{get:function(){return this.graph.withDynamicShape},enumerable:!0,configurable:!0}),t.prototype.compile=function(t){if(!this.graph.withControlFlow&&!this.graph.withDynamicShape){var e=[],n=t||this.graph.placeholders,r=n.map(function(t){return t.name}).sort().join(this.SEPERATOR);if(!this.compiledMap.get(r)){for(var i=n.concat(this.graph.weights),a={};i.length>0;){var o=i.pop();a[o.name]=!0,e.push(o),o.children.forEach(function(t){!a[t.name]&&t.inputNames.every(function(t){var e=getNodeNameAndIndex(t)[0];return a[e]})&&i.push(t)})}this.compiledMap.set(r,e)}}},t.prototype.execute=function(t,e,n){var r=this;void 0===e&&(e=!0);var i=Object.keys(t).sort();this.checkInput(t,e),this.checkInputShapeAndType(t,e),this.compile(i.map(function(t){return r.graph.nodes[t]}));var a=this.calculateOutputs(n);this.checkOutput(this.compiledMap.get(i.join(this.SEPERATOR)),a);var o={};return Object(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.uc)(function(){for(var e=new ExecutionContext(r._weightMap,o),n=__assign({},r.weightMap,t),s=r.compiledMap.get(i.join(r.SEPERATOR)),u=0;u<s.length;u++){var l=s[u];if(n[l.name]||(n[l.name]=executeOp$15(l,n,e)),a.every(function(t){return!!n[t]}))break}return r.findOutputs(n,e,a)})},t.prototype.executeAsync=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r,i,a,o,s,u,l=this;return __generator(this,function(c){switch(c.label){case 0:return this.checkInput(t,!1),this.checkInputShapeAndType(t,!1),n={},r=new ExecutionContext(this._weightMap,n),[4,this.executeWithControlFlow(t,r)];case 1:return i=c.sent(),a=this.findOutputs(i,r,e),o=Object.keys(a).map(function(t){return a[t].id}),s=Object.keys(t).map(function(e){return t[e].map(function(t){return t.id})}),u=[].concat.apply([],s),Object.keys(i).forEach(function(t){i[t].forEach(function(t){t&&-1===o.indexOf(t.id)&&-1===u.indexOf(t.id)&&-1===l.weightIds.indexOf(t.id)&&t.dispose()})}),[2,a]}})})},t.prototype.executeWithControlFlow=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r,i,a,o,s,u=this;return __generator(this,function(l){switch(l.label){case 0:n=Object.keys(t),r=n.map(function(t){return u.graph.nodes[t]}),i=r.concat(this.graph.weights).map(function(t){return{node:t,contexts:e.currentContext}}),a=__assign({},this.weightMap,t),o={},l.label=1;case 1:return i.length>0?(s=this.processStack(r,i,e,a,o),[4,Promise.all(s)]):[3,3];case 2:return l.sent(),[3,1];case 3:return[2,a]}})})},t.prototype.processStack=function(t,e,n,r,i){for(var a=this,o=[],s=function(){var s=e.pop();n.currentContext=s.contexts;var l="";if("enter"===s.node.op&&getParamValue("isConstant",s.node,r,n)&&(l=getNodeNameAndIndex(s.node.name,n)[0]),-1===t.indexOf(s.node)){var c=executeOp$15(s.node,r,n);l||(l=getNodeNameAndIndex(s.node.name,n)[0]);var f=n.currentContext;c instanceof Promise?o.push(c.then(function(t){return r[l]=t,n.currentContext=f,a.processChildNodes(s.node,e,n,r,i),t})):(r[l]=c,u.processChildNodes(s.node,e,n,r,i))}else u.processChildNodes(s.node,e,n,r,i)},u=this;e.length>0;)s();return o},t.prototype.processChildNodes=function(t,e,n,r,i){t.children.forEach(function(t){var a=getNodeNameAndIndex(t.name,n)[0];i[a]||("merge"===t.op?t.inputNames.some(function(t){return!!getTensor(t,r,n)})&&(i[a]=!0,e.push({contexts:n.currentContext,node:t})):t.inputNames.every(function(t){return!!getTensor(t,r,n)})&&(i[a]=!0,e.push({contexts:n.currentContext,node:t})))})},t.prototype.calculateOutputs=function(t){return!t||t instanceof Array||(t=[t]),t||this.graph.outputs.map(function(t){return t.name})},t.prototype.findOutputs=function(t,e,n){return this.calculateOutputs(n).reduce(function(n,r){return n[r]=getTensor(r,t,e),n},{})},t.prototype.dispose=function(){var t=this;Object.keys(this.weightMap).forEach(function(e){return t.weightMap[e].forEach(function(t){return t.dispose()})})},t.prototype.checkInputShapeAndType=function(t,e){void 0===e&&(e=!0),this.placeholders.forEach(function(n){var r=t[n.name];if(e||r){var i=r[0];if(n.params.shape&&n.params.shape.value){var a=n.params.shape.value,o=a.length===i.shape.length&&i.shape.every(function(t,e){return-1===a[e]||a[e]===t});_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Bc.assert(o,"The shape of dict['"+n.name+"'] provided in model.execute(dict) must be ["+a+"], but was ["+i.shape+"]")}n.params.dtype&&n.params.dtype.value&&_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.Bc.assert(i.dtype===n.params.dtype.value,"The dtype of dict['"+n.name+"'] provided in model.execute(dict) must be "+n.params.dtype.value+", but was "+i.dtype)}})},t.prototype.checkInput=function(t,e){var n=this;void 0===e&&(e=!0);var r=Object.keys(t),i=[],a=[];this.inputNodes.forEach(function(t){-1===r.indexOf(t)&&i.push(t)}),r.forEach(function(t){-1===n.inputNodes.indexOf(t)&&a.push(t)});var o=a.filter(function(t){return!n.graph.nodes[t]});if(i.length>0&&e)throw new Error("The dict provided in model.execute(dict) has the keys ["+r+"], but is missing the required keys: ["+i+"].");if(a.length>0&&e)throw new Error("The dict provided in model.execute(dict) has unused keys: ["+a+"]. Please provide only the following keys: ["+this.inputNodes+"].");if(o.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+o+"] not part of model graph.")},t.prototype.checkOutput=function(t,e){var n=t.map(function(t){return t.name}),r=[];if(e.forEach(function(t){-1===n.indexOf(t)&&r.push(t)}),r.length>0)throw new Error("The following outputs are not be generated by the execution: ["+r+"].")},t}(),FrozenModel=function(){function t(t,e,n){this.modelUrl=t,this.weightManifestUrl=e,this.requestOption=n,this.version="n/a"}return Object.defineProperty(t.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),t.prototype.findIOHandler=function(){var t=[this.modelUrl,this.weightManifestUrl];if(this.requestOption)this.handler=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bb.browserHTTPRequest(t,this.requestOption);else{var e=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bb.getLoadHandlers(t);if(0===e.length)e.push(_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bb.browserHTTPRequest(t,this.requestOption));else if(e.length>1)throw new Error("Found more than one ("+e.length+") load handlers for URL '"+[t]+"'");this.handler=e[0]}},t.prototype.load=function(){return __awaiter(this,void 0,void 0,function(){var t,e,n;return __generator(this,function(r){switch(r.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return t=r.sent(),e=compiled_api_1.GraphDef.decode(new Uint8Array(t.modelTopology)),this.version=e.versions.producer+"."+e.versions.minConsumer,n=_tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.bb.decodeWeights(t.weightData,t.weightSpecs),this.executor=new GraphExecutor(OperationMapper.Instance.transformGraph(e)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),[2,!0]}})})},t.prototype.predict=function(t,e){return this.execute_(t,!0,this.outputNodes)},t.prototype.constructTensorMap=function(t){var e=t instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.c?[t]:t;if(e.length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the frozen model has "+this.inputNodes.length+" placeholders, while there are "+e.length+" input tensors.");return this.inputNodes.reduce(function(t,n,r){return t[n]=e[r],t},{})},t.prototype.execute=function(t,e){return this.execute_(t,!1,e)},t.prototype.execute_=function(t,e,n){if(void 0===e&&(e=!0),n=n||this.outputNodes,(t instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.c||Array.isArray(t))&&(t=this.constructTensorMap(t)),this.executor.isControlFlowModel||this.executor.isDynamicShapeModel)throw new Error("The model contains control flow or dynamic shape ops, please use executeAsync method");var r=this.executor.execute(this.convertTensorMapToTensorsMap(t),e,n),i=Object.keys(r);return Array.isArray(n)&&n.length>1?n.map(function(t){return r[t]}):r[i[0]]},t.prototype.executeAsync=function(t,e){return __awaiter(this,void 0,void 0,function(){var n,r;return __generator(this,function(i){switch(i.label){case 0:if(!this.executor.isControlFlowModel&&!this.executor.isDynamicShapeModel)throw new Error("The model does not contain control flow or dynamic shape ops, please use execute method for better performance.");return e=e||this.outputNodes,(t instanceof _tensorflow_tfjs_core__WEBPACK_IMPORTED_MODULE_0__.c||Array.isArray(t))&&(t=this.constructTensorMap(t)),[4,this.executor.executeAsync(this.convertTensorMapToTensorsMap(t),e)];case 1:return n=i.sent(),r=Object.keys(n),[2,Array.isArray(e)&&e.length>1?e.map(function(t){return n[t]}):n[r[0]]]}})})},t.prototype.convertTensorMapToTensorsMap=function(t){return Object.keys(t).reduce(function(e,n){return e[n]=[t[n]],e},{})},t.prototype.dispose=function(){this.executor.dispose()},t}();function loadFrozenModel(t,e,n){return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(i){switch(i.label){case 0:return[4,(r=new FrozenModel(t,e,n)).load()];case 1:return i.sent(),[2,r]}})})}var version="0.6.1"}).call(this,__webpack_require__(26))},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",function(){return r})},function(t,e,n){t.exports=n(349)},function(t,e,n){"use strict";function r(t){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(t){return r(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)})(t)}var a=n(34);function o(t,e){return!e||"object"!==i(e)&&"function"!==typeof e?Object(a.a)(t):e}n.d(e,"a",function(){return o})},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,o,s=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),u=1;u<arguments.length;u++){for(var l in n=Object(arguments[u]))i.call(n,l)&&(s[l]=n[l]);if(r){o=r(n);for(var c=0;c<o.length;c++)a.call(n,o[c])&&(s[o[c]]=n[o[c]])}}return s}},function(t,e,n){var r=n(18),i=n(16).document,a=r(i)&&r(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},function(t,e,n){var r=n(16),i=n(50),a=n(64),o=n(217),s=n(21).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},function(t,e,n){var r=n(121)("keys"),i=n(70);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(16).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(18),i=n(14),a=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(43)(Function.call,n(37).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return a(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:a}},function(t,e){t.exports="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff"},function(t,e,n){var r=n(18),i=n(165).set;t.exports=function(t,e,n){var a,o=e.constructor;return o!==n&&"function"==typeof o&&(a=o.prototype)!==n.prototype&&r(a)&&i&&i(t,a),t}},function(t,e,n){"use strict";var r=n(53),i=n(52);t.exports=function(t){var e=String(i(this)),n="",a=r(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(53),i=n(52);t.exports=function(t){return function(e,n){var a,o,s=String(i(e)),u=r(n),l=s.length;return u<0||u>=l?t?"":void 0:(a=s.charCodeAt(u))<55296||a>56319||u+1===l||(o=s.charCodeAt(u+1))<56320||o>57343?t?s.charAt(u):a:t?s.slice(u,u+2):o-56320+(a-55296<<10)+65536}}},function(t,e,n){"use strict";var r=n(64),i=n(1),a=n(31),o=n(30),s=n(89),u=n(173),l=n(87),c=n(38),f=n(19)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,e,n,d,m,g,v){u(n,e,d);var y,b,_,x=function(t){if(!h&&t in k)return k[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",S="values"==m,E=!1,k=t.prototype,T=k[f]||k["@@iterator"]||m&&k[m],P=T||x(m),M=m?S?x("entries"):P:void 0,C="Array"==e&&k.entries||T;if(C&&(_=c(C.call(new t)))!==Object.prototype&&_.next&&(l(_,w,!0),r||"function"==typeof _[f]||o(_,f,p)),S&&T&&"values"!==T.name&&(E=!0,P=function(){return T.call(this)}),r&&!v||!h&&!E&&k[f]||o(k,f,P),s[e]=P,s[w]=p,m)if(y={values:S?P:x("values"),keys:g?P:x("keys"),entries:M},v)for(b in y)b in k||a(k,b,y[b]);else i(i.P+i.F*(h||E),e,y);return y}},function(t,e,n){"use strict";var r=n(73),i=n(69),a=n(87),o={};n(30)(o,n(19)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(o,{next:i(1,n)}),a(t,e+" Iterator")}},function(t,e,n){var r=n(125),i=n(52);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(19)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(i){}}return!0}},function(t,e,n){var r=n(89),i=n(19)("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[i]===t)}},function(t,e,n){"use strict";var r=n(21),i=n(69);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(99),i=n(19)("iterator"),a=n(89);t.exports=n(50).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||a[r(t)]}},function(t,e,n){var r=n(443);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){"use strict";var r=n(25),i=n(72),a=n(22);t.exports=function(t){for(var e=r(this),n=a(e.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,n),u=o>2?arguments[2]:void 0,l=void 0===u?n:i(u,n);l>s;)e[s++]=t;return e}},function(t,e,n){"use strict";var r=n(65),i=n(233),a=n(89),o=n(36);t.exports=n(172)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r,i,a,o=n(43),s=n(223),u=n(164),l=n(160),c=n(16),f=c.process,h=c.setImmediate,p=c.clearImmediate,d=c.MessageChannel,m=c.Dispatch,g=0,v={},y=function(){var t=+this;if(v.hasOwnProperty(t)){var e=v[t];delete v[t],e()}},b=function(t){y.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return v[++g]=function(){s("function"==typeof t?t:Function(t),e)},r(g),g},p=function(t){delete v[t]},"process"==n(44)(f)?r=function(t){f.nextTick(o(y,t,1))}:m&&m.now?r=function(t){m.now(o(y,t,1))}:d?(a=(i=new d).port2,i.port1.onmessage=b,r=o(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(t){c.postMessage(t+"","*")},c.addEventListener("message",b,!1)):r="onreadystatechange"in l("script")?function(t){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(o(y,t,1),0)}),t.exports={set:h,clear:p}},function(t,e,n){var r=n(16),i=n(182).set,a=r.MutationObserver||r.WebKitMutationObserver,o=r.process,s=r.Promise,u="process"==n(44)(o);t.exports=function(){var t,e,n,l=function(){var r,i;for(u&&(r=o.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(a){throw t?n():e=void 0,a}}e=void 0,r&&r.enter()};if(u)n=function(){o.nextTick(l)};else if(!a||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var c=s.resolve(void 0);n=function(){c.then(l)}}else n=function(){i.call(r,l)};else{var f=!0,h=document.createTextNode("");new a(l).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";var r=n(27);function i(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},function(t,e,n){"use strict";var r=n(16),i=n(20),a=n(64),o=n(132),s=n(30),u=n(78),l=n(17),c=n(76),f=n(53),h=n(22),p=n(242),d=n(74).f,m=n(21).f,g=n(180),v=n(87),y="prototype",b="Wrong index!",_=r.ArrayBuffer,x=r.DataView,w=r.Math,S=r.RangeError,E=r.Infinity,k=_,T=w.abs,P=w.pow,M=w.floor,C=w.log,O=w.LN2,I=i?"_b":"buffer",N=i?"_l":"byteLength",A=i?"_o":"byteOffset";function R(t,e,n){var r,i,a,o=new Array(n),s=8*n-e-1,u=(1<<s)-1,l=u>>1,c=23===e?P(2,-24)-P(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for((t=T(t))!=t||t===E?(i=t!=t?1:0,r=u):(r=M(C(t)/O),t*(a=P(2,-r))<1&&(r--,a*=2),(t+=r+l>=1?c/a:c*P(2,1-l))*a>=2&&(r++,a/=2),r+l>=u?(i=0,r=u):r+l>=1?(i=(t*a-1)*P(2,e),r+=l):(i=t*P(2,l-1)*P(2,e),r=0));e>=8;o[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;o[f++]=255&r,r/=256,s-=8);return o[--f]|=128*h,o}function D(t,e,n){var r,i=8*n-e-1,a=(1<<i)-1,o=a>>1,s=i-7,u=n-1,l=t[u--],c=127&l;for(l>>=7;s>0;c=256*c+t[u],u--,s-=8);for(r=c&(1<<-s)-1,c>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===c)c=1-o;else{if(c===a)return r?NaN:l?-E:E;r+=P(2,e),c-=o}return(l?-1:1)*r*P(2,c-e)}function j(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function L(t){return[255&t]}function F(t){return[255&t,t>>8&255]}function z(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function B(t){return R(t,52,8)}function U(t){return R(t,23,4)}function V(t,e,n){m(t[y],e,{get:function(){return this[n]}})}function q(t,e,n,r){var i=p(+n);if(i+e>t[N])throw S(b);var a=t[I]._b,o=i+t[A],s=a.slice(o,o+e);return r?s:s.reverse()}function W(t,e,n,r,i,a){var o=p(+n);if(o+e>t[N])throw S(b);for(var s=t[I]._b,u=o+t[A],l=r(+i),c=0;c<e;c++)s[u+c]=l[a?c:e-c-1]}if(o.ABV){if(!l(function(){_(1)})||!l(function(){new _(-1)})||l(function(){return new _,new _(1.5),new _(NaN),"ArrayBuffer"!=_.name})){for(var G,H=(_=function(t){return c(this,_),new k(p(t))})[y]=k[y],$=d(k),K=0;$.length>K;)(G=$[K++])in _||s(_,G,k[G]);a||(H.constructor=_)}var X=new x(new _(2)),Y=x[y].setInt8;X.setInt8(0,2147483648),X.setInt8(1,2147483649),!X.getInt8(0)&&X.getInt8(1)||u(x[y],{setInt8:function(t,e){Y.call(this,t,e<<24>>24)},setUint8:function(t,e){Y.call(this,t,e<<24>>24)}},!0)}else _=function(t){c(this,_,"ArrayBuffer");var e=p(t);this._b=g.call(new Array(e),0),this[N]=e},x=function(t,e,n){c(this,x,"DataView"),c(t,_,"DataView");var r=t[N],i=f(e);if(i<0||i>r)throw S("Wrong offset!");if(i+(n=void 0===n?r-i:h(n))>r)throw S("Wrong length!");this[I]=t,this[A]=i,this[N]=n},i&&(V(_,"byteLength","_l"),V(x,"buffer","_b"),V(x,"byteLength","_l"),V(x,"byteOffset","_o")),u(x[y],{getInt8:function(t){return q(this,1,t)[0]<<24>>24},getUint8:function(t){return q(this,1,t)[0]},getInt16:function(t){var e=q(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=q(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return j(q(this,4,t,arguments[1]))},getUint32:function(t){return j(q(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return D(q(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return D(q(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){W(this,1,t,L,e)},setUint8:function(t,e){W(this,1,t,L,e)},setInt16:function(t,e){W(this,2,t,F,e,arguments[2])},setUint16:function(t,e){W(this,2,t,F,e,arguments[2])},setInt32:function(t,e){W(this,4,t,z,e,arguments[2])},setUint32:function(t,e){W(this,4,t,z,e,arguments[2])},setFloat32:function(t,e){W(this,4,t,U,e,arguments[2])},setFloat64:function(t,e){W(this,8,t,B,e,arguments[2])}});v(_,"ArrayBuffer"),v(x,"DataView"),s(x[y],o.VIEW,!0),e.ArrayBuffer=_,e.DataView=x},function(t,e,n){var r=n(554),i=n(103),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&o.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e){var n=9007199254740991;t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}},function(t,e,n){var r=n(565),i=n(103);t.exports=function t(e,n,a,o,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!==e&&n!==n:r(e,n,a,o,t,s))}},function(t,e,n){var r=n(79)(n(56),"Map");t.exports=r},function(t,e,n){var r=n(580),i=n(587),a=n(589),o=n(590),s=n(591);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(144),i=n(106);t.exports=function(t,e){for(var n=0,a=(e=r(e,t)).length;null!=t&&n<a;)t=t[i(e[n++])];return n&&n==a?t:void 0}},function(t,e,n){var r=n(46),i=n(145),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||o.test(t)||!a.test(t)||null!=e&&t in Object(e)}},function(t,e){t.exports=function(t){return t}},function(t,e,n){(function(t){var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(657),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(26))},function(t,e,n){"use strict";(function(e){var r=n(40),i=n(661),a={"Content-Type":"application/x-www-form-urlencoded"};function o(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var s={adapter:function(){var t;return"undefined"!==typeof XMLHttpRequest?t=n(270):"undefined"!==typeof e&&(t=n(270)),t}(),transformRequest:[function(t,e){return i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(o(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)?(o(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],function(t){s.headers[t]={}}),r.forEach(["post","put","patch"],function(t){s.headers[t]=r.merge(a)}),t.exports=s}).call(this,n(39))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={InputLayer:!0};Object.defineProperty(e,"InputLayer",{enumerable:!0,get:function(){return a.default}});var i,a=(i=n(678))&&i.__esModule?i:{default:i},o=n(689);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}}))});var s=n(706);Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}}))});var u=n(738);Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}}))});var l=n(779);Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}}))});var c=n(781);Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}}))});var f=n(792);Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}}))});var h=n(795);Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}}))});var p=n(797);Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}}))});var d=n(289);Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}}))});var m=n(813);Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(r,t)||Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}}))})},function(t,e,n){"use strict";var r=n(61),i=n(47),a=n(2),o=n(7),s=n(4),u=n(3),l=n(33),c=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=x(n(11)),h=x(n(8)),p=_(n(48)),d=n(9),m=x(n(49)),g=_(n(60)),v=x(n(12)),y=x(n(92)),b=_(n(62));function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}var w="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",S="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(indexMap, 0);\n  int out_x = int(float(outputSize[0]) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    int fragmentIndex = int(floor(float(rowIndex) / float(inputSize[1])));\n    rowIndex = int(mod(float(rowIndex), float(inputSize[1])));\n    colIndex = fragmentIndex * inputCols + colIndex;\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",E="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",k=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),(t=s(this,u(e).call(this,n))).layerClass="Conv2D";var r=n.filters,o=void 0===r?1:r,l=n.kernel_size,c=void 0===l?[3,3]:l,f=n.strides,h=void 0===f?[1,1]:f,m=n.padding,g=void 0===m?"valid":m,v=n.data_format,y=void 0===v?"channels_last":v,_=n.dilation_rate,x=void 0===_?[1,1]:_,k=n.activation,T=void 0===k?"linear":k,P=n.use_bias,M=void 0===P||P;return Array.isArray(c)?t.kernelShape=[o].concat(i(c)):t.kernelShape=[o,c,c],Array.isArray(h)?t.strides=h:t.strides=[h,h],"valid"===g||"same"===g?t.padding=g:t.throwError("Invalid padding."),"channels_last"===y||"channels_first"===y?t.dataFormat=y:t.throwError("Only channels_last and channels_first data formats are allowed."),Array.isArray(x)?t.dilationRate=x:t.dilationRate=[x,x],1===t.dilationRate[0]&&1===t.dilationRate[1]||1===t.strides[0]&&1===t.strides[1]||t.throwError("Incompatible combination of dilation_rate with strides."),t.activation=T,t.activationFunc=p[T],t.useBias=M,t.params=t.useBias?["kernel","bias"]:["kernel"],t.description="".concat(t.kernelShape[0]," ").concat(t.kernelShape.slice(1).join("x")," filters"),t.description+=t.strides.some(function(t){return t>1})?", ".concat(t.strides.join("x")," striding"):"",t.description+="valid"===t.padding?", no border padding":", pad to same borders",t.description+=t.dilationRate.some(function(t){return t>1})?", ".concat(t.dilationRate.join("x")," dilation"):"",t.description+="linear"!==t.activation?", ".concat(t.activation," activation"):"",t.gpu&&(t.mapInputProgram=d.webgl2.compileProgram(w),t.mapInputFragmentsProgram=d.webgl2.compileProgram(S),t.matMulProgram=d.webgl2.compileProgram(E),t.activationProgram=d.webgl2.compileProgram(b[t.activation])),t}return c(e,t),o(e,[{key:"setWeights",value:function(t){"channels_first"===this.dataFormat&&(t[0].tensor=t[0].tensor.transpose(2,3,1,0)),l(u(e.prototype),"setWeights",this).call(this,t,!1),this._w2row(),this.gpu&&(this.weights.kernel=this.wRowsMat,this.weights.kernel.createGLTexture({type:"2d",format:"float"}),this.useBias&&this.weights.bias.createGLTexture({type:"2d",format:"float"}))}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_calcOutputShape",value:function(t){if(!this.outputShape||!this.inputPadding){var e=t[0],n=t[1],i=r(this.kernelShape,3),a=i[0],o=i[1],s=i[2],u=o+(o-1)*(this.dilationRate[0]-1),l=s+(s-1)*(this.dilationRate[1]-1),c="same"===this.padding?Math.floor((e+this.strides[0]-1)/this.strides[0]):Math.floor((e-u+this.strides[0])/this.strides[0]),f="same"===this.padding?Math.floor((n+this.strides[1]-1)/this.strides[1]):Math.floor((n-l+this.strides[1])/this.strides[1]),h=a,p="same"===this.padding?Math.max(0,Math.floor((c-1)*this.strides[0]+u-e)):0,d="same"===this.padding?Math.max(0,Math.floor((f-1)*this.strides[1]+l-n)):0,m=Math.floor(p/2),g=p-m,v=Math.floor(d/2),y=d-v;this.outputShape=[c,f,h],this.inputPadding=[m,g,v,y]}}},{key:"_padInput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("same"===this.padding){var n=r(t.tensor.shape,3),i=n[0],a=n[1],o=n[2],s=r(this.inputPadding,4),u=s[0],l=s[1],c=s[2],f=i+u+l,p=a+c+s[3],d=new h.default([],[f,p,o]);return 0!==e&&v.default.assigns(d.tensor,e),v.default.assign(d.tensor.hi(i+u,a+c,o).lo(u,c,0),t.tensor),d}return t}},{key:"_im2col",value:function(t){var e=r(t.tensor.shape,3),n=e[0],i=e[1],a=e[2],o=this.kernelShape[1],s=this.kernelShape[2],u=this.outputShape[0]*this.outputShape[1],l=o*s*a,c=o+(o-1)*(this.dilationRate[0]-1),f=s+(s-1)*(this.dilationRate[1]-1);if(this.imColsMat||(this.imColsMat=new h.default([],[u,l])),1===c&&1===f&&1===this.strides[0]&&1===this.strides[1])return this.imColsMat.replaceTensorData(t.tensor.data),this.imColsMat;for(var p=new h.default([],[o,s,a]),d=0,m=0,g=n-c;m<=g;m+=this.strides[0])for(var y=0,b=i-f;y<=b;y+=this.strides[1])v.default.assign(p.tensor,t.tensor.hi(m+c,y+f,a).lo(m,y,0).step(this.dilationRate[0],this.dilationRate[1],1)),this.imColsMat.tensor.data.set(p.tensor.data,d),d+=l;return this.imColsMat}},{key:"_w2row",value:function(){var t=this.weights.kernel.tensor.shape[2],e=r(this.kernelShape,3),n=e[0],i=e[1],a=e[2],o=i*a*t;this.wRowsMat=new h.default([],[o,n]);for(var s=new h.default([],[i,a,t]),u=new h.default([],[o]),l=0;l<n;l++)v.default.assign(s.tensor,this.weights.kernel.tensor.pick(null,null,null,l)),u.replaceTensorData(s.tensor.data),v.default.assign(this.wRowsMat.tensor.pick(null,l),u.tensor);return this.wRowsMat}},{key:"_callCPU",value:function(t){this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._im2col(t);var e=this.kernelShape[0],n=this.outputShape[0],r=this.outputShape[1],i=n*r,a=new h.default([],[i,e]);if(this.useBias)for(var o=0;o<e;o++)v.default.assigns(a.tensor.pick(null,o),this.weights.bias.tensor.get(o));(0,y.default)(a.tensor,this.imColsMat.tensor,this.wRowsMat.tensor,1,1),this.output=new h.default([],this.outputShape);for(var s=new h.default([],[n*r]),u=new h.default([],[n,r]),l=0;l<e;l++)v.default.assign(s.tensor,a.tensor.pick(null,l)),u.replaceTensorData(s.tensor.data),v.default.assign(this.output.tensor.pick(null,null,l),u.tensor);this.activationFunc(this.output),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1))}},{key:"_createIndexMap",value:function(t){if(!this.indexMap){var e=r(this.inputShape,3),n=e[0],i=e[1],a=e[2],o=new h.default(t.data,t.shape,{type:Int32Array});if("same"===this.padding){var s=r(this.inputPadding,4);n=n+s[0]+s[1],i=i+s[2]+s[3];o=this._padInput(o,-1)}var u=this.kernelShape[1],l=this.kernelShape[2],c=this.outputShape[0]*this.outputShape[1],f=u*l*a,p=u+(u-1)*(this.dilationRate[0]-1),d=l+(l-1)*(this.dilationRate[1]-1);this.indexMap=new h.default([],[c,f],{type:Int32Array});for(var m=new h.default([],[u,l,a]),g=0,y=0,b=n-p;y<=b;y+=this.strides[0])for(var _=0,x=i-d;_<=x;_+=this.strides[1])v.default.assign(m.tensor,o.tensor.hi(y+p,_+d,a).lo(y,_,0).step(this.dilationRate[0],this.dilationRate[1],1)),this.indexMap.tensor.data.set(m.tensor.data,g),g+=f;this.indexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}}},{key:"_callGPU",value:function(t){var e;if(t.is2DReshaped||t.is2DSquareReshaped?(this.inputShape=t.originalShape,this._calcOutputShape(this.inputShape),this._createIndexMap(t.indicesForReshaped),e=[this.indexMap.glTextureShape[0],this.weights.kernel.glTextureShape[1]]):(this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._im2col(t),this.imColsMat.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),e=[this.imColsMat.glTextureShape[0],this.weights.kernel.glTextureShape[1]]),"linear"===this.activation||this.outputPreactiv||(this.outputPreactiv=new h.default([],e),this.outputPreactiv.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.outputPreactiv.is2DReshaped=!0,this.outputPreactiv.originalShape=this.outputShape,this.outputPreactiv.indicesForReshaped=g.createIndicesFor2DReshaped(this.outputShape,!1,-1)),this.output||(this.output=new h.default([],e),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=g.createIndicesFor2DReshaped(this.outputShape,!1,-1)),t.is2DReshaped||t.is2DSquareReshaped){var n=Boolean(t.glTextureFragments);if(n&&t.convert2DRowFragmentedGLTextureToColStack(),!this.convProgram){var r=(0,m.default)("conv2d",this.output.glTextureFragmentShape?this.output.glTextureFragmentShape:this.output.glTextureShape,t.glTextureFragmentShape?t.glTextureFragmentShape:t.glTextureShape,this.indexMap.glTextureFragmentShape?this.indexMap.glTextureFragmentShape:this.indexMap.glTextureShape,this.useBias,n);this.convProgram=d.webgl2.compileProgram(r)}d.webgl2.runProgram({program:this.convProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"},{input:this.weights.kernel,name:"kernel"}].concat(i(this.useBias?[{input:this.weights.bias,name:"bias"}]:[])),supportsTextureFragments:!0}),n&&t.removeGLTextureFragmentsAsColStack()}else{var a=[{input:this.imColsMat,name:"A"},{input:this.weights.kernel,name:"B"}];this.useBias&&a.push({input:this.weights.bias,name:"C"}),d.webgl2.runProgram({program:this.matMulProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:a,uniforms:[{value:this.useBias?1:0,type:"bool",name:"addC"}],supportsTextureFragments:!0})}"linear"!==this.activation&&d.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1)))}}]),e}(f.default);e.default=k},function(t,e,n){"use strict";var r=n(13),i=n(292),a=n(15).Buffer,o=new Array(16);function s(){i.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function u(t,e){return t<<e|t>>>32-e}function l(t,e,n,r,i,a,o){return u(t+(e&n|~e&r)+i+a|0,o)+e|0}function c(t,e,n,r,i,a,o){return u(t+(e&r|n&~r)+i+a|0,o)+e|0}function f(t,e,n,r,i,a,o){return u(t+(e^n^r)+i+a|0,o)+e|0}function h(t,e,n,r,i,a,o){return u(t+(n^(e|~r))+i+a|0,o)+e|0}r(s,i),s.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var n=this._a,r=this._b,i=this._c,a=this._d;n=l(n,r,i,a,t[0],3614090360,7),a=l(a,n,r,i,t[1],3905402710,12),i=l(i,a,n,r,t[2],606105819,17),r=l(r,i,a,n,t[3],3250441966,22),n=l(n,r,i,a,t[4],4118548399,7),a=l(a,n,r,i,t[5],1200080426,12),i=l(i,a,n,r,t[6],2821735955,17),r=l(r,i,a,n,t[7],4249261313,22),n=l(n,r,i,a,t[8],1770035416,7),a=l(a,n,r,i,t[9],2336552879,12),i=l(i,a,n,r,t[10],4294925233,17),r=l(r,i,a,n,t[11],2304563134,22),n=l(n,r,i,a,t[12],1804603682,7),a=l(a,n,r,i,t[13],4254626195,12),i=l(i,a,n,r,t[14],2792965006,17),n=c(n,r=l(r,i,a,n,t[15],1236535329,22),i,a,t[1],4129170786,5),a=c(a,n,r,i,t[6],3225465664,9),i=c(i,a,n,r,t[11],643717713,14),r=c(r,i,a,n,t[0],3921069994,20),n=c(n,r,i,a,t[5],3593408605,5),a=c(a,n,r,i,t[10],38016083,9),i=c(i,a,n,r,t[15],3634488961,14),r=c(r,i,a,n,t[4],3889429448,20),n=c(n,r,i,a,t[9],568446438,5),a=c(a,n,r,i,t[14],3275163606,9),i=c(i,a,n,r,t[3],4107603335,14),r=c(r,i,a,n,t[8],1163531501,20),n=c(n,r,i,a,t[13],2850285829,5),a=c(a,n,r,i,t[2],4243563512,9),i=c(i,a,n,r,t[7],1735328473,14),n=f(n,r=c(r,i,a,n,t[12],2368359562,20),i,a,t[5],4294588738,4),a=f(a,n,r,i,t[8],2272392833,11),i=f(i,a,n,r,t[11],1839030562,16),r=f(r,i,a,n,t[14],4259657740,23),n=f(n,r,i,a,t[1],2763975236,4),a=f(a,n,r,i,t[4],1272893353,11),i=f(i,a,n,r,t[7],4139469664,16),r=f(r,i,a,n,t[10],3200236656,23),n=f(n,r,i,a,t[13],681279174,4),a=f(a,n,r,i,t[0],3936430074,11),i=f(i,a,n,r,t[3],3572445317,16),r=f(r,i,a,n,t[6],76029189,23),n=f(n,r,i,a,t[9],3654602809,4),a=f(a,n,r,i,t[12],3873151461,11),i=f(i,a,n,r,t[15],530742520,16),n=h(n,r=f(r,i,a,n,t[2],3299628645,23),i,a,t[0],4096336452,6),a=h(a,n,r,i,t[7],1126891415,10),i=h(i,a,n,r,t[14],2878612391,15),r=h(r,i,a,n,t[5],4237533241,21),n=h(n,r,i,a,t[12],1700485571,6),a=h(a,n,r,i,t[3],2399980690,10),i=h(i,a,n,r,t[10],4293915773,15),r=h(r,i,a,n,t[1],2240044497,21),n=h(n,r,i,a,t[8],1873313359,6),a=h(a,n,r,i,t[15],4264355552,10),i=h(i,a,n,r,t[6],2734768916,15),r=h(r,i,a,n,t[13],1309151649,21),n=h(n,r,i,a,t[4],4149444226,6),a=h(a,n,r,i,t[11],3174756917,10),i=h(i,a,n,r,t[2],718787259,15),r=h(r,i,a,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+r|0,this._c=this._c+i|0,this._d=this._d+a|0},s.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=a.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=s},function(t,e,n){t.exports=i;var r=n(200).EventEmitter;function i(){r.call(this)}n(13)(i,r),i.Readable=n(201),i.Writable=n(847),i.Duplex=n(848),i.Transform=n(849),i.PassThrough=n(850),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",a),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,t.end())}function u(){o||(o=!0,"function"===typeof t.destroy&&t.destroy())}function l(t){if(c(),0===r.listenerCount(this,"error"))throw t}function c(){n.removeListener("data",i),t.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),t.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),t.removeListener("close",c)}return n.on("error",l),t.on("error",l),n.on("end",c),n.on("close",c),t.on("close",c),t.emit("pipe",n),t}},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"===typeof t}function i(t){return"object"===typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if("number"!==typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,o,s,u,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}if(a(n=this._events[t]))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),o=(l=n.slice()).length,u=0;u<o;u++)l[u].apply(this,s);return!0},n.prototype.addListener=function(t,e){var o;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?i(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,i(this._events[t])&&!this._events[t].warned&&(o=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&o>0&&this._events[t].length>o&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"===typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}return i.listener=e,this.on(t,i),this},n.prototype.removeListener=function(t,e){var n,a,o,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(n=this._events[t]).length,a=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r(n=this._events[t]))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){(e=t.exports=n(293)).Stream=e,e.Readable=e,e.Writable=n(202),e.Duplex=n(83),e.Transform=n(296),e.PassThrough=n(846)},function(t,e,n){"use strict";(function(e,r,i){var a=n(147);function o(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var s,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:a.nextTick;y.WritableState=v;var l=n(110);l.inherits=n(13);var c={deprecate:n(845)},f=n(294),h=n(15).Buffer,p=i.Uint8Array||function(){};var d,m=n(295);function g(){}function v(t,e){s=s||n(83),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,l=t.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var f=!1===t.decodeStrings;this.decodeStrings=!f,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(a.nextTick(i,r),a.nextTick(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),E(t,e))}(t,n,r,e,i);else{var o=w(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||x(t,n),r?u(_,t,n,o,i):_(t,n,o,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(t){if(s=s||n(83),!d.call(y,this)&&!(this instanceof s))return new y(t);this._writableState=new v(t,this),this.writable=!0,t&&("function"===typeof t.write&&(this._write=t.write),"function"===typeof t.writev&&(this._writev=t.writev),"function"===typeof t.destroy&&(this._destroy=t.destroy),"function"===typeof t.final&&(this._final=t.final)),f.call(this)}function b(t,e,n,r,i,a,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,a,e.onwrite),e.sync=!1}function _(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),E(t,e)}function x(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),a=e.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,b(t,e,!0,e.length,i,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new o(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,f=n.callback;if(b(t,e,!1,e.objectMode?1:l.length,l,c,f),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),E(t,e)})}function E(t,e){var n=w(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"===typeof t._final?(e.pendingcb++,e.finalCalled=!0,a.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}l.inherits(y,f),v.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===y&&(t&&t._writableState instanceof v)}})):d=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=t,h.isBuffer(r)||r instanceof p);return s&&!h.isBuffer(t)&&(t=function(t){return h.from(t)}(t)),"function"===typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!==typeof n&&(n=g),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),a.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,t,n))&&(i.pendingcb++,o=function(t,e,n,r,i,a){if(!n){var o=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!==typeof e||(e=h.from(e,n));return e}(e,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=e.objectMode?1:r.length;e.length+=s;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,s,r,i,a);return u}(this,i,s,t,e,n)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||x(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"===typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var r=this._writableState;"function"===typeof t?(n=t,t=null,e=null):"function"===typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,E(t,e),n&&(e.finished?a.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=m.destroy,y.prototype._undestroy=m.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(39),n(194).setImmediate,n(26))},function(t,e,n){"use strict";var r=n(15).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!==typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=l,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=c,this.end=f,e=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!==(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function f(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},a.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=o(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";var r=n(23).Buffer,i=n(13),a=n(292),o=new Array(16),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],u=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],c=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],f=[0,1518500249,1859775393,2400959708,2840853838],h=[1352829926,1548603684,1836072691,2053994217,0];function p(){a.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(t,e){return t<<e|t>>>32-e}function m(t,e,n,r,i,a,o,s){return d(t+(e^n^r)+a+o|0,s)+i|0}function g(t,e,n,r,i,a,o,s){return d(t+(e&n|~e&r)+a+o|0,s)+i|0}function v(t,e,n,r,i,a,o,s){return d(t+((e|~n)^r)+a+o|0,s)+i|0}function y(t,e,n,r,i,a,o,s){return d(t+(e&r|n&~r)+a+o|0,s)+i|0}function b(t,e,n,r,i,a,o,s){return d(t+(e^(n|~r))+a+o|0,s)+i|0}i(p,a),p.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var n=0|this._a,r=0|this._b,i=0|this._c,a=0|this._d,p=0|this._e,_=0|this._a,x=0|this._b,w=0|this._c,S=0|this._d,E=0|this._e,k=0;k<80;k+=1){var T,P;k<16?(T=m(n,r,i,a,p,t[s[k]],f[0],l[k]),P=b(_,x,w,S,E,t[u[k]],h[0],c[k])):k<32?(T=g(n,r,i,a,p,t[s[k]],f[1],l[k]),P=y(_,x,w,S,E,t[u[k]],h[1],c[k])):k<48?(T=v(n,r,i,a,p,t[s[k]],f[2],l[k]),P=v(_,x,w,S,E,t[u[k]],h[2],c[k])):k<64?(T=y(n,r,i,a,p,t[s[k]],f[3],l[k]),P=g(_,x,w,S,E,t[u[k]],h[3],c[k])):(T=b(n,r,i,a,p,t[s[k]],f[4],l[k]),P=m(_,x,w,S,E,t[u[k]],h[4],c[k])),n=p,p=a,a=d(i,10),i=r,r=T,_=E,E=S,S=d(w,10),w=x,x=P}var M=this._b+i+S|0;this._b=this._c+a+E|0,this._c=this._d+p+_|0,this._d=this._e+n+x|0,this._e=this._a+r+w|0,this._a=M},p.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=r.alloc?r.alloc(20):new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=p},function(t,e,n){(e=t.exports=function(t){t=t.toLowerCase();var n=e[t];if(!n)throw new Error(t+" is not supported (we accept pull requests)");return new n}).sha=n(851),e.sha1=n(852),e.sha224=n(853),e.sha256=n(297),e.sha384=n(854),e.sha512=n(298)},function(t,e,n){"use strict";e.utils=n(860),e.Cipher=n(861),e.DES=n(862),e.CBC=n(863),e.EDE=n(864)},function(t,e,n){var r=n(865),i=n(873),a=n(308);e.createCipher=e.Cipher=r.createCipher,e.createCipheriv=e.Cipheriv=r.createCipheriv,e.createDecipher=e.Decipher=i.createDecipher,e.createDecipheriv=e.Decipheriv=i.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(a)}},function(t,e,n){var r={ECB:n(866),CBC:n(867),CFB:n(868),CFB8:n(869),CFB1:n(870),OFB:n(871),CTR:n(306),GCM:n(306)},i=n(308);for(var a in i)i[a].module=r[i[a].mode];t.exports=i},function(t,e,n){(function(e){var r=n(24),i=n(93);function a(t,n){var i=function(t){var e=o(t);return{blinder:e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(n),a=n.modulus.byteLength(),s=(r.mont(n.modulus),new r(t).mul(i.blinder).umod(n.modulus)),u=s.toRed(r.mont(n.prime1)),l=s.toRed(r.mont(n.prime2)),c=n.coefficient,f=n.prime1,h=n.prime2,p=u.redPow(n.exponent1),d=l.redPow(n.exponent2);p=p.fromRed(),d=d.fromRed();var m=p.isub(d).imul(c).umod(f);return m.imul(h),d.iadd(m),new e(d.imul(i.unblinder).umod(n.modulus).toArray(!1,a))}function o(t){for(var e=t.modulus.byteLength(),n=new r(i(e));n.cmp(t.modulus)>=0||!n.umod(t.prime1)||!n.umod(t.prime2);)n=new r(i(e));return n}t.exports=a,a.getr=o}).call(this,n(23).Buffer)},function(t,e,n){var r=e;r.utils=n(57),r.common=n(112),r.sha=n(889),r.ripemd=n(893),r.hmac=n(894),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(10);var a=((r=i)&&r.__esModule?r:{default:r}).default.func,o={propTypes:{label:a,values:a,x:a,y:a,y0:a},getDefaultProps:function(){return{label:function(t){return t.label},values:function(t){return t.values},x:function(t){return t.x},y:function(t){return t.y},y0:function(t){return t.y0}}}};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(10)),i=a(n(68));function a(t){return t&&t.__esModule?t:{default:t}}var o={propTypes:{offset:r.default.string},getDefaultProps:function(){return{offset:"zero",order:"default"}},componentWillMount:function(){this._stackData(this.props)},componentWillReceiveProps:function(t){this._stackData(t)},_stackData:function(t){var e=t.offset,n=t.order,r=t.x,a=t.y,o=t.values,s=i.default.layout.stack().offset(e).order(n).x(r).y(a).values(o);this._data=s(this._data);for(var u=0;u<o(this._data[0]).length;u++)for(var l=0,c=0,f=0;f<this._data.length;f++){var h=a(o(this._data[f])[u]);h<0?(o(this._data[f])[u].y0=c,c+=h):(o(this._data[f])[u].y0=l,l+=h)}}};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(10);var a=((r=i)&&r.__esModule?r:{default:r}).default.func,o={propTypes:{label:a,values:a,x:a,y:a,y0:a},getDefaultProps:function(){return{label:function(t){return t.label},values:function(t){return t.values},x:function(t){return t.x},y:function(t){return t.y},y0:function(){return 0}}}};e.default=o},function(t,e,n){"use strict";function r(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==t&&void 0!==t&&this.setState(t)}function i(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!==n&&void 0!==n?n:null}.bind(this))}function a(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function o(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!==typeof t.getDerivedStateFromProps&&"function"!==typeof e.getSnapshotBeforeUpdate)return t;var n=null,o=null,s=null;if("function"===typeof e.componentWillMount?n="componentWillMount":"function"===typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"===typeof e.componentWillReceiveProps?o="componentWillReceiveProps":"function"===typeof e.UNSAFE_componentWillReceiveProps&&(o="UNSAFE_componentWillReceiveProps"),"function"===typeof e.componentWillUpdate?s="componentWillUpdate":"function"===typeof e.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==o||null!==s){var u=t.displayName||t.name,l="function"===typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+u+" uses "+l+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==o?"\n  "+o:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"===typeof t.getDerivedStateFromProps&&(e.componentWillMount=r,e.componentWillReceiveProps=i),"function"===typeof e.getSnapshotBeforeUpdate){if("function"!==typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=a;var c=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;c.call(this,t,e,r)}}return t}n.r(e),n.d(e,"polyfill",function(){return o}),r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0},function(t,e){!function(e){var n,r,i=!1;function a(t){if("undefined"!==typeof document&&!i){var e=document.documentElement;r=window.pageYOffset,document.documentElement.scrollHeight>window.innerHeight?e.style.width="calc(100% - "+function(){if("undefined"!==typeof n)return n;var t=document.documentElement,e=document.createElement("div");return e.setAttribute("style","width:99px;height:99px;position:absolute;top:-9999px;overflow:scroll;"),t.appendChild(e),n=e.offsetWidth-e.clientWidth,t.removeChild(e),n}()+"px)":e.style.width="100%",e.style.position="fixed",e.style.top=-r+"px",e.style.overflow="hidden",i=!0}}function o(){if("undefined"!==typeof document&&i){var t=document.documentElement;t.style.width="",t.style.position="",t.style.top="",t.style.overflow="",window.scroll(0,r),i=!1}}var s={on:a,off:o,toggle:function(){i?o():a()}};"undefined"!==typeof t&&"undefined"!==typeof t.exports?t.exports=s:e.noScroll=s}(this)},function(t,e,n){t.exports=!n(20)&&!n(17)(function(){return 7!=Object.defineProperty(n(160)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){e.f=n(19)},function(t,e,n){var r=n(35),i=n(36),a=n(122)(!1),o=n(162)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,l=[];for(n in s)n!=o&&r(s,n)&&l.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~a(l,n)||l.push(n));return l}},function(t,e,n){var r=n(21),i=n(14),a=n(71);t.exports=n(20)?Object.defineProperties:function(t,e){i(t);for(var n,o=a(e),s=o.length,u=0;s>u;)r.f(t,n=o[u++],e[n]);return t}},function(t,e,n){var r=n(36),i=n(74).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?function(t){try{return i(t)}catch(e){return o.slice()}}(t):i(r(t))}},function(t,e,n){"use strict";var r=n(71),i=n(123),a=n(98),o=n(25),s=n(97),u=Object.assign;t.exports=!u||n(17)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=o(t),u=arguments.length,l=1,c=i.f,f=a.f;u>l;)for(var h,p=s(arguments[l++]),d=c?r(p).concat(c(p)):r(p),m=d.length,g=0;m>g;)f.call(p,h=d[g++])&&(n[h]=p[h]);return n}:u},function(t,e,n){"use strict";var r=n(27),i=n(18),a=n(223),o=[].slice,s={};t.exports=Function.bind||function(t){var e=r(this),n=o.call(arguments,1),u=function r(){var i=n.concat(o.call(arguments));return this instanceof r?function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)}(e,i.length,i):a(e,i,t)};return i(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(16).parseInt,i=n(88).trim,a=n(166),o=/^[-+]?0[xX]/;t.exports=8!==r(a+"08")||22!==r(a+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(o.test(n)?16:10))}:r},function(t,e,n){var r=n(16).parseFloat,i=n(88).trim;t.exports=1/r(n(166)+"-0")!==-1/0?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(44);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){var r=n(18),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){var r=n(169),i=Math.pow,a=i(2,-52),o=i(2,-23),s=i(2,127)*(2-o),u=i(2,-126);t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),l=r(t);return i<u?l*(i/u/o+1/a-1/a)*u*o:(n=(e=(1+o/a)*i)-(e-i))>s||n!=n?l*(1/0):l*n}},function(t,e,n){var r=n(14);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t.return;throw void 0!==a&&r(a.call(t)),o}}},function(t,e,n){var r=n(27),i=n(25),a=n(97),o=n(22);t.exports=function(t,e,n,s,u){r(e);var l=i(t),c=a(l),f=o(l.length),h=u?f-1:0,p=u?-1:1;if(n<2)for(;;){if(h in c){s=c[h],h+=p;break}if(h+=p,u?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:f>h;h+=p)h in c&&(s=e(s,c[h],h,l));return s}},function(t,e,n){"use strict";var r=n(25),i=n(72),a=n(22);t.exports=[].copyWithin||function(t,e){var n=r(this),o=a(n.length),s=i(t,o),u=i(e,o),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?o:i(l,o))-u,o-s),f=1;for(u<s&&s<u+c&&(f=-1,u+=c-1,s+=c-1);c-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){n(20)&&"g"!=/./g.flags&&n(21).f(RegExp.prototype,"flags",{configurable:!0,get:n(127)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},function(t,e,n){var r=n(14),i=n(18),a=n(184);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=a.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){"use strict";var r=n(238),i=n(90);t.exports=n(131)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(21).f,i=n(73),a=n(78),o=n(43),s=n(76),u=n(77),l=n(172),c=n(233),f=n(75),h=n(20),p=n(63).fastKey,d=n(90),m=h?"_s":"size",g=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var c=t(function(t,r){s(t,c,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=r&&u(r,n,t[l],t)});return a(c.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var n=d(this,e),r=g(n,t);if(r){var i=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=i),i&&(i.p=a),n._f==r&&(n._f=i),n._l==r&&(n._l=a),n[m]--}return!!r},forEach:function(t){d(this,e);for(var n,r=o(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!g(d(this,e),t)}}),h&&r(c.prototype,"size",{get:function(){return d(this,e)[m]}}),c},def:function(t,e,n){var r,i,a=g(t,e);return a?a.v=n:(t._l=a={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=a),r&&(r.n=a),t[m]++,"F"!==i&&(t._i[i]=a)),t},getEntry:g,setStrong:function(t,e,n){l(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))},n?"entries":"values",!n,!0),f(e)}}},function(t,e,n){"use strict";var r=n(238),i=n(90);t.exports=n(131)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"Set"),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(55)(0),a=n(31),o=n(63),s=n(221),u=n(241),l=n(18),c=n(17),f=n(90),h=o.getWeak,p=Object.isExtensible,d=u.ufstore,m={},g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(t){if(l(t)){var e=h(t);return!0===e?d(f(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(f(this,"WeakMap"),t,e)}},y=t.exports=n(131)("WeakMap",g,v,u,!0,!0);c(function(){return 7!=(new y).set((Object.freeze||Object)(m),7).get(m)})&&(s((r=u.getConstructor(g,"WeakMap")).prototype,v),o.NEED=!0,i(["delete","has","get","set"],function(t){var e=y.prototype,n=e[t];a(e,t,function(e,i){if(l(e)&&!p(e)){this._f||(this._f=new r);var a=this._f[t](e,i);return"set"==t?this:a}return n.call(this,e,i)})}))},function(t,e,n){"use strict";var r=n(78),i=n(63).getWeak,a=n(14),o=n(18),s=n(76),u=n(77),l=n(55),c=n(35),f=n(90),h=l(5),p=l(6),d=0,m=function(t){return t._l||(t._l=new g)},g=function(){this.a=[]},v=function(t,e){return h(t.a,function(t){return t[0]===e})};g.prototype={get:function(t){var e=v(this,t);if(e)return e[1]},has:function(t){return!!v(this,t)},set:function(t,e){var n=v(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,a){var l=t(function(t,r){s(t,l,e,"_i"),t._t=e,t._i=d++,t._l=void 0,void 0!=r&&u(r,n,t[a],t)});return r(l.prototype,{delete:function(t){if(!o(t))return!1;var n=i(t);return!0===n?m(f(this,e)).delete(t):n&&c(n,this._i)&&delete n[this._i]},has:function(t){if(!o(t))return!1;var n=i(t);return!0===n?m(f(this,e)).has(t):n&&c(n,this._i)}}),l},def:function(t,e,n){var r=i(a(e),!0);return!0===r?m(t).set(e,n):r[t._i]=n,t},ufstore:m}},function(t,e,n){var r=n(53),i=n(22);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(74),i=n(123),a=n(14),o=n(16).Reflect;t.exports=o&&o.ownKeys||function(t){var e=r.f(a(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){"use strict";var r=n(124),i=n(18),a=n(22),o=n(43),s=n(19)("isConcatSpreadable");t.exports=function t(e,n,u,l,c,f,h,p){for(var d,m,g=c,v=0,y=!!h&&o(h,p,3);v<l;){if(v in u){if(d=y?y(u[v],v,n):u[v],m=!1,i(d)&&(m=void 0!==(m=d[s])?!!m:r(d)),m&&f>0)g=t(e,n,d,a(d.length),g,f-1)-1;else{if(g>=9007199254740991)throw TypeError();e[g]=d}g++}v++}return g}},function(t,e,n){var r=n(22),i=n(168),a=n(52);t.exports=function(t,e,n,o){var s=String(a(t)),u=s.length,l=void 0===n?" ":String(n),c=r(e);if(c<=u||""==l)return s;var f=c-u,h=i.call(l,Math.ceil(f/l.length));return h.length>f&&(h=h.slice(0,f)),o?h+s:s+h}},function(t,e,n){var r=n(71),i=n(36),a=n(98).f;t.exports=function(t){return function(e){for(var n,o=i(e),s=r(o),u=s.length,l=0,c=[];u>l;)a.call(o,n=s[l++])&&c.push(t?[n,o[n]]:o[n]);return c}}},function(t,e,n){var r=n(99),i=n(248);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(77);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-1/0?t:(t-e)*(i-r)/(n-e)+r}},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(26))},function(t,e,n){(function(t){var r=n(56),i=n(557),a="object"==typeof e&&e&&!e.nodeType&&e,o=a&&"object"==typeof t&&t&&!t.nodeType&&t,s=o&&o.exports===a?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u}).call(this,n(104)(t))},function(t,e,n){var r=n(558),i=n(559),a=n(560),o=a&&a.isTypedArray,s=o?i(o):r;t.exports=s},function(t,e,n){var r=n(101),i=n(91),a="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";t.exports=function(t){if(!i(t))return!1;var e=r(t);return e==o||e==s||e==a||e==u}},function(t,e,n){var r=n(138),i=n(571),a=n(572),o=n(573),s=n(574),u=n(575);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=s,l.prototype.set=u,t.exports=l},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(e){}try{return t+""}catch(e){}}return""}},function(t,e,n){var r=n(592),i=n(595),a=n(596),o=1,s=2;t.exports=function(t,e,n,u,l,c){var f=n&o,h=t.length,p=e.length;if(h!=p&&!(f&&p>h))return!1;var d=c.get(t);if(d&&c.get(e))return d==e;var m=-1,g=!0,v=n&s?new r:void 0;for(c.set(t,e),c.set(e,t);++m<h;){var y=t[m],b=e[m];if(u)var _=f?u(b,y,m,e,t,c):u(y,b,m,t,e,c);if(void 0!==_){if(_)continue;g=!1;break}if(v){if(!i(e,function(t,e){if(!a(v,e)&&(y===t||l(y,t,n,u,c)))return v.push(e)})){g=!1;break}}else if(y!==b&&!l(y,b,n,u,c)){g=!1;break}}return c.delete(t),c.delete(e),g}},function(t,e){t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},function(t,e,n){var r=n(91);t.exports=function(t){return t===t&&!r(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},function(t,e,n){var r=n(623),i=n(624);t.exports=function(t,e){return null!=t&&i(t,e,r)}},function(t,e,n){var r=n(629),i=n(632)(r);t.exports=i},function(t,e,n){var r=n(140),i=n(105),a=n(136),o=n(91);t.exports=function(t,e,n){if(!o(n))return!1;var s=typeof e;return!!("number"==s?i(n)&&a(e,n.length):"string"==s&&e in n)&&r(n[e],t)}},function(t,e,n){var r=n(265);t.exports=function(t){var e=r(t),n=e%1;return e===e?n?e-n:e:0}},function(t,e,n){var r=n(640),i=1/0,a=1.7976931348623157e308;t.exports=function(t){return t?(t=r(t))===i||t===-i?(t<0?-1:1)*a:t===t?t:0:0===t?t:0}},function(t,e,n){var r=n(79),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(e){}}();t.exports=i},function(t,e,n){var r=n(257),i=n(649);t.exports=function t(e,n,a,o,s){var u=-1,l=e.length;for(a||(a=i),s||(s=[]);++u<l;){var c=e[u];n>0&&a(c)?n>1?t(c,n-1,a,o,s):r(s,c):o||(s[s.length]=c)}return s}},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e){function n(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},function(t,e,n){"use strict";var r=n(40),i=n(662),a=n(664),o=n(665),s=n(666),u=n(271),l="undefined"!==typeof window&&window.btoa&&window.btoa.bind(window)||n(667);t.exports=function(t){return new Promise(function(e,c){var f=t.data,h=t.headers;r.isFormData(f)&&delete h["Content-Type"];var p=new XMLHttpRequest,d="onreadystatechange",m=!1;if("undefined"===typeof window||!window.XDomainRequest||"withCredentials"in p||s(t.url)||(p=new window.XDomainRequest,d="onload",m=!0,p.onprogress=function(){},p.ontimeout=function(){}),t.auth){var g=t.auth.username||"",v=t.auth.password||"";h.Authorization="Basic "+l(g+":"+v)}if(p.open(t.method.toUpperCase(),a(t.url,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p[d]=function(){if(p&&(4===p.readyState||m)&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in p?o(p.getAllResponseHeaders()):null,r={data:t.responseType&&"text"!==t.responseType?p.response:p.responseText,status:1223===p.status?204:p.status,statusText:1223===p.status?"No Content":p.statusText,headers:n,config:t,request:p};i(e,c,r),p=null}},p.onerror=function(){c(u("Network Error",t,null,p)),p=null},p.ontimeout=function(){c(u("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var y=n(668),b=(t.withCredentials||s(t.url))&&t.xsrfCookieName?y.read(t.xsrfCookieName):void 0;b&&(h[t.xsrfHeaderName]=b)}if("setRequestHeader"in p&&r.forEach(h,function(t,e){"undefined"===typeof f&&"content-type"===e.toLowerCase()?delete h[e]:p.setRequestHeader(e,t)}),t.withCredentials&&(p.withCredentials=!0),t.responseType)try{p.responseType=t.responseType}catch(_){if("json"!==t.responseType)throw _}"function"===typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),c(t),p=null)}),void 0===f&&(f=null),p.send(f)})}},function(t,e,n){"use strict";var r=n(663);t.exports=function(t,e,n,i,a){var o=new Error(t);return r(o,e,n,i,a)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){"use strict";var r=n(687);function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}t.exports=function(t){var e=new i;e.pre=t.pre,e.body=t.body,e.post=t.post;var n=t.args.slice(0);e.argTypes=n;for(var a=0;a<n.length;++a){var o=n[a];if("array"===o||"object"===typeof o&&o.blockIndices){if(e.argTypes[a]="array",e.arrayArgs.push(a),e.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),e.shimArgs.push("array"+a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array args");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)e.scalarArgs.push(a),e.shimArgs.push("scalar"+a);else if("index"===o){if(e.indexArgs.push(a),a<e.pre.args.length&&e.pre.args[a].count>0)throw new Error("cwise: pre() block may not reference array index");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array index");if(a<e.post.args.length&&e.post.args[a].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(e.shapeArgs.push(a),a<e.pre.args.length&&e.pre.args[a].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(a<e.body.args.length&&e.body.args[a].lvalue)throw new Error("cwise: body() block may not write to array shape");if(a<e.post.args.length&&e.post.args[a].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[a]);e.argTypes[a]="offset",e.offsetArgs.push({array:o.array,offset:o.offset}),e.offsetArgIndex.push(a)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,r(e)}},function(t,e,n){"use strict";t.exports=function(t,e,n){return 0===t.length?t:e?(n||t.sort(e),function(t,e){for(var n=1,r=t.length,i=t[0],a=t[0],o=1;o<r;++o)if(a=i,e(i=t[o],a)){if(o===n){n++;continue}t[n++]=i}return t.length=n,t}(t,e)):(n||t.sort(),function(t){for(var e=1,n=t.length,r=t[0],i=t[0],a=1;a<n;++a,i=r)if(i=r,(r=t[a])!==i){if(a===e){e++;continue}t[e++]=r}return t.length=e,t}(t))}},function(t,e,n){"use strict";var r=n(107);t.exports=function(t,e){var n,i=[],a=[];if(void 0!==e&&!Array.isArray(e))throw new Error("axes must be an Array list of dimensions to squeeze");for(n=0;n<t.shape.length;n++)(1!==t.shape[n]||void 0!==e&&-1===e.indexOf(n))&&(i.push(t.shape[n]),a.push(t.stride[n]));return r(t.data,i,a,t.offset)}},function(t,e,n){var r=n(717),i=n(193);t.exports=function(t){return t&&t.length?r(t,i):0}},function(t,e,n){"use strict";var r=n(107);t.exports=function(t,e){var n,i;if(void 0!==e&&(!Number.isFinite(e)||e%1!==e))throw new Error("axis of dimension to unsqueeze must be an integer");return e=void 0===e?t.shape.length:e,n=t.shape.slice(0),i=t.stride.slice(0),n.splice(e||0,0,1),i.splice(e||0,0,(i[e]||1)*(n[e+1]||1)),r(t.data,n,i,t.offset)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,n){"use strict";var r=n(107),i=n(12),a=n(775);e.clone=function(t){var e=t.dtype;"generic"!==e&&"array"!==e||(e="double");var n=a.malloc(t.size,e),o=r(n,t.shape);return i.assign(o,t),o},e.malloc=function(t,e){e||(e="double");for(var n=1,i=new Array(t.length),o=t.length-1;o>=0;--o)i[o]=n,n*=t[o];return r(a.malloc(n,e),t,i,0)},e.free=function(t){"generic"!==t.dtype&&"array"!==t.dtype&&a.free(t.data)},e.zeros=function(t,e){e||(e="double");for(var n=1,i=new Array(t.length),o=t.length-1;o>=0;--o)i[o]=n,n*=t[o];var s=a.malloc(n,e);for(o=0;o<n;++o)s[o]=0;return r(s,t,i,0)},e.ones=function(t,e){e||(e="double");for(var n=1,i=new Array(t.length),o=t.length-1;o>=0;--o)i[o]=n,n*=t[o];var s=a.malloc(n,e);for(o=0;o<n;++o)s[o]=1;return r(s,t,i,0)},e.eye=function(t,e){var n,i;e||(e="double");var o=1,s=new Array(t.length);for(n=t.length-1;n>=0;--n)s[n]=o,o*=t[n];var u=a.malloc(o,e);for(n=0;n<o;++n)u[n]=0;var l=1/0,c=0;for(n=t.length-1;n>=0;n--)c+=s[n],l=Math.min(l,t[n]);for(n=0,i=0;n<l;n++,i+=c)u[i]=1;return r(u,t,s,0)}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){"use strict";t.exports=function(t,e){switch("undefined"===typeof e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var n,r;for(n=new Array(t),r=0;r<t;++r)n[r]=e;return n}(0|t,e);break;case"object":if("number"===typeof t.length)return function t(e,n,r){var i=0|e[r];if(i<=0)return[];var a,o=new Array(i);if(r===e.length-1)for(a=0;a<i;++a)o[a]=n;else for(a=0;a<i;++a)o[a]=t(e,n,r+1);return o}(t,e,0)}return[]}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(textureSize(poolIndexMap, 0)[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    if (poolIndex != -1) {\n      float val2 = texelFetch(x, ivec2(out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n",d="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(poolIndexMap, 0);\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    int fragmentIndex = int(floor(float(poolIndex) / float(inputSize[1])));\n    if (poolIndex != -1) {\n      poolIndex = int(mod(float(poolIndex), float(inputSize[1])));\n      float val2 = texelFetch(x, ivec2(fragmentIndex * channels + out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="_Pooling1D";var i=n.pool_size,s=void 0===i?2:i,u=n.strides,l=void 0===u?null:u,f=n.padding,h=void 0===f?"valid":f;return t.poolSize=s,t.strides=null===l?t.poolSize:l,t.padding=h,t.poolingFunc="max",t.description="pool size ".concat(t.poolSize),t.description+=t.strides>1?", striding ".concat(t.strides," striding"):"",t.description+="valid"===t.padding?", no border padding":", pad to same borders",t.gpu&&(t.poolingProgram=c.webgl2.compileProgram(p),t.poolingFragmentsProgram=c.webgl2.compileProgram(d)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){var e="valid"===this.padding?Math.floor((t.tensor.shape[0]-this.poolSize+this.strides)/this.strides):Math.floor((t.tensor.shape[0]+this.strides-1)/this.strides);this.output=new l.default([],[e,t.tensor.shape[1]]);for(var n=new l.default([],[t.tensor.shape[1]]),r="valid"===this.padding?0:Math.min(0,Math.ceil((t.tensor.shape[0]-(e-1)*this.strides-this.poolSize)/2)),i=0;i<e;i++){var a=Math.max(0,r),o=this.poolSize+Math.min(0,r);f.default.assign(n.tensor,t.tensor.pick(a,null));for(var s=1,u=1;u<o&&!(a+u>t.tensor.shape[0]-1);u++)"max"===this.poolingFunc?f.default.maxeq(n.tensor,t.tensor.pick(a+u,null)):"average"===this.poolingFunc&&f.default.addeq(n.tensor,t.tensor.pick(a+u,null)),s+=1;"average"===this.poolingFunc&&f.default.divseq(n.tensor,s),f.default.assign(this.output.tensor.pick(i,null),n.tensor),r+=this.strides}}},{key:"_createIndexMap",value:function(){if(!this.poolIndexMap){var t="valid"===this.padding?Math.floor((this.inputShape[0]-this.poolSize+this.strides)/this.strides):Math.floor((this.inputShape[0]+this.strides-1)/this.strides);this.outputShape=[t,this.inputShape[1]],this.poolIndexMap=new l.default([],[t,this.poolSize],{type:Int32Array}),f.default.assigns(this.poolIndexMap.tensor,-1);for(var e="valid"===this.padding?0:Math.min(0,Math.ceil((this.inputShape[0]-(t-1)*this.strides-this.poolSize)/2)),n=0;n<t;n++){var r=Math.max(0,e),i=this.poolSize+Math.min(0,e),a=r;this.poolIndexMap.tensor.set(n,0,a);for(var o=1;o<i&&(a=r+o)<=this.inputShape[0]-1;o++)this.poolIndexMap.tensor.set(n,o,a);e+=this.strides}this.poolIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}}},{key:"_callGPU",value:function(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.inputShape=t.tensor.shape,this._createIndexMap(),this.output||(this.output=new l.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}));var e="max"===this.poolingFunc,n=[{value:this.output.glTextureShape[1],type:"int",name:"channels"},{value:this.poolSize,type:"int",name:"poolSize"},{value:+e,type:"bool",name:"isMaxPooling"}];t.glTextureFragments?(t.convert2DRowFragmentedGLTextureToColStack(),c.webgl2.runProgram({program:this.poolingFragmentsProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:n,supportsTextureFragments:!0}),t.removeGLTextureFragmentsAsColStack()):c.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:n,supportsTextureFragments:!0}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=m},function(t,e,n){"use strict";var r=n(61),i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(11)),c=d(n(8)),f=n(9),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(60)),p=d(n(12));function d(t){return t&&t.__esModule?t:{default:t}}var m="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(textureSize(poolIndexMap, 0)[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    if (poolIndex != -1) {\n      float val2 = texelFetch(x, ivec2(out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n",g="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(poolIndexMap, 0);\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    int fragmentIndex = int(floor(float(poolIndex) / float(inputSize[1])));\n    if (poolIndex != -1) {\n      poolIndex = int(mod(float(poolIndex), float(inputSize[1])));\n      float val2 = texelFetch(x, ivec2(fragmentIndex * channels + out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n",v=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="_Pooling2D";var r=n.pool_size,a=void 0===r?[2,2]:r,u=n.strides,l=void 0===u?null:u,c=n.padding,h=void 0===c?"valid":c,p=n.data_format,d=void 0===p?"channels_last":p;return Array.isArray(a)?t.poolSize=a:t.poolSize=[a,a],Array.isArray(l)?t.strides=l:t.strides=null!==l?[l,l]:t.poolSize,t.padding=h,t.dataFormat=d,t.poolingFunc="max",t.description="pool size ".concat(t.poolSize.join("x")),t.description+=t.strides.some(function(t){return t>1})?", ".concat(t.strides.join("x")," striding"):"",t.description+="valid"===t.padding?", no border padding":", pad to same borders",t.gpu&&(t.poolingProgram=f.webgl2.compileProgram(m),t.poolingFragmentsProgram=f.webgl2.compileProgram(g)),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_calcOutputShape",value:function(t){if(!this.outputShape||!this.inputPadding){var e=r(t,3),n=e[0],i=e[1],a=e[2],o=r(this.poolSize,2),s=o[0],u=o[1],l="same"===this.padding?Math.floor((n+this.strides[0]-1)/this.strides[0]):Math.floor((n-s+this.strides[0])/this.strides[0]),c="same"===this.padding?Math.floor((i+this.strides[1]-1)/this.strides[1]):Math.floor((i-u+this.strides[1])/this.strides[1]),f="same"===this.padding?Math.max(0,Math.floor((l-1)*this.strides[0]+s-n)):0,h="same"===this.padding?Math.max(0,Math.floor((c-1)*this.strides[1]+u-i)):0,p=Math.floor(f/2),d=f-p,m=Math.floor(h/2),g=h-m;this.outputShape=[l,c,a],this.inputPadding=[p,d,m,g]}}},{key:"_padInput",value:function(t){if("same"===this.padding){var e=r(t.tensor.shape,3),n=e[0],i=e[1],a=e[2],o=r(this.inputPadding,4),s=o[0],u=o[1],l=o[2],f=n+s+u,h=i+l+o[3],d=new c.default([],[f,h,a]);return"max"===this.poolingFunc&&p.default.assigns(d.tensor,Number.NEGATIVE_INFINITY),p.default.assign(d.tensor.hi(n+s,i+l,a).lo(s,l,0),t.tensor),d}return t}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this._calcOutputShape(t.tensor.shape),t=this._padInput(t);var e=r(t.tensor.shape,3),n=e[0],i=e[1],a=e[2],o=r(this.poolSize,2),s=o[0],u=o[1];this.output=new c.default([],this.outputShape);for(var l=new c.default([],[s,u,a]),f=r(this.inputPadding,4),h=f[0],d=f[1],m=f[2],g=f[3],v=0,y=0;v<=n-s;v+=this.strides[0],y++){var b=0;v<h?b=h-v:v+s>n-d&&(b=v+s-(n-d));for(var _=0,x=0;_<=i-u;_+=this.strides[1],x++){var w=0;_<m?w=m-_:_+u>i-g&&(w=_+u-(i-g));var S=(s-b)*(u-w);p.default.assign(l.tensor,t.tensor.hi(v+s,_+u,a).lo(v,_,0));for(var E=0;E<a;E++)"max"===this.poolingFunc?this.output.tensor.set(y,x,E,p.default.sup(l.tensor.pick(null,null,E))):"average"===this.poolingFunc&&this.output.tensor.set(y,x,E,p.default.sum(l.tensor.pick(null,null,E))/S)}}"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1))}},{key:"_im2col",value:function(t){var e=r(t.tensor.shape,3),n=e[0],i=e[1],a=e[2];this.tiledInput||(this.tiledInput=new c.default([],[n*i,a]));for(var o=new c.default([],[n,i]),s=new c.default([],[n*i]),u=0;u<a;u++)p.default.assign(o.tensor,t.tensor.pick(null,null,u)),s.replaceTensorData(o.tensor.data),p.default.assign(this.tiledInput.tensor.pick(null,u),s.tensor);return this.tiledInput}},{key:"_createIndexMap",value:function(){if(!this.poolIndexMap){for(var t=this.inputShape[0],e=this.inputShape[1],n=new c.default([],[t,e]),i=0,a=0;a<t;a++)for(var o=0;o<e;o++)n.tensor.set(a,o,i),i+=1;if("same"===this.padding){var s=r(this.inputPadding,4),u=s[0],l=s[1],f=s[2];t=t+u+l,e=e+f+s[3];var h=new c.default([],[t,e]);p.default.assigns(h.tensor,-1),p.default.assign(h.tensor.hi(this.inputShape[0]+u,this.inputShape[1]+f).lo(u,f),n.tensor),n.tensor=h.tensor}var d=r(this.poolSize,2),m=d[0],g=d[1],v=this.outputShape[0],y=this.outputShape[1];this.poolIndexMap=new c.default([],[v*y,m*g],{type:Int32Array});for(var b=new c.default([],[m,g]),_=0,x=0,w=t-m;x<=w;x+=this.strides[0])for(var S=0,E=e-g;S<=E;S+=this.strides[1])p.default.assign(b.tensor,n.tensor.hi(x+m,S+g).lo(x,S)),this.poolIndexMap.tensor.data.set(b.tensor.data,_),_+=m*g;this.poolIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}}},{key:"_callGPU",value:function(t){if(t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:("channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,this._im2col(t),this.tiledInput.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})),this._calcOutputShape(this.inputShape),this._createIndexMap(),!this.output){var e=r(this.outputShape,3),n=[e[0]*e[1],e[2]];this.output=new c.default([],n),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=h.createIndicesFor2DReshaped(this.outputShape,!1,-1)}var i=t.is2DReshaped||t.is2DSquareReshaped?t:this.tiledInput,a=this.poolSize[0]*this.poolSize[1],o="max"===this.poolingFunc,s=[{value:this.output.glTextureShape[1],type:"int",name:"channels"},{value:a,type:"int",name:"poolSize"},{value:+o,type:"bool",name:"isMaxPooling"}];i.glTextureFragments?(i.convert2DRowFragmentedGLTextureToColStack(),f.webgl2.runProgram({program:this.poolingFragmentsProgram,output:this.output,inputs:[{input:i,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:s,supportsTextureFragments:!0}),i.removeGLTextureFragmentsAsColStack()):f.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:i,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:s,supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1)))}}]),e}(l.default);e.default=v},function(t,e,n){"use strict";var r=n(61),i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(11)),c=d(n(8)),f=n(9),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(60)),p=d(n(12));function d(t){return t&&t.__esModule?t:{default:t}}var m="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(textureSize(poolIndexMap, 0)[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    if (poolIndex != -1) {\n      float val2 = texelFetch(x, ivec2(out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n",g="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D poolIndexMap;\nuniform int channels;\nuniform int poolSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(poolIndexMap, 0);\n  int out_x = int(float(channels) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  float val = 0.;\n  int count = 0;\n  for (int i = 0; i < poolSize; ++i) {\n    int poolIndex = texelFetch(poolIndexMap, ivec2(i, out_y), 0).r;\n    int fragmentIndex = int(floor(float(poolIndex) / float(inputSize[1])));\n    if (poolIndex != -1) {\n      poolIndex = int(mod(float(poolIndex), float(inputSize[1])));\n      float val2 = texelFetch(x, ivec2(fragmentIndex * channels + out_x, poolIndex), 0).r;\n      if (isMaxPooling) {\n        if (count == 0 || val2 > val) {\n          val = val2;\n        }\n      } else {\n        val += val2;\n      }\n      count += 1;\n    }\n  }\n\n  if (!isMaxPooling) {\n    val /= float(count);\n  }\n\n  outColor = vec4(val);\n}\n",v=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="_Pooling3D";var r=n.pool_size,a=void 0===r?[2,2,2]:r,u=n.strides,l=void 0===u?null:u,c=n.padding,h=void 0===c?"valid":c,p=n.data_format,d=void 0===p?"channels_last":p;return Array.isArray(a)?t.poolSize=a:t.poolSize=[a,a,a],Array.isArray(l)?t.strides=l:t.strides=null!==l?[l,l,l]:t.poolSize,t.padding=h,t.dataFormat=d,t.poolingFunc="max",t.description="pool size ".concat(t.poolSize.join("x")),t.description+=t.strides.some(function(t){return t>1})?", ".concat(t.strides.join("x")," striding"):"",t.description+="valid"===t.padding?", no border padding":", pad to same borders",t.gpu&&(t.poolingProgram=f.webgl2.compileProgram(m),t.poolingFragmentsProgram=f.webgl2.compileProgram(g)),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_calcOutputShape",value:function(t){if(!this.outputShape||!this.inputPadding){var e=r(t,4),n=e[0],i=e[1],a=e[2],o=e[3],s=r(this.poolSize,3),u=s[0],l=s[1],c=s[2],f="same"===this.padding?Math.floor((n+this.strides[0]-1)/this.strides[0]):Math.floor((n-u+this.strides[0])/this.strides[0]),h="same"===this.padding?Math.floor((i+this.strides[1]-1)/this.strides[1]):Math.floor((i-l+this.strides[1])/this.strides[1]),p="same"===this.padding?Math.floor((a+this.strides[2]-1)/this.strides[2]):Math.floor((a-c+this.strides[2])/this.strides[2]),d="same"===this.padding?Math.max(0,Math.floor((f-1)*this.strides[0]+u-n)):0,m="same"===this.padding?Math.max(0,Math.floor((h-1)*this.strides[1]+l-i)):0,g="same"===this.padding?Math.max(0,Math.floor((p-1)*this.strides[2]+c-a)):0,v=Math.floor(d/2),y=d-v,b=Math.floor(m/2),_=m-b,x=Math.floor(g/2),w=g-x;this.outputShape=[f,h,p,o],this.inputPadding=[v,y,b,_,x,w]}}},{key:"_padInput",value:function(t){if("same"===this.padding){var e=r(t.tensor.shape,4),n=e[0],i=e[1],a=e[2],o=e[3],s=r(this.inputPadding,6),u=s[0],l=s[1],f=s[2],h=s[3],d=s[4],m=n+u+l,g=i+f+h,v=a+d+s[5],y=new c.default([],[m,g,v,o]);return"max"===this.poolingFunc&&p.default.assigns(y.tensor,Number.NEGATIVE_INFINITY),p.default.assign(y.tensor.hi(n+u,i+f,a+d,o).lo(u,f,d,0),t.tensor),y}return t}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this._calcOutputShape(t.tensor.shape),t=this._padInput(t);var e=r(t.tensor.shape,4),n=e[0],i=e[1],a=e[2],o=e[3],s=r(this.poolSize,3),u=s[0],l=s[1],f=s[2];this.output=new c.default([],this.outputShape);for(var h=new c.default([],[u,l,f,o]),d=r(this.inputPadding,6),m=d[0],g=d[1],v=d[2],y=d[3],b=d[4],_=d[5],x=0,w=0;x<=n-u;x+=this.strides[0],w++){var S=0;x<m?S=m-x:x+u>n-g&&(S=x+u-(n-g));for(var E=0,k=0;E<=i-l;E+=this.strides[1],k++){var T=0;E<v?T=v-E:E+l>i-y&&(T=E+l-(i-y));for(var P=0,M=0;P<=a-f;P+=this.strides[2],M++){var C=0;P<b?C=b-P:P+f>a-_&&(C=P+f-(a-_));var O=(u-S)*(l-T)*(f-C);p.default.assign(h.tensor,t.tensor.hi(x+u,E+l,P+f,o).lo(x,E,P,0));for(var I=0;I<o;I++)"max"===this.poolingFunc?this.output.tensor.set(w,k,M,I,p.default.sup(h.tensor.pick(null,null,null,I))):"average"===this.poolingFunc&&this.output.tensor.set(w,k,M,I,p.default.sum(h.tensor.pick(null,null,null,I))/O)}}}"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(3,0,1,2))}},{key:"_vol2col",value:function(t){var e=r(t.tensor.shape,4),n=e[0],i=e[1],a=e[2],o=e[3];this.tiledInput||(this.tiledInput=new c.default([],[n*i*a,o]));for(var s=new c.default([],[n,i,a]),u=new c.default([],[n*i*a]),l=0;l<o;l++)p.default.assign(s.tensor,t.tensor.pick(null,null,null,l)),u.replaceTensorData(s.tensor.data),p.default.assign(this.tiledInput.tensor.pick(null,l),u.tensor);return this.tiledInput}},{key:"_createIndexMap",value:function(){if(!this.poolIndexMap){for(var t=this.inputShape[0],e=this.inputShape[1],n=this.inputShape[2],i=new c.default([],[t,e,n]),a=0,o=0;o<t;o++)for(var s=0;s<e;s++)for(var u=0;u<n;u++)i.tensor.set(o,s,u,a),a+=1;if("same"===this.padding){var l=r(this.inputPadding,6),f=l[0],h=l[1],d=l[2],m=l[3],g=l[4];t=t+f+h,e=e+d+m,n=n+g+l[5];var v=new c.default([],[t,e,n]);p.default.assigns(v.tensor,-1),p.default.assign(v.tensor.hi(this.inputShape[0]+f,this.inputShape[1]+d,this.inputShape[2]+g).lo(f,d,g),i.tensor),i.tensor=v.tensor}var y=r(this.poolSize,3),b=y[0],_=y[1],x=y[2],w=this.outputShape[0],S=this.outputShape[1],E=this.outputShape[2];this.poolIndexMap=new c.default([],[w*S*E,b*_*x],{type:Int32Array});for(var k=new c.default([],[b,_,x]),T=0,P=0,M=t-b;P<=M;P+=this.strides[0])for(var C=0,O=e-_;C<=O;C+=this.strides[1])for(var I=0,N=n-x;I<=N;I+=this.strides[2])p.default.assign(k.tensor,i.tensor.hi(P+b,C+_,I+x).lo(P,C,I)),this.poolIndexMap.tensor.data.set(k.tensor.data,T),T+=b*_*x;this.poolIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}}},{key:"_callGPU",value:function(t){if(t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:("channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,this._vol2col(t),this.tiledInput.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})),this._calcOutputShape(this.inputShape),this._createIndexMap(),!this.output){var e=r(this.outputShape,4),n=[e[0]*e[1]*e[2],e[3]];this.output=new c.default([],n),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=h.createIndicesFor2DReshaped(this.outputShape,!1,-1)}var i=t.is2DReshaped||t.is2DSquareReshaped?t:this.tiledInput,a=this.poolSize[0]*this.poolSize[1]*this.poolSize[2],o="max"===this.poolingFunc,s=[{value:this.output.glTextureShape[1],type:"int",name:"channels"},{value:a,type:"int",name:"poolSize"},{value:+o,type:"bool",name:"isMaxPooling"}];i.glTextureFragments?(i.convert2DRowFragmentedGLTextureToColStack(),f.webgl2.runProgram({program:this.poolingFragmentsProgram,output:this.output,inputs:[{input:i,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:s,supportsTextureFragments:!0}),i.removeGLTextureFragmentsAsColStack()):f.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:i,name:"x"},{input:this.poolIndexMap,name:"poolIndexMap"}],uniforms:s}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(3,0,1,2)))}}]),e}(l.default);e.default=v},function(t,e,n){"use strict";var r=n(61),i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=p(n(11)),c=p(n(8)),f=n(9),h=p(n(12));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int channelDataSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (isMaxPooling) {\n    // GlobalMaxPooling\n    float maxval = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      if (j == 0 || val > maxval) {\n        maxval = val;\n      }\n    }\n    outColor = vec4(maxval);\n  } else {\n    // GlobalAveragePooling\n    float sum = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      sum += val;\n    }\n    outColor = vec4(sum / float(channelDataSize));\n  }\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="_GlobalPooling1D";var r=n.data_format,a=void 0===r?"channels_last":r;return t.dataFormat=a,t.poolingFunc="max",t.gpu&&(t.poolingProgram=f.webgl2.compileProgram(d)),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){var e=r(t.tensor.shape,2),n=e[0],i=e[1];this.output=new c.default([],[i]);for(var a=0,o=i;a<o;a++)"max"===this.poolingFunc?this.output.tensor.set(a,h.default.sup(t.tensor.pick(null,a))):"average"===this.poolingFunc&&this.output.tensor.set(a,h.default.sum(t.tensor.pick(null,a))/n)}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.inputShape=t.tensor.shape,this.output||(this.output=new c.default([],[this.inputShape[1]]),this.output.createGLTexture({type:"2d",format:"float"}));var e="max"===this.poolingFunc;f.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.inputShape[0],type:"int",name:"channelDataSize"},{value:+e,type:"bool",name:"isMaxPooling"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";var r=n(61),i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=p(n(11)),c=p(n(8)),f=n(9),h=p(n(12));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int channelDataSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (isMaxPooling) {\n    // GlobalMaxPooling\n    float maxval = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      if (j == 0 || val > maxval) {\n        maxval = val;\n      }\n    }\n    outColor = vec4(maxval);\n  } else {\n    // GlobalAveragePooling\n    float sum = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      sum += val;\n    }\n    outColor = vec4(sum / float(channelDataSize));\n  }\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="_GlobalPooling2D";var r=n.data_format,a=void 0===r?"channels_last":r;return t.dataFormat=a,t.poolingFunc="max",t.gpu&&(t.poolingProgram=f.webgl2.compileProgram(d)),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0));var e=r(t.tensor.shape,3),n=e[0],i=e[1],a=e[2];this.output=new c.default([],[a]);for(var o=0,s=a;o<s;o++)"max"===this.poolingFunc?this.output.tensor.set(o,h.default.sup(t.tensor.pick(null,null,o))):"average"===this.poolingFunc&&this.output.tensor.set(o,h.default.sum(t.tensor.pick(null,null,o))/(n*i))}},{key:"_callGPU",value:function(t){t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:("channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"})),this.output||(this.output=new c.default([],[this.inputShape[2]]),this.output.createGLTexture({type:"2d",format:"float"}));var e="max"===this.poolingFunc;f.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.inputShape[0]*this.inputShape[1],type:"int",name:"channelDataSize"},{value:+e,type:"bool",name:"isMaxPooling"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";var r=n(61),i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=p(n(11)),c=p(n(8)),f=n(9),h=p(n(12));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int channelDataSize;\nuniform bool isMaxPooling;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (isMaxPooling) {\n    // GlobalMaxPooling\n    float maxval = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      if (j == 0 || val > maxval) {\n        maxval = val;\n      }\n    }\n    outColor = vec4(maxval);\n  } else {\n    // GlobalAveragePooling\n    float sum = 0.0;\n    for (int j = 0; j < size[1]; ++j) {\n      float val = texelFetch(x, ivec2(out_x, j), 0).r;\n      sum += val;\n    }\n    outColor = vec4(sum / float(channelDataSize));\n  }\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="_GlobalPooling3D";var r=n.data_format,a=void 0===r?"channels_last":r;return t.dataFormat=a,t.poolingFunc="max",t.gpu&&(t.poolingProgram=f.webgl2.compileProgram(d)),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0));var e=r(t.tensor.shape,4),n=e[0],i=e[1],a=e[2],o=e[3];this.output=new c.default([],[o]);for(var s=0,u=o;s<u;s++)"max"===this.poolingFunc?this.output.tensor.set(s,h.default.sup(t.tensor.pick(null,null,null,s))):"average"===this.poolingFunc&&this.output.tensor.set(s,h.default.sum(t.tensor.pick(null,null,null,s))/(n*i*a))}},{key:"_callGPU",value:function(t){t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:("channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"})),this.output||(this.output=new c.default([],[this.inputShape[3]]),this.output.createGLTexture({type:"2d",format:"float"}));var e="max"===this.poolingFunc;f.webgl2.runProgram({program:this.poolingProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.inputShape[0]*this.inputShape[1]*this.inputShape[2],type:"int",name:"channelDataSize"},{value:+e,type:"bool",name:"isMaxPooling"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"SimpleRNN",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"LSTM",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"GRU",{enumerable:!0,get:function(){return a.default}});var r=o(n(810)),i=o(n(811)),a=o(n(812));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";t.exports=f;var r,i=n(82),a=i.LongBits,o=i.base64,s=i.utf8;function u(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function l(){}function c(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function f(){this.len=0,this.head=new u(l,0,0),this.tail=this.head,this.states=null}function h(t,e,n){e[n]=255&t}function p(t,e){this.len=t,this.next=void 0,this.val=e}function d(t,e,n){for(;t.hi;)e[n++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=127&t.lo|128,t.lo=t.lo>>>7;e[n++]=t.lo}function m(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}f.create=i.Buffer?function(){return(f.create=function(){return new r})()}:function(){return new f},f.alloc=function(t){return new i.Array(t)},i.Array!==Array&&(f.alloc=i.pool(f.alloc,i.Array.prototype.subarray)),f.prototype._push=function(t,e,n){return this.tail=this.tail.next=new u(t,e,n),this.len+=e,this},p.prototype=Object.create(u.prototype),p.prototype.fn=function(t,e,n){for(;t>127;)e[n++]=127&t|128,t>>>=7;e[n]=t},f.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new p((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},f.prototype.int32=function(t){return t<0?this._push(d,10,a.fromNumber(t)):this.uint32(t)},f.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},f.prototype.uint64=function(t){var e=a.from(t);return this._push(d,e.length(),e)},f.prototype.int64=f.prototype.uint64,f.prototype.sint64=function(t){var e=a.from(t).zzEncode();return this._push(d,e.length(),e)},f.prototype.bool=function(t){return this._push(h,1,t?1:0)},f.prototype.fixed32=function(t){return this._push(m,4,t>>>0)},f.prototype.sfixed32=f.prototype.fixed32,f.prototype.fixed64=function(t){var e=a.from(t);return this._push(m,4,e.lo)._push(m,4,e.hi)},f.prototype.sfixed64=f.prototype.fixed64,f.prototype.float=function(t){return this._push(i.float.writeFloatLE,4,t)},f.prototype.double=function(t){return this._push(i.float.writeDoubleLE,8,t)};var g=i.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};f.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(h,1,0);if(i.isString(t)){var n=f.alloc(e=o.length(t));o.decode(t,n,0),t=n}return this.uint32(e)._push(g,e,t)},f.prototype.string=function(t){var e=s.length(t);return e?this.uint32(e)._push(s.write,e,t):this._push(h,1,0)},f.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new u(l,0,0),this.len=0,this},f.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new u(l,0,0),this.len=0),this},f.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this},f.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e},f._configure=function(t){r=t}},function(t,e,n){"use strict";t.exports=u;var r,i=n(82),a=i.LongBits,o=i.utf8;function s(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function u(t){this.buf=t,this.pos=0,this.len=t.length}var l="undefined"!==typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new u(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new u(t);throw Error("illegal buffer")};function c(){var t=new a(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw s(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw s(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function h(){if(this.pos+8>this.len)throw s(this,8);return new a(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}u.create=i.Buffer?function(t){return(u.create=function(t){return i.Buffer.isBuffer(t)?new r(t):l(t)})(t)}:l,u.prototype._slice=i.Array.prototype.subarray||i.Array.prototype.slice,u.prototype.uint32=function(){var t=4294967295;return function(){if(t=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return t;if(t=(t|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return t;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return t}}(),u.prototype.int32=function(){return 0|this.uint32()},u.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},u.prototype.bool=function(){return 0!==this.uint32()},u.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return f(this.buf,this.pos+=4)},u.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|f(this.buf,this.pos+=4)},u.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var t=i.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},u.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var t=i.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},u.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw s(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,n):e===n?new this.buf.constructor(0):this._slice.call(this.buf,e,n)},u.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},u.prototype.skip=function(t){if("number"===typeof t){if(this.pos+t>this.len)throw s(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},u.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!==(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},u._configure=function(t){r=t;var e=i.Long?"toLong":"toNumber";i.merge(u.prototype,{int64:function(){return c.call(this)[e](!1)},uint64:function(){return c.call(this)[e](!0)},sint64:function(){return c.call(this).zzDecode()[e](!1)},fixed64:function(){return h.call(this)[e](!0)},sfixed64:function(){return h.call(this)[e](!1)}})}},function(t,e,n){"use strict";var r=n(15).Buffer,i=n(199).Transform;function a(t){i.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}n(13)(a,i),a.prototype._transform=function(t,e,n){var r=null;try{this.update(t,e)}catch(i){r=i}n(r)},a.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(n){e=n}t(e)},a.prototype.update=function(t,e){if(function(t,e){if(!r.isBuffer(t)&&"string"!==typeof t)throw new TypeError(e+" must be a string or a buffer")}(t,"Data"),this._finalized)throw new Error("Digest already called");r.isBuffer(t)||(t=r.from(t,e));for(var n=this._block,i=0;this._blockOffset+t.length-i>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)n[a++]=t[i++];this._update(),this._blockOffset=0}for(;i<t.length;)n[this._blockOffset++]=t[i++];for(var o=0,s=8*t.length;s>0;++o)this._length[o]+=s,(s=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*s);return this},a.prototype._update=function(){throw new Error("_update is not implemented")},a.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return e},a.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=a},function(t,e,n){"use strict";(function(e,r){var i=n(147);t.exports=b;var a,o=n(281);b.ReadableState=y;n(200).EventEmitter;var s=function(t,e){return t.listeners(e).length},u=n(294),l=n(15).Buffer,c=e.Uint8Array||function(){};var f=n(110);f.inherits=n(13);var h=n(842),p=void 0;p=h&&h.debuglog?h.debuglog("stream"):function(){};var d,m=n(843),g=n(295);f.inherits(b,u);var v=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var r=e instanceof(a=a||n(83));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,o=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(203).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function b(t){if(a=a||n(83),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"===typeof t.read&&(this._read=t.read),"function"===typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function _(t,e,n,r,i){var a,o=t._readableState;null===e?(o.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,E(t)}(t,o)):(i||(a=function(t,e){var n;r=e,l.isBuffer(r)||r instanceof c||"string"===typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(o,e)),a?t.emit("error",a):o.objectMode||e&&e.length>0?("string"===typeof e||o.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),r?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):x(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(e=o.decoder.write(e),o.objectMode||0!==e.length?x(t,o,e,!1):T(t,o)):x(t,o,e,!1))):r||(o.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function x(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&E(t)),T(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"===typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=l.from(t,e),e=""),n=!0),_(this,t,e,!1,n)},b.prototype.unshift=function(t){return _(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return d||(d=n(203).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var w=8388608;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=w?t=w:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function E(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(k,t):k(t))}function k(t){p("emit readable"),t.emit("readable"),O(t)}function T(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(P,t,e))}function P(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function M(t){p("readable nexttick read 0"),t.read(0)}function C(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),O(t),e.flowing&&!e.reading&&t.read(0)}function O(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function I(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var a=n.data,o=t>a.length?a.length:t;if(o===a.length?i+=a:i+=a.slice(0,t),0===(t-=o)){o===a.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=a.slice(o));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=l.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var a=r.data,o=t>a.length?a.length:t;if(a.copy(n,n.length-t,0,o),0===(t-=o)){o===a.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=a.slice(o));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function N(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(A,e,t))}function A(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function R(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?N(this):E(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&N(this),null;var r,i=e.needReadable;return p("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",i=!0),e.ended||e.reading?p("reading or ended",i=!1):i&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(n,e))),null===(r=t>0?I(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&N(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,p("pipe count=%d opts=%j",a.pipesCount,e);var u=(!e||!1!==e.end)&&t!==r.stdout&&t!==r.stderr?c:b;function l(e,r){p("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,p("cleanup"),t.removeListener("close",v),t.removeListener("finish",y),t.removeListener("drain",f),t.removeListener("error",g),t.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",m),h=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}function c(){p("onend"),t.end()}a.endEmitted?i.nextTick(u):n.once("end",u),t.on("unpipe",l);var f=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,O(t))}}(n);t.on("drain",f);var h=!1;var d=!1;function m(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==R(a.pipes,t))&&!h&&(p("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,d=!0),n.pause())}function g(e){p("onerror",e),b(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function v(){t.removeListener("finish",y),b()}function y(){p("onfinish"),t.removeListener("close",v),b()}function b(){p("unpipe"),n.unpipe(t)}return n.on("data",m),function(t,e,n){if("function"===typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?o(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",g),t.once("close",v),t.once("finish",y),t.emit("pipe",n),a.flowing||(p("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=R(e.pipes,t);return-1===o?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},b.prototype.on=function(t,e){var n=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&E(this):i.nextTick(M,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(C,t,e))}(this,t)),this},b.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",function(){if(p("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){(p("wrapped data"),n.decoder&&(i=n.decoder.write(i)),!n.objectMode||null!==i&&void 0!==i)&&((n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause())))}),t)void 0===this[i]&&"function"===typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var a=0;a<v.length;a++)t.on(v[a],this.emit.bind(this,v[a]));return this._read=function(e){p("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=I}).call(this,n(26),n(39))},function(t,e,n){t.exports=n(200).EventEmitter},function(t,e,n){"use strict";var r=n(147);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";t.exports=a;var r=n(83),i=n(110);function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"===typeof t.transform&&(this._transform=t.transform),"function"===typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var t=this;"function"===typeof this._flush?this._flush(function(e,n){s(t,e,n)}):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(13),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){var r=n(13),i=n(94),a=n(15).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=new Array(64);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t,e,n){return n^t&(e^n)}function c(t,e,n){return t&e|n&(t|e)}function f(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function h(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function p(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}r(u,i),u.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,u=0|this._e,d=0|this._f,m=0|this._g,g=0|this._h,v=0;v<16;++v)n[v]=t.readInt32BE(4*v);for(;v<64;++v)n[v]=0|(((e=n[v-2])>>>17|e<<15)^(e>>>19|e<<13)^e>>>10)+n[v-7]+p(n[v-15])+n[v-16];for(var y=0;y<64;++y){var b=g+h(u)+l(u,d,m)+o[y]+n[y]|0,_=f(r)+c(r,i,a)|0;g=m,m=d,d=u,u=s+b|0,s=a,a=i,i=r,r=b+_|0}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0,this._f=d+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},u.prototype._hash=function(){var t=a.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=u},function(t,e,n){var r=n(13),i=n(94),a=n(15).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],s=new Array(160);function u(){this.init(),this._w=s,i.call(this,128,112)}function l(t,e,n){return n^t&(e^n)}function c(t,e,n){return t&e|n&(t|e)}function f(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function h(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function d(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function v(t,e){return t>>>0<e>>>0?1:0}r(u,i),u.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},u.prototype._update=function(t){for(var e=this._w,n=0|this._ah,r=0|this._bh,i=0|this._ch,a=0|this._dh,s=0|this._eh,u=0|this._fh,y=0|this._gh,b=0|this._hh,_=0|this._al,x=0|this._bl,w=0|this._cl,S=0|this._dl,E=0|this._el,k=0|this._fl,T=0|this._gl,P=0|this._hl,M=0;M<32;M+=2)e[M]=t.readInt32BE(4*M),e[M+1]=t.readInt32BE(4*M+4);for(;M<160;M+=2){var C=e[M-30],O=e[M-30+1],I=p(C,O),N=d(O,C),A=m(C=e[M-4],O=e[M-4+1]),R=g(O,C),D=e[M-14],j=e[M-14+1],L=e[M-32],F=e[M-32+1],z=N+j|0,B=I+D+v(z,N)|0;B=(B=B+A+v(z=z+R|0,R)|0)+L+v(z=z+F|0,F)|0,e[M]=B,e[M+1]=z}for(var U=0;U<160;U+=2){B=e[U],z=e[U+1];var V=c(n,r,i),q=c(_,x,w),W=f(n,_),G=f(_,n),H=h(s,E),$=h(E,s),K=o[U],X=o[U+1],Y=l(s,u,y),J=l(E,k,T),Z=P+$|0,Q=b+H+v(Z,P)|0;Q=(Q=(Q=Q+Y+v(Z=Z+J|0,J)|0)+K+v(Z=Z+X|0,X)|0)+B+v(Z=Z+z|0,z)|0;var tt=G+q|0,et=W+V+v(tt,G)|0;b=y,P=T,y=u,T=k,u=s,k=E,s=a+Q+v(E=S+Z|0,S)|0,a=i,S=w,i=r,w=x,r=n,x=_,n=Q+et+v(_=Z+tt|0,Z)|0}this._al=this._al+_|0,this._bl=this._bl+x|0,this._cl=this._cl+w|0,this._dl=this._dl+S|0,this._el=this._el+E|0,this._fl=this._fl+k|0,this._gl=this._gl+T|0,this._hl=this._hl+P|0,this._ah=this._ah+n+v(this._al,_)|0,this._bh=this._bh+r+v(this._bl,x)|0,this._ch=this._ch+i+v(this._cl,w)|0,this._dh=this._dh+a+v(this._dl,S)|0,this._eh=this._eh+s+v(this._el,E)|0,this._fh=this._fh+u+v(this._fl,k)|0,this._gh=this._gh+y+v(this._gl,T)|0,this._hh=this._hh+b+v(this._hl,P)|0},u.prototype._hash=function(){var t=a.allocUnsafe(64);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=u},function(t,e,n){"use strict";var r=n(13),i=n(855),a=n(67),o=n(15).Buffer,s=n(300),u=n(204),l=n(205),c=o.alloc(128);function f(t,e){a.call(this,"digest"),"string"===typeof e&&(e=o.from(e));var n="sha512"===t||"sha384"===t?128:64;(this._alg=t,this._key=e,e.length>n)?e=("rmd160"===t?new u:l(t)).update(e).digest():e.length<n&&(e=o.concat([e,c],n));for(var r=this._ipad=o.allocUnsafe(n),i=this._opad=o.allocUnsafe(n),s=0;s<n;s++)r[s]=54^e[s],i[s]=92^e[s];this._hash="rmd160"===t?new u:l(t),this._hash.update(r)}r(f,a),f.prototype._update=function(t){this._hash.update(t)},f.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new u:l(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new f("rmd160",e):"md5"===t?new i(s,e):new f(t,e)}},function(t,e,n){var r=n(198);t.exports=function(t){return(new r).update(t).digest()}},function(t){t.exports={sha224WithRSAEncryption:{sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:{sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:{sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:{sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:{sign:"ecdsa",hash:"sha256",id:""},sha224:{sign:"ecdsa",hash:"sha224",id:""},sha384:{sign:"ecdsa",hash:"sha384",id:""},sha512:{sign:"ecdsa",hash:"sha512",id:""},"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:{sign:"dsa",hash:"sha1",id:""},"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}}},function(t,e,n){e.pbkdf2=n(857),e.pbkdf2Sync=n(305)},function(t,e,n){(function(e){var n=Math.pow(2,30)-1;function r(t,n){if("string"!==typeof t&&!e.isBuffer(t))throw new TypeError(n+" must be a buffer or string")}t.exports=function(t,e,i,a){if(r(t,"Password"),r(e,"Salt"),"number"!==typeof i)throw new TypeError("Iterations not a number");if(i<0)throw new TypeError("Bad iterations");if("number"!==typeof a)throw new TypeError("Key length not a number");if(a<0||a>n||a!==a)throw new TypeError("Bad key length")}}).call(this,n(23).Buffer)},function(t,e,n){(function(e){var n;e.browser?n="utf-8":n=parseInt(e.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary";t.exports=n}).call(this,n(39))},function(t,e,n){var r=n(300),i=n(204),a=n(205),o=n(303),s=n(304),u=n(15).Buffer,l=u.alloc(128),c={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function f(t,e,n){var o=function(t){return"rmd160"===t||"ripemd160"===t?function(t){return(new i).update(t).digest()}:"md5"===t?r:function(e){return a(t).update(e).digest()}}(t),s="sha512"===t||"sha384"===t?128:64;e.length>s?e=o(e):e.length<s&&(e=u.concat([e,l],s));for(var f=u.allocUnsafe(s+c[t]),h=u.allocUnsafe(s+c[t]),p=0;p<s;p++)f[p]=54^e[p],h[p]=92^e[p];var d=u.allocUnsafe(s+n+4);f.copy(d,0,0,s),this.ipad1=d,this.ipad2=f,this.opad=h,this.alg=t,this.blocksize=s,this.hash=o,this.size=c[t]}f.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,n,r,i){o(t,e,n,r),u.isBuffer(t)||(t=u.from(t,s)),u.isBuffer(e)||(e=u.from(e,s));var a=new f(i=i||"sha1",t,e.length),l=u.allocUnsafe(r),h=u.allocUnsafe(e.length+4);e.copy(h,0,0,e.length);for(var p=0,d=c[i],m=Math.ceil(r/d),g=1;g<=m;g++){h.writeUInt32BE(g,e.length);for(var v=a.run(h,a.ipad1),y=v,b=1;b<n;b++){y=a.run(y,a.ipad2);for(var _=0;_<d;_++)v[_]^=y[_]}v.copy(l,p),p+=d}return l}},function(t,e,n){var r=n(111),i=n(15).Buffer,a=n(307);function o(t){var e=t._cipher.encryptBlockRaw(t._prev);return a(t._prev),e}e.encrypt=function(t,e){var n=Math.ceil(e.length/16),a=t._cache.length;t._cache=i.concat([t._cache,i.allocUnsafe(16*n)]);for(var s=0;s<n;s++){var u=o(t),l=a+16*s;t._cache.writeUInt32BE(u[0],l+0),t._cache.writeUInt32BE(u[1],l+4),t._cache.writeUInt32BE(u[2],l+8),t._cache.writeUInt32BE(u[3],l+12)}var c=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,c)}},function(t,e){t.exports=function(t){for(var e,n=t.length;n--;){if(255!==(e=t.readUInt8(n))){e++,t.writeUInt8(e,n);break}t.writeUInt8(0,n)}}},function(t){t.exports={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192:{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256:{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}}},function(t,e,n){var r=n(148),i=n(15).Buffer,a=n(67),o=n(13),s=n(872),u=n(111),l=n(307);function c(t,e,n,o){a.call(this);var u=i.alloc(4,0);this._cipher=new r.AES(e);var c=this._cipher.encryptBlock(u);this._ghash=new s(c),n=function(t,e,n){if(12===e.length)return t._finID=i.concat([e,i.from([0,0,0,1])]),i.concat([e,i.from([0,0,0,2])]);var r=new s(n),a=e.length,o=a%16;r.update(e),o&&(o=16-o,r.update(i.alloc(o,0))),r.update(i.alloc(8,0));var u=8*a,c=i.alloc(8);c.writeUIntBE(u,0,8),r.update(c),t._finID=r.state;var f=i.from(t._finID);return l(f),f}(this,n,c),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=o,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}o(c,a),c.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=i.alloc(e,0),this._ghash.update(e))}this._called=!0;var n=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(n),this._len+=t.length,n},c.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=u(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var n=0;t.length!==e.length&&n++;for(var r=Math.min(t.length,e.length),i=0;i<r;++i)n+=t[i]^e[i];return n}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},c.prototype.getAuthTag=function(){if(this._decrypt||!i.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},c.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},c.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=c},function(t,e,n){var r=n(148),i=n(15).Buffer,a=n(67);function o(t,e,n,o){a.call(this),this._cipher=new r.AES(e),this._prev=i.from(n),this._cache=i.allocUnsafe(0),this._secCache=i.allocUnsafe(0),this._decrypt=o,this._mode=t}n(13)(o,a),o.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},t.exports=o},function(t,e,n){var r=n(93);t.exports=y,y.simpleSieve=g,y.fermatTest=v;var i=n(24),a=new i(24),o=new(n(312)),s=new i(1),u=new i(2),l=new i(5),c=(new i(16),new i(8),new i(10)),f=new i(3),h=(new i(7),new i(11)),p=new i(4),d=(new i(12),null);function m(){if(null!==d)return d;var t=[];t[0]=2;for(var e=1,n=3;n<1048576;n+=2){for(var r=Math.ceil(Math.sqrt(n)),i=0;i<e&&t[i]<=r&&n%t[i]!==0;i++);e!==i&&t[i]<=r||(t[e++]=n)}return d=t,t}function g(t){for(var e=m(),n=0;n<e.length;n++)if(0===t.modn(e[n]))return 0===t.cmpn(e[n]);return!0}function v(t){var e=i.mont(t);return 0===u.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function y(t,e){if(t<16)return new i(2===e||5===e?[140,123]:[140,39]);var n,d;for(e=new i(e);;){for(n=new i(r(Math.ceil(t/8)));n.bitLength()>t;)n.ishrn(1);if(n.isEven()&&n.iadd(s),n.testn(1)||n.iadd(u),e.cmp(u)){if(!e.cmp(l))for(;n.mod(c).cmp(f);)n.iadd(p)}else for(;n.mod(a).cmp(h);)n.iadd(p);if(g(d=n.shrn(1))&&g(n)&&v(d)&&v(n)&&o.test(d)&&o.test(n))return n}}},function(t,e,n){var r=n(24),i=n(313);function a(t){this.rand=t||new i.Rand}t.exports=a,a.create=function(t){return new a(t)},a.prototype._randbelow=function(t){var e=t.bitLength(),n=Math.ceil(e/8);do{var i=new r(this.rand.generate(n))}while(i.cmp(t)>=0);return i},a.prototype._randrange=function(t,e){var n=e.sub(t);return t.add(this._randbelow(n))},a.prototype.test=function(t,e,n){var i=t.bitLength(),a=r.mont(t),o=new r(1).toRed(a);e||(e=Math.max(1,i/48|0));for(var s=t.subn(1),u=0;!s.testn(u);u++);for(var l=t.shrn(u),c=s.toRed(a);e>0;e--){var f=this._randrange(new r(2),s);n&&n(f);var h=f.toRed(a).redPow(l);if(0!==h.cmp(o)&&0!==h.cmp(c)){for(var p=1;p<u;p++){if(0===(h=h.redSqr()).cmp(o))return!1;if(0===h.cmp(c))break}if(p===u)return!1}}return!0},a.prototype.getDivisor=function(t,e){var n=t.bitLength(),i=r.mont(t),a=new r(1).toRed(i);e||(e=Math.max(1,n/48|0));for(var o=t.subn(1),s=0;!o.testn(s);s++);for(var u=t.shrn(s),l=o.toRed(i);e>0;e--){var c=this._randrange(new r(2),o),f=t.gcd(c);if(0!==f.cmpn(1))return f;var h=c.toRed(i).redPow(u);if(0!==h.cmp(a)&&0!==h.cmp(l)){for(var p=1;p<s;p++){if(0===(h=h.redSqr()).cmp(a))return h.fromRed().subn(1).gcd(t);if(0===h.cmp(l))break}if(p===s)return(h=h.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},function(t,e,n){var r;function i(t){this.rand=t}if(t.exports=function(t){return r||(r=new i(null)),r.generate(t)},t.exports.Rand=i,i.prototype.generate=function(t){return this._rand(t)},i.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),n=0;n<e.length;n++)e[n]=this.rand.getByte();return e},"object"===typeof self)self.crypto&&self.crypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?i.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"===typeof window&&(i.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var a=n(877);if("function"!==typeof a.randomBytes)throw new Error("Not supported");i.prototype._rand=function(t){return a.randomBytes(t)}}catch(o){}},function(t,e,n){"use strict";var r=e;function i(t){return 1===t.length?"0"+t:t}function a(t){for(var e="",n=0;n<t.length;n++)e+=i(t[n].toString(16));return e}r.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!==typeof t){for(var r=0;r<t.length;r++)n[r]=0|t[r];return n}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(t="0"+t),r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var i=t.charCodeAt(r),a=i>>8,o=255&i;a?n.push(a,o):n.push(o)}return n},r.zero2=i,r.toHex=a,r.encode=function(t,e){return"hex"===e?a(t):t}},function(t,e,n){"use strict";var r=n(57).rotr32;function i(t,e,n){return t&e^~t&n}function a(t,e,n){return t&e^t&n^e&n}function o(t,e,n){return t^e^n}e.ft_1=function(t,e,n,r){return 0===t?i(e,n,r):1===t||3===t?o(e,n,r):2===t?a(e,n,r):void 0},e.ch32=i,e.maj32=a,e.p32=o,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},function(t,e,n){"use strict";var r=n(57),i=n(112),a=n(315),o=n(41),s=r.sum32,u=r.sum32_4,l=r.sum32_5,c=a.ch32,f=a.maj32,h=a.s0_256,p=a.s1_256,d=a.g0_256,m=a.g1_256,g=i.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}r.inherits(y,g),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=u(m(n[r-2]),n[r-7],d(n[r-15]),n[r-16]);var i=this.h[0],a=this.h[1],g=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],_=this.h[6],x=this.h[7];for(o(this.k.length===n.length),r=0;r<n.length;r++){var w=l(x,p(y),c(y,b,_),this.k[r],n[r]),S=s(h(i),f(i,a,g));x=_,_=b,b=y,y=s(v,w),v=g,g=a,a=i,i=s(w,S)}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],a),this.h[2]=s(this.h[2],g),this.h[3]=s(this.h[3],v),this.h[4]=s(this.h[4],y),this.h[5]=s(this.h[5],b),this.h[6]=s(this.h[6],_),this.h[7]=s(this.h[7],x)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){"use strict";var r=n(57),i=n(112),a=n(41),o=r.rotr64_hi,s=r.rotr64_lo,u=r.shr64_hi,l=r.shr64_lo,c=r.sum64,f=r.sum64_hi,h=r.sum64_lo,p=r.sum64_4_hi,d=r.sum64_4_lo,m=r.sum64_5_hi,g=r.sum64_5_lo,v=i.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function _(t,e,n,r,i){var a=t&n^~t&i;return a<0&&(a+=4294967296),a}function x(t,e,n,r,i,a){var o=e&r^~e&a;return o<0&&(o+=4294967296),o}function w(t,e,n,r,i){var a=t&n^t&i^n&i;return a<0&&(a+=4294967296),a}function S(t,e,n,r,i,a){var o=e&r^e&a^r&a;return o<0&&(o+=4294967296),o}function E(t,e){var n=o(t,e,28)^o(e,t,2)^o(e,t,7);return n<0&&(n+=4294967296),n}function k(t,e){var n=s(t,e,28)^s(e,t,2)^s(e,t,7);return n<0&&(n+=4294967296),n}function T(t,e){var n=o(t,e,14)^o(t,e,18)^o(e,t,9);return n<0&&(n+=4294967296),n}function P(t,e){var n=s(t,e,14)^s(t,e,18)^s(e,t,9);return n<0&&(n+=4294967296),n}function M(t,e){var n=o(t,e,1)^o(t,e,8)^u(t,e,7);return n<0&&(n+=4294967296),n}function C(t,e){var n=s(t,e,1)^s(t,e,8)^l(t,e,7);return n<0&&(n+=4294967296),n}function O(t,e){var n=o(t,e,19)^o(e,t,29)^u(t,e,6);return n<0&&(n+=4294967296),n}function I(t,e){var n=s(t,e,19)^s(e,t,29)^l(t,e,6);return n<0&&(n+=4294967296),n}r.inherits(b,v),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var n=this.W,r=0;r<32;r++)n[r]=t[e+r];for(;r<n.length;r+=2){var i=O(n[r-4],n[r-3]),a=I(n[r-4],n[r-3]),o=n[r-14],s=n[r-13],u=M(n[r-30],n[r-29]),l=C(n[r-30],n[r-29]),c=n[r-32],f=n[r-31];n[r]=p(i,a,o,s,u,l,c,f),n[r+1]=d(i,a,o,s,u,l,c,f)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var n=this.W,r=this.h[0],i=this.h[1],o=this.h[2],s=this.h[3],u=this.h[4],l=this.h[5],p=this.h[6],d=this.h[7],v=this.h[8],y=this.h[9],b=this.h[10],M=this.h[11],C=this.h[12],O=this.h[13],I=this.h[14],N=this.h[15];a(this.k.length===n.length);for(var A=0;A<n.length;A+=2){var R=I,D=N,j=T(v,y),L=P(v,y),F=_(v,y,b,M,C),z=x(v,y,b,M,C,O),B=this.k[A],U=this.k[A+1],V=n[A],q=n[A+1],W=m(R,D,j,L,F,z,B,U,V,q),G=g(R,D,j,L,F,z,B,U,V,q);R=E(r,i),D=k(r,i),j=w(r,i,o,s,u),L=S(r,i,o,s,u,l);var H=f(R,D,j,L),$=h(R,D,j,L);I=C,N=O,C=b,O=M,b=v,M=y,v=f(p,d,W,G),y=h(d,d,W,G),p=u,d=l,u=o,l=s,o=r,s=i,r=f(W,G,H,$),i=h(W,G,H,$)}c(this.h,0,r,i),c(this.h,2,o,s),c(this.h,4,u,l),c(this.h,6,p,d),c(this.h,8,v,y),c(this.h,10,b,M),c(this.h,12,C,O),c(this.h,14,I,N)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){var r=n(13),i=n(114).Reporter,a=n(23).Buffer;function o(t,e){i.call(this,e),a.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function s(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof s||(t=new s(t,e)),this.length+=t.length,t},this);else if("number"===typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"===typeof t)this.value=t,this.length=a.byteLength(t);else{if(!a.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}r(o,i),e.DecoderBuffer=o,o.prototype.save=function(){return{offset:this.offset,reporter:i.prototype.save.call(this)}},o.prototype.restore=function(t){var e=new o(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,i.prototype.restore.call(this,t.reporter),e},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},o.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var n=new o(this.base);return n._reporterState=this._reporterState,n.offset=this.offset,n.length=this.offset+t,this.offset+=t,n},o.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.EncoderBuffer=s,s.prototype.join=function(t,e){return t||(t=new a(this.length)),e||(e=0),0===this.length?t:(Array.isArray(this.value)?this.value.forEach(function(n){n.join(t,e),e+=n.length}):("number"===typeof this.value?t[e]=this.value:"string"===typeof this.value?t.write(this.value,e):a.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length),t)}},function(t,e,n){var r=e;r._reverse=function(t){var e={};return Object.keys(t).forEach(function(n){(0|n)==n&&(n|=0);var r=t[n];e[r]=n}),e},r.der=n(909)},function(t,e,n){var r=n(13),i=n(113),a=i.base,o=i.bignum,s=i.constants.der;function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){a.Node.call(this,"der",t)}function c(t,e){var n=t.readUInt8(e);if(t.isError(n))return n;var r=s.tagClass[n>>6],i=0===(32&n);if(31===(31&n)){var a=n;for(n=0;128===(128&a);){if(a=t.readUInt8(e),t.isError(a))return a;n<<=7,n|=127&a}}else n&=31;return{cls:r,primitive:i,tag:n,tagStr:s.tag[n]}}function f(t,e,n){var r=t.readUInt8(n);if(t.isError(r))return r;if(!e&&128===r)return null;if(0===(128&r))return r;var i=127&r;if(i>4)return t.error("length octect is too long");r=0;for(var a=0;a<i;a++){r<<=8;var o=t.readUInt8(n);if(t.isError(o))return o;r|=o}return r}t.exports=u,u.prototype.decode=function(t,e){return t instanceof a.DecoderBuffer||(t=new a.DecoderBuffer(t,e)),this.tree._decode(t,e)},r(l,a.Node),l.prototype._peekTag=function(t,e,n){if(t.isEmpty())return!1;var r=t.save(),i=c(t,'Failed to peek tag: "'+e+'"');return t.isError(i)?i:(t.restore(r),i.tag===e||i.tagStr===e||i.tagStr+"of"===e||n)},l.prototype._decodeTag=function(t,e,n){var r=c(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var i=f(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(i))return i;if(!n&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==i)return t.skip(i,'Failed to match body of: "'+e+'"');var a=t.save(),o=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(o)?o:(i=t.offset-a.offset,t.restore(a),t.skip(i,'Failed to match body of: "'+e+'"'))},l.prototype._skipUntilEnd=function(t,e){for(;;){var n=c(t,e);if(t.isError(n))return n;var r,i=f(t,n.primitive,e);if(t.isError(i))return i;if(r=n.primitive||null!==i?t.skip(i):this._skipUntilEnd(t,e),t.isError(r))return r;if("end"===n.tagStr)break}},l.prototype._decodeList=function(t,e,n,r){for(var i=[];!t.isEmpty();){var a=this._peekTag(t,"end");if(t.isError(a))return a;var o=n.decode(t,"der",r);if(t.isError(o)&&a)break;i.push(o)}return i},l.prototype._decodeStr=function(t,e){if("bitstr"===e){var n=t.readUInt8();return t.isError(n)?n:{unused:n,data:t.raw()}}if("bmpstr"===e){var r=t.raw();if(r.length%2===1)return t.error("Decoding of string type: bmpstr length mismatch");for(var i="",a=0;a<r.length/2;a++)i+=String.fromCharCode(r.readUInt16BE(2*a));return i}if("numstr"===e){var o=t.raw().toString("ascii");return this._isNumstr(o)?o:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var s=t.raw().toString("ascii");return this._isPrintstr(s)?s:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},l.prototype._decodeObjid=function(t,e,n){for(var r,i=[],a=0;!t.isEmpty();){var o=t.readUInt8();a<<=7,a|=127&o,0===(128&o)&&(i.push(a),a=0)}128&o&&i.push(a);var s=i[0]/40|0,u=i[0]%40;if(r=n?i:[s,u].concat(i.slice(1)),e){var l=e[r.join(" ")];void 0===l&&(l=e[r.join(".")]),void 0!==l&&(r=l)}return r},l.prototype._decodeTime=function(t,e){var n=t.raw().toString();if("gentime"===e)var r=0|n.slice(0,4),i=0|n.slice(4,6),a=0|n.slice(6,8),o=0|n.slice(8,10),s=0|n.slice(10,12),u=0|n.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");r=0|n.slice(0,2),i=0|n.slice(2,4),a=0|n.slice(4,6),o=0|n.slice(6,8),s=0|n.slice(8,10),u=0|n.slice(10,12);r=r<70?2e3+r:1900+r}return Date.UTC(r,i-1,a,o,s,u,0)},l.prototype._decodeNull=function(t){return null},l.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},l.prototype._decodeInt=function(t,e){var n=t.raw(),r=new o(n);return e&&(r=e[r.toString(10)]||r),r},l.prototype._use=function(t,e){return"function"===typeof t&&(t=t(e)),t._getDecoder("der").tree}},function(t,e,n){var r=n(13),i=n(23).Buffer,a=n(113),o=a.base,s=a.constants.der;function u(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){o.Node.call(this,"der",t)}function c(t){return t<10?"0"+t:t}t.exports=u,u.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},r(l,o.Node),l.prototype._encodeComposite=function(t,e,n,r){var a,o=function(t,e,n,r){var i;"seqof"===t?t="seq":"setof"===t&&(t="set");if(s.tagByName.hasOwnProperty(t))i=s.tagByName[t];else{if("number"!==typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);i=t}if(i>=31)return r.error("Multi-octet tag encoding unsupported");e||(i|=32);return i|=s.tagClassByName[n||"universal"]<<6}(t,e,n,this.reporter);if(r.length<128)return(a=new i(2))[0]=o,a[1]=r.length,this._createEncoderBuffer([a,r]);for(var u=1,l=r.length;l>=256;l>>=8)u++;(a=new i(2+u))[0]=o,a[1]=128|u;l=1+u;for(var c=r.length;c>0;l--,c>>=8)a[l]=255&c;return this._createEncoderBuffer([a,r])},l.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var n=new i(2*t.length),r=0;r<t.length;r++)n.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(n)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)?this._createEncoderBuffer(t):"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},l.prototype._encodeObjid=function(t,e,n){if("string"===typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s\.]+/g);for(var r=0;r<t.length;r++)t[r]|=0}else if(Array.isArray(t)){t=t.slice();for(r=0;r<t.length;r++)t[r]|=0}if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!n){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}var a=0;for(r=0;r<t.length;r++){var o=t[r];for(a++;o>=128;o>>=7)a++}var s=new i(a),u=s.length-1;for(r=t.length-1;r>=0;r--){o=t[r];for(s[u--]=127&o;(o>>=7)>0;)s[u--]=128|127&o}return this._createEncoderBuffer(s)},l.prototype._encodeTime=function(t,e){var n,r=new Date(t);return"gentime"===e?n=[c(r.getFullYear()),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?n=[c(r.getFullYear()%100),c(r.getUTCMonth()+1),c(r.getUTCDate()),c(r.getUTCHours()),c(r.getUTCMinutes()),c(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(n,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(t,e){if("string"===typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!==typeof t&&!i.isBuffer(t)){var n=t.toArray();!t.sign&&128&n[0]&&n.unshift(0),t=new i(n)}if(i.isBuffer(t)){var r=t.length;0===t.length&&r++;var a=new i(r);return t.copy(a),0===t.length&&(a[0]=0),this._createEncoderBuffer(a)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);r=1;for(var o=t;o>=256;o>>=8)r++;for(o=(a=new Array(r)).length-1;o>=0;o--)a[o]=255&t,t>>=8;return 128&a[0]&&a.unshift(0),this._createEncoderBuffer(new i(a))},l.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},l.prototype._use=function(t,e){return"function"===typeof t&&(t=t(e)),t._getEncoder("der").tree},l.prototype._skipDefault=function(t,e,n){var r,i=this._baseState;if(null===i.default)return!1;var a=t.join();if(void 0===i.defaultBuffer&&(i.defaultBuffer=this._encodeValue(i.default,e,n).join()),a.length!==i.defaultBuffer.length)return!1;for(r=0;r<a.length;r++)if(a[r]!==i.defaultBuffer[r])return!1;return!0}},function(t){t.exports={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}},function(t,e,n){var r=n(109),i=n(15).Buffer;function a(t){var e=i.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var n,o=i.alloc(0),s=0;o.length<e;)n=a(s++),o=i.concat([o,r("sha1").update(t).update(n).digest()]);return o.slice(0,e)}},function(t,e){t.exports=function(t,e){for(var n=t.length,r=-1;++r<n;)t[r]^=e[r];return t}},function(t,e,n){var r=n(24),i=n(15).Buffer;t.exports=function(t,e){return i.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(6)),i=o(n(10)),a=o(n(42));function o(t){return t&&t.__esModule?t:{default:t}}var s=i.default.number,u=i.default.string,l=i.default.array,c=i.default.object,f=i.default.func,h=i.default.oneOfType,p=(0,a.default)({displayName:"Bar",propTypes:{width:s.isRequired,height:s.isRequired,x:s.isRequired,y:s.isRequired,fill:u.isRequired,data:h([l,c]).isRequired,onMouseEnter:f,onMouseLeave:f},render:function(){var t=this.props,e=t.x,n=t.y,i=t.width,a=t.height,o=t.fill,s=t.data,u=t.onMouseEnter,l=t.onMouseLeave;return r.default.createElement("rect",{className:"bar",x:e,y:n,width:i,height:a,fill:o,onMouseMove:function(t){return u(t,s)},onMouseLeave:function(t){return l(t)}})}});e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(6)),i=o(n(10)),a=o(n(42));function o(t){return t&&t.__esModule?t:{default:t}}var s=i.default.string,u=i.default.array,l=(0,a.default)({displayName:"Path",propTypes:{className:s,stroke:s.isRequired,strokeLinecap:s,strokeWidth:s,strokeDasharray:s,fill:s,d:s.isRequired,data:u.isRequired},getDefaultProps:function(){return{className:"path",fill:"none",strokeWidth:"2",strokeLinecap:"butt",strokeDasharray:"none"}},render:function(){var t=this.props,e=t.className,n=t.stroke,i=t.strokeWidth,a=t.strokeLinecap,o=t.strokeDasharray,s=t.fill,u=t.d,l=t.style,c=t.data,f=t.onMouseEnter,h=t.onMouseLeave;return r.default.createElement("path",{className:e,stroke:n,strokeWidth:i,strokeLinecap:a,strokeDasharray:o,fill:s,d:u,onMouseMove:function(t){return f(t,c)},onMouseLeave:function(t){return h(t)},style:l})}});e.default=l},function(t,e,n){"use strict";e.__esModule=!0,e.transitionTimeout=function(t){var e="transition"+t+"Timeout",n="transition"+t;return function(t){if(t[n]){if(null==t[e])return new Error(e+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof t[e])return new Error(e+" must be a number (in milliseconds)")}return null}},e.classNamesShape=e.timeoutsShape=void 0;var r,i=(r=n(10))&&r.__esModule?r:{default:r};var a=i.default.oneOfType([i.default.number,i.default.shape({enter:i.default.number,exit:i.default.number}).isRequired]);e.timeoutsShape=a;var o=i.default.oneOfType([i.default.string,i.default.shape({enter:i.default.string,exit:i.default.string,active:i.default.string}),i.default.shape({enter:i.default.string,enterDone:i.default.string,enterActive:i.default.string,exit:i.default.string,exitDone:i.default.string,exitActive:i.default.string})]);e.classNamesShape=o},function(t,e,n){"use strict";function r(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,u,"next",t)}function u(t){r(o,i,a,s,u,"throw",t)}s(void 0)})}}n.d(e,"a",function(){return i})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Model",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Tensor",{enumerable:!0,get:function(){return i.default}}),e.testUtils=e.layers=e.activations=e.default=e.GPU_SUPPORT=void 0,n(351);var r=c(n(550)),i=c(n(8)),a=n(9),o=l(n(48));e.activations=o;var s=l(n(196));e.layers=s;var u=l(n(835));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}e.testUtils=u;var f=a.webgl2.isSupported;e.GPU_SUPPORT=f;var h={Model:r.default,Tensor:i.default,GPU_SUPPORT:f,activations:o,layers:s,testUtils:u};e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.d3=e.Brush=e.AreaChart=e.LineChart=e.ScatterPlot=e.PieChart=e.Waveform=e.BarChart=void 0;var r=n(923);Object.defineProperty(e,"BarChart",{enumerable:!0,get:function(){return f(r).default}});var i=n(929);Object.defineProperty(e,"Waveform",{enumerable:!0,get:function(){return f(i).default}});var a=n(930);Object.defineProperty(e,"PieChart",{enumerable:!0,get:function(){return f(a).default}});var o=n(931);Object.defineProperty(e,"ScatterPlot",{enumerable:!0,get:function(){return f(o).default}});var s=n(932);Object.defineProperty(e,"LineChart",{enumerable:!0,get:function(){return f(s).default}});var u=n(933);Object.defineProperty(e,"AreaChart",{enumerable:!0,get:function(){return f(u).default}});var l=n(934);Object.defineProperty(e,"Brush",{enumerable:!0,get:function(){return f(l).default}});var c=f(n(68));function f(t){return t&&t.__esModule?t:{default:t}}e.d3=c.default},function(t,e,n){"use strict";var r=n(6),i=n.n(r),a=n(119),o=n.n(a),s=n(10),u=n.n(s),l=n(214),c=n(333),f=n.n(c),h=n(334),p=n.n(h),d=n(215),m=n.n(d),g=n(335),v=n.n(g);function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function w(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var S=function(t){var e=t.classes,n=t.classNames,r=t.styles,a=t.closeIconSize,s=t.closeIconSvgPath,u=t.onClickCloseIcon;return i.a.createElement("button",{className:o()(e.closeButton,n.closeButton),style:r.closeButton,onClick:u},i.a.createElement("svg",{className:o()(e.closeIcon,n.closeIcon),style:r.closeIcon,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 36 36"},s))};S.propTypes={classNames:u.a.object.isRequired,styles:u.a.object.isRequired,classes:u.a.object.isRequired,closeIconSize:u.a.number.isRequired,closeIconSvgPath:u.a.node.isRequired,onClickCloseIcon:u.a.func.isRequired};var E=[],k={modals:function(){return E},add:function(t){-1===E.indexOf(t)&&E.push(t)},remove:function(t){var e=E.indexOf(t);-1!==e&&E.splice(e,1)},isTopModal:function(t){return!!E.length&&E[E.length-1]===t}};!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}(".styles_overlay__CLSq- {\n  background: rgba(0, 0, 0, 0.75);\n  display: flex;\n  align-items: flex-start;\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow-y: auto;\n  overflow-x: hidden;\n  z-index: 1000;\n  padding: 1.2rem;\n}\n.styles_overlayCenter__YHoO7 {\n  align-items: center;\n}\n.styles_modal__gNwvD {\n  max-width: 800px;\n  position: relative;\n  padding: 1.2rem;\n  background: #ffffff;\n  background-clip: padding-box;\n  box-shadow: 0 12px 15px 0 rgba(0, 0, 0, 0.25);\n  margin: auto;\n}\n.styles_closeButton__20ID4 {\n  position: absolute;\n  top: 14px;\n  right: 14px;\n  border: none;\n  padding: 0;\n  background-color: transparent;\n  display: flex;\n}\n.styles_closeIcon__1QwbI {\n}\n.styles_transitionEnter__3j_-a {\n  opacity: 0.01;\n}\n.styles_transitionEnterActive___eQs7 {\n  opacity: 1;\n  transition: opacity 500ms cubic-bezier(0.23, 1, 0.32, 1);\n}\n.styles_transitionExit__1KmEf {\n  opacity: 1;\n}\n.styles_transitionExitActive__1nQXw {\n  opacity: 0.01;\n  transition: opacity 500ms cubic-bezier(0.23, 1, 0.32, 1);\n}\n",{insertAt:"top"});var T=function(t){var e=t.condition,n=t.wrap,r=t.children;return e?n(r):r},P=function(t){function e(){var t,n,r,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return r=this,i=(t=_(e)).call.apply(t,[this].concat(o)),n=!i||"object"!==typeof i&&"function"!==typeof i?w(r):i,b(w(w(n)),"shouldClose",null),b(w(w(n)),"state",{showPortal:n.props.open}),b(w(w(n)),"handleOpen",function(){k.add(w(w(n))),n.props.blockScroll&&e.blockScroll(),document.addEventListener("keydown",n.handleKeydown)}),b(w(w(n)),"handleClose",function(){k.remove(w(w(n))),n.props.blockScroll&&n.unblockScroll(),document.removeEventListener("keydown",n.handleKeydown)}),b(w(w(n)),"handleClickOverlay",function(t){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose?(n.props.onOverlayClick&&n.props.onOverlayClick(t),n.props.closeOnOverlayClick&&n.props.onClose(t),n.shouldClose=null):n.shouldClose=null}),b(w(w(n)),"handleClickCloseIcon",function(t){n.props.onClose(t)}),b(w(w(n)),"handleKeydown",function(t){27===t.keyCode&&k.isTopModal(w(w(n)))&&(n.props.onEscKeyDown&&n.props.onEscKeyDown(t),n.props.closeOnEsc&&n.props.onClose(t))}),b(w(w(n)),"handleModalEvent",function(){n.shouldClose=!1}),b(w(w(n)),"handleEntered",function(){n.props.onEntered&&n.props.onEntered()}),b(w(w(n)),"handleExited",function(){n.props.onExited&&n.props.onExited(),n.setState({showPortal:!1}),n.props.blockScroll&&n.unblockScroll()}),b(w(w(n)),"unblockScroll",function(){0===k.modals().length&&m.a.off()}),n}var n,a,s;return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,r["Component"]),n=e,s=[{key:"blockScroll",value:function(){m.a.on()}},{key:"getDerivedStateFromProps",value:function(t,e){return!e.showPortal&&t.open?{showPortal:!0}:null}}],(a=[{key:"componentDidMount",value:function(){this.props.open&&this.handleOpen()}},{key:"componentDidUpdate",value:function(t,e){e.showPortal&&!this.state.showPortal?this.handleClose():!t.open&&this.props.open&&this.handleOpen()}},{key:"componentWillUnmount",value:function(){this.props.open&&this.handleClose()}},{key:"render",value:function(){var t=this.props,e=t.open,n=t.center,r=t.classes,a=t.classNames,s=t.styles,u=t.showCloseIcon,l=t.closeIconSize,c=t.closeIconSvgPath,h=t.animationDuration,d=t.container,m=t.focusTrapped,g=t.focusTrapOptions;return this.state.showPortal?i.a.createElement(f.a,{container:d},i.a.createElement(p.a,{in:e,appear:!0,classNames:{appear:a.transitionEnter||r.transitionEnter,appearActive:a.transitionEnterActive||r.transitionEnterActive,enter:a.transitionEnter||r.transitionEnter,enterActive:a.transitionEnterActive||r.transitionEnterActive,exit:a.transitionExit||r.transitionExit,exitActive:a.transitionExitActive||r.transitionExitActive},timeout:h,onEntered:this.handleEntered,onExited:this.handleExited},i.a.createElement("div",{className:o()(r.overlay,n?r.overlayCenter:null,a.overlay),onClick:this.handleClickOverlay,style:s.overlay},i.a.createElement("div",{className:o()(r.modal,a.modal),style:s.modal,onMouseDown:this.handleModalEvent,onMouseUp:this.handleModalEvent,onClick:this.handleModalEvent},i.a.createElement(T,{condition:m,wrap:function(t){return i.a.createElement(v.a,{focusTrapOptions:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){b(t,e,n[e])})}return t}({},{clickOutsideDeactivates:!0},g)},t)}},this.props.children,u&&i.a.createElement(S,{classes:r,classNames:a,styles:s,closeIconSize:l,closeIconSvgPath:c,onClickCloseIcon:this.handleClickCloseIcon})))))):null}}])&&y(n.prototype,a),s&&y(n,s),e}();P.propTypes={closeOnEsc:u.a.bool,closeOnOverlayClick:u.a.bool,onEntered:u.a.func,onExited:u.a.func,onClose:u.a.func.isRequired,onEscKeyDown:u.a.func,onOverlayClick:u.a.func,open:u.a.bool.isRequired,classNames:u.a.object,styles:u.a.object,children:u.a.node,classes:u.a.object,center:u.a.bool,showCloseIcon:u.a.bool,closeIconSize:u.a.number,closeIconSvgPath:u.a.node,animationDuration:u.a.number,container:u.a.object,blockScroll:u.a.bool,focusTrapped:u.a.bool,focusTrapOptions:u.a.object},P.defaultProps={classes:{overlay:"styles_overlay__CLSq-",overlayCenter:"styles_overlayCenter__YHoO7",modal:"styles_modal__gNwvD",closeButton:"styles_closeButton__20ID4",closeIcon:"styles_closeIcon__1QwbI",transitionEnter:"styles_transitionEnter__3j_-a",transitionEnterActive:"styles_transitionEnterActive___eQs7",transitionExit:"styles_transitionExit__1KmEf",transitionExitActive:"styles_transitionExitActive__1nQXw"},closeOnEsc:!0,closeOnOverlayClick:!0,onEntered:null,onExited:null,onEscKeyDown:null,onOverlayClick:null,showCloseIcon:!0,closeIconSize:28,closeIconSvgPath:i.a.createElement("path",{d:"M28.5 9.62L26.38 7.5 18 15.88 9.62 7.5 7.5 9.62 15.88 18 7.5 26.38l2.12 2.12L18 20.12l8.38 8.38 2.12-2.12L20.12 18z"}),classNames:{},styles:{},children:null,center:!1,animationDuration:500,blockScroll:!0,focusTrapped:!1,focusTrapOptions:{}},Object(l.polyfill)(P),e.a=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(6),a=s(n(10)),o=s(n(86));function s(t){return t&&t.__esModule?t:{default:t}}var u="function"===typeof o.default.createPortal,l="undefined"!==typeof window,c=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Component),r(e,[{key:"componentWillMount",value:function(){l&&(this.props.container?this.container=this.props.container:(this.container=document.createElement("div"),document.body.appendChild(this.container)),this.renderLayer())}},{key:"componentDidUpdate",value:function(){this.renderLayer()}},{key:"componentWillUnmount",value:function(){u||o.default.unmountComponentAtNode(this.container),this.props.container||document.body.removeChild(this.container)}},{key:"renderLayer",value:function(){u||o.default.unstable_renderSubtreeIntoContainer(this,this.props.children,this.container)}},{key:"render",value:function(){return u?o.default.createPortal(this.props.children,this.container):null}}]),e}();c.propTypes={children:a.default.node,container:a.default.object},e.default=c},function(t,e,n){"use strict";e.__esModule=!0,e.default=void 0;!function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}e.default=t}(n(10));var r=s(n(936)),i=s(n(938)),a=s(n(6)),o=s(n(939));n(328);function s(t){return t&&t.__esModule?t:{default:t}}function u(){return(u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var l=function(t,e){return t&&e&&e.split(" ").forEach(function(e){return(0,r.default)(t,e)})},c=function(t,e){return t&&e&&e.split(" ").forEach(function(e){return(0,i.default)(t,e)})},f=function(t){var e,n;function r(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).onEnter=function(t,n){var r=e.getClassNames(n?"appear":"enter").className;e.removeClasses(t,"exit"),l(t,r),e.props.onEnter&&e.props.onEnter(t)},e.onEntering=function(t,n){var r=e.getClassNames(n?"appear":"enter").activeClassName;e.reflowAndAddClass(t,r),e.props.onEntering&&e.props.onEntering(t)},e.onEntered=function(t,n){var r=e.getClassNames("enter").doneClassName;e.removeClasses(t,n?"appear":"enter"),l(t,r),e.props.onEntered&&e.props.onEntered(t)},e.onExit=function(t){var n=e.getClassNames("exit").className;e.removeClasses(t,"appear"),e.removeClasses(t,"enter"),l(t,n),e.props.onExit&&e.props.onExit(t)},e.onExiting=function(t){var n=e.getClassNames("exit").activeClassName;e.reflowAndAddClass(t,n),e.props.onExiting&&e.props.onExiting(t)},e.onExited=function(t){var n=e.getClassNames("exit").doneClassName;e.removeClasses(t,"exit"),l(t,n),e.props.onExited&&e.props.onExited(t)},e.getClassNames=function(t){var n=e.props.classNames,r="string"!==typeof n?n[t]:n+"-"+t;return{className:r,activeClassName:"string"!==typeof n?n[t+"Active"]:r+"-active",doneClassName:"string"!==typeof n?n[t+"Done"]:r+"-done"}},e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.removeClasses=function(t,e){var n=this.getClassNames(e),r=n.className,i=n.activeClassName,a=n.doneClassName;r&&c(t,r),i&&c(t,i),a&&c(t,a)},i.reflowAndAddClass=function(t,e){e&&(t&&t.scrollTop,l(t,e))},i.render=function(){var t=u({},this.props);return delete t.classNames,a.default.createElement(o.default,u({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},r}(a.default.Component);f.propTypes={};var h=f;e.default=h,t.exports=e.default},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(6),a=n(940),o=["active","paused","tag","focusTrapOptions","_createFocusTrap"],s=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.setNode=function(t){n.node=t},"undefined"!==typeof document&&(n.previouslyFocusedElement=document.activeElement),n}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,i.Component),r(e,[{key:"componentDidMount",value:function(){var t=this.props.focusTrapOptions,e={returnFocusOnDeactivate:!1};for(var n in t)t.hasOwnProperty(n)&&"returnFocusOnDeactivate"!==n&&(e[n]=t[n]);this.focusTrap=this.props._createFocusTrap(this.node,e),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause()}},{key:"componentDidUpdate",value:function(t){if(t.active&&!this.props.active){var e={returnFocus:this.props.focusTrapOptions.returnFocusOnDeactivate||!1};this.focusTrap.deactivate(e)}else!t.active&&this.props.active&&this.focusTrap.activate();t.paused&&!this.props.paused?this.focusTrap.unpause():!t.paused&&this.props.paused&&this.focusTrap.pause()}},{key:"componentWillUnmount",value:function(){this.focusTrap.deactivate(),!1!==this.props.focusTrapOptions.returnFocusOnDeactivate&&this.previouslyFocusedElement&&this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus()}},{key:"render",value:function(){var t={ref:this.setNode};for(var e in this.props)this.props.hasOwnProperty(e)&&-1===o.indexOf(e)&&(t[e]=this.props[e]);return i.createElement(this.props.tag,t,this.props.children)}}]),e}();s.defaultProps={active:!0,tag:"div",paused:!1,focusTrapOptions:{},_createFocusTrap:a},t.exports=s},function(t,e,n){"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"a",function(){return r})},,function(t,e,n){"use strict";var r=n(159),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,p=i?Symbol.for("react.forward_ref"):60112;i&&Symbol.for("react.placeholder");var d="function"===typeof Symbol&&Symbol.iterator;function m(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,a,o,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,a,o,s],l=0;(t=Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function y(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||g}function b(){}function _(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||g}y.prototype.isReactComponent={},y.prototype.setState=function(t,e){"object"!==typeof t&&"function"!==typeof t&&null!=t&&m("85"),this.updater.enqueueSetState(this,t,e,"setState")},y.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},b.prototype=y.prototype;var x=_.prototype=new b;x.constructor=_,r(x,y.prototype),x.isPureReactComponent=!0;var w={current:null,currentDispatcher:null},S=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function k(t,e,n){var r=void 0,i={},o=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(o=""+e.key),e)S.call(e,r)&&!E.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:a,type:t,key:o,ref:s,props:i,_owner:w.current}}function T(t){return"object"===typeof t&&null!==t&&t.$$typeof===a}var P=/\/+/g,M=[];function C(t,e,n,r){if(M.length){var i=M.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function O(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>M.length&&M.push(t)}function I(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case a:case o:u=!0}}if(u)return r(i,e,""===n?"."+N(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var l=0;l<e.length;l++){var c=n+N(s=e[l],l);u+=t(s,c,r,i)}else if(c=null===e||"object"!==typeof e?null:"function"===typeof(c=d&&e[d]||e["@@iterator"])?c:null,"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=t(s=s.value,c=n+N(s,l++),r,i);else"object"===s&&m("31","[object Object]"===(r=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":r,"");return u}(t,"",e,n)}function N(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}(t.key):e.toString(36)}function A(t,e){t.func.call(t.context,e,t.count++)}function R(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?D(t,r,n,function(t){return t}):null!=t&&(T(t)&&(t=function(t,e){return{$$typeof:a,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(P,"$&/")+"/")+n)),r.push(t))}function D(t,e,n,r,i){var a="";null!=n&&(a=(""+n).replace(P,"$&/")+"/"),I(t,R,e=C(e,a,r,i)),O(e)}var j={Children:{map:function(t,e,n){if(null==t)return t;var r=[];return D(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;I(t,A,e=C(null,null,e,n)),O(e)},count:function(t){return I(t,function(){return null},null)},toArray:function(t){var e=[];return D(t,e,null,function(t){return t}),e},only:function(t){return T(t)||m("143"),t}},createRef:function(){return{current:null}},Component:y,PureComponent:_,createContext:function(t,e){return void 0===e&&(e=null),(t={$$typeof:f,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,Provider:null,Consumer:null,unstable_read:null}).Provider={$$typeof:c,_context:t},t.Consumer=t,t.unstable_read=function(t,e){var n=w.currentDispatcher;return null===n&&m("277"),n.readContext(t,e)}.bind(null,t),t},forwardRef:function(t){return{$$typeof:p,render:t}},Fragment:s,StrictMode:u,unstable_AsyncMode:h,unstable_Profiler:l,createElement:k,cloneElement:function(t,e,n){(null===t||void 0===t)&&m("267",t);var i=void 0,o=r({},t.props),s=t.key,u=t.ref,l=t._owner;if(null!=e){void 0!==e.ref&&(u=e.ref,l=w.current),void 0!==e.key&&(s=""+e.key);var c=void 0;for(i in t.type&&t.type.defaultProps&&(c=t.type.defaultProps),e)S.call(e,i)&&!E.hasOwnProperty(i)&&(o[i]=void 0===e[i]&&void 0!==c?c[i]:e[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){c=Array(i);for(var f=0;f<i;f++)c[f]=arguments[f+2];o.children=c}return{$$typeof:a,type:t.type,key:s,ref:u,props:o,_owner:l}},createFactory:function(t){var e=k.bind(null,t);return e.type=t,e},isValidElement:T,version:"16.5.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:w,assign:r}},L={default:j},F=L&&j||L;t.exports=F.default||F},function(t,e,n){"use strict";var r=n(6),i=n(159),a=n(340);function o(t){for(var e=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(t,e,n,r,i,a,o,s){if(!t){if(t=void 0,void 0===e)t=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,i,a,o,s],l=0;(t=Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw t.framesToPop=1,t}}(!1,"Minified React error #"+t+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||o("227");var s=!1,u=null,l=!1,c=null,f={onError:function(t){s=!0,u=t}};function h(t,e,n,r,i,a,o,l,c){s=!1,u=null,function(t,e,n,r,i,a,o,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}.apply(f,arguments)}var p=null,d={};function m(){if(p)for(var t in d){var e=d[t],n=p.indexOf(t);if(-1<n||o("96",t),!v[n])for(var r in e.extractEvents||o("97",t),v[n]=e,n=e.eventTypes){var i=void 0,a=n[r],s=e,u=r;y.hasOwnProperty(u)&&o("99",u),y[u]=a;var l=a.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&g(l[i],s,u);i=!0}else a.registrationName?(g(a.registrationName,s,u),i=!0):i=!1;i||o("98",r,t)}}}function g(t,e,n){b[t]&&o("100",t),b[t]=e,_[t]=e.eventTypes[n].dependencies}var v=[],y={},b={},_={},x=null,w=null,S=null;function E(t,e,n,r){e=t.type||"unknown-event",t.currentTarget=S(r),function(t,e,n,r,i,a,f,p,d){if(h.apply(this,arguments),s){if(s){var m=u;s=!1,u=null}else o("198"),m=void 0;l||(l=!0,c=m)}}(e,n,void 0,t),t.currentTarget=null}function k(t,e){return null==e&&o("30"),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function T(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var P=null;function M(t,e){if(t){var n=t._dispatchListeners,r=t._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!t.isPropagationStopped();i++)E(t,e,n[i],r[i]);else n&&E(t,e,n,r);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function C(t){return M(t,!0)}function O(t){return M(t,!1)}var I={injectEventPluginOrder:function(t){p&&o("101"),p=Array.prototype.slice.call(t),m()},injectEventPluginsByName:function(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];d.hasOwnProperty(e)&&d[e]===r||(d[e]&&o("102",e),d[e]=r,n=!0)}n&&m()}};function N(t,e){var n=t.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}return t?null:(n&&"function"!==typeof n&&o("231",e,typeof n),n)}function A(t,e){if(null!==t&&(P=k(P,t)),t=P,P=null,t&&(T(t,e?C:O),P&&o("95"),l))throw e=c,l=!1,c=null,e}var R=Math.random().toString(36).slice(2),D="__reactInternalInstance$"+R,j="__reactEventHandlers$"+R;function L(t){if(t[D])return t[D];for(;!t[D];){if(!t.parentNode)return null;t=t.parentNode}return 7===(t=t[D]).tag||8===t.tag?t:null}function F(t){return!(t=t[D])||7!==t.tag&&8!==t.tag?null:t}function z(t){if(7===t.tag||8===t.tag)return t.stateNode;o("33")}function B(t){return t[j]||null}function U(t){do{t=t.return}while(t&&7!==t.tag);return t||null}function V(t,e,n){(e=N(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=k(n._dispatchListeners,e),n._dispatchInstances=k(n._dispatchInstances,t))}function q(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=U(e);for(e=n.length;0<e--;)V(n[e],"captured",t);for(e=0;e<n.length;e++)V(n[e],"bubbled",t)}}function W(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=N(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=k(n._dispatchListeners,e),n._dispatchInstances=k(n._dispatchInstances,t))}function G(t){t&&t.dispatchConfig.registrationName&&W(t._targetInst,null,t)}function H(t){T(t,q)}var $=!("undefined"===typeof window||!window.document||!window.document.createElement);function K(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var X={animationend:K("Animation","AnimationEnd"),animationiteration:K("Animation","AnimationIteration"),animationstart:K("Animation","AnimationStart"),transitionend:K("Transition","TransitionEnd")},Y={},J={};function Z(t){if(Y[t])return Y[t];if(!X[t])return t;var e,n=X[t];for(e in n)if(n.hasOwnProperty(e)&&e in J)return Y[t]=n[e];return t}$&&(J=document.createElement("div").style,"AnimationEvent"in window||(delete X.animationend.animation,delete X.animationiteration.animation,delete X.animationstart.animation),"TransitionEvent"in window||delete X.transitionend.transition);var Q=Z("animationend"),tt=Z("animationiteration"),et=Z("animationstart"),nt=Z("transitionend"),rt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),it=null,at=null,ot=null;function st(){if(ot)return ot;var t,e,n=at,r=n.length,i="value"in it?it.value:it.textContent,a=i.length;for(t=0;t<r&&n[t]===i[t];t++);var o=r-t;for(e=1;e<=o&&n[r-e]===i[a-e];e++);return ot=i.slice(t,1<e?1-e:void 0)}function ut(){return!0}function lt(){return!1}function ct(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ut:lt,this.isPropagationStopped=lt,this}function ft(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function ht(t){t instanceof this||o("279"),t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function pt(t){t.eventPool=[],t.getPooled=ft,t.release=ht}i(ct.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=ut)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=ut)},persist:function(){this.isPersistent=ut},isPersistent:lt,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=lt,this._dispatchInstances=this._dispatchListeners=null}}),ct.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},ct.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var a=new e;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,pt(n),n},pt(ct);var dt=ct.extend({data:null}),mt=ct.extend({data:null}),gt=[9,13,27,32],vt=$&&"CompositionEvent"in window,yt=null;$&&"documentMode"in document&&(yt=document.documentMode);var bt=$&&"TextEvent"in window&&!yt,_t=$&&(!vt||yt&&8<yt&&11>=yt),xt=String.fromCharCode(32),wt={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},St=!1;function Et(t,e){switch(t){case"keyup":return-1!==gt.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function kt(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Tt=!1;var Pt={eventTypes:wt,extractEvents:function(t,e,n,r){var i=void 0,a=void 0;if(vt)t:{switch(t){case"compositionstart":i=wt.compositionStart;break t;case"compositionend":i=wt.compositionEnd;break t;case"compositionupdate":i=wt.compositionUpdate;break t}i=void 0}else Tt?Et(t,n)&&(i=wt.compositionEnd):"keydown"===t&&229===n.keyCode&&(i=wt.compositionStart);return i?(_t&&"ko"!==n.locale&&(Tt||i!==wt.compositionStart?i===wt.compositionEnd&&Tt&&(a=st()):(at="value"in(it=r)?it.value:it.textContent,Tt=!0)),i=dt.getPooled(i,e,n,r),a?i.data=a:null!==(a=kt(n))&&(i.data=a),H(i),a=i):a=null,(t=bt?function(t,e){switch(t){case"compositionend":return kt(e);case"keypress":return 32!==e.which?null:(St=!0,xt);case"textInput":return(t=e.data)===xt&&St?null:t;default:return null}}(t,n):function(t,e){if(Tt)return"compositionend"===t||!vt&&Et(t,e)?(t=st(),ot=at=it=null,Tt=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _t&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=mt.getPooled(wt.beforeInput,e,n,r)).data=t,H(e)):e=null,null===a?e:null===e?a:[a,e]}},Mt=null,Ct=null,Ot=null;function It(t){if(t=w(t)){"function"!==typeof Mt&&o("280");var e=x(t.stateNode);Mt(t.stateNode,t.type,e)}}function Nt(t){Ct?Ot?Ot.push(t):Ot=[t]:Ct=t}function At(){if(Ct){var t=Ct,e=Ot;if(Ot=Ct=null,It(t),e)for(t=0;t<e.length;t++)It(e[t])}}function Rt(t,e){return t(e)}function Dt(t,e,n){return t(e,n)}function jt(){}var Lt=!1;function Ft(t,e){if(Lt)return t(e);Lt=!0;try{return Rt(t,e)}finally{Lt=!1,(null!==Ct||null!==Ot)&&(jt(),At())}}var zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bt(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!zt[t.type]:"textarea"===e}function Ut(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function Vt(t){if(!$)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}function qt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Wt(t){t._valueTracker||(t._valueTracker=function(t){var e=qt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,a.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Gt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}var Ht=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$t=/^(.*)[\\\/]/,Kt="function"===typeof Symbol&&Symbol.for,Xt=Kt?Symbol.for("react.element"):60103,Yt=Kt?Symbol.for("react.portal"):60106,Jt=Kt?Symbol.for("react.fragment"):60107,Zt=Kt?Symbol.for("react.strict_mode"):60108,Qt=Kt?Symbol.for("react.profiler"):60114,te=Kt?Symbol.for("react.provider"):60109,ee=Kt?Symbol.for("react.context"):60110,ne=Kt?Symbol.for("react.async_mode"):60111,re=Kt?Symbol.for("react.forward_ref"):60112,ie=Kt?Symbol.for("react.placeholder"):60113,ae="function"===typeof Symbol&&Symbol.iterator;function oe(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=ae&&t[ae]||t["@@iterator"])?t:null}function se(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case ne:return"AsyncMode";case Jt:return"Fragment";case Yt:return"Portal";case Qt:return"Profiler";case Zt:return"StrictMode";case ie:return"Placeholder"}if("object"===typeof t){switch(t.$$typeof){case ee:return"Context.Consumer";case te:return"Context.Provider";case re:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef")}if("function"===typeof t.then&&(t=1===t._reactStatus?t._reactResult:null))return se(t)}return null}function ue(t){var e="";do{t:switch(t.tag){case 4:case 0:case 1:case 2:case 3:case 7:case 10:var n=t._debugOwner,r=t._debugSource,i=se(t.type),a=null;n&&(a=se(n.type)),n=i,i="",r?i=" (at "+r.fileName.replace($t,"")+":"+r.lineNumber+")":a&&(i=" (created by "+a+")"),a="\n    in "+(n||"Unknown")+i;break t;default:a=""}e+=a,t=t.return}while(t);return e}var le=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ce=Object.prototype.hasOwnProperty,fe={},he={};function pe(t,e,n,r,i){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e}var de={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){de[t]=new pe(t,0,!1,t,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];de[e]=new pe(e,1,!1,t[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){de[t]=new pe(t,2,!1,t.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){de[t]=new pe(t,2,!1,t,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){de[t]=new pe(t,3,!1,t.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(t){de[t]=new pe(t,3,!0,t,null)}),["capture","download"].forEach(function(t){de[t]=new pe(t,4,!1,t,null)}),["cols","rows","size","span"].forEach(function(t){de[t]=new pe(t,6,!1,t,null)}),["rowSpan","start"].forEach(function(t){de[t]=new pe(t,5,!1,t.toLowerCase(),null)});var me=/[\-:]([a-z])/g;function ge(t){return t[1].toUpperCase()}function ve(t,e,n,r){var i=de.hasOwnProperty(e)?de[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!ce.call(he,t)||!ce.call(fe,t)&&(le.test(t)?he[t]=!0:(fe[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}function ye(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function be(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function _e(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=ye(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function xe(t,e){null!=(e=e.checked)&&ve(t,"checked",e,!1)}function we(t,e){xe(t,e);var n=ye(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Ee(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ee(t,e.type,ye(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function Se(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!t.defaultChecked,t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Ee(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(me,ge);de[e]=new pe(e,1,!1,t,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(me,ge);de[e]=new pe(e,1,!1,t,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(me,ge);de[e]=new pe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace")}),de.tabIndex=new pe("tabIndex",1,!1,"tabindex",null);var ke={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Te(t,e,n){return(t=ct.getPooled(ke.change,t,e,n)).type="change",Nt(n),H(t),t}var Pe=null,Me=null;function Ce(t){A(t,!1)}function Oe(t){if(Gt(z(t)))return t}function Ie(t,e){if("change"===t)return e}var Ne=!1;function Ae(){Pe&&(Pe.detachEvent("onpropertychange",Re),Me=Pe=null)}function Re(t){"value"===t.propertyName&&Oe(Me)&&Ft(Ce,t=Te(Me,t,Ut(t)))}function De(t,e,n){"focus"===t?(Ae(),Me=n,(Pe=e).attachEvent("onpropertychange",Re)):"blur"===t&&Ae()}function je(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Oe(Me)}function Le(t,e){if("click"===t)return Oe(e)}function Fe(t,e){if("input"===t||"change"===t)return Oe(e)}$&&(Ne=Vt("input")&&(!document.documentMode||9<document.documentMode));var ze={eventTypes:ke,_isInputEventSupported:Ne,extractEvents:function(t,e,n,r){var i=e?z(e):window,a=void 0,o=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?a=Ie:Bt(i)?Ne?a=Fe:(a=je,o=De):(s=i.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Le),a&&(a=a(t,e)))return Te(a,n,r);o&&o(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Ee(i,"number",i.value)}},Be=ct.extend({view:null,detail:null}),Ue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ve(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ue[t])&&!!e[t]}function qe(){return Ve}var We=0,Ge=0,He=!1,$e=!1,Ke=Be.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:qe,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=We;return We=t.screenX,He?"mousemove"===t.type?t.screenX-e:0:(He=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Ge;return Ge=t.screenY,$e?"mousemove"===t.type?t.screenY-e:0:($e=!0,0)}}),Xe=Ke.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ye={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Je={eventTypes:Ye,extractEvents:function(t,e,n,r){var i="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(i&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=e,e=(e=n.relatedTarget||n.toElement)?L(e):null):a=null,a===e)return null;var o=void 0,s=void 0,u=void 0,l=void 0;"mouseout"===t||"mouseover"===t?(o=Ke,s=Ye.mouseLeave,u=Ye.mouseEnter,l="mouse"):"pointerout"!==t&&"pointerover"!==t||(o=Xe,s=Ye.pointerLeave,u=Ye.pointerEnter,l="pointer");var c=null==a?i:z(a);if(i=null==e?i:z(e),(t=o.getPooled(s,a,n,r)).type=l+"leave",t.target=c,t.relatedTarget=i,(n=o.getPooled(u,e,n,r)).type=l+"enter",n.target=i,n.relatedTarget=c,r=e,a&&r)t:{for(i=r,l=0,o=e=a;o;o=U(o))l++;for(o=0,u=i;u;u=U(u))o++;for(;0<l-o;)e=U(e),l--;for(;0<o-l;)i=U(i),o--;for(;l--;){if(e===i||e===i.alternate)break t;e=U(e),i=U(i)}e=null}else e=null;for(i=e,e=[];a&&a!==i&&(null===(l=a.alternate)||l!==i);)e.push(a),a=U(a);for(a=[];r&&r!==i&&(null===(l=r.alternate)||l!==i);)a.push(r),r=U(r);for(r=0;r<e.length;r++)W(e[r],"bubbled",t);for(r=a.length;0<r--;)W(a[r],"captured",n);return[t,n]}},Ze=Object.prototype.hasOwnProperty;function Qe(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function tn(t,e){if(Qe(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Ze.call(e,n[r])||!Qe(t[n[r]],e[n[r]]))return!1;return!0}function en(t){var e=t;if(t.alternate)for(;e.return;)e=e.return;else{if(0!==(2&e.effectTag))return 1;for(;e.return;)if(0!==(2&(e=e.return).effectTag))return 1}return 5===e.tag?2:3}function nn(t){2!==en(t)&&o("188")}function rn(t){if(!(t=function(t){var e=t.alternate;if(!e)return 3===(e=en(t))&&o("188"),1===e?null:t;for(var n=t,r=e;;){var i=n.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var s=i.child;s;){if(s===n)return nn(i),t;if(s===r)return nn(i),e;s=s.sibling}o("188")}if(n.return!==r.return)n=i,r=a;else{s=!1;for(var u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}s||o("189")}}n.alternate!==r&&o("190")}return 5!==n.tag&&o("188"),n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(7===e.tag||8===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var an=ct.extend({animationName:null,elapsedTime:null,pseudoElement:null}),on=ct.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sn=Be.extend({relatedTarget:null});function un(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn=Be.extend({key:function(t){if(t.key){var e=ln[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=un(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?cn[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:qe,charCode:function(t){return"keypress"===t.type?un(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?un(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),hn=Ke.extend({dataTransfer:null}),pn=Be.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:qe}),dn=ct.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),mn=Ke.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),gn=[["abort","abort"],[Q,"animationEnd"],[tt,"animationIteration"],[et,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[nt,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],vn={},yn={};function bn(t,e){var n=t[0],r="on"+((t=t[1])[0].toUpperCase()+t.slice(1));e={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:e},vn[t]=e,yn[n]=e}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(t){bn(t,!0)}),gn.forEach(function(t){bn(t,!1)});var _n={eventTypes:vn,isInteractiveTopLevelEventType:function(t){return void 0!==(t=yn[t])&&!0===t.isInteractive},extractEvents:function(t,e,n,r){var i=yn[t];if(!i)return null;switch(t){case"keypress":if(0===un(n))return null;case"keydown":case"keyup":t=fn;break;case"blur":case"focus":t=sn;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Ke;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=pn;break;case Q:case tt:case et:t=an;break;case nt:t=dn;break;case"scroll":t=Be;break;case"wheel":t=mn;break;case"copy":case"cut":case"paste":t=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Xe;break;default:t=ct}return H(e=t.getPooled(i,e,n,r)),e}},xn=_n.isInteractiveTopLevelEventType,wn=[];function Sn(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=5!==r.tag?null:r.stateNode.containerInfo))break;t.ancestors.push(n),n=L(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=Ut(t.nativeEvent);r=t.topLevelType;for(var a=t.nativeEvent,o=null,s=0;s<v.length;s++){var u=v[s];u&&(u=u.extractEvents(r,e,a,i))&&(o=k(o,u))}A(o,!1)}}var En=!0;function kn(t,e){if(!e)return null;var n=(xn(t)?Pn:Mn).bind(null,t);e.addEventListener(t,n,!1)}function Tn(t,e){if(!e)return null;var n=(xn(t)?Pn:Mn).bind(null,t);e.addEventListener(t,n,!0)}function Pn(t,e){Dt(Mn,t,e)}function Mn(t,e){if(En){var n=Ut(e);if(null===(n=L(n))||"number"!==typeof n.tag||2===en(n)||(n=null),wn.length){var r=wn.pop();r.topLevelType=t,r.nativeEvent=e,r.targetInst=n,t=r}else t={topLevelType:t,nativeEvent:e,targetInst:n,ancestors:[]};try{Ft(Sn,t)}finally{t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>wn.length&&wn.push(t)}}}var Cn={},On=0,In="_reactListenersID"+(""+Math.random()).slice(2);function Nn(t){return Object.prototype.hasOwnProperty.call(t,In)||(t[In]=On++,Cn[t[In]]={}),Cn[t[In]]}function An(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Rn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dn(t,e){var n,r=Rn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Rn(r)}}function jn(){for(var t=window,e=An();e instanceof t.HTMLIFrameElement;){try{t=e.contentDocument.defaultView}catch(n){break}e=An(t.document)}return e}function Ln(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var Fn=$&&"documentMode"in document&&11>=document.documentMode,zn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Bn=null,Un=null,Vn=null,qn=!1;function Wn(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return qn||null==Bn||Bn!==An(n)?null:("selectionStart"in(n=Bn)&&Ln(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Vn&&tn(Vn,n)?null:(Vn=n,(t=ct.getPooled(zn.select,Un,t,e)).type="select",t.target=Bn,H(t),t))}var Gn={eventTypes:zn,extractEvents:function(t,e,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){t:{a=Nn(a),i=_.onSelect;for(var o=0;o<i.length;o++){var s=i[o];if(!a.hasOwnProperty(s)||!a[s]){a=!1;break t}}a=!0}i=!a}if(i)return null;switch(a=e?z(e):window,t){case"focus":(Bt(a)||"true"===a.contentEditable)&&(Bn=a,Un=e,Vn=null);break;case"blur":Vn=Un=Bn=null;break;case"mousedown":qn=!0;break;case"contextmenu":case"mouseup":case"dragend":return qn=!1,Wn(n,r);case"selectionchange":if(Fn)break;case"keydown":case"keyup":return Wn(n,r)}return null}};function Hn(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,function(t){null!=t&&(e+=t)}),e}(e.children))&&(t.children=e),t}function $n(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ye(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Kn(t,e){return null!=e.dangerouslySetInnerHTML&&o("91"),i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xn(t,e){var n=e.value;null==n&&(n=e.defaultValue,null!=(e=e.children)&&(null!=n&&o("92"),Array.isArray(e)&&(1>=e.length||o("93"),e=e[0]),n=e),null==n&&(n="")),t._wrapperState={initialValue:ye(n)}}function Yn(t,e){var n=ye(e.value),r=ye(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Jn(t){var e=t.textContent;e===t._wrapperState.initialValue&&(t.value=e)}I.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=B,w=F,S=z,I.injectEventPluginsByName({SimpleEventPlugin:_n,EnterLeaveEventPlugin:Je,ChangeEventPlugin:ze,SelectEventPlugin:Gn,BeforeInputEventPlugin:Pt});var Zn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Qn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Qn(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var er,nr=void 0,rr=(er=function(t,e){if(t.namespaceURI!==Zn.svg||"innerHTML"in t)t.innerHTML=e;else{for((nr=nr||document.createElement("div")).innerHTML="<svg>"+e+"</svg>",e=nr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction(function(){return er(t,e)})}:er);function ir(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ar={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},or=["Webkit","ms","Moz","O"];function sr(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,a=e[n];i=null==a||"boolean"===typeof a||""===a?"":r||"number"!==typeof a||0===a||ar.hasOwnProperty(i)&&ar[i]?(""+a).trim():a+"px","float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ar).forEach(function(t){or.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ar[e]=ar[t]})});var ur=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(t,e){e&&(ur[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&o("137",t,""),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&o("60"),"object"===typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||o("61")),null!=e.style&&"object"!==typeof e.style&&o("62",""))}function cr(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fr(t,e){var n=Nn(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=_[e];for(var r=0;r<e.length;r++){var i=e[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":Tn("scroll",t);break;case"focus":case"blur":Tn("focus",t),Tn("blur",t),n.blur=!0,n.focus=!0;break;case"cancel":case"close":Vt(i)&&Tn(i,t);break;case"invalid":case"submit":case"reset":break;default:-1===rt.indexOf(i)&&kn(i,t)}n[i]=!0}}}function hr(){}var pr=null,dr=null;function mr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function gr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}function vr(t){for(t=t.nextSibling;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}function yr(t){for(t=t.firstChild;t&&1!==t.nodeType&&3!==t.nodeType;)t=t.nextSibling;return t}new Set;var br=[],_r=-1;function xr(t){0>_r||(t.current=br[_r],br[_r]=null,_r--)}function wr(t,e){br[++_r]=t.current,t.current=e}var Sr={},Er={current:Sr},kr={current:!1},Tr=Sr;function Pr(t,e){var n=t.type.contextTypes;if(!n)return Sr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function Mr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function Cr(t){xr(kr),xr(Er)}function Or(t){xr(kr),xr(Er)}function Ir(t,e,n){Er.current!==Sr&&o("168"),wr(Er,e),wr(kr,n)}function Nr(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())a in t||o("108",se(e)||"Unknown",a);return i({},n,r)}function Ar(t){var e=t.stateNode;return e=e&&e.__reactInternalMemoizedMergedChildContext||Sr,Tr=Er.current,wr(Er,e),wr(kr,kr.current),!0}function Rr(t,e,n){var r=t.stateNode;r||o("169"),n?(e=Nr(t,e,Tr),r.__reactInternalMemoizedMergedChildContext=e,xr(kr),xr(Er),wr(Er,e)):xr(kr),wr(kr,n)}var Dr=null,jr=null;function Lr(t){return function(e){try{return t(e)}catch(n){}}}function Fr(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=e,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function zr(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Br(t,e,n){var r=t.alternate;return null===r?((r=new Fr(t.tag,e,t.key,t.mode)).type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=t.childExpirationTime,r.expirationTime=e!==t.pendingProps?n:t.expirationTime,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,r.firstContextDependency=t.firstContextDependency,r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ur(t,e,n){var r=t.type,i=t.key;t=t.props;var a=void 0;if("function"===typeof r)a=zr(r)?2:4;else if("string"===typeof r)a=7;else t:switch(r){case Jt:return Vr(t.children,e,n,i);case ne:a=10,e|=3;break;case Zt:a=10,e|=2;break;case Qt:return(r=new Fr(15,t,i,4|e)).type=Qt,r.expirationTime=n,r;case ie:a=16;break;default:if("object"===typeof r&&null!==r)switch(r.$$typeof){case te:a=12;break t;case ee:a=11;break t;case re:a=13;break t;default:if("function"===typeof r.then){a=4;break t}}o("130",null==r?r:typeof r,"")}return(e=new Fr(a,t,i,e)).type=r,e.expirationTime=n,e}function Vr(t,e,n,r){return(t=new Fr(9,t,r,e)).expirationTime=n,t}function qr(t,e,n){return(t=new Fr(8,t,null,e)).expirationTime=n,t}function Wr(t,e,n){return(e=new Fr(6,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Gr(t,e){t.didError=!1;var n=t.earliestPendingTime;0===n?t.earliestPendingTime=t.latestPendingTime=e:n>e?t.earliestPendingTime=e:t.latestPendingTime<e&&(t.latestPendingTime=e),Hr(e,t)}function Hr(t,e){var n=e.earliestSuspendedTime,r=e.latestSuspendedTime,i=e.earliestPendingTime,a=e.latestPingedTime;0===(i=0!==i?i:a)&&(0===t||r>t)&&(i=r),0!==(t=i)&&0!==n&&n<t&&(t=n),e.nextExpirationTimeToWorkOn=i,e.expirationTime=t}var $r=!1;function Kr(t){return{baseState:t,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xr(t){return{baseState:t.baseState,firstUpdate:t.firstUpdate,lastUpdate:t.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Yr(t){return{expirationTime:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Jr(t,e){null===t.lastUpdate?t.firstUpdate=t.lastUpdate=e:(t.lastUpdate.next=e,t.lastUpdate=e)}function Zr(t,e){var n=t.alternate;if(null===n){var r=t.updateQueue,i=null;null===r&&(r=t.updateQueue=Kr(t.memoizedState))}else r=t.updateQueue,i=n.updateQueue,null===r?null===i?(r=t.updateQueue=Kr(t.memoizedState),i=n.updateQueue=Kr(n.memoizedState)):r=t.updateQueue=Xr(i):null===i&&(i=n.updateQueue=Xr(r));null===i||r===i?Jr(r,e):null===r.lastUpdate||null===i.lastUpdate?(Jr(r,e),Jr(i,e)):(Jr(r,e),i.lastUpdate=e)}function Qr(t,e){var n=t.updateQueue;null===(n=null===n?t.updateQueue=Kr(t.memoizedState):ti(t,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=e:(n.lastCapturedUpdate.next=e,n.lastCapturedUpdate=e)}function ti(t,e){var n=t.alternate;return null!==n&&e===n.updateQueue&&(e=t.updateQueue=Xr(e)),e}function ei(t,e,n,r,a,o){switch(n.tag){case 1:return"function"===typeof(t=n.payload)?t.call(o,r,a):t;case 3:t.effectTag=-1025&t.effectTag|64;case 0:if(null===(a="function"===typeof(t=n.payload)?t.call(o,r,a):t)||void 0===a)break;return i({},r,a);case 2:$r=!0}return r}function ni(t,e,n,r,i){$r=!1;for(var a=(e=ti(t,e)).baseState,o=null,s=0,u=e.firstUpdate,l=a;null!==u;){var c=u.expirationTime;c>i?(null===o&&(o=u,a=l),(0===s||s>c)&&(s=c)):(l=ei(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastEffect?e.firstEffect=e.lastEffect=u:(e.lastEffect.nextEffect=u,e.lastEffect=u))),u=u.next}for(c=null,u=e.firstCapturedUpdate;null!==u;){var f=u.expirationTime;f>i?(null===c&&(c=u,null===o&&(a=l)),(0===s||s>f)&&(s=f)):(l=ei(t,0,u,l,n,r),null!==u.callback&&(t.effectTag|=32,u.nextEffect=null,null===e.lastCapturedEffect?e.firstCapturedEffect=e.lastCapturedEffect=u:(e.lastCapturedEffect.nextEffect=u,e.lastCapturedEffect=u))),u=u.next}null===o&&(e.lastUpdate=null),null===c?e.lastCapturedUpdate=null:t.effectTag|=32,null===o&&null===c&&(a=l),e.baseState=a,e.firstUpdate=o,e.firstCapturedUpdate=c,t.expirationTime=s,t.memoizedState=l}function ri(t,e,n){null!==e.firstCapturedUpdate&&(null!==e.lastUpdate&&(e.lastUpdate.next=e.firstCapturedUpdate,e.lastUpdate=e.lastCapturedUpdate),e.firstCapturedUpdate=e.lastCapturedUpdate=null),ii(e.firstEffect,n),e.firstEffect=e.lastEffect=null,ii(e.firstCapturedEffect,n),e.firstCapturedEffect=e.lastCapturedEffect=null}function ii(t,e){for(;null!==t;){var n=t.callback;if(null!==n){t.callback=null;var r=e;"function"!==typeof n&&o("191",n),n.call(r)}t=t.nextEffect}}function ai(t,e){return{value:t,source:e,stack:ue(e)}}var oi={current:null},si=null,ui=null,li=null;function ci(t,e){var n=t.type._context;wr(oi,n._currentValue),n._currentValue=e}function fi(t){var e=oi.current;xr(oi),t.type._context._currentValue=e}function hi(t){si=t,li=ui=null,t.firstContextDependency=null}function pi(t,e){return li!==t&&!1!==e&&0!==e&&("number"===typeof e&&1073741823!==e||(li=t,e=1073741823),e={context:t,observedBits:e,next:null},null===ui?(null===si&&o("277"),si.firstContextDependency=ui=e):ui=ui.next=e),t._currentValue}var di={},mi={current:di},gi={current:di},vi={current:di};function yi(t){return t===di&&o("174"),t}function bi(t,e){wr(vi,e),wr(gi,t),wr(mi,di);var n=e.nodeType;switch(n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:tr(null,"");break;default:e=tr(e=(n=8===n?e.parentNode:e).namespaceURI||null,n=n.tagName)}xr(mi),wr(mi,e)}function _i(t){xr(mi),xr(gi),xr(vi)}function xi(t){yi(vi.current);var e=yi(mi.current),n=tr(e,t.type);e!==n&&(wr(gi,t),wr(mi,n))}function wi(t){gi.current===t&&(xr(mi),xr(gi))}var Si=(new r.Component).refs;function Ei(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,null!==(r=t.updateQueue)&&0===t.expirationTime&&(r.baseState=n)}var ki={isMounted:function(t){return!!(t=t._reactInternalFiber)&&2===en(t)},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=oo(),i=Yr(r=Na(r,t));i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Zr(t,i),Aa(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=oo(),i=Yr(r=Na(r,t));i.tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),Zr(t,i),Aa(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=oo(),r=Yr(n=Na(n,t));r.tag=2,void 0!==e&&null!==e&&(r.callback=e),Zr(t,r),Aa(t,n)}};function Ti(t,e,n,r,i,a,o){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,a,o):!e.prototype||!e.prototype.isPureReactComponent||(!tn(n,r)||!tn(i,a))}function Pi(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ki.enqueueReplaceState(e,e.state,null)}function Mi(t,e,n,r){var i=t.stateNode,a=Mr(e)?Tr:Er.current;i.props=n,i.state=t.memoizedState,i.refs=Si,i.context=Pr(t,a),null!==(a=t.updateQueue)&&(ni(t,a,n,i,r),i.state=t.memoizedState),"function"===typeof(a=e.getDerivedStateFromProps)&&(Ei(t,e,a,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&ki.enqueueReplaceState(i,i.state,null),null!==(a=t.updateQueue)&&(ni(t,a,n,i,r),i.state=t.memoizedState)),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var Ci=Array.isArray;function Oi(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){n=n._owner;var r=void 0;n&&(2!==n.tag&&3!==n.tag&&o("110"),r=n.stateNode),r||o("147",t);var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===Si&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}"string"!==typeof t&&o("284"),n._owner||o("254",t)}return t}function Ii(t,e){"textarea"!==t.type&&o("31","[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,"")}function Ni(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e,n){return(t=Br(t,e,n)).index=0,t.sibling=null,t}function a(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||8!==e.tag?((e=qr(n,t.mode,r)).return=t,e):((e=i(e,n,r)).return=t,e)}function l(t,e,n,r){return null!==e&&e.type===n.type?((r=i(e,n.props,r)).ref=Oi(t,e,n),r.return=t,r):((r=Ur(n,t.mode,r)).ref=Oi(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||6!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Wr(n,t.mode,r)).return=t,e):((e=i(e,n.children||[],r)).return=t,e)}function f(t,e,n,r,a){return null===e||9!==e.tag?((e=Vr(n,t.mode,r,a)).return=t,e):((e=i(e,n,r)).return=t,e)}function h(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=qr(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case Xt:return(n=Ur(e,t.mode,n)).ref=Oi(t,null,e),n.return=t,n;case Yt:return(e=Wr(e,t.mode,n)).return=t,e}if(Ci(e)||oe(e))return(e=Vr(e,t.mode,n,null)).return=t,e;Ii(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Xt:return n.key===i?n.type===Jt?f(t,e,n.props.children,r,i):l(t,e,n,r):null;case Yt:return n.key===i?c(t,e,n,r):null}if(Ci(n)||oe(n))return null!==i?null:f(t,e,n,r,null);Ii(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Xt:return t=t.get(null===r.key?n:r.key)||null,r.type===Jt?f(e,t,r.props.children,i,r.key):l(e,t,r,i);case Yt:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(Ci(r)||oe(r))return f(e,t=t.get(n)||null,r,i,null);Ii(e,r)}return null}function m(i,o,s,u){for(var l=null,c=null,f=o,m=o=0,g=null;null!==f&&m<s.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=p(i,f,s[m],u);if(null===v){null===f&&(f=g);break}t&&f&&null===v.alternate&&e(i,f),o=a(v,o,m),null===c?l=v:c.sibling=v,c=v,f=g}if(m===s.length)return n(i,f),l;if(null===f){for(;m<s.length;m++)(f=h(i,s[m],u))&&(o=a(f,o,m),null===c?l=f:c.sibling=f,c=f);return l}for(f=r(i,f);m<s.length;m++)(g=d(f,i,m,s[m],u))&&(t&&null!==g.alternate&&f.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?l=g:c.sibling=g,c=g);return t&&f.forEach(function(t){return e(i,t)}),l}function g(i,s,u,l){var c=oe(u);"function"!==typeof c&&o("150"),null==(u=c.call(u))&&o("151");for(var f=c=null,m=s,g=s=0,v=null,y=u.next();null!==m&&!y.done;g++,y=u.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,l);if(null===b){m||(m=v);break}t&&m&&null===b.alternate&&e(i,m),s=a(b,s,g),null===f?c=b:f.sibling=b,f=b,m=v}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;g++,y=u.next())null!==(y=h(i,y.value,l))&&(s=a(y,s,g),null===f?c=y:f.sibling=y,f=y);return c}for(m=r(i,m);!y.done;g++,y=u.next())null!==(y=d(m,i,g,y.value,l))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===f?c=y:f.sibling=y,f=y);return t&&m.forEach(function(t){return e(i,t)}),c}return function(t,r,a,u){var l="object"===typeof a&&null!==a&&a.type===Jt&&null===a.key;l&&(a=a.props.children);var c="object"===typeof a&&null!==a;if(c)switch(a.$$typeof){case Xt:t:{for(c=a.key,l=r;null!==l;){if(l.key===c){if(9===l.tag?a.type===Jt:l.type===a.type){n(t,l.sibling),(r=i(l,a.type===Jt?a.props.children:a.props,u)).ref=Oi(t,l,a),r.return=t,t=r;break t}n(t,l);break}e(t,l),l=l.sibling}a.type===Jt?((r=Vr(a.props.children,t.mode,u,a.key)).return=t,t=r):((u=Ur(a,t.mode,u)).ref=Oi(t,r,a),u.return=t,t=u)}return s(t);case Yt:t:{for(l=a.key;null!==r;){if(r.key===l){if(6===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(t,r.sibling),(r=i(r,a.children||[],u)).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Wr(a,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&8===r.tag?(n(t,r.sibling),(r=i(r,a,u)).return=t,t=r):(n(t,r),(r=qr(a,t.mode,u)).return=t,t=r),s(t);if(Ci(a))return m(t,r,a,u);if(oe(a))return g(t,r,a,u);if(c&&Ii(t,a),"undefined"===typeof a&&!l)switch(t.tag){case 2:case 3:case 0:o("152",(u=t.type).displayName||u.name||"Component")}return n(t,r)}}var Ai=Ni(!0),Ri=Ni(!1),Di=null,ji=null,Li=!1;function Fi(t,e){var n=new Fr(7,null,null,0);n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function zi(t,e){switch(t.tag){case 7:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 8:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Bi(t){if(Li){var e=ji;if(e){var n=e;if(!zi(t,e)){if(!(e=vr(n))||!zi(t,e))return t.effectTag|=2,Li=!1,void(Di=t);Fi(Di,n)}Di=t,ji=yr(e)}else t.effectTag|=2,Li=!1,Di=t}}function Ui(t){for(t=t.return;null!==t&&7!==t.tag&&5!==t.tag;)t=t.return;Di=t}function Vi(t){if(t!==Di)return!1;if(!Li)return Ui(t),Li=!0,!1;var e=t.type;if(7!==t.tag||"head"!==e&&"body"!==e&&!gr(e,t.memoizedProps))for(e=ji;e;)Fi(t,e),e=vr(e);return Ui(t),ji=Di?vr(t.stateNode):null,!0}function qi(){ji=Di=null,Li=!1}var Wi=Ht.ReactCurrentOwner;function Gi(t,e,n,r){e.child=null===t?Ri(e,null,n,r):Ai(e,t.child,n,r)}function Hi(t,e,n,r,i){n=n.render;var a=e.ref;return kr.current||e.memoizedProps!==r||a!==(null!==t?t.ref:null)?(Gi(t,e,n=n(r,a),i),e.memoizedProps=r,e.child):Qi(t,e,i)}function $i(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Ki(t,e,n,r,i){var a=Mr(n)?Tr:Er.current;return a=Pr(e,a),hi(e),n=n(r,a),e.effectTag|=1,Gi(t,e,n,i),e.memoizedProps=r,e.child}function Xi(t,e,n,r,i){if(Mr(n)){var a=!0;Ar(e)}else a=!1;if(hi(e),null===t)if(null===e.stateNode){var o=Mr(n)?Tr:Er.current,s=n.contextTypes,u=null!==s&&void 0!==s,l=new n(r,s=u?Pr(e,o):Sr);e.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,l.updater=ki,e.stateNode=l,l._reactInternalFiber=e,u&&((u=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,u.__reactInternalMemoizedMaskedChildContext=s),Mi(e,n,r,i),r=!0}else{o=e.stateNode,s=e.memoizedProps,o.props=s;var c=o.context;u=Pr(e,u=Mr(n)?Tr:Er.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||c!==u)&&Pi(e,o,r,u),$r=!1;var h=e.memoizedState;c=o.state=h;var p=e.updateQueue;null!==p&&(ni(e,p,r,o,i),c=e.memoizedState),s!==r||h!==c||kr.current||$r?("function"===typeof f&&(Ei(e,n,f,r),c=e.memoizedState),(s=$r||Ti(e,n,s,r,h,c,u))?(l||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.effectTag|=4)):("function"===typeof o.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=s):("function"===typeof o.componentDidMount&&(e.effectTag|=4),r=!1)}else o=e.stateNode,s=e.memoizedProps,o.props=s,c=o.context,u=Pr(e,u=Mr(n)?Tr:Er.current),(l="function"===typeof(f=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||c!==u)&&Pi(e,o,r,u),$r=!1,c=e.memoizedState,h=o.state=c,null!==(p=e.updateQueue)&&(ni(e,p,r,o,i),h=e.memoizedState),s!==r||c!==h||kr.current||$r?("function"===typeof f&&(Ei(e,n,f,r),h=e.memoizedState),(f=$r||Ti(e,n,s,r,c,h,u))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,u)),"function"===typeof o.componentDidUpdate&&(e.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=h),o.props=r,o.state=h,o.context=u,r=f):("function"!==typeof o.componentDidUpdate||s===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===t.memoizedProps&&c===t.memoizedState||(e.effectTag|=256),r=!1);return Yi(t,e,n,r,a,i)}function Yi(t,e,n,r,i,a){$i(t,e);var o=0!==(64&e.effectTag);if(!r&&!o)return i&&Rr(e,n,!1),Qi(t,e,a);r=e.stateNode,Wi.current=e;var s=o?null:r.render();return e.effectTag|=1,null!==t&&o&&(Gi(t,e,null,a),e.child=null),Gi(t,e,s,a),e.memoizedState=r.state,e.memoizedProps=r.props,i&&Rr(e,n,!0),e.child}function Ji(t){var e=t.stateNode;e.pendingContext?Ir(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ir(0,e.context,!1),bi(t,e.containerInfo)}function Zi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}function Qi(t,e,n){null!==t&&(e.firstContextDependency=t.firstContextDependency);var r=e.childExpirationTime;if(0===r||r>n)return null;if(null!==t&&e.child!==t.child&&o("153"),null!==e.child){for(n=Br(t=e.child,t.pendingProps,t.expirationTime),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Br(t,t.pendingProps,t.expirationTime)).return=e;n.sibling=null}return e.child}function ta(t,e,n){var r=e.expirationTime;if(!kr.current&&(0===r||r>n)){switch(e.tag){case 5:Ji(e),qi();break;case 7:xi(e);break;case 2:Mr(e.type)&&Ar(e);break;case 3:Mr(e.type._reactResult)&&Ar(e);break;case 6:bi(e,e.stateNode.containerInfo);break;case 12:ci(e,e.memoizedProps.value)}return Qi(t,e,n)}switch(e.expirationTime=0,e.tag){case 4:return function(t,e,n,r){null!==t&&o("155");var i=e.pendingProps;if("object"===typeof n&&null!==n&&"function"===typeof n.then){var a=n=function(t){switch(t._reactStatus){case 1:return t._reactResult;case 2:throw t._reactResult;case 0:throw t;default:throw t._reactStatus=0,t.then(function(e){if(0===t._reactStatus){if(t._reactStatus=1,"object"===typeof e&&null!==e){var n=e.default;e=void 0!==n&&null!==n?n:e}t._reactResult=e}},function(e){0===t._reactStatus&&(t._reactStatus=2,t._reactResult=e)}),t}}(n);a="function"===typeof a?zr(a)?3:1:void 0!==a&&null!==a&&a.$$typeof?14:4,a=e.tag=a;var s=Zi(n,i);switch(a){case 1:return Ki(t,e,n,s,r);case 3:return Xi(t,e,n,s,r);case 14:return Hi(t,e,n,s,r);default:o("283",n)}}if(a=Pr(e,Er.current),hi(e),a=n(i,a),e.effectTag|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){e.tag=2,Mr(n)?(s=!0,Ar(e)):s=!1,e.memoizedState=null!==a.state&&void 0!==a.state?a.state:null;var u=n.getDerivedStateFromProps;return"function"===typeof u&&Ei(e,n,u,i),a.updater=ki,e.stateNode=a,a._reactInternalFiber=e,Mi(e,n,i,r),Yi(t,e,n,!0,s,r)}return e.tag=0,Gi(t,e,a,r),e.memoizedProps=i,e.child}(t,e,e.type,n);case 0:return Ki(t,e,e.type,e.pendingProps,n);case 1:var i=e.type._reactResult;return t=Ki(t,e,i,Zi(i,r=e.pendingProps),n),e.memoizedProps=r,t;case 2:return Xi(t,e,e.type,e.pendingProps,n);case 3:return t=Xi(t,e,i=e.type._reactResult,Zi(i,r=e.pendingProps),n),e.memoizedProps=r,t;case 5:return Ji(e),null===(r=e.updateQueue)&&o("282"),i=null!==(i=e.memoizedState)?i.element:null,ni(e,r,e.pendingProps,null,n),(r=e.memoizedState.element)===i?(qi(),e=Qi(t,e,n)):(i=e.stateNode,(i=(null===t||null===t.child)&&i.hydrate)&&(ji=yr(e.stateNode.containerInfo),Di=e,i=Li=!0),i?(e.effectTag|=2,e.child=Ri(e,null,r,n)):(Gi(t,e,r,n),qi()),e=e.child),e;case 7:xi(e),null===t&&Bi(e),r=e.type,i=e.pendingProps;var a=null!==t?t.memoizedProps:null,s=i.children;return gr(r,i)?s=null:null!==a&&gr(r,a)&&(e.effectTag|=16),$i(t,e),1073741823!==n&&1&e.mode&&i.hidden?(e.expirationTime=1073741823,e.memoizedProps=i,e=null):(Gi(t,e,s,n),e.memoizedProps=i,e=e.child),e;case 8:return null===t&&Bi(e),e.memoizedProps=e.pendingProps,null;case 16:return null;case 6:return bi(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ai(e,null,r,n):Gi(t,e,r,n),e.memoizedProps=r,e.child;case 13:return Hi(t,e,e.type,e.pendingProps,n);case 14:return t=Hi(t,e,i=e.type._reactResult,Zi(i,r=e.pendingProps),n),e.memoizedProps=r,t;case 9:return Gi(t,e,r=e.pendingProps,n),e.memoizedProps=r,e.child;case 10:return Gi(t,e,r=e.pendingProps.children,n),e.memoizedProps=r,e.child;case 15:return Gi(t,e,(r=e.pendingProps).children,n),e.memoizedProps=r,e.child;case 12:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,e.memoizedProps=i,ci(e,a),null!==s){var u=s.value;if(0===(a=u===a&&(0!==u||1/u===1/a)||u!==u&&a!==a?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,a):1073741823))){if(s.children===i.children&&!kr.current){e=Qi(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){if(null!==(u=s.firstContextDependency))do{if(u.context===r&&0!==(u.observedBits&a)){if(2===s.tag||3===s.tag){var l=Yr(n);l.tag=2,Zr(s,l)}(0===s.expirationTime||s.expirationTime>n)&&(s.expirationTime=n),null!==(l=s.alternate)&&(0===l.expirationTime||l.expirationTime>n)&&(l.expirationTime=n);for(var c=s.return;null!==c;){if(l=c.alternate,0===c.childExpirationTime||c.childExpirationTime>n)c.childExpirationTime=n,null!==l&&(0===l.childExpirationTime||l.childExpirationTime>n)&&(l.childExpirationTime=n);else{if(null===l||!(0===l.childExpirationTime||l.childExpirationTime>n))break;l.childExpirationTime=n}c=c.return}}l=s.child,u=u.next}while(null!==u);else l=12===s.tag&&s.type===e.type?null:s.child;if(null!==l)l.return=s;else for(l=s;null!==l;){if(l===e){l=null;break}if(null!==(s=l.sibling)){s.return=l.return,l=s;break}l=l.return}s=l}}Gi(t,e,i.children,n),e=e.child}return e;case 11:return a=e.type,i=(r=e.pendingProps).children,hi(e),i=i(a=pi(a,r.unstable_observedBits)),e.effectTag|=1,Gi(t,e,i,n),e.memoizedProps=r,e.child;default:o("156")}}function ea(t){t.effectTag|=4}var na=void 0,ra=void 0,ia=void 0;function aa(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=ue(n)),null!==n&&se(n.type),e=e.value,null!==t&&2===t.tag&&se(t.type);try{console.error(e)}catch(i){setTimeout(function(){throw i})}}function oa(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Ia(t,n)}else e.current=null}function sa(t){switch("function"===typeof jr&&jr(t),t.tag){case 2:case 3:oa(t);var e=t.stateNode;if("function"===typeof e.componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){Ia(t,n)}break;case 7:oa(t);break;case 6:ca(t)}}function ua(t){return 7===t.tag||5===t.tag||6===t.tag}function la(t){t:{for(var e=t.return;null!==e;){if(ua(e)){var n=e;break t}e=e.return}o("160"),n=void 0}var r=e=void 0;switch(n.tag){case 7:e=n.stateNode,r=!1;break;case 5:case 6:e=n.stateNode.containerInfo,r=!0;break;default:o("161")}16&n.effectTag&&(ir(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||ua(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;7!==n.tag&&8!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||6===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}for(var i=t;;){if(7===i.tag||8===i.tag)if(n)if(r){var a=e,s=i.stateNode,u=n;8===a.nodeType?a.parentNode.insertBefore(s,u):a.insertBefore(s,u)}else e.insertBefore(i.stateNode,n);else r?(a=e,s=i.stateNode,8===a.nodeType?(u=a.parentNode).insertBefore(s,a):(u=a).appendChild(s),null===u.onclick&&(u.onclick=hr)):e.appendChild(i.stateNode);else if(6!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function ca(t){for(var e=t,n=!1,r=void 0,i=void 0;;){if(!n){n=e.return;t:for(;;){switch(null===n&&o("160"),n.tag){case 7:r=n.stateNode,i=!1;break t;case 5:case 6:r=n.stateNode.containerInfo,i=!0;break t}n=n.return}n=!0}if(7===e.tag||8===e.tag){t:for(var a=e,s=a;;)if(sa(s),null!==s.child&&6!==s.tag)s.child.return=s,s=s.child;else{if(s===a)break;for(;null===s.sibling;){if(null===s.return||s.return===a)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}i?(a=r,s=e.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):r.removeChild(e.stateNode)}else if(6===e.tag?(r=e.stateNode.containerInfo,i=!0):sa(e),null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return;6===(e=e.return).tag&&(n=!1)}e.sibling.return=e.return,e=e.sibling}}function fa(t,e){switch(e.tag){case 2:case 3:break;case 7:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var a=e.updateQueue;if(e.updateQueue=null,null!==a){for(n[j]=r,"input"===t&&"radio"===r.type&&null!=r.name&&xe(n,r),cr(t,i),e=cr(t,r),i=0;i<a.length;i+=2){var s=a[i],u=a[i+1];"style"===s?sr(n,u):"dangerouslySetInnerHTML"===s?rr(n,u):"children"===s?ir(n,u):ve(n,s,u,e)}switch(t){case"input":we(n,r);break;case"textarea":Yn(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?$n(n,!!r.multiple,a,!1):t!==!!r.multiple&&(null!=r.defaultValue?$n(n,!!r.multiple,r.defaultValue,!0):$n(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 8:null===e.stateNode&&o("162"),e.stateNode.nodeValue=e.memoizedProps;break;case 5:case 15:case 16:break;default:o("163")}}function ha(t,e,n){(n=Yr(n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){po(r),aa(t,e)},n}function pa(t,e,n){(n=Yr(n)).tag=3;var r=t.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){null===Ta?Ta=new Set([this]):Ta.add(this);var n=e.value,r=e.stack;aa(t,e),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),n}function da(t){switch(t.tag){case 2:Mr(t.type)&&Cr();var e=t.effectTag;return 1024&e?(t.effectTag=-1025&e|64,t):null;case 3:return Mr(t.type._reactResult)&&Cr(),1024&(e=t.effectTag)?(t.effectTag=-1025&e|64,t):null;case 5:return _i(),Or(),0!==(64&(e=t.effectTag))&&o("285"),t.effectTag=-1025&e|64,t;case 7:return wi(t),null;case 16:return 1024&(e=t.effectTag)?(t.effectTag=-1025&e|64,t):null;case 6:return _i(),null;case 12:return fi(t),null;default:return null}}na=function(){},ra=function(t,e,n,r,a){var o=t.memoizedProps;if(o!==r){var s=e.stateNode;switch(yi(mi.current),t=null,n){case"input":o=be(s,o),r=be(s,r),t=[];break;case"option":o=Hn(s,o),r=Hn(s,r),t=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":o=Kn(s,o),r=Kn(s,r),t=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(s.onclick=hr)}lr(n,r),s=n=void 0;var u=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var l=o[n];for(s in l)l.hasOwnProperty(s)&&(u||(u={}),u[s]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?t||(t=[]):(t=t||[]).push(n,null));for(n in r){var c=r[n];if(l=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&c!==l&&(null!=c||null!=l))if("style"===n)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(u||(u={}),u[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(u||(u={}),u[s]=c[s])}else u||(t||(t=[]),t.push(n,u)),u=c;else"dangerouslySetInnerHTML"===n?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(t=t||[]).push(n,""+c)):"children"===n?l===c||"string"!==typeof c&&"number"!==typeof c||(t=t||[]).push(n,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=c&&fr(a,n),t||l===c||(t=[])):(t=t||[]).push(n,c))}u&&(t=t||[]).push("style",u),a=t,(e.updateQueue=a)&&ea(e)}},ia=function(t,e,n,r){n!==r&&ea(e)};var ma={readContext:pi},ga=Ht.ReactCurrentOwner,va=0,ya=0,ba=!1,_a=null,xa=null,wa=0,Sa=!1,Ea=null,ka=!1,Ta=null;function Pa(){if(null!==_a)for(var t=_a.return;null!==t;){var e=t;switch(e.tag){case 2:var n=e.type.childContextTypes;null!==n&&void 0!==n&&Cr();break;case 3:null!==(n=e.type._reactResult.childContextTypes)&&void 0!==n&&Cr();break;case 5:_i(),Or();break;case 7:wi(e);break;case 6:_i();break;case 12:fi(e)}t=t.return}xa=null,wa=0,Sa=!1,_a=null}function Ma(t){for(;;){var e=t.alternate,n=t.return,r=t.sibling;if(0===(512&t.effectTag)){var a=e,s=(e=t).pendingProps;switch(e.tag){case 0:case 1:break;case 2:Mr(e.type)&&Cr();break;case 3:Mr(e.type._reactResult)&&Cr();break;case 5:_i(),Or(),(s=e.stateNode).pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==a&&null!==a.child||(Vi(e),e.effectTag&=-3),na(e);break;case 7:wi(e);var u=yi(vi.current),l=e.type;if(null!==a&&null!=e.stateNode)ra(a,e,l,s,u),a.ref!==e.ref&&(e.effectTag|=128);else if(s){var c=yi(mi.current);if(Vi(e)){a=(s=e).stateNode;var f=s.type,h=s.memoizedProps,p=u;switch(a[D]=s,a[j]=h,l=void 0,u=f){case"iframe":case"object":kn("load",a);break;case"video":case"audio":for(f=0;f<rt.length;f++)kn(rt[f],a);break;case"source":kn("error",a);break;case"img":case"image":case"link":kn("error",a),kn("load",a);break;case"form":kn("reset",a),kn("submit",a);break;case"details":kn("toggle",a);break;case"input":_e(a,h),kn("invalid",a),fr(p,"onChange");break;case"select":a._wrapperState={wasMultiple:!!h.multiple},kn("invalid",a),fr(p,"onChange");break;case"textarea":Xn(a,h),kn("invalid",a),fr(p,"onChange")}for(l in lr(u,h),f=null,h)h.hasOwnProperty(l)&&(c=h[l],"children"===l?"string"===typeof c?a.textContent!==c&&(f=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(f=["children",""+c]):b.hasOwnProperty(l)&&null!=c&&fr(p,l));switch(u){case"input":Wt(a),Se(a,h,!0);break;case"textarea":Wt(a),Jn(a);break;case"select":case"option":break;default:"function"===typeof h.onClick&&(a.onclick=hr)}l=f,s.updateQueue=l,(s=null!==l)&&ea(e)}else{h=e,a=l,p=s,f=9===u.nodeType?u:u.ownerDocument,c===Zn.html&&(c=Qn(a)),c===Zn.html?"script"===a?((a=f.createElement("div")).innerHTML="<script><\/script>",f=a.removeChild(a.firstChild)):"string"===typeof p.is?f=f.createElement(a,{is:p.is}):(f=f.createElement(a),"select"===a&&p.multiple&&(f.multiple=!0)):f=f.createElementNS(c,a),(a=f)[D]=h,a[j]=s;t:for(h=a,p=e,f=p.child;null!==f;){if(7===f.tag||8===f.tag)h.appendChild(f.stateNode);else if(6!==f.tag&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===p)break;for(;null===f.sibling;){if(null===f.return||f.return===p)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}p=a;var d=u,m=cr(f=l,h=s);switch(f){case"iframe":case"object":kn("load",p),u=h;break;case"video":case"audio":for(u=0;u<rt.length;u++)kn(rt[u],p);u=h;break;case"source":kn("error",p),u=h;break;case"img":case"image":case"link":kn("error",p),kn("load",p),u=h;break;case"form":kn("reset",p),kn("submit",p),u=h;break;case"details":kn("toggle",p),u=h;break;case"input":_e(p,h),u=be(p,h),kn("invalid",p),fr(d,"onChange");break;case"option":u=Hn(p,h);break;case"select":p._wrapperState={wasMultiple:!!h.multiple},u=i({},h,{value:void 0}),kn("invalid",p),fr(d,"onChange");break;case"textarea":Xn(p,h),u=Kn(p,h),kn("invalid",p),fr(d,"onChange");break;default:u=h}lr(f,u),c=void 0;var g=f,v=p,y=u;for(c in y)if(y.hasOwnProperty(c)){var _=y[c];"style"===c?sr(v,_):"dangerouslySetInnerHTML"===c?null!=(_=_?_.__html:void 0)&&rr(v,_):"children"===c?"string"===typeof _?("textarea"!==g||""!==_)&&ir(v,_):"number"===typeof _&&ir(v,""+_):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(b.hasOwnProperty(c)?null!=_&&fr(d,c):null!=_&&ve(v,c,_,m))}switch(f){case"input":Wt(p),Se(p,h,!1);break;case"textarea":Wt(p),Jn(p);break;case"option":null!=h.value&&p.setAttribute("value",""+ye(h.value));break;case"select":(u=p).multiple=!!h.multiple,null!=(p=h.value)?$n(u,!!h.multiple,p,!1):null!=h.defaultValue&&$n(u,!!h.multiple,h.defaultValue,!0);break;default:"function"===typeof u.onClick&&(p.onclick=hr)}(s=mr(l,s))&&ea(e),e.stateNode=a}null!==e.ref&&(e.effectTag|=128)}else null===e.stateNode&&o("166");break;case 8:a&&null!=e.stateNode?ia(a,e,a.memoizedProps,s):("string"!==typeof s&&(null===e.stateNode&&o("166")),a=yi(vi.current),yi(mi.current),Vi(e)?(l=(s=e).stateNode,a=s.memoizedProps,l[D]=s,(s=l.nodeValue!==a)&&ea(e)):(l=e,(s=(9===a.nodeType?a:a.ownerDocument).createTextNode(s))[D]=l,e.stateNode=s));break;case 13:case 14:case 16:case 9:case 10:case 15:break;case 6:_i(),na(e);break;case 12:fi(e);break;case 11:break;case 4:o("167");default:o("156")}if(e=_a=null,s=t,1073741823===wa||1073741823!==s.childExpirationTime){for(l=0,a=s.child;null!==a;)u=a.expirationTime,h=a.childExpirationTime,(0===l||0!==u&&u<l)&&(l=u),(0===l||0!==h&&h<l)&&(l=h),a=a.sibling;s.childExpirationTime=l}if(null!==e)return e;null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=t.firstEffect),n.lastEffect=t.lastEffect),1<t.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=t:n.firstEffect=t,n.lastEffect=t))}else{if(null!==(t=da(t)))return t.effectTag&=511,t;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512)}if(null!==r)return r;if(null===n)break;t=n}return null}function Ca(t){var e=ta(t.alternate,t,wa);return null===e&&(e=Ma(t)),ga.current=null,e}function Oa(t,e,n){ba&&o("243"),ba=!0,ga.currentDispatcher=ma;var r=t.nextExpirationTimeToWorkOn;r===wa&&t===xa&&null!==_a||(Pa(),wa=r,_a=Br((xa=t).current,null,wa),t.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(e)for(;null!==_a&&!ho();)_a=Ca(_a);else for(;null!==_a;)_a=Ca(_a)}catch(h){if(null===_a)i=!0,po(h);else{null===_a&&o("271");var a=_a,s=a.return;if(null!==s){t:{var u=s,l=a,c=h;s=wa,l.effectTag|=512,l.firstEffect=l.lastEffect=null,Sa=!0,c=ai(c,l);do{switch(u.tag){case 5:u.effectTag|=1024,u.expirationTime=s,Qr(u,s=ha(u,c,s));break t;case 2:case 3:l=c;var f=u.stateNode;if(0===(64&u.effectTag)&&null!==f&&"function"===typeof f.componentDidCatch&&(null===Ta||!Ta.has(f))){u.effectTag|=1024,u.expirationTime=s,Qr(u,s=pa(u,l,s));break t}}u=u.return}while(null!==u)}_a=Ma(a);continue}i=!0,po(h)}}break}if(ba=!1,li=ui=si=ga.currentDispatcher=null,i)xa=null,t.finishedWork=null;else if(null!==_a)t.finishedWork=null;else{if(null===(e=t.current.alternate)&&o("281"),xa=null,Sa){if(i=t.latestPendingTime,a=t.latestSuspendedTime,s=t.latestPingedTime,0!==i&&i>r||0!==a&&a>r||0!==s&&s>r)return t.didError=!1,0!==(n=t.latestPingedTime)&&n<=r&&(t.latestPingedTime=0),n=t.earliestPendingTime,e=t.latestPendingTime,n===r?t.earliestPendingTime=e===r?t.latestPendingTime=0:e:e===r&&(t.latestPendingTime=n),n=t.earliestSuspendedTime,e=t.latestSuspendedTime,0===n?t.earliestSuspendedTime=t.latestSuspendedTime=r:n>r?t.earliestSuspendedTime=r:e<r&&(t.latestSuspendedTime=r),Hr(r,t),void(t.expirationTime=t.expirationTime);if(!t.didError&&!n)return t.didError=!0,t.nextExpirationTimeToWorkOn=r,r=t.expirationTime=1,void(t.expirationTime=r)}t.pendingCommitExpirationTime=r,t.finishedWork=e}}function Ia(t,e){var n;t:{for(ba&&!ka&&o("263"),n=t.return;null!==n;){switch(n.tag){case 2:case 3:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromCatch||"function"===typeof r.componentDidCatch&&(null===Ta||!Ta.has(r))){Zr(n,t=pa(n,t=ai(e,t),1)),Aa(n,1),n=void 0;break t}break;case 5:Zr(n,t=ha(n,t=ai(e,t),1)),Aa(n,1),n=void 0;break t}n=n.return}5===t.tag&&(Zr(t,n=ha(t,n=ai(e,t),1)),Aa(t,1)),n=void 0}return n}function Na(t,e){return 0!==ya?t=ya:ba?t=ka?1:wa:1&e.mode?(t=Xa?2+10*(1+((t-2+15)/10|0)):2+25*(1+((t-2+500)/25|0)),null!==xa&&t===wa&&(t+=1)):t=1,Xa&&(0===Va||t>Va)&&(Va=t),t}function Aa(t,e){t:{(0===t.expirationTime||t.expirationTime>e)&&(t.expirationTime=e);var n=t.alternate;null!==n&&(0===n.expirationTime||n.expirationTime>e)&&(n.expirationTime=e);var r=t.return;if(null===r&&5===t.tag)t=t.stateNode;else{for(;null!==r;){if(n=r.alternate,(0===r.childExpirationTime||r.childExpirationTime>e)&&(r.childExpirationTime=e),null!==n&&(0===n.childExpirationTime||n.childExpirationTime>e)&&(n.childExpirationTime=e),null===r.return&&5===r.tag){t=r.stateNode;break t}r=r.return}t=null}}null!==t&&(!ba&&0!==wa&&e<wa&&Pa(),Gr(t,e),ba&&!ka&&xa===t||(e=t,t=t.expirationTime,null===e.nextScheduledRoot?(e.expirationTime=t,null===ja?(Da=ja=e,e.nextScheduledRoot=e):(ja=ja.nextScheduledRoot=e).nextScheduledRoot=Da):(0===(n=e.expirationTime)||t<n)&&(e.expirationTime=t),za||($a?Ka&&(Ba=e,Ua=1,co(e,1,!0)):1===t?lo(1,null):ao(e,t))),eo>to&&(eo=0,o("185")))}function Ra(t,e,n,r,i){var a=ya;ya=1;try{return t(e,n,r,i)}finally{ya=a}}var Da=null,ja=null,La=0,Fa=void 0,za=!1,Ba=null,Ua=0,Va=0,qa=!1,Wa=!1,Ga=null,Ha=null,$a=!1,Ka=!1,Xa=!1,Ya=null,Ja=a.unstable_now(),Za=2+(Ja/10|0),Qa=Za,to=50,eo=0,no=null,ro=1;function io(){Za=2+((a.unstable_now()-Ja)/10|0)}function ao(t,e){if(0!==La){if(e>La)return;null!==Fa&&a.unstable_cancelScheduledWork(Fa)}La=e,t=a.unstable_now()-Ja,Fa=a.unstable_scheduleWork(uo,{timeout:10*(e-2)-t})}function oo(){return za?Qa:(so(),0!==Ua&&1073741823!==Ua||(io(),Qa=Za),Qa)}function so(){var t=0,e=null;if(null!==ja)for(var n=ja,r=Da;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===ja)&&o("244"),r===r.nextScheduledRoot){Da=ja=r.nextScheduledRoot=null;break}if(r===Da)Da=i=r.nextScheduledRoot,ja.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===ja){(ja=n).nextScheduledRoot=Da,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===t||i<t)&&(t=i,e=r),r===ja)break;if(1===t)break;n=r,r=r.nextScheduledRoot}}Ba=e,Ua=t}function uo(t){if(t.didTimeout&&null!==Da){io();var e=Da;do{var n=e.expirationTime;0!==n&&Za>=n&&(e.nextExpirationTimeToWorkOn=Za),e=e.nextScheduledRoot}while(e!==Da)}lo(0,t)}function lo(t,e){if(Ha=e,so(),null!==Ha)for(io(),Qa=Za;null!==Ba&&0!==Ua&&(0===t||t>=Ua)&&(!qa||Za>=Ua);)co(Ba,Ua,Za>=Ua),so(),io(),Qa=Za;else for(;null!==Ba&&0!==Ua&&(0===t||t>=Ua);)co(Ba,Ua,!0),so();if(null!==Ha&&(La=0,Fa=null),0!==Ua&&ao(Ba,Ua),Ha=null,qa=!1,eo=0,no=null,null!==Ya)for(t=Ya,Ya=null,e=0;e<t.length;e++){var n=t[e];try{n._onComplete()}catch(r){Wa||(Wa=!0,Ga=r)}}if(Wa)throw t=Ga,Ga=null,Wa=!1,t}function co(t,e,n){if(za&&o("245"),za=!0,null===Ha||n){var r=t.finishedWork;null!==r?fo(t,r,e):(t.finishedWork=null,Oa(t,!1,n),null!==(r=t.finishedWork)&&fo(t,r,e))}else null!==(r=t.finishedWork)?fo(t,r,e):(t.finishedWork=null,Oa(t,!0,n),null!==(r=t.finishedWork)&&(ho()?t.finishedWork=r:fo(t,r,e)));za=!1}function fo(t,e,n){var r=t.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Ya?Ya=[r]:Ya.push(r),r._defer))return t.finishedWork=e,void(t.expirationTime=0);t.finishedWork=null,t===no?eo++:(no=t,eo=0),ka=ba=!0,t.current===e&&o("177"),0===(n=t.pendingCommitExpirationTime)&&o("261"),t.pendingCommitExpirationTime=0,r=e.expirationTime;var i=e.childExpirationTime;if(r=0===r||0!==i&&i<r?i:r,t.didError=!1,0===r?(t.earliestPendingTime=0,t.latestPendingTime=0,t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0):(0!==(i=t.latestPendingTime)&&(i<r?t.earliestPendingTime=t.latestPendingTime=0:t.earliestPendingTime<r&&(t.earliestPendingTime=t.latestPendingTime)),0===(i=t.earliestSuspendedTime)?Gr(t,r):r>t.latestSuspendedTime?(t.earliestSuspendedTime=0,t.latestSuspendedTime=0,t.latestPingedTime=0,Gr(t,r)):r<i&&Gr(t,r)),Hr(0,t),ga.current=null,1<e.effectTag?null!==e.lastEffect?(e.lastEffect.nextEffect=e,r=e.firstEffect):r=e:r=e.firstEffect,pr=En,Ln(i=jn())){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else t:{var s=(a=(a=i.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(s&&0!==s.rangeCount){a=s.anchorNode;var u=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{a.nodeType,l.nodeType}catch(F){a=null;break t}var c=0,f=-1,h=-1,p=0,d=0,m=i,g=null;e:for(;;){for(var v;m!==a||0!==u&&3!==m.nodeType||(f=c+u),m!==l||0!==s&&3!==m.nodeType||(h=c+s),3===m.nodeType&&(c+=m.nodeValue.length),null!==(v=m.firstChild);)g=m,m=v;for(;;){if(m===i)break e;if(g===a&&++p===u&&(f=c),g===l&&++d===s&&(h=c),null!==(v=m.nextSibling))break;g=(m=g).parentNode}m=v}a=-1===f||-1===h?null:{start:f,end:h}}else a=null}a=a||{start:0,end:0}}else a=null;for(dr={focusedElem:i,selectionRange:a},En=!1,Ea=r;null!==Ea;){i=!1,a=void 0;try{for(;null!==Ea;){if(256&Ea.effectTag){var y=Ea.alternate;t:switch(u=Ea,u.tag){case 2:case 3:if(256&u.effectTag&&null!==y){var b=y.memoizedProps,_=y.memoizedState,x=u.stateNode;x.props=u.memoizedProps,x.state=u.memoizedState;var w=x.getSnapshotBeforeUpdate(b,_);x.__reactInternalSnapshotBeforeUpdate=w}break t;case 5:case 7:case 8:case 6:break t;default:o("163")}}Ea=Ea.nextEffect}}catch(F){i=!0,a=F}i&&(null===Ea&&o("178"),Ia(Ea,a),null!==Ea&&(Ea=Ea.nextEffect))}for(Ea=r;null!==Ea;){y=!1,b=void 0;try{for(;null!==Ea;){var S=Ea.effectTag;if(16&S&&ir(Ea.stateNode,""),128&S){var E=Ea.alternate;if(null!==E){var k=E.ref;null!==k&&("function"===typeof k?k(null):k.current=null)}}switch(14&S){case 2:la(Ea),Ea.effectTag&=-3;break;case 6:la(Ea),Ea.effectTag&=-3,fa(Ea.alternate,Ea);break;case 4:fa(Ea.alternate,Ea);break;case 8:ca(_=Ea),_.return=null,_.child=null,_.alternate&&(_.alternate.child=null,_.alternate.return=null)}Ea=Ea.nextEffect}}catch(F){y=!0,b=F}y&&(null===Ea&&o("178"),Ia(Ea,b),null!==Ea&&(Ea=Ea.nextEffect))}if(k=dr,E=jn(),S=k.focusedElem,b=k.selectionRange,E!==S&&S&&S.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(S.ownerDocument.documentElement,S)){null!==b&&Ln(S)&&(E=b.start,void 0===(k=b.end)&&(k=E),"selectionStart"in S?(S.selectionStart=E,S.selectionEnd=Math.min(k,S.value.length)):(E=((y=S.ownerDocument||document)&&y.defaultView||window).getSelection(),_=S.textContent.length,k=Math.min(b.start,_),b=void 0===b.end?k:Math.min(b.end,_),!E.extend&&k>b&&(_=b,b=k,k=_),_=Dn(S,k),x=Dn(S,b),_&&x&&(1!==E.rangeCount||E.anchorNode!==_.node||E.anchorOffset!==_.offset||E.focusNode!==x.node||E.focusOffset!==x.offset)&&((y=y.createRange()).setStart(_.node,_.offset),E.removeAllRanges(),k>b?(E.addRange(y),E.extend(x.node,x.offset)):(y.setEnd(x.node,x.offset),E.addRange(y))))),E=[];for(k=S;k=k.parentNode;)1===k.nodeType&&E.push({element:k,left:k.scrollLeft,top:k.scrollTop});for("function"===typeof S.focus&&S.focus(),S=0;S<E.length;S++)(k=E[S]).element.scrollLeft=k.left,k.element.scrollTop=k.top}for(dr=null,En=!!pr,pr=null,t.current=e,Ea=r;null!==Ea;){r=!1,S=void 0;try{for(E=n;null!==Ea;){var T=Ea.effectTag;if(36&T){var P=Ea.alternate;switch(y=E,(k=Ea).tag){case 2:case 3:var M=k.stateNode;if(4&k.effectTag)if(null===P)M.props=k.memoizedProps,M.state=k.memoizedState,M.componentDidMount();else{var C=P.memoizedProps,O=P.memoizedState;M.props=k.memoizedProps,M.state=k.memoizedState,M.componentDidUpdate(C,O,M.__reactInternalSnapshotBeforeUpdate)}var I=k.updateQueue;null!==I&&(M.props=k.memoizedProps,M.state=k.memoizedState,ri(0,I,M));break;case 5:var N=k.updateQueue;if(null!==N){if(b=null,null!==k.child)switch(k.child.tag){case 7:b=k.child.stateNode;break;case 2:case 3:b=k.child.stateNode}ri(0,N,b)}break;case 7:var A=k.stateNode;null===P&&4&k.effectTag&&mr(k.type,k.memoizedProps)&&A.focus();break;case 8:case 6:case 15:case 16:break;default:o("163")}}if(128&T){var R=Ea.ref;if(null!==R){var D=Ea.stateNode;switch(Ea.tag){case 7:var j=D;break;default:j=D}"function"===typeof R?R(j):R.current=j}}var L=Ea.nextEffect;Ea.nextEffect=null,Ea=L}}catch(F){r=!0,S=F}r&&(null===Ea&&o("178"),Ia(Ea,S),null!==Ea&&(Ea=Ea.nextEffect))}ba=ka=!1,"function"===typeof Dr&&Dr(e.stateNode),T=e.expirationTime,e=e.childExpirationTime,0===(e=0===T||0!==e&&e<T?e:T)&&(Ta=null),t.expirationTime=e,t.finishedWork=null}function ho(){return!!qa||!(null===Ha||Ha.timeRemaining()>ro)&&(qa=!0)}function po(t){null===Ba&&o("246"),Ba.expirationTime=0,Wa||(Wa=!0,Ga=t)}function mo(t,e){var n=$a;$a=!0;try{return t(e)}finally{($a=n)||za||lo(1,null)}}function go(t,e){if($a&&!Ka){Ka=!0;try{return t(e)}finally{Ka=!1}}return t(e)}function vo(t,e,n){if(Xa)return t(e,n);$a||za||0===Va||(lo(Va,null),Va=0);var r=Xa,i=$a;$a=Xa=!0;try{return t(e,n)}finally{Xa=r,($a=i)||za||lo(1,null)}}function yo(t,e,n,r,i){var a=e.current;return n=function(t){if(!t)return Sr;t:{(2!==en(t=t._reactInternalFiber)||2!==t.tag&&3!==t.tag)&&o("170");var e=t;do{switch(e.tag){case 5:e=e.stateNode.context;break t;case 2:if(Mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}break;case 3:if(Mr(e.type._reactResult)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);o("171"),e=void 0}if(2===t.tag){var n=t.type;if(Mr(n))return Nr(t,n,e)}else if(3===t.tag&&Mr(n=t.type._reactResult))return Nr(t,n,e);return e}(n),null===e.context?e.context=n:e.pendingContext=n,e=i,(i=Yr(r)).payload={element:t},null!==(e=void 0===e?null:e)&&(i.callback=e),Zr(a,i),Aa(a,r),r}function bo(t,e,n,r){var i=e.current;return yo(t,e,n,i=Na(oo(),i),r)}function _o(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 7:default:return t.child.stateNode}}function xo(t){var e=2+25*(1+((oo()-2+500)/25|0));e<=va&&(e=va+1),this._expirationTime=va=e,this._root=t,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function wo(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function So(t,e,n){t={current:e=new Fr(5,null,null,e?3:0),containerInfo:t,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=e.stateNode=t}function Eo(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function ko(t,e,n,r,i){Eo(n)||o("200");var a=n._reactRootContainer;if(a){if("function"===typeof i){var s=i;i=function(){var t=_o(a._internalRoot);s.call(t)}}null!=t?a.legacy_renderSubtreeIntoContainer(t,e,i):a.render(e,i)}else{if(a=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new So(t,!1,e)}(n,r),"function"===typeof i){var u=i;i=function(){var t=_o(a._internalRoot);u.call(t)}}go(function(){null!=t?a.legacy_renderSubtreeIntoContainer(t,e,i):a.render(e,i)})}return _o(a._internalRoot)}function To(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Eo(e)||o("200"),function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Yt,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)}Mt=function(t,e,n){switch(e){case"input":if(we(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=B(r);i||o("90"),Gt(r),we(r,i)}}}break;case"textarea":Yn(t,n);break;case"select":null!=(e=n.value)&&$n(t,!!n.multiple,e,!1)}},xo.prototype.render=function(t){this._defer||o("250"),this._hasChildren=!0,this._children=t;var e=this._root._internalRoot,n=this._expirationTime,r=new wo;return yo(t,e,null,n,r._onCommit),r},xo.prototype.then=function(t){if(this._didComplete)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},xo.prototype.commit=function(){var t=this._root._internalRoot,e=t.firstBatch;if(this._defer&&null!==e||o("251"),this._hasChildren){var n=this._expirationTime;if(e!==this){this._hasChildren&&(n=this._expirationTime=e._expirationTime,this.render(this._children));for(var r=null,i=e;i!==this;)r=i,i=i._next;null===r&&o("251"),r._next=i._next,this._next=e,t.firstBatch=this}this._defer=!1,e=n,za&&o("253"),Ba=t,Ua=e,co(t,e,!0),lo(1,null),e=this._next,this._next=null,null!==(e=t.firstBatch=e)&&e._hasChildren&&e.render(e._children)}else this._next=null,this._defer=!1},xo.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++)(0,t[e])()}},wo.prototype.then=function(t){if(this._didCommit)t();else{var e=this._callbacks;null===e&&(e=this._callbacks=[]),e.push(t)}},wo.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var t=this._callbacks;if(null!==t)for(var e=0;e<t.length;e++){var n=t[e];"function"!==typeof n&&o("191",n),n()}}},So.prototype.render=function(t,e){var n=this._internalRoot,r=new wo;return null!==(e=void 0===e?null:e)&&r.then(e),bo(t,n,null,r._onCommit),r},So.prototype.unmount=function(t){var e=this._internalRoot,n=new wo;return null!==(t=void 0===t?null:t)&&n.then(t),bo(null,e,null,n._onCommit),n},So.prototype.legacy_renderSubtreeIntoContainer=function(t,e,n){var r=this._internalRoot,i=new wo;return null!==(n=void 0===n?null:n)&&i.then(n),bo(e,r,t,i._onCommit),i},So.prototype.createBatch=function(){var t=new xo(this),e=t._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=t,t._next=null;else{for(n=null;null!==r&&r._expirationTime<=e;)n=r,r=r._next;t._next=r,null!==n&&(n._next=t)}return t},Rt=mo,Dt=vo,jt=function(){za||0===Va||(lo(Va,null),Va=0)};var Po={createPortal:To,findDOMNode:function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;return void 0===e&&("function"===typeof t.render?o("188"):o("268",Object.keys(t))),t=null===(t=rn(e))?null:t.stateNode},hydrate:function(t,e,n){return ko(null,t,e,!0,n)},render:function(t,e,n){return ko(null,t,e,!1,n)},unstable_renderSubtreeIntoContainer:function(t,e,n,r){return(null==t||void 0===t._reactInternalFiber)&&o("38"),ko(t,e,n,!1,r)},unmountComponentAtNode:function(t){return Eo(t)||o("40"),!!t._reactRootContainer&&(go(function(){ko(null,null,t,!1,function(){t._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return To.apply(void 0,arguments)},unstable_batchedUpdates:mo,unstable_interactiveUpdates:vo,flushSync:function(t,e){za&&o("187");var n=$a;$a=!0;try{return Ra(t,e)}finally{$a=n,lo(1,null)}},unstable_flushControlled:function(t){var e=$a;$a=!0;try{Ra(t)}finally{($a=e)||za||lo(1,null)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[F,z,B,I.injectEventPluginsByName,y,H,function(t){T(t,G)},Nt,At,Mn,A]},unstable_createRoot:function(t,e){return Eo(t)||o("278"),new So(t,!0,null!=e&&!0===e.hydrate)}};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Dr=Lr(function(t){return e.onCommitFiberRoot(n,t)}),jr=Lr(function(t){return e.onCommitFiberUnmount(n,t)})}catch(r){}})(i({},t,{findHostInstanceByFiber:function(t){return null===(t=rn(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null}}))}({findFiberByHostInstance:L,bundleType:0,version:"16.5.2",rendererPackageName:"react-dom"});var Mo={default:Po},Co=Mo&&Po||Mo;t.exports=Co.default||Co},function(t,e,n){"use strict";t.exports=n(341)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=null,i=!1,a=!1,o="object"===typeof performance&&"function"===typeof performance.now,s={timeRemaining:o?function(){var t=m()-performance.now();return 0<t?t:0}:function(){var t=m()-Date.now();return 0<t?t:0},didTimeout:!1};function u(){if(!i){var t=r.timesOutAt;a?d():a=!0,p(c,t)}}function l(){var t=r,e=r.next;if(r===e)r=null;else{var n=r.previous;r=n.next=e,e.previous=n}t.next=t.previous=null,(t=t.callback)(s)}function c(t){i=!0,s.didTimeout=t;try{if(t)for(;null!==r;){var n=e.unstable_now();if(!(r.timesOutAt<=n))break;do{l()}while(null!==r&&r.timesOutAt<=n)}else if(null!==r)do{l()}while(null!==r&&0<m()-e.unstable_now())}finally{i=!1,null!==r?u():a=!1}}var f,h,p,d,m,g=Date,v="function"===typeof setTimeout?setTimeout:void 0,y="function"===typeof clearTimeout?clearTimeout:void 0,b="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,_="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function x(t){f=b(function(e){y(h),t(e)}),h=v(function(){_(f),t(e.unstable_now())},100)}if(o){var w=performance;e.unstable_now=function(){return w.now()}}else e.unstable_now=function(){return g.now()};if("undefined"===typeof window){var S=-1;p=function(t){S=setTimeout(t,0,!0)},d=function(){clearTimeout(S)},m=function(){return 0}}else if(window._schedMock){var E=window._schedMock;p=E[0],d=E[1],m=E[2]}else{"undefined"!==typeof console&&("function"!==typeof b&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var k=null,T=!1,P=-1,M=!1,C=!1,O=0,I=33,N=33;m=function(){return O};var A="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(t){if(t.source===window&&t.data===A){T=!1;var n=e.unstable_now();if(t=!1,0>=O-n){if(!(-1!==P&&P<=n))return void(M||(M=!0,x(R)));t=!0}if(P=-1,n=k,k=null,null!==n){C=!0;try{n(t)}finally{C=!1}}}},!1);var R=function(t){M=!1;var e=t-O+N;e<N&&I<N?(8>e&&(e=8),N=e<I?I:e):I=e,O=t+N,T||(T=!0,window.postMessage(A,"*"))};p=function(t,e){k=t,P=e,C?window.postMessage(A,"*"):M||(M=!0,x(R))},d=function(){k=null,T=!1,P=-1}}e.unstable_scheduleWork=function(t,n){var i=e.unstable_now();if(t={callback:t,timesOutAt:n=void 0!==n&&null!==n&&null!==n.timeout&&void 0!==n.timeout?i+n.timeout:i+5e3,next:null,previous:null},null===r)r=t.next=t.previous=t,u();else{i=null;var a=r;do{if(a.timesOutAt>n){i=a;break}a=a.next}while(a!==r);null===i?i=r:i===r&&(r=t,u()),(n=i.previous).next=i.previous=t,t.next=i,t.previous=n}return t},e.unstable_cancelScheduledWork=function(t){var e=t.next;if(null!==e){if(e===t)r=null;else{t===r&&(r=e);var n=t.previous;n.next=e,e.previous=n}t.next=t.previous=null}}},,,function(t,e,n){},,,,,function(t,e,n){var r=function(){return this||"object"===typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,a=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(350),i)r.regeneratorRuntime=a;else try{delete r.regeneratorRuntime}catch(o){r.regeneratorRuntime=void 0}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",l="object"===typeof t,c=e.regeneratorRuntime;if(c)l&&(t.exports=c);else{(c=e.regeneratorRuntime=l?t.exports:{}).wrap=_;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",m={},g={};g[o]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==r&&i.call(y,o)&&(g=y);var b=E.prototype=w.prototype=Object.create(g);S.prototype=b.constructor=E,E.constructor=S,E[u]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(b),t},c.awrap=function(t){return{__await:t}},k(T.prototype),T.prototype[s]=function(){return this},c.AsyncIterator=T,c.async=function(t,e,n,r){var i=new T(_(t,e,n,r));return c.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},k(b),b[u]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function _(t,e,n,r){var i=e&&e.prototype instanceof w?e:w,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(t,e,n){var r=f;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=P(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=x(t,e,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function w(){}function S(){}function E(){}function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function T(t){var e;this._invoke=function(n,r){function a(){return new Promise(function(e,a){!function e(n,r,a,o){var s=x(t[n],t,r);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(l).then(function(t){u.value=t,a(u)},function(t){return e("throw",t,a,o)})}o(s.arg)}(n,r,e,a)})}return e=e?e.then(a,a):a()}}function P(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,P(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=x(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:N}}function N(){return{value:n,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},function(t,e,n){"use strict";(function(t){if(n(352),n(549),t._babelPolyfill)throw new Error("only one instance of @babel/polyfill is allowed");t._babelPolyfill=!0}).call(this,n(26))},function(t,e,n){n(353),n(355),n(356),n(357),n(358),n(359),n(360),n(361),n(362),n(363),n(364),n(365),n(366),n(367),n(368),n(369),n(371),n(372),n(373),n(374),n(375),n(376),n(377),n(378),n(379),n(380),n(381),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(397),n(398),n(399),n(400),n(401),n(402),n(403),n(404),n(405),n(406),n(407),n(408),n(409),n(410),n(411),n(412),n(413),n(414),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(433),n(434),n(436),n(437),n(438),n(439),n(440),n(441),n(442),n(444),n(445),n(446),n(447),n(448),n(449),n(450),n(451),n(452),n(453),n(454),n(455),n(456),n(181),n(457),n(458),n(234),n(459),n(460),n(461),n(462),n(463),n(237),n(239),n(240),n(464),n(465),n(466),n(467),n(468),n(469),n(470),n(471),n(472),n(473),n(474),n(475),n(476),n(477),n(478),n(479),n(480),n(481),n(482),n(483),n(484),n(485),n(486),n(487),n(488),n(489),n(490),n(491),n(492),n(493),n(494),n(495),n(496),n(497),n(498),n(499),n(500),n(501),n(502),n(503),n(504),n(505),n(506),n(507),n(508),n(509),n(510),n(511),n(512),n(513),n(514),n(515),n(516),n(517),n(518),n(519),n(520),n(521),n(522),n(523),n(524),n(525),n(526),n(527),n(528),n(529),n(530),n(531),n(532),n(533),n(534),n(535),n(536),n(537),n(538),n(539),n(540),n(541),n(542),n(543),n(544),n(545),n(546),n(547),n(548),t.exports=n(50)},function(t,e,n){"use strict";var r=n(16),i=n(35),a=n(20),o=n(1),s=n(31),u=n(63).KEY,l=n(17),c=n(121),f=n(87),h=n(70),p=n(19),d=n(217),m=n(161),g=n(354),v=n(124),y=n(14),b=n(18),_=n(36),x=n(51),w=n(69),S=n(73),E=n(220),k=n(37),T=n(21),P=n(71),M=k.f,C=T.f,O=E.f,I=r.Symbol,N=r.JSON,A=N&&N.stringify,R=p("_hidden"),D=p("toPrimitive"),j={}.propertyIsEnumerable,L=c("symbol-registry"),F=c("symbols"),z=c("op-symbols"),B=Object.prototype,U="function"==typeof I,V=r.QObject,q=!V||!V.prototype||!V.prototype.findChild,W=a&&l(function(){return 7!=S(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(B,e);r&&delete B[e],C(t,e,n),r&&t!==B&&C(B,e,r)}:C,G=function(t){var e=F[t]=S(I.prototype);return e._k=t,e},H=U&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},$=function(t,e,n){return t===B&&$(z,e,n),y(t),e=x(e,!0),y(n),i(F,e)?(n.enumerable?(i(t,R)&&t[R][e]&&(t[R][e]=!1),n=S(n,{enumerable:w(0,!1)})):(i(t,R)||C(t,R,w(1,{})),t[R][e]=!0),W(t,e,n)):C(t,e,n)},K=function(t,e){y(t);for(var n,r=g(e=_(e)),i=0,a=r.length;a>i;)$(t,n=r[i++],e[n]);return t},X=function(t){var e=j.call(this,t=x(t,!0));return!(this===B&&i(F,t)&&!i(z,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,R)&&this[R][t])||e)},Y=function(t,e){if(t=_(t),e=x(e,!0),t!==B||!i(F,e)||i(z,e)){var n=M(t,e);return!n||!i(F,e)||i(t,R)&&t[R][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=O(_(t)),r=[],a=0;n.length>a;)i(F,e=n[a++])||e==R||e==u||r.push(e);return r},Z=function(t){for(var e,n=t===B,r=O(n?z:_(t)),a=[],o=0;r.length>o;)!i(F,e=r[o++])||n&&!i(B,e)||a.push(F[e]);return a};U||(s((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0);return a&&q&&W(B,t,{configurable:!0,set:function e(n){this===B&&e.call(z,n),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),W(this,t,w(1,n))}}),G(t)}).prototype,"toString",function(){return this._k}),k.f=Y,T.f=$,n(74).f=E.f=J,n(98).f=X,n(123).f=Z,a&&!n(64)&&s(B,"propertyIsEnumerable",X,!0),d.f=function(t){return G(p(t))}),o(o.G+o.W+o.F*!U,{Symbol:I});for(var Q="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Q.length>tt;)p(Q[tt++]);for(var et=P(p.store),nt=0;et.length>nt;)m(et[nt++]);o(o.S+o.F*!U,"Symbol",{for:function(t){return i(L,t+="")?L[t]:L[t]=I(t)},keyFor:function(t){if(!H(t))throw TypeError(t+" is not a symbol!");for(var e in L)if(L[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),o(o.S+o.F*!U,"Object",{create:function(t,e){return void 0===e?S(t):K(S(t),e)},defineProperty:$,defineProperties:K,getOwnPropertyDescriptor:Y,getOwnPropertyNames:J,getOwnPropertySymbols:Z}),N&&o(o.S+o.F*(!U||l(function(){var t=I();return"[null]"!=A([t])||"{}"!=A({a:t})||"{}"!=A(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!H(t))return v(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!H(e))return e}),r[1]=e,A.apply(N,r)}}),I.prototype[D]||n(30)(I.prototype,D,I.prototype.valueOf),f(I,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var r=n(71),i=n(123),a=n(98);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var o,s=n(t),u=a.f,l=0;s.length>l;)u.call(t,o=s[l++])&&e.push(o);return e}},function(t,e,n){var r=n(1);r(r.S,"Object",{create:n(73)})},function(t,e,n){var r=n(1);r(r.S+r.F*!n(20),"Object",{defineProperty:n(21).f})},function(t,e,n){var r=n(1);r(r.S+r.F*!n(20),"Object",{defineProperties:n(219)})},function(t,e,n){var r=n(36),i=n(37).f;n(54)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){var r=n(25),i=n(38);n(54)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(25),i=n(71);n(54)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(54)("getOwnPropertyNames",function(){return n(220).f})},function(t,e,n){var r=n(18),i=n(63).onFreeze;n(54)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(18),i=n(63).onFreeze;n(54)("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(18),i=n(63).onFreeze;n(54)("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(18);n(54)("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(18);n(54)("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(18);n(54)("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},function(t,e,n){var r=n(1);r(r.S+r.F,"Object",{assign:n(221)})},function(t,e,n){var r=n(1);r(r.S,"Object",{is:n(370)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(1);r(r.S,"Object",{setPrototypeOf:n(165).set})},function(t,e,n){"use strict";var r=n(99),i={};i[n(19)("toStringTag")]="z",i+""!="[object z]"&&n(31)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(1);r(r.P,"Function",{bind:n(222)})},function(t,e,n){var r=n(21).f,i=Function.prototype,a=/^\s*function ([^ (]*)/;"name"in i||n(20)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(18),i=n(38),a=n(19)("hasInstance"),o=Function.prototype;a in o||n(21).f(o,a,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(1),i=n(224);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(1),i=n(225);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){"use strict";var r=n(16),i=n(35),a=n(44),o=n(167),s=n(51),u=n(17),l=n(74).f,c=n(37).f,f=n(21).f,h=n(88).trim,p=r.Number,d=p,m=p.prototype,g="Number"==a(n(73)(m)),v="trim"in String.prototype,y=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,a=(e=v?e.trim():h(e,3)).charCodeAt(0);if(43===a||45===a){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===a){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var o,u=e.slice(2),l=0,c=u.length;l<c;l++)if((o=u.charCodeAt(l))<48||o>i)return NaN;return parseInt(u,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(g?u(function(){m.valueOf.call(n)}):"Number"!=a(n))?o(new d(y(e)),n,p):y(e)};for(var b,_=n(20)?l(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;_.length>x;x++)i(d,b=_[x])&&!i(p,b)&&f(p,b,c(d,b));p.prototype=m,m.constructor=p,n(31)(r,"Number",p)}},function(t,e,n){"use strict";var r=n(1),i=n(53),a=n(226),o=n(168),s=1..toFixed,u=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*l[n],l[n]=r%1e7,r=u(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=l[e],l[e]=u(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==l[t]){var n=String(l[t]);e=""===e?n:e+o.call("0",7-n.length)+n}return e},d=function t(e,n,r){return 0===n?r:n%2===1?t(e,n-1,r*e):t(e*e,n/2,r)};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(17)(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,r,s,u=a(this,c),l=i(t),m="",g="0";if(l<0||l>20)throw RangeError(c);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(m="-",u=-u),u>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(u*d(2,69,1))-69)<0?u*d(2,-e,1):u/d(2,e,1),n*=4503599627370496,(e=52-e)>0){for(f(0,n),r=l;r>=7;)f(1e7,0),r-=7;for(f(d(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),g=p()}else f(0,n),f(1<<-e,0),g=p()+o.call("0",l);return g=l>0?m+((s=g.length)<=l?"0."+o.call("0",l-s)+g:g.slice(0,s-l)+"."+g.slice(s-l)):m+g}})},function(t,e,n){"use strict";var r=n(1),i=n(17),a=n(226),o=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==o.call(1,void 0)})||!i(function(){o.call({})})),"Number",{toPrecision:function(t){var e=a(this,"Number#toPrecision: incorrect invocation!");return void 0===t?o.call(e):o.call(e,t)}})},function(t,e,n){var r=n(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(1),i=n(16).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(1);r(r.S,"Number",{isInteger:n(227)})},function(t,e,n){var r=n(1);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(1),i=n(227),a=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&a(t)<=9007199254740991}})},function(t,e,n){var r=n(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(1),i=n(225);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(1),i=n(224);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(1),i=n(228),a=Math.sqrt,o=Math.acosh;r(r.S+r.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+a(t-1)*a(t+1))}})},function(t,e,n){var r=n(1),i=Math.asinh;r(r.S+r.F*!(i&&1/i(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,n){var r=n(1),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(1),i=n(169);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,n){var r=n(1);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(1),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(1),i=n(170);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e,n){var r=n(1);r(r.S,"Math",{fround:n(229)})},function(t,e,n){var r=n(1),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,a=0,o=0,s=arguments.length,u=0;o<s;)u<(n=i(arguments[o++]))?(a=a*(r=u/n)*r+1,u=n):a+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*Math.sqrt(a)}})},function(t,e,n){var r=n(1),i=Math.imul;r(r.S+r.F*n(17)(function(){return-5!=i(4294967295,5)||2!=i.length}),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,a=65535&r;return 0|i*a+((65535&n>>>16)*a+i*(65535&r>>>16)<<16>>>0)}})},function(t,e,n){var r=n(1);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(1);r(r.S,"Math",{log1p:n(228)})},function(t,e,n){var r=n(1);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(1);r(r.S,"Math",{sign:n(169)})},function(t,e,n){var r=n(1),i=n(170),a=Math.exp;r(r.S+r.F*n(17)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(a(t-1)-a(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(1),i=n(170),a=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(a(t)+a(-t))}})},function(t,e,n){var r=n(1);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(1),i=n(72),a=String.fromCharCode,o=String.fromCodePoint;r(r.S+r.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,o=0;r>o;){if(e=+arguments[o++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(1),i=n(36),a=n(22);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=a(e.length),r=arguments.length,o=[],s=0;n>s;)o.push(String(e[s++])),s<r&&o.push(String(arguments[s]));return o.join("")}})},function(t,e,n){"use strict";n(88)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(171)(!0);n(172)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var r=n(1),i=n(171)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(1),i=n(22),a=n(174),o="".endsWith;r(r.P+r.F*n(175)("endsWith"),"String",{endsWith:function(t){var e=a(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),u=String(t);return o?o.call(e,u,s):e.slice(s-u.length,s)===u}})},function(t,e,n){"use strict";var r=n(1),i=n(174);r(r.P+r.F*n(175)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(1);r(r.P,"String",{repeat:n(168)})},function(t,e,n){"use strict";var r=n(1),i=n(22),a=n(174),o="".startsWith;r(r.P+r.F*n(175)("startsWith"),"String",{startsWith:function(t){var e=a(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return o?o.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(32)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){"use strict";n(32)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(32)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(32)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(32)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(32)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(32)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(32)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(32)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(32)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(32)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(32)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(32)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(1);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(1),i=n(25),a=n(51);r(r.P+r.F*n(17)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=a(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(1),i=n(432);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(17),i=Date.prototype.getTime,a=Date.prototype.toISOString,o=function(t){return t>9?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=a.call(new Date(-5e13-1))})||!r(function(){a.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(n>99?n:"0"+o(n))+"Z"}:a},function(t,e,n){var r=Date.prototype,i=r.toString,a=r.getTime;new Date(NaN)+""!="Invalid Date"&&n(31)(r,"toString",function(){var t=a.call(this);return t===t?i.call(this):"Invalid Date"})},function(t,e,n){var r=n(19)("toPrimitive"),i=Date.prototype;r in i||n(30)(i,r,n(435))},function(t,e,n){"use strict";var r=n(14),i=n(51);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},function(t,e,n){var r=n(1);r(r.S,"Array",{isArray:n(124)})},function(t,e,n){"use strict";var r=n(43),i=n(1),a=n(25),o=n(230),s=n(176),u=n(22),l=n(177),c=n(178);i(i.S+i.F*!n(126)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,h=a(t),p="function"==typeof this?this:Array,d=arguments.length,m=d>1?arguments[1]:void 0,g=void 0!==m,v=0,y=c(h);if(g&&(m=r(m,d>2?arguments[2]:void 0,2)),void 0==y||p==Array&&s(y))for(n=new p(e=u(h.length));e>v;v++)l(n,v,g?m(h[v],v):h[v]);else for(f=y.call(h),n=new p;!(i=f.next()).done;v++)l(n,v,g?o(f,m,[i.value,v],!0):i.value);return n.length=v,n}})},function(t,e,n){"use strict";var r=n(1),i=n(177);r(r.S+r.F*n(17)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(1),i=n(36),a=[].join;r(r.P+r.F*(n(97)!=Object||!n(45)(a)),"Array",{join:function(t){return a.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(1),i=n(164),a=n(44),o=n(72),s=n(22),u=[].slice;r(r.P+r.F*n(17)(function(){i&&u.call(i)}),"Array",{slice:function(t,e){var n=s(this.length),r=a(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=o(t,n),l=o(e,n),c=s(l-i),f=new Array(c),h=0;h<c;h++)f[h]="String"==r?this.charAt(i+h):this[i+h];return f}})},function(t,e,n){"use strict";var r=n(1),i=n(27),a=n(25),o=n(17),s=[].sort,u=[1,2,3];r(r.P+r.F*(o(function(){u.sort(void 0)})||!o(function(){u.sort(null)})||!n(45)(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),i(t))}})},function(t,e,n){"use strict";var r=n(1),i=n(55)(0),a=n(45)([].forEach,!0);r(r.P+r.F*!a,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(18),i=n(124),a=n(19)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[a])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(1),i=n(55)(1);r(r.P+r.F*!n(45)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(55)(2);r(r.P+r.F*!n(45)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(55)(3);r(r.P+r.F*!n(45)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(55)(4);r(r.P+r.F*!n(45)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(231);r(r.P+r.F*!n(45)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){"use strict";var r=n(1),i=n(231);r(r.P+r.F*!n(45)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(1),i=n(122)(!1),a=[].indexOf,o=!!a&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(o||!n(45)(a)),"Array",{indexOf:function(t){return o?a.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(1),i=n(36),a=n(53),o=n(22),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!n(45)(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=o(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,a(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(1);r(r.P,"Array",{copyWithin:n(232)}),n(65)("copyWithin")},function(t,e,n){var r=n(1);r(r.P,"Array",{fill:n(180)}),n(65)("fill")},function(t,e,n){"use strict";var r=n(1),i=n(55)(5),a=!0;"find"in[]&&Array(1).find(function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(65)("find")},function(t,e,n){"use strict";var r=n(1),i=n(55)(6),a="findIndex",o=!0;a in[]&&Array(1)[a](function(){o=!1}),r(r.P+r.F*o,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(65)(a)},function(t,e,n){n(75)("Array")},function(t,e,n){var r=n(16),i=n(167),a=n(21).f,o=n(74).f,s=n(125),u=n(127),l=r.RegExp,c=l,f=l.prototype,h=/a/g,p=/a/g,d=new l(h)!==h;if(n(20)&&(!d||n(17)(function(){return p[n(19)("match")]=!1,l(h)!=h||l(p)==p||"/a/i"!=l(h,"i")}))){l=function(t,e){var n=this instanceof l,r=s(t),a=void 0===e;return!n&&r&&t.constructor===l&&a?t:i(d?new c(r&&!a?t.source:t,e):c((r=t instanceof l)?t.source:t,r&&a?u.call(t):e),n?this:f,l)};for(var m=function(t){t in l||a(l,t,{configurable:!0,get:function(){return c[t]},set:function(e){c[t]=e}})},g=o(c),v=0;g.length>v;)m(g[v++]);f.constructor=l,l.prototype=f,n(31)(r,"RegExp",l)}n(75)("RegExp")},function(t,e,n){"use strict";n(234);var r=n(14),i=n(127),a=n(20),o=/./.toString,s=function(t){n(31)(RegExp.prototype,"toString",t,!0)};n(17)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?s(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=o.name&&s(function(){return o.call(this)})},function(t,e,n){n(128)("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(128)("replace",2,function(t,e,n){return[function(r,i){"use strict";var a=t(this),o=void 0==r?void 0:r[e];return void 0!==o?o.call(r,a,i):n.call(String(a),r,i)},n]})},function(t,e,n){n(128)("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(128)("split",2,function(t,e,r){"use strict";var i=n(125),a=r,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var s=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return a.call(n,t,e);var r,u,l,c,f,h=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,m=void 0===e?4294967295:e>>>0,g=new RegExp(t.source,p+"g");for(s||(r=new RegExp("^"+g.source+"$(?!\\s)",p));(u=g.exec(n))&&!((l=u.index+u[0].length)>d&&(h.push(n.slice(d,u.index)),!s&&u.length>1&&u[0].replace(r,function(){for(f=1;f<arguments.length-2;f++)void 0===arguments[f]&&(u[f]=void 0)}),u.length>1&&u.index<n.length&&o.apply(h,u.slice(1)),c=u[0].length,d=l,h.length>=m));)g.lastIndex===u.index&&g.lastIndex++;return d===n.length?!c&&g.test("")||h.push(""):h.push(n.slice(d)),h.length>m?h.slice(0,m):h}}else"0".split(void 0,0).length&&(r=function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)});return[function(n,i){var a=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,a,i):r.call(String(a),n,i)},r]})},function(t,e,n){"use strict";var r,i,a,o,s=n(64),u=n(16),l=n(43),c=n(99),f=n(1),h=n(18),p=n(27),d=n(76),m=n(77),g=n(129),v=n(182).set,y=n(183)(),b=n(184),_=n(235),x=n(130),w=n(236),S=u.TypeError,E=u.process,k=E&&E.versions,T=k&&k.v8||"",P=u.Promise,M="process"==c(E),C=function(){},O=i=b.f,I=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[n(19)("species")]=function(t){t(C,C)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(C)instanceof e&&0!==T.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(r){}}(),N=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},A=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,a=0,o=function(e){var n,a,o,s=i?e.ok:e.fail,u=e.resolve,l=e.reject,c=e.domain;try{s?(i||(2==t._h&&j(t),t._h=1),!0===s?n=r:(c&&c.enter(),n=s(r),c&&(c.exit(),o=!0)),n===e.promise?l(S("Promise-chain cycle")):(a=N(n))?a.call(n,u,l):u(n)):l(r)}catch(f){c&&!o&&c.exit(),l(f)}};n.length>a;)o(n[a++]);t._c=[],t._n=!1,e&&!t._h&&R(t)})}},R=function(t){v.call(u,function(){var e,n,r,i=t._v,a=D(t);if(a&&(e=_(function(){M?E.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=M||D(t)?2:1),t._a=void 0,a&&e.e)throw e.v})},D=function(t){return 1!==t._h&&0===(t._a||t._c).length},j=function(t){v.call(u,function(){var e;M?E.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},L=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},F=function t(e){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw S("Promise can't be resolved itself");(n=N(e))?y(function(){var i={_w:r,_d:!1};try{n.call(e,l(t,i,1),l(L,i,1))}catch(a){L.call(i,a)}}):(r._v=e,r._s=1,A(r,!1))}catch(i){L.call({_w:r,_d:!1},i)}}};I||(P=function(t){d(this,P,"Promise","_h"),p(t),r.call(this);try{t(l(F,this,1),l(L,this,1))}catch(e){L.call(this,e)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(78)(P.prototype,{then:function(t,e){var n=O(g(this,P));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=M?E.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),a=function(){var t=new r;this.promise=t,this.resolve=l(F,t,1),this.reject=l(L,t,1)},b.f=O=function(t){return t===P||t===o?new a(t):i(t)}),f(f.G+f.W+f.F*!I,{Promise:P}),n(87)(P,"Promise"),n(75)("Promise"),o=n(50).Promise,f(f.S+f.F*!I,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(t){return w(s&&this===o?P:this,t)}}),f(f.S+f.F*!(I&&n(126)(function(t){P.all(t).catch(C)})),"Promise",{all:function(t){var e=this,n=O(e),r=n.resolve,i=n.reject,a=_(function(){var n=[],a=0,o=1;m(t,!1,function(t){var s=a++,u=!1;n.push(void 0),o++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--o||r(n))},i)}),--o||r(n)});return a.e&&i(a.v),n.promise},race:function(t){var e=this,n=O(e),r=n.reject,i=_(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e,n){"use strict";var r=n(241),i=n(90);n(131)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,"WeakSet"),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(1),i=n(132),a=n(185),o=n(14),s=n(72),u=n(22),l=n(18),c=n(16).ArrayBuffer,f=n(129),h=a.ArrayBuffer,p=a.DataView,d=i.ABV&&c.isView,m=h.prototype.slice,g=i.VIEW;r(r.G+r.W+r.F*(c!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return d&&d(t)||l(t)&&g in t}}),r(r.P+r.U+r.F*n(17)(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==m&&void 0===e)return m.call(o(this),t);for(var n=o(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),a=new(f(this,h))(u(i-r)),l=new p(this),c=new p(a),d=0;r<i;)c.setUint8(d++,l.getUint8(r++));return a}}),n(75)("ArrayBuffer")},function(t,e,n){var r=n(1);r(r.G+r.W+r.F*!n(132).ABV,{DataView:n(185).DataView})},function(t,e,n){n(58)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(58)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(58)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},function(t,e,n){n(58)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(58)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(58)("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(58)("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(58)("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(58)("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){var r=n(1),i=n(27),a=n(14),o=(n(16).Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!n(17)(function(){o(function(){})}),"Reflect",{apply:function(t,e,n){var r=i(t),u=a(n);return o?o(r,e,u):s.call(r,e,u)}})},function(t,e,n){var r=n(1),i=n(73),a=n(27),o=n(14),s=n(18),u=n(17),l=n(222),c=(n(16).Reflect||{}).construct,f=u(function(){function t(){}return!(c(function(){},[],t)instanceof t)}),h=!u(function(){c(function(){})});r(r.S+r.F*(f||h),"Reflect",{construct:function(t,e){a(t),o(e);var n=arguments.length<3?t:a(arguments[2]);if(h&&!f)return c(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(l.apply(t,r))}var u=n.prototype,p=i(s(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return s(d)?d:p}})},function(t,e,n){var r=n(21),i=n(1),a=n(14),o=n(51);i(i.S+i.F*n(17)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){a(t),e=o(e,!0),a(n);try{return r.f(t,e,n),!0}catch(i){return!1}}})},function(t,e,n){var r=n(1),i=n(37).f,a=n(14);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(a(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(1),i=n(14),a=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(173)(a,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new a(t)}})},function(t,e,n){var r=n(37),i=n(38),a=n(35),o=n(1),s=n(18),u=n(14);o(o.S,"Reflect",{get:function t(e,n){var o,l,c=arguments.length<3?e:arguments[2];return u(e)===c?e[n]:(o=r.f(e,n))?a(o,"value")?o.value:void 0!==o.get?o.get.call(c):void 0:s(l=i(e))?t(l,n,c):void 0}})},function(t,e,n){var r=n(37),i=n(1),a=n(14);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(a(t),e)}})},function(t,e,n){var r=n(1),i=n(38),a=n(14);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(a(t))}})},function(t,e,n){var r=n(1);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(1),i=n(14),a=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!a||a(t)}})},function(t,e,n){var r=n(1);r(r.S,"Reflect",{ownKeys:n(243)})},function(t,e,n){var r=n(1),i=n(14),a=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return a&&a(t),!0}catch(e){return!1}}})},function(t,e,n){var r=n(21),i=n(37),a=n(38),o=n(35),s=n(1),u=n(69),l=n(14),c=n(18);s(s.S,"Reflect",{set:function t(e,n,s){var f,h,p=arguments.length<4?e:arguments[3],d=i.f(l(e),n);if(!d){if(c(h=a(e)))return t(h,n,s,p);d=u(0)}if(o(d,"value")){if(!1===d.writable||!c(p))return!1;if(f=i.f(p,n)){if(f.get||f.set||!1===f.writable)return!1;f.value=s,r.f(p,n,f)}else r.f(p,n,u(0,s));return!0}return void 0!==d.set&&(d.set.call(p,s),!0)}})},function(t,e,n){var r=n(1),i=n(165);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(n){return!1}}})},function(t,e,n){"use strict";var r=n(1),i=n(122)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(65)("includes")},function(t,e,n){"use strict";var r=n(1),i=n(244),a=n(25),o=n(22),s=n(27),u=n(179);r(r.P,"Array",{flatMap:function(t){var e,n,r=a(this);return s(t),e=o(r.length),n=u(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(65)("flatMap")},function(t,e,n){"use strict";var r=n(1),i=n(244),a=n(25),o=n(22),s=n(53),u=n(179);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=a(this),n=o(e.length),r=u(e,0);return i(r,e,e,n,0,void 0===t?1:s(t)),r}}),n(65)("flatten")},function(t,e,n){"use strict";var r=n(1),i=n(171)(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(1),i=n(245),a=n(130);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){"use strict";var r=n(1),i=n(245),a=n(130);r(r.P+r.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(a),"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(88)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(88)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var r=n(1),i=n(52),a=n(22),o=n(125),s=n(127),u=RegExp.prototype,l=function(t,e){this._r=t,this._s=e};n(173)(l,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!o(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=a(t.lastIndex),new l(r,e)}})},function(t,e,n){n(161)("asyncIterator")},function(t,e,n){n(161)("observable")},function(t,e,n){var r=n(1),i=n(243),a=n(36),o=n(37),s=n(177);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=a(t),u=o.f,l=i(r),c={},f=0;l.length>f;)void 0!==(n=u(r,e=l[f++]))&&s(c,e,n);return c}})},function(t,e,n){var r=n(1),i=n(246)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(1),i=n(246)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(1),i=n(25),a=n(27),o=n(21);n(20)&&r(r.P+n(133),"Object",{__defineGetter__:function(t,e){o.f(i(this),t,{get:a(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(1),i=n(25),a=n(27),o=n(21);n(20)&&r(r.P+n(133),"Object",{__defineSetter__:function(t,e){o.f(i(this),t,{set:a(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(1),i=n(25),a=n(51),o=n(38),s=n(37).f;n(20)&&r(r.P+n(133),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=a(t,!0);do{if(e=s(n,r))return e.get}while(n=o(n))}})},function(t,e,n){"use strict";var r=n(1),i=n(25),a=n(51),o=n(38),s=n(37).f;n(20)&&r(r.P+n(133),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=a(t,!0);do{if(e=s(n,r))return e.set}while(n=o(n))}})},function(t,e,n){var r=n(1);r(r.P+r.R,"Map",{toJSON:n(247)("Map")})},function(t,e,n){var r=n(1);r(r.P+r.R,"Set",{toJSON:n(247)("Set")})},function(t,e,n){n(134)("Map")},function(t,e,n){n(134)("Set")},function(t,e,n){n(134)("WeakMap")},function(t,e,n){n(134)("WeakSet")},function(t,e,n){n(135)("Map")},function(t,e,n){n(135)("Set")},function(t,e,n){n(135)("WeakMap")},function(t,e,n){n(135)("WeakSet")},function(t,e,n){var r=n(1);r(r.G,{global:n(16)})},function(t,e,n){var r=n(1);r(r.S,"System",{global:n(16)})},function(t,e,n){var r=n(1),i=n(44);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,n){var r=n(1);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var r=n(1);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var r=n(1),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},function(t,e,n){var r=n(1),i=n(249),a=n(229);r(r.S,"Math",{fscale:function(t,e,n,r,o){return a(i(t,e,n,r,o))}})},function(t,e,n){var r=n(1);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,a=n>>>0;return(e>>>0)+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(t,e,n){var r=n(1);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,a=n>>>0;return(e>>>0)-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(t,e,n){var r=n(1);r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,a=65535&r,o=n>>16,s=r>>16,u=(o*a>>>0)+(i*a>>>16);return o*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}})},function(t,e,n){var r=n(1);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var r=n(1),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},function(t,e,n){var r=n(1);r(r.S,"Math",{scale:n(249)})},function(t,e,n){var r=n(1);r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,a=65535&r,o=n>>>16,s=r>>>16,u=(o*a>>>0)+(i*a>>>16);return o*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}})},function(t,e,n){var r=n(1);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){"use strict";var r=n(1),i=n(50),a=n(16),o=n(129),s=n(236);r(r.P+r.R,"Promise",{finally:function(t){var e=o(this,i.Promise||a.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(1),i=n(184),a=n(235);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=a(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var r=n(59),i=n(14),a=r.key,o=r.set;r.exp({defineMetadata:function(t,e,n,r){o(t,e,i(n),a(r))}})},function(t,e,n){var r=n(59),i=n(14),a=r.key,o=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:a(arguments[2]),r=o(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var u=s.get(e);return u.delete(n),!!u.size||s.delete(e)}})},function(t,e,n){var r=n(59),i=n(14),a=n(38),o=r.has,s=r.get,u=r.key;r.exp({getMetadata:function(t,e){return function t(e,n,r){if(o(e,n,r))return s(e,n,r);var i=a(n);return null!==i?t(e,i,r):void 0}(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var r=n(239),i=n(248),a=n(59),o=n(14),s=n(38),u=a.keys,l=a.key;a.exp({getMetadataKeys:function(t){return function t(e,n){var a=u(e,n),o=s(e);if(null===o)return a;var l=t(o,n);return l.length?a.length?i(new r(a.concat(l))):l:a}(o(t),arguments.length<2?void 0:l(arguments[1]))}})},function(t,e,n){var r=n(59),i=n(14),a=r.get,o=r.key;r.exp({getOwnMetadata:function(t,e){return a(t,i(e),arguments.length<3?void 0:o(arguments[2]))}})},function(t,e,n){var r=n(59),i=n(14),a=r.keys,o=r.key;r.exp({getOwnMetadataKeys:function(t){return a(i(t),arguments.length<2?void 0:o(arguments[1]))}})},function(t,e,n){var r=n(59),i=n(14),a=n(38),o=r.has,s=r.key;r.exp({hasMetadata:function(t,e){return function t(e,n,r){if(o(e,n,r))return!0;var i=a(n);return null!==i&&t(e,i,r)}(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(59),i=n(14),a=r.has,o=r.key;r.exp({hasOwnMetadata:function(t,e){return a(t,i(e),arguments.length<3?void 0:o(arguments[2]))}})},function(t,e,n){var r=n(59),i=n(14),a=n(27),o=r.key,s=r.set;r.exp({metadata:function(t,e){return function(n,r){s(t,e,(void 0!==r?i:a)(n),o(r))}}})},function(t,e,n){var r=n(1),i=n(183)(),a=n(16).process,o="process"==n(44)(a);r(r.G,{asap:function(t){var e=o&&a.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";var r=n(1),i=n(16),a=n(50),o=n(183)(),s=n(19)("observable"),u=n(27),l=n(14),c=n(76),f=n(78),h=n(30),p=n(77),d=p.RETURN,m=function(t){return null==t?void 0:u(t)},g=function(t){var e=t._c;e&&(t._c=void 0,e())},v=function(t){return void 0===t._o},y=function(t){v(t)||(t._o=void 0,g(t))},b=function(t,e){l(t),this._c=void 0,this._o=t,t=new _(this);try{var n=e(t),r=n;null!=n&&("function"===typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(i){return void t.error(i)}v(this)&&g(this)};b.prototype=f({},{unsubscribe:function(){y(this)}});var _=function(t){this._s=t};_.prototype=f({},{next:function(t){var e=this._s;if(!v(e)){var n=e._o;try{var r=m(n.next);if(r)return r.call(n,t)}catch(i){try{y(e)}finally{throw i}}}},error:function(t){var e=this._s;if(v(e))throw t;var n=e._o;e._o=void 0;try{var r=m(n.error);if(!r)throw t;t=r.call(n,t)}catch(i){try{g(e)}finally{throw i}}return g(e),t},complete:function(t){var e=this._s;if(!v(e)){var n=e._o;e._o=void 0;try{var r=m(n.complete);t=r?r.call(n,t):void 0}catch(i){try{g(e)}finally{throw i}}return g(e),t}}});var x=function(t){c(this,x,"Observable","_f")._f=u(t)};f(x.prototype,{subscribe:function(t){return new b(t,this._f)},forEach:function(t){var e=this;return new(a.Promise||i.Promise)(function(n,r){u(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(n){r(n),i.unsubscribe()}},error:r,complete:n})})}}),f(x,{from:function(t){var e="function"===typeof this?this:x,n=m(l(t)[s]);if(n){var r=l(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return o(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(r){if(n)throw r;return void e.error(r)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=new Array(e);t<e;)n[t]=arguments[t++];return new("function"===typeof this?this:x)(function(t){var e=!1;return o(function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}}),function(){e=!0}})}}),h(x.prototype,s,function(){return this}),r(r.G,{Observable:x}),n(75)("Observable")},function(t,e,n){var r=n(16),i=n(1),a=n(130),o=[].slice,s=/MSIE .\./.test(a),u=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&o.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*s,{setTimeout:u(r.setTimeout),setInterval:u(r.setInterval)})},function(t,e,n){var r=n(1),i=n(182);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(181),i=n(71),a=n(31),o=n(16),s=n(30),u=n(89),l=n(19),c=l("iterator"),f=l("toStringTag"),h=u.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),m=0;m<d.length;m++){var g,v=d[m],y=p[v],b=o[v],_=b&&b.prototype;if(_&&(_[c]||s(_,c,h),_[f]||s(_,f,v),u[v]=h,y))for(g in r)_[g]||a(_,g,r[g],!0)}},function(t,e){!function(e){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag",l="object"===typeof t,c=e.regeneratorRuntime;if(c)l&&(t.exports=c);else{(c=e.regeneratorRuntime=l?t.exports:{}).wrap=_;var f="suspendedStart",h="suspendedYield",p="executing",d="completed",m={},g={};g[o]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==r&&i.call(y,o)&&(g=y);var b=E.prototype=w.prototype=Object.create(g);S.prototype=b.constructor=E,E.constructor=S,E[u]=S.displayName="GeneratorFunction",c.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===S||"GeneratorFunction"===(e.displayName||e.name))},c.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,u in t||(t[u]="GeneratorFunction")),t.prototype=Object.create(b),t},c.awrap=function(t){return{__await:t}},k(T.prototype),T.prototype[s]=function(){return this},c.AsyncIterator=T,c.async=function(t,e,n,r){var i=new T(_(t,e,n,r));return c.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},k(b),b[u]="Generator",b[o]=function(){return this},b.toString=function(){return"[object Generator]"},c.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},c.values=I,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&i.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=n)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,i){return s.type="throw",s.arg=t,e.next=r,i&&(e.method="next",e.arg=n),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=i.call(o,"catchLoc"),l=i.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;C(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:I(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=n),m}}}function _(t,e,n,r){var i=e&&e.prototype instanceof w?e:w,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(t,e,n){var r=f;return function(i,a){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=P(o,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=x(t,e,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,o),a}function x(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function w(){}function S(){}function E(){}function k(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function T(t){var e;this._invoke=function(n,r){function a(){return new Promise(function(e,a){!function e(n,r,a,o){var s=x(t[n],t,r);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"===typeof l&&i.call(l,"__await")?Promise.resolve(l.__await).then(function(t){e("next",t,a,o)},function(t){e("throw",t,a,o)}):Promise.resolve(l).then(function(t){u.value=t,a(u)},o)}o(s.arg)}(n,r,e,a)})}return e=e?e.then(a,a):a()}}function P(t,e){var r=t.iterator[e.method];if(r===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=n,P(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=x(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,m;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=n),e.delegate=null,m):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(i.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=n,e.done=!0,e};return a.next=a}}return{next:N}}function N(){return{value:n,done:!0}}}(function(){return this}()||Function("return this")())},function(t,e,n){"use strict";var r=n(156),i=n(551),a=n(2),o=n(7);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=S(n(100)),u=S(n(137)),l=S(n(612)),c=S(n(633)),f=S(n(636)),h=S(n(641)),p=S(n(656)),d=S(n(658)),m=S(n(676)),g=n(677),v=w(n(196)),y=w(n(816)),b=S(n(8)),_=n(9),x=S(n(818));function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}var E=d.default.CancelToken.source(),k=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var r=n.filepath,i=void 0===r?null:r,o=n.headers,s=void 0===o?{}:o,u=n.filesystem,l=void 0!==u&&u,c=n.gpu,f=void 0!==c&&c,h=n.transferLayerOutputs,p=void 0!==h&&h,d=n.pauseAfterLayerCalls,m=void 0!==d&&d,v=n.visualizations,b=void 0===v?[]:v;if(!i)throw new Error("[Model] path to protobuf-serialized model definition file is missing.");this.filepath=i,this.headers=s,this.filesystem="undefined"===typeof window&&l,this.events=new g.EventEmitter,this.id=null,this.name=null,this.kerasVersion=null,this.backend=null,this.modelConfig={},this.modelWeights=[],this.gpu=!("undefined"===typeof window||!_.webgl2.isSupported)&&f,this.transferLayerOutputs=p,this.pauseAfterLayerCalls=m,this.modelLayersInfo=[],this.modelLayersMap=new Map,this.inputTensorsMap=new Map,this.inputLayerNames=[],this.outputLayerNames=[],this.finishedLayerNames=[],this.isRunning=!1,this.runningProgress=0,this.predictStats={},this.visMap=new Map,b.forEach(function(t){if(t in y){var n=new y[t]({modelLayersMap:e.modelLayersMap,gpu:e.gpu});e.visMap.set(t,n)}}),this._ready=this._initialize()}return o(t,[{key:"checkGPUSupport",value:function(){return _.webgl2.isSupported}},{key:"ready",value:function(){return this._ready}},{key:"_interrupt",value:function(){E.cancel()}},{key:"_initialize",value:function(){var t=i(r.mark(function t(){var e,n,i=this;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.events.emit("loadingProgress",0),t.prev=1,e=this.filesystem?this._dataRequestFS():this._dataRequestHTTP(this.headers),t.next=5,e;case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0),this._interrupt();case 11:return this.events.emit("loadingProgress",100),this._buildDAG(),this.inputLayerNames.forEach(function(t){var e=i.modelLayersMap.get(t);e.call(i.inputTensorsMap.get(t)),e.hasOutput=!0,e.visited=!0}),n=this.pauseAfterLayerCalls,this.pauseAfterLayerCalls=!0,this.runningProgress=0,this.events.emit("initProgress",0),t.next=20,this._traverseDAG(this.inputLayerNames,"initProgress");case 20:return this.pauseAfterLayerCalls=n,this.finishedLayerNames=[],this.modelLayersMap.forEach(function(t){t.hasOutput=!1,t.visited=!1}),this.visMap.forEach(function(t){t.initialize()}),this.events.emit("initProgress",100),t.abrupt("return",!0);case 26:case"end":return t.stop()}},t,this,[[1,7]])}));return function(){return t.apply(this,arguments)}}()},{key:"_dataRequestHTTP",value:function(){var t=i(r.mark(function t(){var e,n,i=this,a=arguments;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},t.prev=1,t.next=4,d.default.get(this.filepath,{responseType:"arraybuffer",headers:e,onDownloadProgress:function(t){if(t.lengthComputable){var e=Math.round(100*t.loaded/t.total);i.events.emit("loadingProgress",e)}},cancelToken:E.token});case 4:n=t.sent,this._decodeProtobuf(new Uint8Array(n.data)),t.next=15;break;case 8:if(t.prev=8,t.t0=t.catch(1),!d.default.isCancel(t.t0)){t.next=14;break}console.log("[Model] Data request canceled",t.t0.message),t.next=15;break;case 14:throw t.t0;case 15:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}()},{key:"_dataRequestFS",value:function(){var t=i(r.mark(function t(){var e,i;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=p.default.promisify(n(834).readFile),t.prev=1,t.next=4,e(this.filepath);case 4:i=t.sent,this._decodeProtobuf(i),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}},t,this,[[1,8]])}));return function(){return t.apply(this,arguments)}}()},{key:"_decodeProtobuf",value:function(t){if(x.default.Model.verify(t))throw new Error("[Model] Invalid model - check protobuf serialization: {err}");var e=x.default.Model.decode(t);this.id=e.id,this.name=e.name,this.kerasVersion=e.kerasVersion,this.backend=e.backend,this.modelConfig=JSON.parse(e.modelConfig),this.modelWeights=e.modelWeights}},{key:"toggleGPU",value:function(t){var e=this;this.gpu="undefined"===typeof t?!this.gpu:t,this.modelLayersMap.forEach(function(t){t.toggleGPU(e.gpu)}),this.visMap.forEach(function(t){t.gpu=e.gpu}),this.resetInputTensors()}},{key:"resetInputTensors",value:function(){var t=this;this.inputLayerNames.forEach(function(e){var n=t.modelLayersMap.get(e);t.inputTensorsMap.set(e,new b.default([],n.shape))})}},{key:"_buildDAG",value:function(){var t=this,e=this.modelConfig.class_name,n=[];if("Sequential"===e?n=this.modelConfig.config:"Model"===e&&(n=this.modelConfig.config.layers),!Array.isArray(n)||!n.length)throw new Error("[Model] Model configuration does not contain any layers.");n.forEach(function(r,i){var a=r.class_name,o=r.config;if("Model"===e&&"Sequential"===a)o.forEach(function(e,n){var i=e.class_name,a=e.config,s=0===n?r.inbound_nodes[0].map(function(t){return t[0]}):[o[n-1].config.name];t._createLayer(i,a,s)});else{if(!(a in v))throw new Error("[Model] Layer ".concat(a," specified in model configuration is not implemented!"));if("Sequential"===e&&0===i){var s=o.batch_input_shape.slice(1),u=new v.InputLayer({name:"input",shape:s,gpu:t.gpu});t.modelLayersMap.set("input",u),t.inputTensorsMap.set("input",new b.default([],s)),t.inputLayerNames.push("input")}else if("Model"===e&&"InputLayer"===a){var l=o.batch_input_shape.slice(1);t.inputTensorsMap.set(o.name,new b.default([],l)),t.inputLayerNames.push(o.name)}var c=[];if("Sequential"===e)c=0===i?["input"]:[n[i-1].config.name];else if("Model"===e){var f=r.inbound_nodes;f&&f.length&&(c=f[0].map(function(t){return t[0]}))}t._createLayer(a,o,c)}}),this.modelLayersMap.forEach(function(e){t.modelLayersInfo.push((0,h.default)(e,["name","description","layerClass","inbound","outbound"])),0===e.outbound.length&&t.outputLayerNames.push(e.name)}),this.inputLayerNames.sort(),this.outputLayerNames.sort()}},{key:"_createLayer",value:function(t,e,n){var r=this,i=new v[t](Object.assign({},e,{gpu:this.gpu})),a=[];if("Bidirectional"===t){var o=i.forwardLayer.params.map(function(t){return"".concat(e.name,"/forward_").concat(e.layer.config.name,"/").concat(t)}),s=i.backwardLayer.params.map(function(t){return"".concat(e.name,"/backward_").concat(e.layer.config.name,"/").concat(t)});a=o.concat(s)}else a="TimeDistributed"===t?i.layer.params.map(function(t){return"".concat(e.name,"/").concat(t)}):i.params.map(function(t){return"".concat(e.name,"/").concat(t)});if(a&&a.length){var u=a.map(function(t){var e=(0,f.default)(r.modelWeights,function(e){return new RegExp("^.*".concat(t)).test(e.weightName)});if(!e)throw new Error("[Model] error loading weights.");var n=e.data,i=e.shape,a=e.type,o=new ArrayBuffer(n.byteLength),s=new Uint8Array(o);if(s.set(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),"uint8"===a){for(var u=e.quantizeMin,l=e.quantizeMax,c=new Float32Array(s),h=0,p=c.length;h<p;h++)c[h]*=(l-u)/255,c[h]+=u;return new b.default(c,i)}return new b.default(new Float32Array(o),i)});i.setWeights(u)}this.modelLayersMap.set(e.name,i),n.forEach(function(t){r.modelLayersMap.get(e.name).inbound.push(t),r.modelLayersMap.get(t).outbound.push(e.name)})}},{key:"_traverseDAG",value:function(){var t=i(r.mark(function t(e,n){var i,a,o,s,u=this;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==e.length){t.next=6;break}return this.runningProgress=100,this.events.emit(n,100),t.abrupt("return",!0);case 6:if(1!==e.length){t.next=32;break}if(i=e[0],"InputLayer"!==(a=this.modelLayersMap.get(i)).layerClass){t.next=13;break}this.finishedLayerNames.push(this.modelLayersMap.get(i).name),t.next=26;break;case 13:if(!(o=this.modelLayersMap.get(i)).visited){t.next=16;break}return t.abrupt("return",!1);case 16:if(s=o.inbound.map(function(t){return u.modelLayersMap.get(t)}),(0,c.default)((0,l.default)(s,"hasOutput"))){t.next=19;break}return t.abrupt("return",!1);case 19:if(o.isMergeLayer?o.call((0,l.default)(s,"output")):o.call(s[0].output),o.hasOutput=!0,o.visited=!0,this.finishedLayerNames.push(o.name),!this.pauseAfterLayerCalls){t.next=26;break}return t.next=26,p.default.delay(0);case 26:return this.runningProgress+=100/this.modelLayersMap.size,this.events.emit(n,this.runningProgress),t.next=30,this._traverseDAG(a.outbound,n);case 30:t.next=34;break;case 32:return t.next=34,p.default.all(e.map(function(t){return u._traverseDAG([t],n)}));case 34:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()},{key:"_maybeTransferIntermediateOutputs",value:function(){this.gpu&&this.transferLayerOutputs&&this.modelLayersMap.forEach(function(t){t.output&&t.output.glTexture&&(_.webgl2.bindOutputTexture(t.output.glTexture,t.output.glTextureShape),t.output.transferFromGLTexture(),t.output.is2DReshaped&&t.output.reshapeFrom2D())})}},{key:"loadData",value:function(t){var e=this;this.inputLayerNames.forEach(function(n){var r=e.modelLayersMap.get(n);e.inputTensorsMap.get(n).replaceTensorData(t[n]),r.call(e.inputTensorsMap.get(n)),r.hasOutput=!0,r.visited=!0})}},{key:"predict",value:function(){var t=i(r.mark(function t(e){var n,i,a,o,l=this;return r.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isRunning=!0,this.runningProgress=0,this.events.emit("predictProgress",0),(0,u.default)((0,s.default)(e).sort(),this.inputLayerNames)){t.next=6;break}throw this.isRunning=!1,new Error("[Model] predict() must take an object where the keys are the named inputs of the model: "+JSON.stringify(this.inputLayerNames));case 6:if((0,c.default)(this.inputLayerNames,function(t){return e[t]instanceof Float32Array})){t.next=9;break}throw this.isRunning=!1,new Error("[Model] predict() must take an object where the values are the flattened data as Float32Array.");case 9:return this.finishedLayerNames=[],this.modelLayersMap.forEach(function(t){t.hasOutput=!1,t.visited=!1}),n=(0,m.default)(),this.loadData(e),this.predictStats.loadData=(0,m.default)()-n,n=(0,m.default)(),t.next=17,this._traverseDAG(this.inputLayerNames,"predictProgress");case 17:return this.predictStats.forwardPass=(0,m.default)()-n,this._maybeTransferIntermediateOutputs(),i=this.modelConfig.class_name,a={},"Sequential"===i?(o=this.modelLayersMap.get(this.outputLayerNames[0]),a.output=o.output.tensor.data):"Model"===i&&this.outputLayerNames.forEach(function(t){var e=l.modelLayersMap.get(t);a[t]=e.output.tensor.data}),n=(0,m.default)(),this.visMap.forEach(function(t){t.update()}),this.predictStats.visualizations=(0,m.default)()-n,this.isRunning=!1,this.events.emit("predictProgress",100),t.abrupt("return",a);case 28:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"layerCall",value:function(t,e){var n;if(this.modelLayersMap.has(t))return n=e instanceof b.default?e:new b.default(e.data,e.shape),this.modelLayersMap.get(t).call(n)}},{key:"cleanup",value:function(){_.webgl2.clearRefs(),this.modelLayersMap.clear(),this.inputTensorsMap.clear(),this.visMap.clear(),delete this.modelWeights}}]),t}();e.default=k},function(t,e){function n(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(l){return void n(l)}s.done?e(u):Promise.resolve(u).then(r,i)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise(function(i,a){var o=t.apply(e,r);function s(t){n(o,i,a,s,u,"next",t)}function u(t){n(o,i,a,s,u,"throw",t)}s(void 0)})}}},function(t,e,n){var r=n(553),i=n(186),a=n(46),o=n(251),s=n(136),u=n(252),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),c=!n&&i(t),f=!n&&!c&&o(t),h=!n&&!c&&!f&&u(t),p=n||c||f||h,d=p?r(t.length,String):[],m=d.length;for(var g in t)!e&&!l.call(t,g)||p&&("length"==g||f&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||d.push(g);return d}},function(t,e){t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},function(t,e,n){var r=n(101),i=n(103),a="[object Arguments]";t.exports=function(t){return i(t)&&r(t)==a}},function(t,e,n){var r=n(102),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(u){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var r=n(101),i=n(187),a=n(103),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&i(t.length)&&!!o[r(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var r=n(250),i="object"==typeof e&&e&&!e.nodeType&&e,a=i&&"object"==typeof t&&t&&!t.nodeType&&t,o=a&&a.exports===i&&r.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||o&&o.binding&&o.binding("util")}catch(e){}}();t.exports=s}).call(this,n(104)(t))},function(t,e,n){var r=n(562),i=n(563),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(564)(Object.keys,Object);t.exports=r},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var r=n(254),i=n(256),a=n(597),o=n(601),s=n(607),u=n(46),l=n(251),c=n(252),f=1,h="[object Arguments]",p="[object Array]",d="[object Object]",m=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,v,y){var b=u(t),_=u(e),x=b?p:s(t),w=_?p:s(e),S=(x=x==h?d:x)==d,E=(w=w==h?d:w)==d,k=x==w;if(k&&l(t)){if(!l(e))return!1;b=!0,S=!1}if(k&&!S)return y||(y=new r),b||c(t)?i(t,e,n,g,v,y):a(t,e,x,n,g,v,y);if(!(n&f)){var T=S&&m.call(t,"__wrapped__"),P=E&&m.call(e,"__wrapped__");if(T||P){var M=T?t.value():t,C=P?e.value():e;return y||(y=new r),v(M,C,n,g,y)}}return!!k&&(y||(y=new r),o(t,e,n,g,v,y))}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var r=n(139),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0)&&(n==e.length-1?e.pop():i.call(e,n,1),--this.size,!0)}},function(t,e,n){var r=n(139);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var r=n(139);t.exports=function(t){return r(this.__data__,t)>-1}},function(t,e,n){var r=n(139);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},function(t,e,n){var r=n(138);t.exports=function(){this.__data__=new r,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var r=n(138),i=n(189),a=n(190),o=200;t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<o-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(s)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var r=n(253),i=n(577),a=n(91),o=n(255),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,f=l.hasOwnProperty,h=RegExp("^"+c.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||i(t))&&(r(t)?h:s).test(o(t))}},function(t,e,n){var r=n(578),i=function(){var t=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=function(t){return!!i&&i in t}},function(t,e,n){var r=n(56)["__core-js_shared__"];t.exports=r},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var r=n(581),i=n(138),a=n(189);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},function(t,e,n){var r=n(582),i=n(583),a=n(584),o=n(585),s=n(586);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=a,u.prototype.has=o,u.prototype.set=s,t.exports=u},function(t,e,n){var r=n(141);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var r=n(141),i="__lodash_hash_undefined__",a=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return n===i?void 0:n}return a.call(e,t)?e[t]:void 0}},function(t,e,n){var r=n(141),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},function(t,e,n){var r=n(141),i="__lodash_hash_undefined__";t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?i:e,this}},function(t,e,n){var r=n(142);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var r=n(142);t.exports=function(t){return r(this,t).get(t)}},function(t,e,n){var r=n(142);t.exports=function(t){return r(this,t).has(t)}},function(t,e,n){var r=n(142);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},function(t,e,n){var r=n(190),i=n(593),a=n(594);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},function(t,e){var n="__lodash_hash_undefined__";t.exports=function(t){return this.__data__.set(t,n),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var r=n(102),i=n(598),a=n(140),o=n(256),s=n(599),u=n(600),l=1,c=2,f="[object Boolean]",h="[object Date]",p="[object Error]",d="[object Map]",m="[object Number]",g="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",x="[object DataView]",w=r?r.prototype:void 0,S=w?w.valueOf:void 0;t.exports=function(t,e,n,r,w,E,k){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case _:return!(t.byteLength!=e.byteLength||!E(new i(t),new i(e)));case f:case h:case m:return a(+t,+e);case p:return t.name==e.name&&t.message==e.message;case g:case y:return t==e+"";case d:var T=s;case v:var P=r&l;if(T||(T=u),t.size!=e.size&&!P)return!1;var M=k.get(t);if(M)return M==e;r|=c,k.set(t,e);var C=o(T(t),T(e),r,w,E,k);return k.delete(t),C;case b:if(S)return S.call(t)==S.call(e)}return!1}},function(t,e,n){var r=n(56).Uint8Array;t.exports=r},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}},function(t,e,n){var r=n(602),i=1,a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,s,u){var l=n&i,c=r(t),f=c.length;if(f!=r(e).length&&!l)return!1;for(var h=f;h--;){var p=c[h];if(!(l?p in e:a.call(e,p)))return!1}var d=u.get(t);if(d&&u.get(e))return d==e;var m=!0;u.set(t,e),u.set(e,t);for(var g=l;++h<f;){var v=t[p=c[h]],y=e[p];if(o)var b=l?o(y,v,p,e,t,u):o(v,y,p,t,e,u);if(!(void 0===b?v===y||s(v,y,n,o,u):b)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(m=!1)}return u.delete(t),u.delete(e),m}},function(t,e,n){var r=n(603),i=n(604),a=n(100);t.exports=function(t){return r(t,a,i)}},function(t,e,n){var r=n(257),i=n(46);t.exports=function(t,e,n){var a=e(t);return i(t)?a:r(a,n(t))}},function(t,e,n){var r=n(605),i=n(606),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(t){return null==t?[]:(t=Object(t),r(o(t),function(e){return a.call(t,e)}))}:i;t.exports=s},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,a=[];++n<r;){var o=t[n];e(o,n,t)&&(a[i++]=o)}return a}},function(t,e){t.exports=function(){return[]}},function(t,e,n){var r=n(608),i=n(189),a=n(609),o=n(610),s=n(611),u=n(101),l=n(255),c=l(r),f=l(i),h=l(a),p=l(o),d=l(s),m=u;(r&&"[object DataView]"!=m(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=m(new i)||a&&"[object Promise]"!=m(a.resolve())||o&&"[object Set]"!=m(new o)||s&&"[object WeakMap]"!=m(new s))&&(m=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case c:return"[object DataView]";case f:return"[object Map]";case h:return"[object Promise]";case p:return"[object Set]";case d:return"[object WeakMap]"}return e}),t.exports=m},function(t,e,n){var r=n(79)(n(56),"DataView");t.exports=r},function(t,e,n){var r=n(79)(n(56),"Promise");t.exports=r},function(t,e,n){var r=n(79)(n(56),"Set");t.exports=r},function(t,e,n){var r=n(79)(n(56),"WeakMap");t.exports=r},function(t,e,n){var r=n(258),i=n(143),a=n(628),o=n(46);t.exports=function(t,e){return(o(t)?r:a)(t,i(e,3))}},function(t,e,n){var r=n(614),i=n(615),a=n(260);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},function(t,e,n){var r=n(254),i=n(188),a=1,o=2;t.exports=function(t,e,n,s){var u=n.length,l=u,c=!s;if(null==t)return!l;for(t=Object(t);u--;){var f=n[u];if(c&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++u<l;){var h=(f=n[u])[0],p=t[h],d=f[1];if(c&&f[2]){if(void 0===p&&!(h in t))return!1}else{var m=new r;if(s)var g=s(p,d,h,t,e,m);if(!(void 0===g?i(d,p,a|o,s,m):g))return!1}}return!0}},function(t,e,n){var r=n(259),i=n(100);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var a=e[n],o=t[a];e[n]=[a,o,r(o)]}return e}},function(t,e,n){var r=n(188),i=n(617),a=n(261),o=n(192),s=n(259),u=n(260),l=n(106),c=1,f=2;t.exports=function(t,e){return o(t)&&s(e)?u(l(t),e):function(n){var o=i(n,t);return void 0===o&&o===e?a(n,t):r(e,o,c|f)}}},function(t,e,n){var r=n(191);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},function(t,e,n){var r=n(619),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,function(t,n,r,i){e.push(r?i.replace(a,"$1"):n||t)}),e});t.exports=o},function(t,e,n){var r=n(620),i=500;t.exports=function(t){var e=r(t,function(t){return n.size===i&&n.clear(),t}),n=e.cache;return e}},function(t,e,n){var r=n(190),i="Expected a function";function a(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(i);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=t.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(a.Cache||r),n}a.Cache=r,t.exports=a},function(t,e,n){var r=n(622);t.exports=function(t){return null==t?"":r(t)}},function(t,e,n){var r=n(102),i=n(258),a=n(46),o=n(145),s=1/0,u=r?r.prototype:void 0,l=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return i(e,t)+"";if(o(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-s?"-0":n}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var r=n(144),i=n(186),a=n(46),o=n(136),s=n(187),u=n(106);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,f=!1;++l<c;){var h=u(e[l]);if(!(f=null!=t&&n(t,h)))break;t=t[h]}return f||++l!=c?f:!!(c=null==t?0:t.length)&&s(c)&&o(h,c)&&(a(t)||i(t))}},function(t,e,n){var r=n(626),i=n(627),a=n(192),o=n(106);t.exports=function(t){return a(t)?r(o(t)):i(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var r=n(191);t.exports=function(t){return function(e){return r(e,t)}}},function(t,e,n){var r=n(262),i=n(105);t.exports=function(t,e){var n=-1,a=i(t)?Array(t.length):[];return r(t,function(t,r,i){a[++n]=e(t,r,i)}),a}},function(t,e,n){var r=n(630),i=n(100);t.exports=function(t,e){return t&&r(t,e,i)}},function(t,e,n){var r=n(631)();t.exports=r},function(t,e){t.exports=function(t){return function(e,n,r){for(var i=-1,a=Object(e),o=r(e),s=o.length;s--;){var u=o[t?s:++i];if(!1===n(a[u],u,a))break}return e}}},function(t,e,n){var r=n(105);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var a=n.length,o=e?a:-1,s=Object(n);(e?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},function(t,e,n){var r=n(634),i=n(635),a=n(143),o=n(46),s=n(263);t.exports=function(t,e,n){var u=o(t)?r:i;return n&&s(t,e,n)&&(e=void 0),u(t,a(e,3))}},function(t,e){t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}},function(t,e,n){var r=n(262);t.exports=function(t,e){var n=!0;return r(t,function(t,r,i){return n=!!e(t,r,i)}),n}},function(t,e,n){var r=n(637)(n(638));t.exports=r},function(t,e,n){var r=n(143),i=n(105),a=n(100);t.exports=function(t){return function(e,n,o){var s=Object(e);if(!i(e)){var u=r(n,3);e=a(e),n=function(t){return u(s[t],t,s)}}var l=t(e,n,o);return l>-1?s[u?e[l]:l]:void 0}}},function(t,e,n){var r=n(639),i=n(143),a=n(264),o=Math.max;t.exports=function(t,e,n){var s=null==t?0:t.length;if(!s)return-1;var u=null==n?0:a(n);return u<0&&(u=o(s+u,0)),r(t,i(e,3),u)}},function(t,e){t.exports=function(t,e,n,r){for(var i=t.length,a=n+(r?1:-1);r?a--:++a<i;)if(e(t[a],a,t))return a;return-1}},function(t,e,n){var r=n(91),i=n(145),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return a;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=u.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):s.test(t)?a:+t}},function(t,e,n){var r=n(642),i=n(647)(function(t,e){return null==t?{}:r(t,e)});t.exports=i},function(t,e,n){var r=n(643),i=n(261);t.exports=function(t,e){return r(t,e,function(e,n){return i(t,n)})}},function(t,e,n){var r=n(191),i=n(644),a=n(144);t.exports=function(t,e,n){for(var o=-1,s=e.length,u={};++o<s;){var l=e[o],c=r(t,l);n(c,l)&&i(u,a(l,t),c)}return u}},function(t,e,n){var r=n(645),i=n(144),a=n(136),o=n(91),s=n(106);t.exports=function(t,e,n,u){if(!o(t))return t;for(var l=-1,c=(e=i(e,t)).length,f=c-1,h=t;null!=h&&++l<c;){var p=s(e[l]),d=n;if(l!=f){var m=h[p];void 0===(d=u?u(m,p,h):void 0)&&(d=o(m)?m:a(e[l+1])?[]:{})}r(h,p,d),h=h[p]}return t}},function(t,e,n){var r=n(646),i=n(140),a=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];a.call(t,e)&&i(o,n)&&(void 0!==n||e in t)||r(t,e,n)}},function(t,e,n){var r=n(266);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var r=n(648),i=n(650),a=n(652);t.exports=function(t){return a(i(t,void 0,r),t+"")}},function(t,e,n){var r=n(267);t.exports=function(t){return null!=t&&t.length?r(t,1):[]}},function(t,e,n){var r=n(102),i=n(186),a=n(46),o=r?r.isConcatSpreadable:void 0;t.exports=function(t){return a(t)||i(t)||!!(o&&t&&t[o])}},function(t,e,n){var r=n(651),i=Math.max;t.exports=function(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=i(a.length-e,0),u=Array(s);++o<s;)u[o]=a[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=a[o];return l[e]=n(u),r(t,this,l)}}},function(t,e){t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},function(t,e,n){var r=n(653),i=n(655)(r);t.exports=i},function(t,e,n){var r=n(654),i=n(266),a=n(193),o=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:a;t.exports=o},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e){var n=800,r=16,i=Date.now;t.exports=function(t){var e=0,a=0;return function(){var o=i(),s=r-(o-a);if(a=o,s>0){if(++e>=n)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,n){(function(e,n,r){var i;i=function(){var t,a,o;return function t(e,n,r){function i(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof _dereq_&&_dereq_;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var a="function"==typeof _dereq_&&_dereq_,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,n,r){"use strict";var a;try{throw new Error}catch(i){a=i}var o=t("./schedule"),s=t("./queue"),u=t("./util");function l(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new s(16),this._normalQueue=new s(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function c(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function f(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function h(t){this._normalQueue._pushOne(t),this._queueTick()}function p(t){for(;t.length()>0;)d(t)}function d(t){var e=t.shift();if("function"!==typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}l.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},l.prototype.hasCustomScheduler=function(){return this._customScheduler},l.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},l.prototype.disableTrampolineIfNecessary=function(){u.hasDevTools&&(this._trampolineEnabled=!1)},l.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},l.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},l.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!==typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(i){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},u.hasDevTools?(l.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?c.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},l.prototype.invoke=function(t,e,n){this._trampolineEnabled?f.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},l.prototype.settlePromises=function(t){this._trampolineEnabled?h.call(this,t):this._schedule(function(){t._settlePromises()})}):(l.prototype.invokeLater=c,l.prototype.invoke=f,l.prototype.settlePromises=h),l.prototype._drainQueues=function(){p(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,p(this._lateQueue)},l.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},l.prototype._reset=function(){this._isTickUsed=!1},n.exports=l,n.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,a=function(t,e){this._reject(e)},o=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(a,a,null,this,t)},s=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},u=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(a){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var l=n(a),c=new t(e);c._propagateFrom(this,1);var f=this._target();if(c._setBoundTo(l),l instanceof t){var h={promiseRejectionQueued:!1,promise:c,target:f,bindingPromise:l};f._then(e,o,void 0,c,h),l._then(s,u,void 0,c,h),c._setOnCancel(l)}else c._resolveCallback(f);return c},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";var r;"undefined"!==typeof Promise&&(r=Promise);var a=t("./promise")();a.noConflict=function(){try{Promise===a&&(Promise=r)}catch(i){}return a},e.exports=a},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),a=r(null);i[" size"]=a[" size"]=0}e.exports=function(e){var n=t("./util"),r=n.canEvaluate;n.isIdentifier;function i(t){return function(t,r){var i;if(null!=t&&(i=t[r]),"function"!==typeof i){var a="Object "+n.classString(t)+" has no method '"+n.toString(r)+"'";throw new e.TypeError(a)}return i}(t,this.pop()).apply(t,this)}function a(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(i,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"===typeof t)e=o;else if(r){var n=(void 0)(t);e=null!==n?n:a}else e=a;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var a=t("./util"),o=a.tryCatch,s=a.errorObj,u=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(a.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"===typeof t){if(!e){var r=o(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),u.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,a=n.errorObj;return function(t,o,s){return function(u){var l=s._boundValue();t:for(var c=0;c<t.length;++c){var f=t[c];if(f===Error||null!=f&&f.prototype instanceof Error){if(u instanceof f)return i(o).call(l,u)}else if("function"===typeof f){var h=i(f).call(l,u);if(h===a)return h;if(h)return i(o).call(l,u)}else if(n.isObject(u)){for(var p=r(f),d=0;d<p.length;++d){var m=p[d];if(f[m]!=u[m])continue t}return i(o).call(l,u)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,a=t.prototype._popContext,o=t._peekContext,s=t.prototype._peekContext,u=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=a,t._peekContext=o,t.prototype._peekContext=s,t.prototype._promiseCreated=u,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r){var a,o,s,u=n._getDomain,l=n._async,c=t("./errors").Warning,f=t("./util"),h=t("./es5"),p=f.canAttachTrace,d=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,m=/\((?:timers\.js):\d+:\d+\)/,g=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,v=null,y=null,b=!1,_=!(0==f.env("BLUEBIRD_DEBUG")),x=!(0==f.env("BLUEBIRD_WARNINGS")||!_&&!f.env("BLUEBIRD_WARNINGS")),w=!(0==f.env("BLUEBIRD_LONG_STACK_TRACES")||!_&&!f.env("BLUEBIRD_LONG_STACK_TRACES")),S=0!=f.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(x||!!f.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},n.prototype._notifyUnhandledRejectionIsHandled=function(){H("rejectionHandled",a,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),H("unhandledRejection",o,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return V(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=u();o="function"===typeof t?null===e?t:f.domainBind(e,t):void 0},n.onUnhandledRejectionHandled=function(t){var e=u();a="function"===typeof t?null===e?t:f.domainBind(e,t):void 0};var E=function(){};n.longStackTraces=function(){if(l.haveItemsQueued()&&!tt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!tt.longStackTraces&&K()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace,i=n.prototype._dereferenceTrace;tt.longStackTraces=!0,E=function(){if(l.haveItemsQueued()&&!tt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,n.prototype._dereferenceTrace=i,r.deactivateLongStackTraces(),l.enableTrampoline(),tt.longStackTraces=!1},n.prototype._captureStackTrace=z,n.prototype._attachExtraTrace=B,n.prototype._dereferenceTrace=U,r.activateLongStackTraces(),l.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return tt.longStackTraces&&K()};var k=function(){try{if("function"===typeof CustomEvent){var t=new CustomEvent("CustomEvent");return f.global.dispatchEvent(t),function(t,e){var n={detail:e,cancelable:!0};h.defineProperty(n,"promise",{value:e.promise}),h.defineProperty(n,"reason",{value:e.reason});var r=new CustomEvent(t.toLowerCase(),n);return!f.global.dispatchEvent(r)}}if("function"===typeof Event){t=new Event("CustomEvent");return f.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,h.defineProperty(n,"promise",{value:e.promise}),h.defineProperty(n,"reason",{value:e.reason}),!f.global.dispatchEvent(n)}}return(t=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),f.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!f.global.dispatchEvent(n)}}catch(i){}return function(){return!1}}(),T=f.isNode?function(){return e.emit.apply(e,arguments)}:f.global?function(t){var e="on"+t.toLowerCase(),n=f.global[e];return!!n&&(n.apply(f.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function P(t,e){return{promise:e}}var M={promiseCreated:P,promiseFulfilled:P,promiseRejected:P,promiseResolved:P,promiseCancelled:P,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:P},C=function(t){var e=!1;try{e=T.apply(null,arguments)}catch(i){l.throwLater(i),e=!0}var n=!1;try{n=k(t,M[t].apply(null,arguments))}catch(i){l.throwLater(i),n=!0}return n||e};function O(){return!1}function I(t,e,n){var r=this;try{t(e,n,function(t){if("function"!==typeof t)throw new TypeError("onCancel must be a function, got: "+f.toString(t));r._attachCancellationCallback(t)})}catch(i){return i}}function N(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?f.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function A(){return this._onCancelField}function R(t){this._onCancelField=t}function D(){this._cancellationParent=void 0,this._onCancelField=void 0}function j(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&E()),"warnings"in t){var e=t.warnings;tt.warnings=!!e,S=tt.warnings,f.isObject(e)&&"wForgottenReturn"in e&&(S=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!tt.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=D,n.prototype._propagateFrom=j,n.prototype._onCancel=A,n.prototype._setOnCancel=R,n.prototype._attachCancellationCallback=N,n.prototype._execute=I,L=j,tt.cancellation=!0}return"monitoring"in t&&(t.monitoring&&!tt.monitoring?(tt.monitoring=!0,n.prototype._fireEvent=C):!t.monitoring&&tt.monitoring&&(tt.monitoring=!1,n.prototype._fireEvent=O)),n},n.prototype._fireEvent=O,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(i){return i}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._dereferenceTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var L=function(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function F(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function z(){this._trace=new Z(this._peekContext())}function B(t,e){if(p(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=W(t);f.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),f.notEnumerableProp(t,"__stackCleaned__",!0)}}}function U(){this._trace=void 0}function V(t,e,r){if(tt.warnings){var i,a=new c(t);if(e)r._attachExtraTrace(a);else if(tt.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(a);else{var o=W(a);a.stack=o.message+"\n"+o.stack.join("\n")}C("warning",a)||G(a,"",!0)}}function q(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||v.test(r),a=i&&X(r);i&&!a&&(b&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function W(t){var e=t.stack,n=t.toString();return e="string"===typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||v.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:q(e)}}function G(t,e,n){if("undefined"!==typeof console){var r;if(f.isObject(t)){var i=t.stack;r=e+y(i,t)}else r=e+String(t);"function"===typeof s?s(r,n):"function"!==typeof console.log&&"object"!==typeof console.log||console.log(r)}}function H(t,e,n,r){var a=!1;try{"function"===typeof e&&(a=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(i){l.throwLater(i)}"unhandledRejection"===t?C(t,n,r)||a||G(n,"Unhandled rejection "):C(t,r)}function $(t){var e;if("function"===typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"===typeof t.toString?t.toString():f.toString(t);if(/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(i){}0===e.length&&(e="(empty array)")}return"(<"+function(t){if(t.length<41)return t;return t.substr(0,38)+"..."}(e)+">, no stack trace)"}function K(){return"function"===typeof Q}var X=function(){return!1},Y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function J(t){var e=t.match(Y);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function Z(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);Q(this,Z),e>32&&this.uncycle()}f.inherits(Z,Error),r.CapturedTrace=Z,Z.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(r=(t=this._length=r)-1;r>=0;--r){var a=e[r].stack;void 0===n[a]&&(n[a]=r)}for(r=0;r<t;++r){var o=n[e[r].stack];if(void 0!==o&&o!==r){o>0&&(e[o-1]._parent=void 0,e[o-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var s=r>0?e[r-1]:this;o<t-1?(s._parent=e[o+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var u=s._length+1,l=r-2;l>=0;--l)e[l]._length=u,u++;return}}}},Z.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=W(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(q(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,a=e[i],o=-1,s=r.length-1;s>=0;--s)if(r[s]===a){o=s;break}for(s=o;s>=0;--s){var u=r[s];if(e[i]!==u)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),f.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),f.notEnumerableProp(t,"__stackCleaned__",!0)}};var Q=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"===typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():$(e)};if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){Error.stackTraceLimit+=6,v=t,y=e;var n=Error.captureStackTrace;return X=function(t){return d.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,a=new Error;if("string"===typeof a.stack&&a.stack.split("\n")[0].indexOf("stackDetection@")>=0)return v=/@/,y=e,b=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(i){r="stack"in i}return"stack"in a||!r||"number"!==typeof Error.stackTraceLimit?(y=function(t,e){return"string"===typeof t?t:"object"!==typeof e&&"function"!==typeof e||void 0===e.name||void 0===e.message?$(e):e.toString()},null):(v=t,y=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(i){t.stack=i.stack}Error.stackTraceLimit-=6})}();"undefined"!==typeof console&&"undefined"!==typeof console.warn&&(s=function(t){console.warn(t)},f.isNode&&e.stderr.isTTY?s=function(t,e){var n=e?"\x1b[33m":"\x1b[31m";console.warn(n+t+"\x1b[0m\n")}:f.isNode||"string"!==typeof(new Error).stack||(s=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var tt={warnings:x,longStackTraces:!1,cancellation:!1,monitoring:!1};return w&&n.longStackTraces(),{longStackTraces:function(){return tt.longStackTraces},warnings:function(){return tt.warnings},cancellation:function(){return tt.cancellation},monitoring:function(){return tt.monitoring},propagateFromFunction:function(){return L},boundValueFunction:function(){return F},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&S){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var a="",o="";if(e._trace){for(var s=e._trace.stack.split("\n"),u=q(s),l=u.length-1;l>=0;--l){var c=u[l];if(!m.test(c)){var f=c.match(g);f&&(a="at "+f[1]+":"+f[2]+":"+f[3]+" ");break}}if(u.length>0){var h=u[0];for(l=0;l<s.length;++l)if(s[l]===h){l>0&&(o="\n"+s[l-1]);break}}}var p="a promise was created in a "+n+"handler "+a+"but was not returned from it, see http://goo.gl/rRqMUw"+o;r._warn(p,!0,e)}},setBounds:function(t,e){if(K()){for(var n,r,i=t.stack.split("\n"),a=e.stack.split("\n"),o=-1,s=-1,u=0;u<i.length;++u)if(l=J(i[u])){n=l.fileName,o=l.line;break}for(u=0;u<a.length;++u){var l;if(l=J(a[u])){r=l.fileName,s=l.line;break}}o<0||s<0||!n||!r||n!==r||o>=s||(X=function(t){if(d.test(t))return!0;var e=J(t);return!!(e&&e.fileName===n&&o<=e.line&&e.line<=s)})}},warn:V,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),V(n)},CapturedTrace:Z,fireDomEvent:k,fireGlobalEvent:T}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1];return this.caught(t,function(){throw e})},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();return this.caught(n,function(){return r})}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,r=t.all;function i(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},{}],12:[function(t,e,n){"use strict";var r,a,o=t("./es5"),s=o.freeze,u=t("./util"),l=u.inherits,c=u.notEnumerableProp;function f(t,e){function n(r){if(!(this instanceof n))return new n(r);c(this,"message","string"===typeof r?r:e),c(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return l(n,Error),n}var h=f("Warning","warning"),p=f("CancellationError","cancellation error"),d=f("TimeoutError","timeout error"),m=f("AggregateError","aggregate error");try{r=TypeError,a=RangeError}catch(i){r=f("TypeError","type error"),a=f("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),v=0;v<g.length;++v)"function"===typeof Array.prototype[g[v]]&&(m.prototype[g[v]]=Array.prototype[g[v]]);o.defineProperty(m.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),m.prototype.isOperational=!0;var y=0;function b(t){if(!(this instanceof b))return new b(t);c(this,"name","OperationalError"),c(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(c(this,"message",t.message),c(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}m.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),a=0;a<i.length;++a)i[a]=t+i[a];e+=(r=i.join("\n"))+"\n"}return y--,e},l(b,Error);var _=Error.__BluebirdErrorTypes__;_||(_=s({CancellationError:p,TimeoutError:d,OperationalError:b,RejectionError:b,AggregateError:m}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:a,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var a={}.hasOwnProperty,o={}.toString,s={}.constructor.prototype,u=function(t){var e=[];for(var n in t)a.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(i){return!1}},keys:u,names:u,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(i){return s}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),a=e.CancellationError,o=i.errorObj,s=t("./catch_filter")(r);function u(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function l(t){this.finallyHandler=t}function c(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function f(){return p.call(this,this.promise._target()._settledValue())}function h(t){if(!c(this,t))return o.e=t,o}function p(t){var i=this.promise,s=this.handler;if(!this.called){this.called=!0;var u=this.isFinallyHandler()?s.call(i._boundValue()):s.call(i._boundValue(),t);if(u===r)return u;if(void 0!==u){i._setReturnedNonUndefined();var p=n(u,i);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var d=new a("late cancellation observer");return i._attachExtraTrace(d),o.e=d,o}p.isPending()&&p._attachCancellationCallback(new l(this))}return p._then(f,h,void 0,this,void 0)}}}return i.isRejected()?(c(this),o.e=t,o):(c(this),t)}return u.prototype.isFinallyHandler=function(){return 0===this.type},l.prototype._resultCancelled=function(){c(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!==typeof t?this.then():this._then(n,r,void 0,new u(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,p,p)},e.prototype.tap=function(t){return this._passThrough(t,1,p)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,p);var r,a=new Array(n-1),o=0;for(r=0;r<n-1;++r){var u=arguments[r];if(!i.isObject(u))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(u)));a[o++]=u}a.length=o;var l=arguments[r];return this._passThrough(s(a,l,this),1,void 0,p)},u}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,a,o){var s=t("./errors").TypeError,u=t("./util"),l=u.errorObj,c=u.tryCatch,f=[];function h(t,n,i,a){if(o.cancellation()){var s=new e(r),u=this._finallyPromise=new e(r);this._promise=s.lastly(function(){return u}),s._captureStackTrace(),s._setOnCancel(this)}else{(this._promise=new e(r))._captureStackTrace()}this._stack=a,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"===typeof i?[i].concat(f):f,this._yieldedPromise=null,this._cancellationPhase=!1}u.inherits(h,a),h.prototype._isResolved=function(){return null===this._promise},h.prototype._cleanup=function(){this._promise=this._generator=null,o.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},h.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if("undefined"!==typeof this._generator.return)this._promise._pushContext(),t=c(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=c(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},h.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=c(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=c(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},h.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},h.prototype.promise=function(){return this._promise},h.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},h.prototype._continue=function(t){var n=this._promise;if(t===l)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var a=i(r,this._promise);if(a instanceof e||null!==(a=function(t,n,r){for(var a=0;a<n.length;++a){r._pushContext();var o=c(n[a])(t);if(r._popContext(),o===l){r._pushContext();var s=e.reject(l.e);return r._popContext(),s}var u=i(o,r);if(u instanceof e)return u}return null}(a,this._yieldHandlers,this._promise))){var o=(a=a._target())._bitField;0===(50397184&o)?(this._yieldedPromise=a,a._proxy(this,null)):0!==(33554432&o)?e._async.invoke(this._promiseFulfilled,this,a._value()):0!==(16777216&o)?e._async.invoke(this._promiseRejected,this,a._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!==typeof t)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=h,i=(new Error).stack;return function(){var e=t.apply(this,arguments),a=new r(void 0,void 0,n,i),o=a.promise();return a._generator=e,a._promiseFulfilled(void 0),o}},e.coroutine.addYieldHandler=function(t){if("function"!==typeof t)throw new s("expecting a function but got "+u.classString(t));f.push(t)},e.spawn=function(t){if(o.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!==typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new h(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,a,o){var s=t("./util");s.canEvaluate,s.tryCatch,s.errorObj;e.join=function(){var t,e=arguments.length-1;e>0&&"function"===typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,a,o){var s=e._getDomain,u=t("./util"),l=u.tryCatch,c=u.errorObj,f=e._async;function h(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=s();this._callback=null===i?e:u.domainBind(i,e),this._preservedValues=r===a?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],f.invoke(this._asyncInit,this,void 0)}function p(t,n,i,a){if("function"!==typeof n)return r("expecting a function but got "+u.classString(n));var o=0;if(void 0!==i){if("object"!==typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+u.classString(i)));if("number"!==typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+u.classString(i.concurrency)));o=i.concurrency}return new h(t,n,o="number"===typeof o&&isFinite(o)&&o>=1?o:0,a).promise()}u.inherits(h,n),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(t,n){var r=this._values,a=this.length(),s=this._preservedValues,u=this._limit;if(n<0){if(r[n=-1*n-1]=t,u>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(u>=1&&this._inFlight>=u)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var f=this._promise,h=this._callback,p=f._boundValue();f._pushContext();var d=l(h).call(p,t,n,a),m=f._popContext();if(o.checkForgottenReturns(d,m,null!==s?"Promise.filter":"Promise.map",f),d===c)return this._reject(d.e),!0;var g=i(d,this._promise);if(g instanceof e){var v=(g=g._target())._bitField;if(0===(50397184&v))return u>=1&&this._inFlight++,r[n]=g,g._proxy(this,-1*(n+1)),!1;if(0===(33554432&v))return 0!==(16777216&v)?(this._reject(g._reason()),!0):(this._cancel(),!0);d=g._value()}r[n]=d}return++this._totalResolved>=a&&(null!==s?this._filter(r,s):this._resolve(r),!0)},h.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},h.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,a=0;a<n;++a)t[a]&&(r[i++]=e[a]);r.length=i,this._resolve(r)},h.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return p(this,t,e,null)},e.map=function(t,e,n,r){return p(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,a){var o=t("./util"),s=o.tryCatch;e.method=function(t){if("function"!==typeof t)throw new e.TypeError("expecting a function but got "+o.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),o=r._popContext();return a.checkForgottenReturns(i,o,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!==typeof t)return i("expecting a function but got "+o.classString(t));var r,u=new e(n);if(u._captureStackTrace(),u._pushContext(),arguments.length>1){a.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1],c=arguments[2];r=o.isArray(l)?s(t).apply(c,l):s(t).call(c,l)}else r=s(t)();var f=u._popContext();return a.checkForgottenReturns(r,f,"Promise.try",u),u._resolveFromSyncValue(r),u},e.prototype._resolveFromSyncValue=function(t){t===o.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var r=t("./util"),i=r.maybeWrapAsError,a=t("./errors").OperationalError,o=t("./es5");var s=/^(?:name|message|stack|cause)$/;function u(t){var e;if(function(t){return t instanceof Error&&o.getPrototypeOf(t)===Error.prototype}(t)){(e=new a(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=o.keys(t),i=0;i<n.length;++i){var u=n[i];s.test(u)||(e[u]=t[u])}return e}return r.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var a=u(i(n));t._attachExtraTrace(a),t._reject(a)}else if(e){var o=[].slice.call(arguments,1);t._fulfill(o)}else t._fulfill(r);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=e._async,i=n.tryCatch,a=n.errorObj;function o(t,e){if(!n.isArray(t))return s.call(this,t,e);var o=i(e).apply(this._boundValue(),[null].concat(t));o===a&&r.throwLater(o.e)}function s(t,e){var n=this._boundValue(),o=void 0===t?i(e).call(n,null):i(e).call(n,null,t);o===a&&r.throwLater(o.e)}function u(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var o=i(e).call(this._boundValue(),t);o===a&&r.throwLater(o.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=s;void 0!==e&&Object(e).spread&&(n=o),this._then(n,u,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){var r=function(){return new d("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new C.PromiseInspection(this._target())},a=function(t){return C.reject(new d(t))};function o(){}var s,u={},l=t("./util");s=l.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},l.notEnumerableProp(C,"_getDomain",s);var c=t("./es5"),f=t("./async"),h=new f;c.defineProperty(C,"_async",{value:h});var p=t("./errors"),d=C.TypeError=p.TypeError;C.RangeError=p.RangeError;var m=C.CancellationError=p.CancellationError;C.TimeoutError=p.TimeoutError,C.OperationalError=p.OperationalError,C.RejectionError=p.OperationalError,C.AggregateError=p.AggregateError;var g=function(){},v={},y={},b=t("./thenables")(C,g),_=t("./promise_array")(C,g,b,a,o),x=t("./context")(C),w=x.create,S=t("./debuggability")(C,x),E=(S.CapturedTrace,t("./finally")(C,b,y)),k=t("./catch_filter")(y),T=t("./nodeback"),P=l.errorObj,M=l.tryCatch;function C(t){t!==g&&function(t,e){if(null==t||t.constructor!==C)throw new d("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!==typeof e)throw new d("expecting a function but got "+l.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function O(t){this.promise._resolveCallback(t)}function I(t){this.promise._rejectCallback(t,!1)}function N(t){var e=new C(g);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return C.prototype.toString=function(){return"[object Promise]"},C.prototype.caught=C.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if(!l.isObject(o))return a("Catch statement predicate: expecting an object but got "+l.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,k(r,t,this))}return this.then(void 0,t)},C.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},C.prototype.then=function(t,e){if(S.warnings()&&arguments.length>0&&"function"!==typeof t&&"function"!==typeof e){var n=".then() only accepts functions but was passed: "+l.classString(t);arguments.length>1&&(n+=", "+l.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},C.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},C.prototype.spread=function(t){return"function"!==typeof t?a("expecting a function but got "+l.classString(t)):this.all()._then(t,void 0,void 0,v,void 0)},C.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},C.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new _(this).promise()},C.prototype.error=function(t){return this.caught(l.originatesFromRejection,t)},C.getNewLibraryCopy=n.exports,C.is=function(t){return t instanceof C},C.fromNode=C.fromCallback=function(t){var e=new C(g);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=M(t)(T(e,n));return r===P&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},C.all=function(t){return new _(t).promise()},C.cast=function(t){var e=b(t);return e instanceof C||((e=new C(g))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},C.resolve=C.fulfilled=C.cast,C.reject=C.rejected=function(t){var e=new C(g);return e._captureStackTrace(),e._rejectCallback(t,!0),e},C.setScheduler=function(t){if("function"!==typeof t)throw new d("expecting a function but got "+l.classString(t));return h.setScheduler(t)},C.prototype._then=function(t,e,n,r,i){var a=void 0!==i,o=a?i:new C(g),u=this._target(),c=u._bitField;a||(o._propagateFrom(this,3),o._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&c)?this._boundValue():u===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,o));var f=s();if(0!==(50397184&c)){var p,d,v=u._settlePromiseCtx;0!==(33554432&c)?(d=u._rejectionHandler0,p=t):0!==(16777216&c)?(d=u._fulfillmentHandler0,p=e,u._unsetRejectionIsUnhandled()):(v=u._settlePromiseLateCancellationObserver,d=new m("late cancellation observer"),u._attachExtraTrace(d),p=e),h.invoke(v,u,{handler:null===f?p:"function"===typeof p&&l.domainBind(f,p),promise:o,receiver:r,value:d})}else u._addCallbacks(t,e,o,r,f);return o},C.prototype._length=function(){return 65535&this._bitField},C.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},C.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},C.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},C.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},C.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},C.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},C.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},C.prototype._isFinal=function(){return(4194304&this._bitField)>0},C.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},C.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},C.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},C.prototype._setAsyncGuaranteed=function(){h.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},C.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==u)return void 0===e&&this._isBound()?this._boundValue():e},C.prototype._promiseAt=function(t){return this[4*t-4+2]},C.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},C.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},C.prototype._boundValue=function(){},C.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=u),this._addCallbacks(e,n,r,i,null)},C.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),a=t._receiverAt(e);void 0===a&&(a=u),this._addCallbacks(n,r,i,a,null)},C.prototype._addCallbacks=function(t,e,n,r,i){var a=this._length();if(a>=65531&&(a=0,this._setLength(0)),0===a)this._promise0=n,this._receiver0=r,"function"===typeof t&&(this._fulfillmentHandler0=null===i?t:l.domainBind(i,t)),"function"===typeof e&&(this._rejectionHandler0=null===i?e:l.domainBind(i,e));else{var o=4*a-4;this[o+2]=n,this[o+3]=r,"function"===typeof t&&(this[o+0]=null===i?t:l.domainBind(i,t)),"function"===typeof e&&(this[o+1]=null===i?e:l.domainBind(i,e))}return this._setLength(a+1),a},C.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},C.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(r(),!1);var n=b(t,this);if(!(n instanceof C))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var a=i._bitField;if(0===(50397184&a)){var o=this._length();o>0&&i._migrateCallback0(this);for(var s=1;s<o;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(i)}else if(0!==(33554432&a))this._fulfill(i._value());else if(0!==(16777216&a))this._reject(i._reason());else{var u=new m("late cancellation observer");i._attachExtraTrace(u),this._reject(u)}}else this._reject(r())}},C.prototype._rejectCallback=function(t,e,n){var r=l.ensureErrorObject(t),i=r===t;if(!i&&!n&&S.warnings()){var a="a promise was rejected with a non-error: "+l.classString(t);this._warn(a,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},C.prototype._resolveFromExecutor=function(t){if(t!==g){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},C.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){var a;r._pushContext(),e===v?n&&"number"===typeof n.length?a=M(t).apply(this._boundValue(),n):(a=P).e=new d("cannot .spread() a non-array: "+l.classString(n)):a=M(t).call(e,n);var o=r._popContext();0===(65536&(i=r._bitField))&&(a===y?r._reject(n):a===P?r._rejectCallback(a.e,!1):(S.checkForgottenReturns(a,o,"",r,this),r._resolveCallback(a)))}},C.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},C.prototype._followee=function(){return this._rejectionHandler0},C.prototype._setFollowee=function(t){this._rejectionHandler0=t},C.prototype._settlePromise=function(t,e,n,r){var a=t instanceof C,s=this._bitField,u=0!==(134217728&s);0!==(65536&s)?(a&&t._invokeInternalOnCancel(),n instanceof E&&n.isFinallyHandler()?(n.cancelPromise=t,M(e).call(n,r)===P&&t._reject(P.e)):e===i?t._fulfill(i.call(n)):n instanceof o?n._promiseCancelled(t):a||t instanceof _?t._cancel():n.cancel()):"function"===typeof e?a?(u&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof o?n._isResolved()||(0!==(33554432&s)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):a&&(u&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(r):t._reject(r))},C.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"===typeof e?n instanceof C?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof C&&n._reject(i)},C.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},C.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},C.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},C.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():h.settlePromises(this),this._dereferenceTrace())}},C.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return h.fatalError(t,l.isNode);(65535&e)>0?h.settlePromises(this):this._ensurePossibleRejectionHandled()}},C.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,a,e)}},C.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),a=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,a,e)}},C.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},C.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},C.defer=C.pending=function(){return S.deprecated("Promise.defer","new Promise"),{promise:new C(g),resolve:O,reject:I}},l.notEnumerableProp(C,"_makeSelfResolutionError",r),t("./method")(C,g,b,a,S),t("./bind")(C,g,b,S),t("./cancel")(C,_,a,S),t("./direct_resolve")(C),t("./synchronous_inspection")(C),t("./join")(C,_,b,g,h,s),C.Promise=C,C.version="3.5.2",t("./map.js")(C,_,a,b,g,S),t("./call_get.js")(C),t("./using.js")(C,a,b,w,g,S),t("./timers.js")(C,g,S),t("./generators.js")(C,a,g,b,o,S),t("./nodeify.js")(C),t("./promisify.js")(C,g),t("./props.js")(C,_,b,a),t("./race.js")(C,g,b,a),t("./reduce.js")(C,_,a,b,g,S),t("./settle.js")(C,_,S),t("./some.js")(C,_,a),t("./filter.js")(C,g),t("./each.js")(C,g),t("./any.js")(C),l.toFastProperties(C),l.toFastProperties(C.prototype),N({a:1}),N({b:2}),N({c:3}),N(1),N(function(){}),N(void 0),N(!1),N(new C(g)),S.setBounds(f.firstLineError,l.lastLineError),C}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,a){var o=t("./util");o.isArray;function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return o.inherits(s,a),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,a){var s=r(this._values,this._promise);if(s instanceof e){var u=(s=s._target())._bitField;if(this._values=s,0===(50397184&u))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,a);if(0===(33554432&u))return 0!==(16777216&u)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=o.asArray(s)))0!==s.length?this._iterate(s):-5===a?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(a));else{var l=i("expecting an array or an iterable object but got "+o.classString(s)).reason();this._promise._rejectCallback(l,!1)}},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,a=!1,o=null,s=0;s<n;++s){var u=r(t[s],i);o=u instanceof e?(u=u._target())._bitField:null,a?null!==o&&u.suppressUnhandledRejections():null!==o?0===(50397184&o)?(u._proxy(this,s),this._values[s]=u):a=0!==(33554432&o)?this._promiseFulfilled(u._value(),s):0!==(16777216&o)?this._promiseRejected(u._reason(),s):this._promiseCancelled(s):a=this._promiseFulfilled(u,s)}a||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var r={},a=t("./util"),o=t("./nodeback"),s=a.withAppended,u=a.maybeWrapAsError,l=a.canEvaluate,c=t("./errors").TypeError,f={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),p=function(t){return a.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function d(t){return!h.test(t)}function m(t){try{return!0===t.__isPromisified__}catch(i){return!1}}function g(t,e,n){var r=a.getDataPropertyOrDefault(t,e+n,f);return!!r&&m(r)}function v(t,e,n,r){for(var i=a.inheritedDataKeys(t),o=[],s=0;s<i.length;++s){var u=i[s],l=t[u],f=r===p||p(u,l,t);"function"!==typeof l||m(l)||g(t,u,e)||!r(u,l,t,f)||o.push(u,l)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var a=i.replace(n,""),o=0;o<t.length;o+=2)if(t[o]===a)throw new c("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(o,e,n),o}var y=function(t){return t.replace(/([$])/,"\\$")};var b=l?void 0:function(t,l,c,f,h,p){var d=function(){return this}(),m=t;function g(){var a=l;l===r&&(a=this);var c=new e(n);c._captureStackTrace();var f="string"===typeof m&&this!==d?this[m]:t,h=o(c,p);try{f.apply(a,s(arguments,h))}catch(i){c._rejectCallback(u(i),!0,!0)}return c._isFateSealed()||c._setAsyncGuaranteed(),c}return"string"===typeof m&&(t=f),a.notEnumerableProp(g,"__isPromisified__",!0),g};function _(t,e,n,i,o){for(var s=new RegExp(y(e)+"$"),u=v(t,e,s,n),l=0,c=u.length;l<c;l+=2){var f=u[l],h=u[l+1],p=f+e;if(i===b)t[p]=b(f,r,f,h,e,o);else{var d=i(h,function(){return b(f,r,f,h,e,o)});a.notEnumerableProp(d,"__isPromisified__",!0),t[p]=d}}return a.toFastProperties(t),t}e.promisify=function(t,e){if("function"!==typeof t)throw new c("expecting a function but got "+a.classString(t));if(m(t))return t;var n=function(t,e,n){return b(t,e,void 0,t,null,n)}(t,void 0===(e=Object(e)).context?r:e.context,!!e.multiArgs);return a.copyDescriptors(t,n,d),n},e.promisifyAll=function(t,e){if("function"!==typeof t&&"object"!==typeof t)throw new c("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!==typeof r&&(r="Async");var i=e.filter;"function"!==typeof i&&(i=p);var o=e.promisifier;if("function"!==typeof o&&(o=b),!a.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=a.inheritedDataKeys(t),u=0;u<s.length;++u){var l=t[s[u]];"constructor"!==s[u]&&a.isClass(l)&&(_(l.prototype,r,i,o,n),_(l,r,i,o,n))}return _(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var a,o=t("./util"),s=o.isObject,u=t("./es5");"function"===typeof Map&&(a=Map);var l=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function c(t){var e,n=!1;if(void 0!==a&&t instanceof a)e=l(t),n=!0;else{var r=u.keys(t),i=r.length;e=new Array(2*i);for(var o=0;o<i;++o){var s=r[o];e[o]=t[s],e[o+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function f(t){var n,a=r(t);return s(a)?(n=a instanceof e?a._then(e.props,void 0,void 0,void 0,void 0):new c(a).promise(),a instanceof e&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}o.inherits(c,n),c.prototype._init=function(){},c.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new a,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e}(this._values);else{n={};for(var r=this.length(),i=0,o=this.length();i<o;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},c.prototype.shouldCopyValues=function(){return!1},c.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return f(this)},e.props=function(t){return f(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var a=this._capacity-1;this[i+0&a]=t,this[i+1&a]=e,this[i+2&a]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,r,i){for(var a=0;a<i;++a)n[a+r]=t[a+e],t[a+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var a=t("./util"),o=function(t){return t.then(function(e){return s(e,t)})};function s(t,s){var u=r(t);if(u instanceof e)return o(u);if(null===(t=a.asArray(t)))return i("expecting an array or an iterable object but got "+a.classString(t));var l=new e(n);void 0!==s&&l._propagateFrom(s,3);for(var c=l._fulfill,f=l._reject,h=0,p=t.length;h<p;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(c,f,void 0,l,null)}return l}e.race=function(t){return s(t,void 0)},e.prototype.race=function(){return s(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,a,o){var s=e._getDomain,u=t("./util"),l=u.tryCatch;function c(t,n,r,i){this.constructor$(t);var o=s();this._fn=null===o?n:u.domainBind(o,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===a?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function f(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function h(t,e,n,i){return"function"!==typeof e?r("expecting a function but got "+u.classString(e)):new c(t,e,n,i).promise()}function p(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(d,void 0,void 0,this,void 0)):d.call(this,n)}function d(t){var n,r=this.array,i=r._promise,a=l(r._fn);i._pushContext(),(n=void 0!==r._eachValues?a.call(i._boundValue(),t,this.index,this.length):a.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var s=i._popContext();return o.checkForgottenReturns(n,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}u.inherits(c,n),c.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==a&&this._eachValues.push(t)},c.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},c.prototype._init=function(){},c.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},c.prototype.shouldCopyValues=function(){return!1},c.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},c.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},c.prototype._iterate=function(t){var n,r;this._values=t;var i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var a={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(p,void 0,void 0,a,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(f,f,void 0,n,this)},e.prototype.reduce=function(t,e){return h(this,t,e,null)},e.reduce=function(t,e,n,r){return h(t,e,n,r)}}},{"./util":36}],29:[function(t,i,a){"use strict";var o,s=t("./util"),u=s.getNativePromise();if(s.isNode&&"undefined"===typeof MutationObserver){var l=n.setImmediate,c=e.nextTick;o=s.isRecentNode?function(t){l.call(n,t)}:function(t){c.call(e,t)}}else if("function"===typeof u&&"function"===typeof u.resolve){var f=u.resolve();o=function(t){f.then(t)}}else o="undefined"===typeof MutationObserver||"undefined"!==typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!==typeof r?function(t){r(t)}:"undefined"!==typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div");new MutationObserver(function(){t.classList.toggle("foo"),n=!1}).observe(r,e);return function(i){var a=new MutationObserver(function(){a.disconnect(),i()});a.observe(t,e),n||(n=!0,r.classList.toggle("foo"))}}();i.exports=o},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=e.PromiseInspection;function a(t){this.constructor$(t)}t("./util").inherits(a,n),a.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},a.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},a.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new a(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),a=t("./errors").RangeError,o=t("./errors").AggregateError,s=i.isArray,u={};function l(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function c(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new l(t),i=n.promise();return n.setHowMany(e),n.init(),i}i.inherits(l,n),l.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},l.prototype.init=function(){this._initialized=!0,this._init()},l.prototype.setUnwrap=function(){this._unwrap=!0},l.prototype.howMany=function(){return this._howMany},l.prototype.setHowMany=function(t){this._howMany=t},l.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},l.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},l.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(u),this._checkOutcome())},l.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new o,e=this.length();e<this._values.length;++e)this._values[e]!==u&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},l.prototype._fulfilled=function(){return this._totalResolved},l.prototype._rejected=function(){return this._values.length-this.length()},l.prototype._addRejected=function(t){this._values.push(t)},l.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},l.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},l.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new a(e)},l.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return c(t,e)},e.prototype.some=function(t){return c(this,t)},e._SomePromiseArray=l}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},a=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},o=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return o.call(this._target())},t.prototype.isRejected=function(){return a.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util"),a=r.errorObj,o=r.isObject;var s={}.hasOwnProperty;return function(t,u){if(o(t)){if(t instanceof e)return t;var l=function(t){try{return function(t){return t.then}(t)}catch(i){return a.e=i,a}}(t);if(l===a){u&&u._pushContext();var c=e.reject(l.e);return u&&u._popContext(),c}if("function"===typeof l)return function(t){try{return s.call(t,"_promise0")}catch(i){return!1}}(t)?(c=new e(n),t._then(c._fulfill,c._reject,void 0,c,null),c):function(t,i,o){var s=new e(n),u=s;o&&o._pushContext(),s._captureStackTrace(),o&&o._popContext();var l=!0,c=r.tryCatch(i).call(t,function(t){s&&(s._resolveCallback(t),s=null)},function(t){s&&(s._rejectCallback(t,l,!0),s=null)});return l=!1,s&&c===a&&(s._rejectCallback(c.e,!0,!0),s=null),u}(t,l,u)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),a=e.TimeoutError;function o(t){this.handle=t}o.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(t){return u(+this).thenReturn(t)},u=e.delay=function(t,i){var a,u;return void 0!==i?(a=e.resolve(i)._then(s,null,null,t,void 0),r.cancellation()&&i instanceof e&&a._setOnCancel(i)):(a=new e(n),u=setTimeout(function(){a._fulfill()},+t),r.cancellation()&&a._setOnCancel(new o(u)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};e.prototype.delay=function(t){return u(t,this)};function l(t){return clearTimeout(this.handle),t}function c(t){throw clearTimeout(this.handle),t}e.prototype.timeout=function(t,e){var n,s;t=+t;var u=new o(setTimeout(function(){n.isPending()&&function(t,e,n){var r;r="string"!==typeof e?e instanceof Error?e:new a("operation timed out"):new a(e),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,s)},t));return r.cancellation()?(s=this.then(),(n=s._then(l,c,void 0,u,void 0))._setOnCancel(u)):n=this._then(l,c,void 0,u,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,a,o,s){var u=t("./util"),l=t("./errors").TypeError,c=t("./util").inherits,f=u.errorObj,h=u.tryCatch,p={};function d(t){setTimeout(function(){throw t},0)}function m(t,n){var a=0,s=t.length,u=new e(o);return function o(){if(a>=s)return u._fulfill();var l=function(t){var e=r(t);return e!==t&&"function"===typeof t._isDisposable&&"function"===typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[a++]);if(l instanceof e&&l._isDisposable()){try{l=r(l._getDisposer().tryDispose(n),t.promise)}catch(i){return d(i)}if(l instanceof e)return l._then(o,d,null,null,null)}o()}(),u}function g(t,e,n){this._data=t,this._promise=e,this._context=n}function v(t,e,n){this.constructor$(t,e,n)}function y(t){return g.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function b(t){this.length=t,this.promise=null,this[t-1]=null}g.prototype.data=function(){return this._data},g.prototype.promise=function(){return this._promise},g.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():p},g.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==p?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},g.isDisposer=function(t){return null!=t&&"function"===typeof t.resource&&"function"===typeof t.tryDispose},c(v,g),v.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},b.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i,a=arguments[t-1];if("function"!==typeof a)return n("expecting a function but got "+u.classString(a));var o=!0;2===t&&Array.isArray(arguments[0])?(t=(i=arguments[0]).length,o=!1):(i=arguments,t--);for(var l=new b(t),c=0;c<t;++c){var p=i[c];if(g.isDisposer(p)){var d=p;(p=p.promise())._setDisposable(d)}else{var v=r(p);v instanceof e&&(p=v._then(y,null,null,{resources:l,index:c},void 0))}l[c]=p}var _=new Array(l.length);for(c=0;c<_.length;++c)_[c]=e.resolve(l[c]).reflect();var x=e.all(_).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return f.e=n.error(),f;if(!n.isFulfilled())return void x.cancel();t[e]=n.value()}w._pushContext(),a=h(a);var r=o?a.apply(void 0,t):a(t),i=w._popContext();return s.checkForgottenReturns(r,i,"Promise.using",w),r}),w=x.lastly(function(){var t=new e.PromiseInspection(x);return m(l,t)});return l.promise=w,w._setOnCancel(l),w},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"===typeof t)return new v(t,this,a());throw new l}}},{"./errors":12,"./util":36}],36:[function(t,r,a){"use strict";var o=t("./es5"),s="undefined"==typeof navigator,u={e:{}},l,c="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n?n:void 0!==this?this:null;function f(){try{var t=l;return l=null,t.apply(this,arguments)}catch(i){return u.e=i,u}}function h(t){return l=t,f}var p=function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype};function d(t){return null==t||!0===t||!1===t||"string"===typeof t||"number"===typeof t}function m(t){return"function"===typeof t||"object"===typeof t&&null!==t}function g(t){return d(t)?new Error(M(t)):t}function v(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function y(t,e,n){if(!o.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function b(t,e,n){if(d(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return o.defineProperty(t,e,r),t}function _(t){throw t}var x=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(o.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],a=Object.create(null);null!=t&&!e(t);){var s;try{s=n(t)}catch(i){return r}for(var u=0;u<s.length;++u){var l=s[u];if(!a[l]){a[l]=!0;var c=Object.getOwnPropertyDescriptor(t,l);null!=c&&null==c.get&&null==c.set&&r.push(l)}}t=o.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var a in n)if(r.call(n,a))i.push(a);else{for(var o=0;o<t.length;++o)if(r.call(t[o],a))continue t;i.push(a)}return i}}(),w=/this\s*\.\s*\S+\s*=/;function S(t){try{if("function"===typeof t){var e=o.names(t.prototype),n=o.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),a=w.test(t+"")&&o.names(t).length>0;if(n||r||a)return!0}return!1}catch(i){return!1}}function E(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.foo}return r(),r(),t}var k=/^[a-z$_][a-z$_0-9]*$/i;function T(t){return k.test(t)}function P(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function M(t){try{return t+""}catch(i){return"[no string representation]"}}function C(t){return t instanceof Error||null!==t&&"object"===typeof t&&"string"===typeof t.message&&"string"===typeof t.name}function O(t){try{b(t,"isOperational",!0)}catch(e){}}function I(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function N(t){return C(t)&&o.propertyIsWritable(t,"stack")}var A="stack"in new Error?function(t){return N(t)?t:new Error(M(t))}:function(t){if(N(t))return t;try{throw new Error(M(t))}catch(e){return e}};function R(t){return{}.toString.call(t)}function D(t,e,n){for(var r=o.names(t),i=0;i<r.length;++i){var a=r[i];if(n(a))try{o.defineProperty(e,a,o.getDescriptor(t,a))}catch(s){}}}var j=function(t){return o.isArray(t)?t:null};if("undefined"!==typeof Symbol&&Symbol.iterator){var L="function"===typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};j=function(t){return o.isArray(t)?t:null!=t&&"function"===typeof t[Symbol.iterator]?L(t):null}}var F="undefined"!==typeof e&&"[object process]"===R(e).toLowerCase(),z="undefined"!==typeof e&&!0;function B(t){return z?Object({NODE_ENV:"production",PUBLIC_URL:"/Digit-Recognition-WebApp"})[t]:void 0}function U(){if("function"===typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(i){}}function V(t,e){return t.bind(e)}var q={isClass:S,isIdentifier:T,inheritedDataKeys:x,getDataPropertyOrDefault:y,thrower:_,isArray:o.isArray,asArray:j,notEnumerableProp:b,isPrimitive:d,isObject:m,isError:C,canEvaluate:s,errorObj:u,tryCatch:h,inherits:p,withAppended:v,maybeWrapAsError:g,toFastProperties:E,filledRange:P,toString:M,canAttachTrace:N,ensureErrorObject:A,originatesFromRejection:I,markAsOriginatingFromRejection:O,classString:R,copyDescriptors:D,hasDevTools:"undefined"!==typeof chrome&&chrome&&"function"===typeof chrome.loadTimes,isNode:F,hasEnvVariables:z,env:B,global:c,getNativePromise:U,domainBind:V};q.isRecentNode=q.isNode&&function(){var t=e.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),q.isNode&&q.toFastProperties(e);try{throw new Error}catch(i){q.lastLineError=i}r.exports=q},{"./es5":13}]},{},[4])(4)},t.exports=i(),"undefined"!==typeof window&&null!==window?window.P=window.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(39),n(26),n(194).setImmediate)},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,a={},o=!1,s=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){c(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&c(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){c(t.data)},r=function(e){t.port2.postMessage(e)}}():s&&"onreadystatechange"in s.createElement("script")?function(){var t=s.documentElement;r=function(e){var n=s.createElement("script");n.onreadystatechange=function(){c(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(c,0,t)},u.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return a[i]=o,r(i),i++},u.clearImmediate=l}function l(t){delete a[t]}function c(t){if(o)setTimeout(c,0,t);else{var e=a[t];if(e){o=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{l(t),o=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n(26),n(39))},function(t,e,n){t.exports=n(659)},function(t,e,n){"use strict";var r=n(40),i=n(268),a=n(660),o=n(195);function s(t){var e=new a(t),n=i(a.prototype.request,e);return r.extend(n,a.prototype,e),r.extend(n,e),n}var u=s(o);u.Axios=a,u.create=function(t){return s(r.merge(o,t))},u.Cancel=n(273),u.CancelToken=n(674),u.isCancel=n(272),u.all=function(t){return Promise.all(t)},u.spread=n(675),t.exports=u,t.exports.default=u},function(t,e,n){"use strict";var r=n(195),i=n(40),a=n(669),o=n(670);function s(t){this.defaults=t,this.interceptors={request:new a,response:new a}}s.prototype.request=function(t){"string"===typeof t&&(t=i.merge({url:arguments[0]},arguments[1])),(t=i.merge(r,this.defaults,{method:"get"},t)).method=t.method.toLowerCase();var e=[o,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});e.length;)n=n.then(e.shift(),e.shift());return n},i.forEach(["delete","get","head","options"],function(t){s.prototype[t]=function(e,n){return this.request(i.merge(n||{},{method:t,url:e}))}}),i.forEach(["post","put","patch"],function(t){s.prototype[t]=function(e,n,r){return this.request(i.merge(r||{},{method:t,url:e,data:n}))}}),t.exports=s},function(t,e,n){"use strict";var r=n(40);t.exports=function(t,e){r.forEach(t,function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])})}},function(t,e,n){"use strict";var r=n(271);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t}},function(t,e,n){"use strict";var r=n(40);function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var a;if(n)a=n(e);else if(r.isURLSearchParams(e))a=e.toString();else{var o=[];r.forEach(e,function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)&&(e+="[]"),r.isArray(t)||(t=[t]),r.forEach(t,function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(i(e)+"="+i(t))}))}),a=o.join("&")}return a&&(t+=(-1===t.indexOf("?")?"?":"&")+a),t}},function(t,e,n){"use strict";var r=n(40),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,a,o={};return t?(r.forEach(t.split("\n"),function(t){if(a=t.indexOf(":"),e=r.trim(t.substr(0,a)).toLowerCase(),n=r.trim(t.substr(a+1)),e){if(o[e]&&i.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}}),o):o}},function(t,e,n){"use strict";var r=n(40);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function i(){this.message="String contains an invalid character"}i.prototype=new Error,i.prototype.code=5,i.prototype.name="InvalidCharacterError",t.exports=function(t){for(var e,n,a=String(t),o="",s=0,u=r;a.charAt(0|s)||(u="=",s%1);o+=u.charAt(63&e>>8-s%1*8)){if((n=a.charCodeAt(s+=.75))>255)throw new i;e=e<<8|n}return o}},function(t,e,n){"use strict";var r=n(40);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,a,o){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(40);function i(){this.handlers=[]}i.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=i},function(t,e,n){"use strict";var r=n(40),i=n(671),a=n(272),o=n(195),s=n(672),u=n(673);function l(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return l(t),t.baseURL&&!s(t.url)&&(t.url=u(t.baseURL,t.url)),t.headers=t.headers||{},t.data=i(t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),r.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]}),(t.adapter||o.adapter)(t).then(function(e){return l(t),e.data=i(e.data,e.headers,t.transformResponse),e},function(e){return a(e)||(l(t),e&&e.response&&(e.response.data=i(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},function(t,e,n){"use strict";var r=n(40);t.exports=function(t,e,n){return r.forEach(n,function(n){t=n(t,e)}),t}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(273);function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new r(t),e(n.reason))})}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i(function(e){t=e}),cancel:t}},t.exports=i},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){(function(e){(function(){var n,r,i,a,o,s;"undefined"!==typeof performance&&null!==performance&&performance.now?t.exports=function(){return performance.now()}:"undefined"!==typeof e&&null!==e&&e.hrtime?(t.exports=function(){return(n()-o)/1e6},r=e.hrtime,a=(n=function(){var t;return 1e9*(t=r())[0]+t[1]})(),s=1e9*e.uptime(),o=a-s):Date.now?(t.exports=function(){return Date.now()-i},i=Date.now()):(t.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}).call(this,n(39))},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function a(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,n,r,a){if("function"!==typeof n)throw new TypeError("The listener must be a function");var s=new o(n,r||t,a),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],s]:t._events[u].push(s):(t._events[u]=s,t._eventsCount++),t}function u(t,e){0===--t._eventsCount?t._events=new a:delete t._events[e]}function l(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),(new a).__proto__||(i=!1)),l.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},l.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,a=n.length,o=new Array(a);r<a;r++)o[r]=n[r].fn;return o},l.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},l.prototype.emit=function(t,e,n,r,a,o){var s=i?i+t:t;if(!this._events[s])return!1;var u,l,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,n),!0;case 4:return c.fn.call(c.context,e,n,r),!0;case 5:return c.fn.call(c.context,e,n,r,a),!0;case 6:return c.fn.call(c.context,e,n,r,a,o),!0}for(l=1,u=new Array(f-1);l<f;l++)u[l-1]=arguments[l];c.fn.apply(c.context,u)}else{var h,p=c.length;for(l=0;l<p;l++)switch(c[l].once&&this.removeListener(t,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,e);break;case 3:c[l].fn.call(c[l].context,e,n);break;case 4:c[l].fn.call(c[l].context,e,n,r);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];c[l].fn.apply(c[l].context,u)}}return!0},l.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,n,r){var a=i?i+t:t;if(!this._events[a])return this;if(!e)return u(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||r&&!o.once||n&&o.context!==n||u(this,a);else{for(var s=0,l=[],c=o.length;s<c;s++)(o[s].fn!==e||r&&!o[s].once||n&&o[s].context!==n)&&l.push(o[s]);l.length?this._events[a]=1===l.length?l[0]:l:u(this,a)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=i,l.EventEmitter=l,t.exports=l},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=f(n(137)),l=f(n(11)),c=f(n(8));function f(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="InputLayer";var i=n.shape,s=void 0===i?[]:i;return t.shape=n.batch_input_shape&&n.batch_input_shape.length?n.batch_input_shape.slice(1):s,t.description="shape: ".concat(JSON.stringify(t.shape)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.inputShape=t.tensor.shape,(0,u.default)(this.inputShape,this.shape)||this.throwError("input tensor shape ".concat(t.tensor.shape," does not match specified shape ").concat(this.shape,".")),this.output=new c.default(t.tensor.data,t.tensor.shape)}},{key:"_callGPU",value:function(t){(t.glTexture||t.glTextureFragments)&&(t.is2DReshaped||t.is2DSquareReshaped)?this.inputShape=t.originalShape:this.inputShape=t.tensor.shape,(0,u.default)(this.inputShape,this.shape)||this.throwError("input tensor shape ".concat(t.tensor.shape," does not match specified shape ").concat(this.shape,".")),t.glTexture||(t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}):t.tensor.shape.length>2&&(t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}))),this.output=t}}]),e}(l.default);e.default=h},function(t,e){function n(t){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"===typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,n){var r=n(685),i=n(263),a=n(265);t.exports=function(t){return function(e,n,o){return o&&"number"!=typeof o&&i(e,n,o)&&(n=o=void 0),e=a(e),void 0===n?(n=e,e=0):n=a(n),o=void 0===o?e<n?1:-1:a(o),r(e,n,o,t)}}},function(t,e){var n=Math.ceil,r=Math.max;t.exports=function(t,e,i,a){for(var o=-1,s=r(n((e-t)/(i||1)),0),u=Array(s);s--;)u[a?s:++o]=t,t+=i;return u}},function(t,e,n){"use strict";t.exports=function(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}},function(t,e,n){"use strict";var r=n(688);t.exports=function(t){var e=["'use strict'","var CACHED={}"],n=[],i=t.funcName+"_cwise_thunk";e.push(["return function ",i,"(",t.shimArgs.join(","),"){"].join(""));for(var a=[],o=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],u=[],l=[],c=0;c<t.arrayArgs.length;++c){var f=t.arrayArgs[c];n.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),a.push("t"+f),a.push("r"+f),o.push("t"+f),o.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),c>0&&(u.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[c]))),l.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[c])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),c=0;c<t.scalarArgs.length;++c)s.push("scalar"+t.scalarArgs[c]);return n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(r.bind(void 0,t))}},function(t,e,n){"use strict";var r=n(275);function i(t,e,n){var r,i,a=t.length,o=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],l=[],c=0,f=0;for(r=0;r<a;++r)l.push(["i",r,"=0"].join(""));for(i=0;i<o;++i)for(r=0;r<a;++r)f=c,c=t[r],0===r?l.push(["d",i,"s",r,"=t",i,"p",c].join("")):l.push(["d",i,"s",r,"=(t",i,"p",c,"-s",f,"*t",i,"p",f,")"].join(""));for(l.length>0&&u.push("var "+l.join(",")),r=a-1;r>=0;--r)c=t[r],u.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(u.push(n),r=0;r<a;++r){for(f=c,c=t[r],i=0;i<o;++i)u.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",c,"]"].join(""))),u.push("}")}return u.join("\n")}function a(t,e,n){for(var r=t.body,i=[],a=[],o=0;o<t.args.length;++o){var s=t.args[o];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),l="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o);c=e.offsetArgs[f].array,l="+q"+f;case"array":l="p"+c+l;var h="l"+o,p="a"+c;if(0===e.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(i.push(["var ",h,"=",p,".get(",l,")"].join("")),r=r.replace(u,h),a.push([p,".set(",l,",",h,")"].join(""))):r=r.replace(u,[p,".get(",l,")"].join("")):r=r.replace(u,[p,"[",l,"]"].join("")):"generic"===n[c]?(i.push(["var ",h,"=",p,".get(",l,")"].join("")),r=r.replace(u,h),s.lvalue&&a.push([p,".set(",l,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",l,"]"].join("")),r=r.replace(u,h),s.lvalue&&a.push([p,"[",l,"]=",h].join("")));else{for(var d=[s.name],m=[l],g=0;g<Math.abs(e.arrayBlockIndices[c]);g++)d.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+c+"b"+g);if(u=new RegExp(d.join(""),"g"),l=m.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(u,[p,"[",l,"]"].join(""))}break;case"scalar":r=r.replace(u,"Y"+e.scalarArgs.indexOf(o));break;case"index":r=r.replace(u,"index");break;case"shape":r=r.replace(u,"shape")}}}return[i.join("\n"),r,a.join("\n")].join("\n").trim()}t.exports=function(t,e){for(var n=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,o=new Array(t.arrayArgs.length),s=new Array(t.arrayArgs.length),u=0;u<t.arrayArgs.length;++u)s[u]=e[2*u],o[u]=e[2*u+1];var l=[],c=[],f=[],h=[],p=[];for(u=0;u<t.arrayArgs.length;++u){t.arrayBlockIndices[u]<0?(f.push(0),h.push(n),l.push(n),c.push(n+t.arrayBlockIndices[u])):(f.push(t.arrayBlockIndices[u]),h.push(t.arrayBlockIndices[u]+n),l.push(0),c.push(t.arrayBlockIndices[u]));for(var d=[],m=0;m<o[u].length;m++)f[u]<=o[u][m]&&o[u][m]<h[u]&&d.push(o[u][m]-f[u]);p.push(d)}var g=["SS"],v=["'use strict'"],y=[];for(m=0;m<n;++m)y.push(["s",m,"=SS[",m,"]"].join(""));for(u=0;u<t.arrayArgs.length;++u){for(g.push("a"+u),g.push("t"+u),g.push("p"+u),m=0;m<n;++m)y.push(["t",u,"p",m,"=t",u,"[",f[u]+m,"]"].join(""));for(m=0;m<Math.abs(t.arrayBlockIndices[u]);++m)y.push(["t",u,"b",m,"=t",u,"[",l[u]+m,"]"].join(""))}for(u=0;u<t.scalarArgs.length;++u)g.push("Y"+u);if(t.shapeArgs.length>0&&y.push("shape=SS.slice(0)"),t.indexArgs.length>0){var b=new Array(n);for(u=0;u<n;++u)b[u]="0";y.push(["index=[",b.join(","),"]"].join(""))}for(u=0;u<t.offsetArgs.length;++u){var _=t.offsetArgs[u],x=[];for(m=0;m<_.offset.length;++m)0!==_.offset[m]&&(1===_.offset[m]?x.push(["t",_.array,"p",m].join("")):x.push([_.offset[m],"*t",_.array,"p",m].join("")));0===x.length?y.push("q"+u+"=0"):y.push(["q",u,"=",x.join("+")].join(""))}var w=r([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((y=y.concat(w)).length>0&&v.push("var "+y.join(",")),u=0;u<t.arrayArgs.length;++u)v.push("p"+u+"|=0");t.pre.body.length>3&&v.push(a(t.pre,t,s));var S=a(t.body,t,s),E=function(t){for(var e=0,n=t[0].length;e<n;){for(var r=1;r<t.length;++r)if(t[r][e]!==t[0][e])return e;++e}return e}(p);E<n?v.push(function(t,e,n,r){for(var a=e.length,o=n.arrayArgs.length,s=n.blockSize,u=n.indexArgs.length>0,l=[],c=0;c<o;++c)l.push(["var offset",c,"=p",c].join(""));for(c=t;c<a;++c)l.push(["for(var j"+c+"=SS[",e[c],"]|0;j",c,">0;){"].join("")),l.push(["if(j",c,"<",s,"){"].join("")),l.push(["s",e[c],"=j",c].join("")),l.push(["j",c,"=0"].join("")),l.push(["}else{s",e[c],"=",s].join("")),l.push(["j",c,"-=",s,"}"].join("")),u&&l.push(["index[",e[c],"]=j",c].join(""));for(c=0;c<o;++c){for(var f=["offset"+c],h=t;h<a;++h)f.push(["j",h,"*t",c,"p",e[h]].join(""));l.push(["p",c,"=(",f.join("+"),")"].join(""))}for(l.push(i(e,n,r)),c=t;c<a;++c)l.push("}");return l.join("\n")}(E,p[0],t,S)):v.push(i(p[0],t,S)),t.post.body.length>3&&v.push(a(t.post,t,s)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+v.join("\n")+"\n----------");var k=[t.funcName||"unnamed","_cwise_loop_",o[0].join("s"),"m",E,function(t){for(var e=new Array(t.length),n=!0,r=0;r<t.length;++r){var i=t[r],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?e[r]="u"+i.charAt(1)+a:e[r]=i.charAt(0)+a,r>0&&(n=n&&e[r]===e[r-1])}return n?e[0]:e.join("")}(s)].join("");return new Function(["function ",k,"(",g.join(","),"){",v.join("\n"),"} return ",k].join(""))()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"LeakyReLU",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"PReLU",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"ELU",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"ThresholdedReLU",{enumerable:!0,get:function(){return o.default}});var r=s(n(690)),i=s(n(703)),a=s(n(704)),o=s(n(705));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=n(48);function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform float alpha;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0) + alpha * min(v, 0.0);\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="LeakyReLU";var i=n.alpha,s=void 0===i?.3:i;return t.description="alpha: ".concat(s),t.alpha=s,t.gpu&&(t.program=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.output=t,(0,f.relu)(this.output,{alpha:this.alpha})}},{key:"_callGPU",value:function(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new l.default([],t.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),t.is1D?this.output.is1D=t.is1D:(t.is2DReshaped||t.is2DSquareReshaped)&&(t.is2DReshaped?this.output.is2DReshaped=t.is2DReshaped:t.is2DSquareReshaped&&(this.output.is2DSquareReshaped=t.is2DSquareReshaped),this.output.originalShape=t.originalShape,this.output.indicesForReshaped=t.indicesForReshaped)),c.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.alpha,type:"float",name:"alpha"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(1===t.tensor.shape.length){var e=i.default.sup(t.tensor);i.default.subseq(t.tensor,e),i.default.expeq(t.tensor);var n=i.default.sum(t.tensor);i.default.divseq(t.tensor,n)}else{if(2!==t.tensor.shape.length)throw new Error("[activations.softmax] tensor shape ".concat(t.tensor.shape," not supported."));for(var r=0;r<t.tensor.shape[0];r++){var a=i.default.sup(t.tensor.pick(r,null));i.default.subseq(t.tensor.pick(r,null),a),i.default.expeq(t.tensor.pick(r,null));var o=i.default.sum(t.tensor.pick(r,null));i.default.divseq(t.tensor.pick(r,null),o)}}};var r,i=(r=n(12))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).alpha,n=void 0===e?1:e;i(t.tensor,n)};var i=(0,((r=n(28))&&r.__esModule?r:{default:r}).default)({args:["array","scalar"],body:function(t,e){t=Math.max(t,0)+e*(Math.exp(Math.min(t,0))-1)}})},function(t,e,n){"use strict";(function(e){var r=n(694),i=n(275),a=0;function o(t,e,n){this.name=t,this.lvalue=e,this.rvalue=n,this.count=0}function s(t,e,n,r){this.body=t,this.args=e,this.thisVars=n,this.localVars=r}t.exports=function(t){for(var n=["(",t,")()"].join(""),u=r.parse(n,{range:!0}),l="_inline_"+a+++"_",c=function(t){for(var e=t.body[0].expression.callee.params,n=new Array(e.length),r=0;r<e.length;++r)n[r]=e[r].name;return n}(u),f=new Array(c.length),h=0;h<c.length;++h)f[h]=new o([l,"arg",h,"_"].join(""),!1,!1);for(var p=new Array(n.length),d=(h=0,n.length);h<d;++h)p[h]=n.charAt(h);var m=[],g=[];function v(t,e){for(var n=t.range[0],r=t.range[1],i=n+1;i<r;++i)p[i]="";p[n]=e}var y,b=1,_=2;return function t(n,r){if(n.parent=r,"MemberExpression"===n.type)n.computed?(t(n.object,n),t(n.property,n)):"ThisExpression"===n.object.type?v(n,function(t){var e="this_"+t.replace(/\_/g,"__");return g.push(e),e}(n.property.name)):t(n.object,n);else{if("ThisExpression"===n.type)throw new Error("cwise-parser: Computed this is not allowed");if("Identifier"===n.type){var i=n.name,a=c.indexOf(i);if(a>=0){var o=f[a],s=function(t){return"AssignmentExpression"===t.parent.type&&t.parent.left===t?"="===t.parent.operator?b:b|_:"UpdateExpression"===t.parent.type?b|_:_}(n);s&b&&(o.lvalue=!0),s&_&&(o.rvalue=!0),++o.count,v(n,o.name)}else(function(t){if("eval"===t)throw new Error("cwise-parser: eval() not allowed");return"undefined"!==typeof window?t in window:"undefined"!==typeof e?t in e:"undefined"!==typeof self&&t in self})(i)||v(n,function(t){var e=l+t.replace(/\_/g,"__");return m.push(e),e}(i))}else if("Literal"===n.type)"string"===typeof n.value&&v(n,"'"+n.value.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'");else{if("WithStatement"===n.type)throw new Error("cwise-parser: with() statements not allowed");for(var u=Object.keys(n),h=0,p=u.length;h<p;++h)if("parent"!==u[h]){var d=n[u[h]];if(d)if(d instanceof Array)for(var y=0;y<d.length;++y)d[y]&&"string"===typeof d[y].type&&t(d[y],n);else"string"===typeof d.type&&t(d,n)}}}}(u.body[0].expression.callee.body,void 0),i(m),i(g),new s((y=u.body[0].expression.callee.body,p.slice(y.range[0],y.range[1]).join("")),f,g,m)}}).call(this,n(26))},function(t,e,n){var r,i,a;!function(n,o){"use strict";i=[e],void 0===(a="function"===typeof(r=function(t){var e,n,r,i,a,o,s,u,l,c,f,h,p,d,m,g,v,y;function b(t,e){if(!t)throw new Error("ASSERT: "+e)}function _(t){return t>=48&&t<=57}function x(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function w(t){return"01234567".indexOf(t)>=0}function S(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function E(t){return 10===t||13===t||8232===t||8233===t}function k(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&s.NonAsciiIdentifierStart.test(String.fromCharCode(t))}function T(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&s.NonAsciiIdentifierPart.test(String.fromCharCode(t))}function P(t){switch(t){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function M(t){return"eval"===t||"arguments"===t}function C(t,e,n,r,i){var a;b("number"===typeof n,"Comment must have valid position"),v.lastCommentStart>=n||(v.lastCommentStart=n,a={type:t,value:e},y.range&&(a.range=[n,r]),y.loc&&(a.loc=i),y.comments.push(a),y.attachComment&&(y.leadingComments.push(a),y.trailingComments.push(a)))}function O(t){var e,n,r,i;for(e=f-t,n={start:{line:h,column:f-p-t}};f<d;)if(r=l.charCodeAt(f),++f,E(r))return y.comments&&(i=l.slice(e+t,f-1),n.end={line:h,column:f-p-1},C("Line",i,e,f-1,n)),13===r&&10===l.charCodeAt(f)&&++f,++h,void(p=f);y.comments&&(i=l.slice(e+t,f),n.end={line:h,column:f-p},C("Line",i,e,f,n))}function I(){var t,e,n,r;for(y.comments&&(t=f-2,e={start:{line:h,column:f-p-2}});f<d;)if(E(n=l.charCodeAt(f)))13===n&&10===l.charCodeAt(f+1)&&++f,++h,p=++f,f>=d&&$({},o.UnexpectedToken,"ILLEGAL");else if(42===n){if(47===l.charCodeAt(f+1))return++f,++f,void(y.comments&&(r=l.slice(t+2,f-2),e.end={line:h,column:f-p},C("Block",r,t,f,e)));++f}else++f;$({},o.UnexpectedToken,"ILLEGAL")}function N(){var t,e;for(e=0===f;f<d;)if(S(t=l.charCodeAt(f)))++f;else if(E(t))++f,13===t&&10===l.charCodeAt(f)&&++f,++h,p=f,e=!0;else if(47===t)if(47===(t=l.charCodeAt(f+1)))++f,++f,O(2),e=!0;else{if(42!==t)break;++f,++f,I()}else if(e&&45===t){if(45!==l.charCodeAt(f+1)||62!==l.charCodeAt(f+2))break;f+=3,O(3)}else{if(60!==t)break;if("!--"!==l.slice(f+1,f+4))break;++f,++f,++f,++f,O(4)}}function A(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e){if(!(f<d&&x(l[f])))return"";r=l[f++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())}return String.fromCharCode(i)}function R(){var t,e;for(t=l.charCodeAt(f++),e=String.fromCharCode(t),92===t&&(117!==l.charCodeAt(f)&&$({},o.UnexpectedToken,"ILLEGAL"),++f,(t=A("u"))&&"\\"!==t&&k(t.charCodeAt(0))||$({},o.UnexpectedToken,"ILLEGAL"),e=t);f<d&&T(t=l.charCodeAt(f));)++f,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==l.charCodeAt(f)&&$({},o.UnexpectedToken,"ILLEGAL"),++f,(t=A("u"))&&"\\"!==t&&T(t.charCodeAt(0))||$({},o.UnexpectedToken,"ILLEGAL"),e+=t);return e}function D(){var t,n;return t=f,n=92===l.charCodeAt(f)?R():function(){var t,e;t=f++;for(;f<d;){if(92===(e=l.charCodeAt(f)))return f=t,R();if(!T(e))break;++f}return l.slice(t,f)}(),{type:1===n.length?e.Identifier:function(t){if(c&&P(t))return!0;switch(t.length){case 2:return"if"===t||"in"===t||"do"===t;case 3:return"var"===t||"for"===t||"new"===t||"try"===t||"let"===t;case 4:return"this"===t||"else"===t||"case"===t||"void"===t||"with"===t||"enum"===t;case 5:return"while"===t||"break"===t||"catch"===t||"throw"===t||"const"===t||"yield"===t||"class"===t||"super"===t;case 6:return"return"===t||"typeof"===t||"delete"===t||"switch"===t||"export"===t||"import"===t;case 7:return"default"===t||"finally"===t||"extends"===t;case 8:return"function"===t||"continue"===t||"debugger"===t;case 10:return"instanceof"===t;default:return!1}}(n)?e.Keyword:"null"===n?e.NullLiteral:"true"===n||"false"===n?e.BooleanLiteral:e.Identifier,value:n,lineNumber:h,lineStart:p,start:t,end:f}}function j(){var t,n,r,i,a=f,s=l.charCodeAt(f),u=l[f];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++f,y.tokenize&&(40===s?y.openParenToken=y.tokens.length:123===s&&(y.openCurlyToken=y.tokens.length)),{type:e.Punctuator,value:String.fromCharCode(s),lineNumber:h,lineStart:p,start:a,end:f};default:if(61===(t=l.charCodeAt(f+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return f+=2,{type:e.Punctuator,value:String.fromCharCode(s)+String.fromCharCode(t),lineNumber:h,lineStart:p,start:a,end:f};case 33:case 61:return f+=2,61===l.charCodeAt(f)&&++f,{type:e.Punctuator,value:l.slice(a,f),lineNumber:h,lineStart:p,start:a,end:f}}}return">>>="===(i=l.substr(f,4))?(f+=4,{type:e.Punctuator,value:i,lineNumber:h,lineStart:p,start:a,end:f}):">>>"===(r=i.substr(0,3))||"<<="===r||">>="===r?(f+=3,{type:e.Punctuator,value:r,lineNumber:h,lineStart:p,start:a,end:f}):(n=r.substr(0,2),u===n[1]&&"+-<>&|".indexOf(u)>=0||"=>"===n?(f+=2,{type:e.Punctuator,value:n,lineNumber:h,lineStart:p,start:a,end:f}):"<>=!+-*%&|^/".indexOf(u)>=0?(++f,{type:e.Punctuator,value:u,lineNumber:h,lineStart:p,start:a,end:f}):void $({},o.UnexpectedToken,"ILLEGAL"))}function L(){var t,n,r;if(b(_((r=l[f]).charCodeAt(0))||"."===r,"Numeric literal must start with a decimal digit or a decimal point"),n=f,t="","."!==r){if(t=l[f++],r=l[f],"0"===t){if("x"===r||"X"===r)return++f,function(t){var n="";for(;f<d&&x(l[f]);)n+=l[f++];0===n.length&&$({},o.UnexpectedToken,"ILLEGAL");k(l.charCodeAt(f))&&$({},o.UnexpectedToken,"ILLEGAL");return{type:e.NumericLiteral,value:parseInt("0x"+n,16),lineNumber:h,lineStart:p,start:t,end:f}}(n);if(w(r)&&function(){var t,e;for(t=f+1;t<d;++t){if("8"===(e=l[t])||"9"===e)return!1;if(!w(e))return!0}return!0}())return function(t){var n="0"+l[f++];for(;f<d&&w(l[f]);)n+=l[f++];(k(l.charCodeAt(f))||_(l.charCodeAt(f)))&&$({},o.UnexpectedToken,"ILLEGAL");return{type:e.NumericLiteral,value:parseInt(n,8),octal:!0,lineNumber:h,lineStart:p,start:t,end:f}}(n)}for(;_(l.charCodeAt(f));)t+=l[f++];r=l[f]}if("."===r){for(t+=l[f++];_(l.charCodeAt(f));)t+=l[f++];r=l[f]}if("e"===r||"E"===r)if(t+=l[f++],"+"!==(r=l[f])&&"-"!==r||(t+=l[f++]),_(l.charCodeAt(f)))for(;_(l.charCodeAt(f));)t+=l[f++];else $({},o.UnexpectedToken,"ILLEGAL");return k(l.charCodeAt(f))&&$({},o.UnexpectedToken,"ILLEGAL"),{type:e.NumericLiteral,value:parseFloat(t),lineNumber:h,lineStart:p,start:n,end:f}}function F(){var t,n,r,i;return g=null,N(),t=f,n=function(){var t,e,n,r;b("/"===(t=l[f]),"Regular expression literal must start with a slash"),e=l[f++],n=!1,r=!1;for(;f<d;)if(t=l[f++],e+=t,"\\"===t)E((t=l[f++]).charCodeAt(0))&&$({},o.UnterminatedRegExp),e+=t;else if(E(t.charCodeAt(0)))$({},o.UnterminatedRegExp);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}r||$({},o.UnterminatedRegExp);return{value:e.substr(1,e.length-2),literal:e}}(),r=function(){var t,e,n,r;e="",n="";for(;f<d&&T((t=l[f]).charCodeAt(0));)if(++f,"\\"===t&&f<d)if("u"===(t=l[f])){if(r=++f,t=A("u"))for(n+=t,e+="\\u";r<f;++r)e+=l[r];else f=r,n+="u",e+="\\u";K({},o.UnexpectedToken,"ILLEGAL")}else e+="\\",K({},o.UnexpectedToken,"ILLEGAL");else n+=t,e+=t;return{value:n,literal:e}}(),i=function(t,e){var n;try{n=new RegExp(t,e)}catch(r){$({},o.InvalidRegExp)}return n}(n.value,r.value),y.tokenize?{type:e.RegularExpression,value:i,lineNumber:h,lineStart:p,start:t,end:f}:{literal:n.literal+r.literal,value:i,start:t,end:f}}function z(){var t,e,n,r;return N(),t=f,e={start:{line:h,column:f-p}},n=F(),e.end={line:h,column:f-p},y.tokenize||(y.tokens.length>0&&(r=y.tokens[y.tokens.length-1]).range[0]===t&&"Punctuator"===r.type&&("/"!==r.value&&"/="!==r.value||y.tokens.pop()),y.tokens.push({type:"RegularExpression",value:n.literal,range:[t,f],loc:e})),n}function B(){var t;return N(),f>=d?{type:e.EOF,lineNumber:h,lineStart:p,start:f,end:f}:k(t=l.charCodeAt(f))?D():40===t||41===t||59===t?j():39===t||34===t?function(){var t,n,r,i,a,s,u,c,m="",g=!1;u=h,c=p,b("'"===(t=l[f])||'"'===t,"String literal must starts with a quote"),n=f,++f;for(;f<d;){if((r=l[f++])===t){t="";break}if("\\"===r)if((r=l[f++])&&E(r.charCodeAt(0)))++h,"\r"===r&&"\n"===l[f]&&++f,p=f;else switch(r){case"u":case"x":s=f,(a=A(r))?m+=a:(f=s,m+=r);break;case"n":m+="\n";break;case"r":m+="\r";break;case"t":m+="\t";break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:w(r)?(0!==(i="01234567".indexOf(r))&&(g=!0),f<d&&w(l[f])&&(g=!0,i=8*i+"01234567".indexOf(l[f++]),"0123".indexOf(r)>=0&&f<d&&w(l[f])&&(i=8*i+"01234567".indexOf(l[f++]))),m+=String.fromCharCode(i)):m+=r}else{if(E(r.charCodeAt(0)))break;m+=r}}""!==t&&$({},o.UnexpectedToken,"ILLEGAL");return{type:e.StringLiteral,value:m,octal:g,startLineNumber:u,startLineStart:c,lineNumber:h,lineStart:p,start:n,end:f}}():46===t?_(l.charCodeAt(f+1))?L():j():_(t)?L():y.tokenize&&47===t?function(){var t,e;if(!(t=y.tokens[y.tokens.length-1]))return z();if("Punctuator"===t.type){if("]"===t.value)return j();if(")"===t.value)return!(e=y.tokens[y.openParenToken-1])||"Keyword"!==e.type||"if"!==e.value&&"while"!==e.value&&"for"!==e.value&&"with"!==e.value?j():z();if("}"===t.value){if(y.tokens[y.openCurlyToken-3]&&"Keyword"===y.tokens[y.openCurlyToken-3].type){if(!(e=y.tokens[y.openCurlyToken-4]))return j()}else{if(!y.tokens[y.openCurlyToken-4]||"Keyword"!==y.tokens[y.openCurlyToken-4].type)return j();if(!(e=y.tokens[y.openCurlyToken-5]))return z()}return r.indexOf(e.value)>=0?j():z()}return z()}if("Keyword"===t.type&&"this"!==t.value)return z();return j()}():j()}function U(){var t,r,i;return N(),t={start:{line:h,column:f-p}},r=B(),t.end={line:h,column:f-p},r.type!==e.EOF&&(i=l.slice(r.start,r.end),y.tokens.push({type:n[r.type],value:i,range:[r.start,r.end],loc:t})),r}function V(){var t;return f=(t=g).end,h=t.lineNumber,p=t.lineStart,g="undefined"!==typeof y.tokens?U():B(),f=t.end,h=t.lineNumber,p=t.lineStart,t}function q(){var t,e,n;t=f,e=h,n=p,g="undefined"!==typeof y.tokens?U():B(),f=t,h=e,p=n}function W(t,e){this.line=t,this.column=e}function G(t,e,n,r){this.start=new W(t,e),this.end=new W(n,r)}function H(){var t,e,n,r;return t=f,e=h,n=p,N(),r=h!==e,f=t,h=e,p=n,r}function $(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,function(t,e){return b(e<r.length,"Message reference must be in range"),r[e]});throw"number"===typeof t.lineNumber?((n=new Error("Line "+t.lineNumber+": "+i)).index=t.start,n.lineNumber=t.lineNumber,n.column=t.start-p+1):((n=new Error("Line "+h+": "+i)).index=f,n.lineNumber=h,n.column=f-p+1),n.description=i,n}function K(){try{$.apply(null,arguments)}catch(t){if(!y.errors)throw t;y.errors.push(t)}}function X(t){if(t.type===e.EOF&&$(t,o.UnexpectedEOS),t.type===e.NumericLiteral&&$(t,o.UnexpectedNumber),t.type===e.StringLiteral&&$(t,o.UnexpectedString),t.type===e.Identifier&&$(t,o.UnexpectedIdentifier),t.type===e.Keyword){if(function(t){switch(t){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}(t.value))$(t,o.UnexpectedReserved);else if(c&&P(t.value))return void K(t,o.StrictReservedWord);$(t,o.UnexpectedToken,t.value)}$(t,o.UnexpectedToken,t.value)}function Y(t){var n=V();n.type===e.Punctuator&&n.value===t||X(n)}function J(t){var n=V();n.type===e.Keyword&&n.value===t||X(n)}function Z(t){return g.type===e.Punctuator&&g.value===t}function Q(t){return g.type===e.Keyword&&g.value===t}function tt(){var t,n=f,r=h,i=p,a=g;if(59===l.charCodeAt(f)||Z(";"))V();else{if(t=h,N(),h!==t)return f=n,h=r,p=i,void(g=a);g.type===e.EOF||Z("}")||X(g)}}function et(t){return t.type===i.Identifier||t.type===i.MemberExpression}function nt(t,e){var n,r,i;return n=c,i=g,r=kt(),e&&c&&M(t[0].name)&&K(e,o.StrictParamName),c=n,m.markEnd(m.createFunctionExpression(null,t,[],r),i)}function rt(){var t,n;return n=g,(t=V()).type===e.StringLiteral||t.type===e.NumericLiteral?(c&&t.octal&&K(t,o.StrictOctalLiteral),m.markEnd(m.createLiteral(t),n)):m.markEnd(m.createIdentifier(t.value),n)}function it(){var t,n,r,i,a,s;return s=g,(t=g).type===e.Identifier?(r=rt(),"get"!==t.value||Z(":")?"set"!==t.value||Z(":")?(Y(":"),i=mt(),m.markEnd(m.createProperty("init",r,i),s)):(n=rt(),Y("("),(t=g).type!==e.Identifier?(Y(")"),K(t,o.UnexpectedToken,t.value),i=nt([])):(a=[yt()],Y(")"),i=nt(a,t)),m.markEnd(m.createProperty("set",n,i),s)):(n=rt(),Y("("),Y(")"),i=nt([]),m.markEnd(m.createProperty("get",n,i),s))):t.type!==e.EOF&&t.type!==e.Punctuator?(n=rt(),Y(":"),i=mt(),m.markEnd(m.createProperty("init",n,i),s)):void X(t)}function at(){var t,n,r,s;if(Z("("))return function(){var t;return Y("("),t=gt(),Y(")"),t}();if(Z("["))return function(){var t,e=[];t=g,Y("[");for(;!Z("]");)Z(",")?(V(),e.push(null)):(e.push(mt()),Z("]")||Y(","));return V(),m.markEnd(m.createArrayExpression(e),t)}();if(Z("{"))return function(){var t,e,n,r,s,u=[],l={},f=String;s=g,Y("{");for(;!Z("}");)t=it(),e=t.key.type===i.Identifier?t.key.name:f(t.key.value),r="init"===t.kind?a.Data:"get"===t.kind?a.Get:a.Set,n="$"+e,Object.prototype.hasOwnProperty.call(l,n)?(l[n]===a.Data?c&&r===a.Data?K({},o.StrictDuplicateProperty):r!==a.Data&&K({},o.AccessorDataProperty):r===a.Data?K({},o.AccessorDataProperty):l[n]&r&&K({},o.AccessorGetSet),l[n]|=r):l[n]=r,u.push(t),Z("}")||Y(",");return Y("}"),m.markEnd(m.createObjectExpression(u),s)}();if(t=g.type,s=g,t===e.Identifier)r=m.createIdentifier(V().value);else if(t===e.StringLiteral||t===e.NumericLiteral)c&&g.octal&&K(g,o.StrictOctalLiteral),r=m.createLiteral(V());else if(t===e.Keyword){if(Q("function"))return function(){var t,e,n,r,i,a,s,u,l=null,f=[];u=g,J("function"),Z("(")||(t=g,l=yt(),c?M(t.value)&&K(t,o.StrictFunctionName):M(t.value)?(n=t,r=o.StrictFunctionName):P(t.value)&&(n=t,r=o.StrictReservedWord));i=Tt(n),f=i.params,e=i.stricted,n=i.firstRestricted,i.message&&(r=i.message);s=c,a=kt(),c&&n&&$(n,r);c&&e&&K(e,r);return c=s,m.markEnd(m.createFunctionExpression(l,f,[],a),u)}();Q("this")?(V(),r=m.createThisExpression()):X(V())}else t===e.BooleanLiteral?((n=V()).value="true"===n.value,r=m.createLiteral(n)):t===e.NullLiteral?((n=V()).value=null,r=m.createLiteral(n)):Z("/")||Z("/=")?(r="undefined"!==typeof y.tokens?m.createLiteral(z()):m.createLiteral(F()),q()):X(V());return m.markEnd(r,s)}function ot(){var t=[];if(Y("("),!Z(")"))for(;f<d&&(t.push(mt()),!Z(")"));)Y(",");return Y(")"),t}function st(){var t,n;return n=g,function(t){return t.type===e.Identifier||t.type===e.Keyword||t.type===e.BooleanLiteral||t.type===e.NullLiteral}(t=V())||X(t),m.markEnd(m.createIdentifier(t.value),n)}function ut(){return Y("."),st()}function lt(){var t;return Y("["),t=gt(),Y("]"),t}function ct(){var t,e,n;return n=g,J("new"),t=function(){var t,e,n;b(v.allowIn,"callee of new expression always allow in keyword."),n=g,t=Q("new")?ct():at();for(;Z(".")||Z("[");)Z("[")?(e=lt(),t=m.createMemberExpression("[",t,e)):(e=ut(),t=m.createMemberExpression(".",t,e)),m.markEnd(t,n);return t}(),e=Z("(")?ot():[],m.markEnd(m.createNewExpression(t,e),n)}function ft(){var t,n,r=g;return t=function(){var t,e,n,r,i=v.allowIn;for(r=g,v.allowIn=!0,t=Q("new")?ct():at();;){if(Z("."))n=ut(),t=m.createMemberExpression(".",t,n);else if(Z("("))e=ot(),t=m.createCallExpression(t,e);else{if(!Z("["))break;n=lt(),t=m.createMemberExpression("[",t,n)}m.markEnd(t,r)}return v.allowIn=i,t}(),g.type===e.Punctuator&&(!Z("++")&&!Z("--")||H()||(c&&t.type===i.Identifier&&M(t.name)&&K({},o.StrictLHSPostfix),et(t)||K({},o.InvalidLHSInAssignment),n=V(),t=m.markEnd(m.createPostfixExpression(n.value,t),r))),t}function ht(){var t,n,r;return g.type!==e.Punctuator&&g.type!==e.Keyword?n=ft():Z("++")||Z("--")?(r=g,t=V(),n=ht(),c&&n.type===i.Identifier&&M(n.name)&&K({},o.StrictLHSPrefix),et(n)||K({},o.InvalidLHSInAssignment),n=m.createUnaryExpression(t.value,n),n=m.markEnd(n,r)):Z("+")||Z("-")||Z("~")||Z("!")?(r=g,t=V(),n=ht(),n=m.createUnaryExpression(t.value,n),n=m.markEnd(n,r)):Q("delete")||Q("void")||Q("typeof")?(r=g,t=V(),n=ht(),n=m.createUnaryExpression(t.value,n),n=m.markEnd(n,r),c&&"delete"===n.operator&&n.argument.type===i.Identifier&&K({},o.StrictDelete)):n=ft(),n}function pt(t,n){var r=0;if(t.type!==e.Punctuator&&t.type!==e.Keyword)return 0;switch(t.value){case"||":r=1;break;case"&&":r=2;break;case"|":r=3;break;case"^":r=4;break;case"&":r=5;break;case"==":case"!=":case"===":case"!==":r=6;break;case"<":case">":case"<=":case">=":case"instanceof":r=7;break;case"in":r=n?7:0;break;case"<<":case">>":case">>>":r=8;break;case"+":case"-":r=9;break;case"*":case"/":case"%":r=11}return r}function dt(){var t,e,n,r,i;return i=g,t=function(){var t,e,n,r,i,a,o,s,u,l;if(t=g,u=ht(),0===(i=pt(r=g,v.allowIn)))return u;r.prec=i,V(),e=[t,g],o=ht(),a=[u,r,o];for(;(i=pt(g,v.allowIn))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),s=a.pop().value,u=a.pop(),n=m.createBinaryExpression(s,u,o),e.pop(),t=e[e.length-1],m.markEnd(n,t),a.push(n);(r=V()).prec=i,a.push(r),e.push(g),n=ht(),a.push(n)}l=a.length-1,n=a[l],e.pop();for(;l>1;)n=m.createBinaryExpression(a[l-1].value,a[l-2],n),l-=2,t=e.pop(),m.markEnd(n,t);return n}(),Z("?")&&(V(),e=v.allowIn,v.allowIn=!0,n=mt(),v.allowIn=e,Y(":"),r=mt(),t=m.createConditionalExpression(t,n,r),m.markEnd(t,i)),t}function mt(){var t,n,r,a,s;return t=g,s=g,a=n=dt(),function(){var t;if(g.type!==e.Punctuator)return!1;return"="===(t=g.value)||"*="===t||"/="===t||"%="===t||"+="===t||"-="===t||"<<="===t||">>="===t||">>>="===t||"&="===t||"^="===t||"|="===t}()&&(et(n)||K({},o.InvalidLHSInAssignment),c&&n.type===i.Identifier&&M(n.name)&&K(t,o.StrictLHSAssignment),t=V(),r=mt(),a=m.markEnd(m.createAssignmentExpression(t.value,n,r),s)),a}function gt(){var t,e=g;if(t=mt(),Z(",")){for(t=m.createSequenceExpression([t]);f<d&&Z(",");)V(),t.expressions.push(mt());m.markEnd(t,e)}return t}function vt(){var t,e;return e=g,Y("{"),t=function(){var t,e=[];for(;f<d&&!Z("}")&&"undefined"!==typeof(t=Mt());)e.push(t);return e}(),Y("}"),m.markEnd(m.createBlockStatement(t),e)}function yt(){var t,n;return n=g,(t=V()).type!==e.Identifier&&X(t),m.markEnd(m.createIdentifier(t.value),n)}function bt(t){var e,n,r=null;return n=g,e=yt(),c&&M(e.name)&&K({},o.StrictVarName),"const"===t?(Y("="),r=mt()):Z("=")&&(V(),r=mt()),m.markEnd(m.createVariableDeclarator(e,r),n)}function _t(t){var e=[];do{if(e.push(bt(t)),!Z(","))break;V()}while(f<d);return e}function xt(){var t,e,n,r,i,a,s,u=v.allowIn;return t=e=n=null,J("for"),Y("("),Z(";")?V():(Q("var")||Q("let")?(v.allowIn=!1,t=function(){var t,e,n;return n=g,t=V(),e=_t(),m.markEnd(m.createVariableDeclaration(e,t.value),n)}(),v.allowIn=u,1===t.declarations.length&&Q("in")&&(V(),r=t,i=gt(),t=null)):(v.allowIn=!1,t=gt(),v.allowIn=u,Q("in")&&(et(t)||K({},o.InvalidLHSInForIn),V(),r=t,i=gt(),t=null)),"undefined"===typeof r&&Y(";")),"undefined"===typeof r&&(Z(";")||(e=gt()),Y(";"),Z(")")||(n=gt())),Y(")"),s=v.inIteration,v.inIteration=!0,a=Et(),v.inIteration=s,"undefined"===typeof r?m.createForStatement(t,e,n,a):m.createForInStatement(r,i,a)}function wt(){var t,e,n,r=[];for(n=g,Q("default")?(V(),t=null):(J("case"),t=gt()),Y(":");f<d&&!(Z("}")||Q("default")||Q("case"));)e=Et(),r.push(e);return m.markEnd(m.createSwitchCase(t,r),n)}function St(){var t,e=[],n=null;return J("try"),t=vt(),Q("catch")&&e.push(function(){var t,e,n;n=g,J("catch"),Y("("),Z(")")&&X(g);t=yt(),c&&M(t.name)&&K({},o.StrictCatchVariable);return Y(")"),e=vt(),m.markEnd(m.createCatchClause(t,e),n)}()),Q("finally")&&(V(),n=vt()),0!==e.length||n||$({},o.NoCatchOrFinally),m.createTryStatement(t,[],e,n)}function Et(){var t,n,r,a,s=g.type;if(s===e.EOF&&X(g),s===e.Punctuator&&"{"===g.value)return vt();if(a=g,s===e.Punctuator)switch(g.value){case";":return m.markEnd((Y(";"),m.createEmptyStatement()),a);case"(":return m.markEnd(function(){var t=gt();return tt(),m.createExpressionStatement(t)}(),a)}if(s===e.Keyword)switch(g.value){case"break":return m.markEnd(function(){var t,n=null;if(J("break"),59===l.charCodeAt(f))return V(),v.inIteration||v.inSwitch||$({},o.IllegalBreak),m.createBreakStatement(null);if(H())return v.inIteration||v.inSwitch||$({},o.IllegalBreak),m.createBreakStatement(null);g.type===e.Identifier&&(n=yt(),t="$"+n.name,Object.prototype.hasOwnProperty.call(v.labelSet,t)||$({},o.UnknownLabel,n.name));tt(),null!==n||v.inIteration||v.inSwitch||$({},o.IllegalBreak);return m.createBreakStatement(n)}(),a);case"continue":return m.markEnd(function(){var t,n=null;if(J("continue"),59===l.charCodeAt(f))return V(),v.inIteration||$({},o.IllegalContinue),m.createContinueStatement(null);if(H())return v.inIteration||$({},o.IllegalContinue),m.createContinueStatement(null);g.type===e.Identifier&&(n=yt(),t="$"+n.name,Object.prototype.hasOwnProperty.call(v.labelSet,t)||$({},o.UnknownLabel,n.name));tt(),null!==n||v.inIteration||$({},o.IllegalContinue);return m.createContinueStatement(n)}(),a);case"debugger":return m.markEnd((J("debugger"),tt(),m.createDebuggerStatement()),a);case"do":return m.markEnd(function(){var t,e,n;J("do"),n=v.inIteration,v.inIteration=!0,t=Et(),v.inIteration=n,J("while"),Y("("),e=gt(),Y(")"),Z(";")&&V();return m.createDoWhileStatement(t,e)}(),a);case"for":return m.markEnd(xt(),a);case"function":return m.markEnd(Pt(),a);case"if":return m.markEnd(function(){var t,e,n;J("if"),Y("("),t=gt(),Y(")"),e=Et(),Q("else")?(V(),n=Et()):n=null;return m.createIfStatement(t,e,n)}(),a);case"return":return m.markEnd(function(){var t=null;J("return"),v.inFunctionBody||K({},o.IllegalReturn);if(32===l.charCodeAt(f)&&k(l.charCodeAt(f+1)))return t=gt(),tt(),m.createReturnStatement(t);if(H())return m.createReturnStatement(null);Z(";")||Z("}")||g.type===e.EOF||(t=gt());return tt(),m.createReturnStatement(t)}(),a);case"switch":return m.markEnd(function(){var t,e,n,r,i;if(J("switch"),Y("("),t=gt(),Y(")"),Y("{"),e=[],Z("}"))return V(),m.createSwitchStatement(t,e);r=v.inSwitch,v.inSwitch=!0,i=!1;for(;f<d&&!Z("}");)null===(n=wt()).test&&(i&&$({},o.MultipleDefaultsInSwitch),i=!0),e.push(n);return v.inSwitch=r,Y("}"),m.createSwitchStatement(t,e)}(),a);case"throw":return m.markEnd(function(){var t;J("throw"),H()&&$({},o.NewlineAfterThrow);return t=gt(),tt(),m.createThrowStatement(t)}(),a);case"try":return m.markEnd(St(),a);case"var":return m.markEnd(function(){var t;return J("var"),t=_t(),tt(),m.createVariableDeclaration(t,"var")}(),a);case"while":return m.markEnd(function(){var t,e,n;return J("while"),Y("("),t=gt(),Y(")"),n=v.inIteration,v.inIteration=!0,e=Et(),v.inIteration=n,m.createWhileStatement(t,e)}(),a);case"with":return m.markEnd(function(){var t,e;c&&(N(),K({},o.StrictModeWith));return J("with"),Y("("),t=gt(),Y(")"),e=Et(),m.createWithStatement(t,e)}(),a)}return(t=gt()).type===i.Identifier&&Z(":")?(V(),r="$"+t.name,Object.prototype.hasOwnProperty.call(v.labelSet,r)&&$({},o.Redeclaration,"Label",t.name),v.labelSet[r]=!0,n=Et(),delete v.labelSet[r],m.markEnd(m.createLabeledStatement(t,n),a)):(tt(),m.markEnd(m.createExpressionStatement(t),a))}function kt(){var t,n,r,a,s,u,h,p,y=[];for(p=g,Y("{");f<d&&g.type===e.StringLiteral&&(n=g,t=Mt(),y.push(t),t.expression.type===i.Literal);)"use strict"===l.slice(n.start+1,n.end-1)?(c=!0,r&&K(r,o.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(a=v.labelSet,s=v.inIteration,u=v.inSwitch,h=v.inFunctionBody,v.labelSet={},v.inIteration=!1,v.inSwitch=!1,v.inFunctionBody=!0;f<d&&!Z("}")&&"undefined"!==typeof(t=Mt());)y.push(t);return Y("}"),v.labelSet=a,v.inIteration=s,v.inSwitch=u,v.inFunctionBody=h,m.markEnd(m.createBlockStatement(y),p)}function Tt(t){var e,n,r,i,a,s,u=[];if(Y("("),!Z(")"))for(i={};f<d&&(n=g,e=yt(),a="$"+n.value,c?(M(n.value)&&(r=n,s=o.StrictParamName),Object.prototype.hasOwnProperty.call(i,a)&&(r=n,s=o.StrictParamDupe)):t||(M(n.value)?(t=n,s=o.StrictParamName):P(n.value)?(t=n,s=o.StrictReservedWord):Object.prototype.hasOwnProperty.call(i,a)&&(t=n,s=o.StrictParamDupe)),u.push(e),i[a]=!0,!Z(")"));)Y(",");return Y(")"),{params:u,stricted:r,firstRestricted:t,message:s}}function Pt(){var t,e,n,r,i,a,s,u,l,f=[];return l=g,J("function"),n=g,t=yt(),c?M(n.value)&&K(n,o.StrictFunctionName):M(n.value)?(a=n,s=o.StrictFunctionName):P(n.value)&&(a=n,s=o.StrictReservedWord),i=Tt(a),f=i.params,r=i.stricted,a=i.firstRestricted,i.message&&(s=i.message),u=c,e=kt(),c&&a&&$(a,s),c&&r&&K(r,s),c=u,m.markEnd(m.createFunctionDeclaration(t,f,[],e),l)}function Mt(){if(g.type===e.Keyword)switch(g.value){case"const":case"let":return function(t){var e,n;return n=g,J(t),e=_t(t),tt(),m.markEnd(m.createVariableDeclaration(e,t),n)}(g.value);case"function":return Pt();default:return Et()}if(g.type!==e.EOF)return Et()}function Ct(){var t,n;return N(),q(),n=g,c=!1,t=function(){var t,n,r,a=[];for(;f<d&&(n=g).type===e.StringLiteral&&(t=Mt(),a.push(t),t.expression.type===i.Literal);)"use strict"===l.slice(n.start+1,n.end-1)?(c=!0,r&&K(r,o.StrictOctalLiteral)):!r&&n.octal&&(r=n);for(;f<d&&"undefined"!==typeof(t=Mt());)a.push(t);return a}(),m.markEnd(m.createProgram(t),n)}function Ot(){var t,e,n,r=[];for(t=0;t<y.tokens.length;++t)e=y.tokens[t],n={type:e.type,value:e.value},y.range&&(n.range=e.range),y.loc&&(n.loc=e.loc),r.push(n);y.tokens=r}(n={})[(e={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9}).BooleanLiteral]="Boolean",n[e.EOF]="<end>",n[e.Identifier]="Identifier",n[e.Keyword]="Keyword",n[e.NullLiteral]="Null",n[e.NumericLiteral]="Numeric",n[e.Punctuator]="Punctuator",n[e.StringLiteral]="String",n[e.RegularExpression]="RegularExpression",r=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],i={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},a={Data:1,Get:2,Set:4},o={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},s={NonAsciiIdentifierStart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),NonAsciiIdentifierPart:new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0\u08a2-\u08ac\u08e4-\u08fe\u0900-\u0963\u0966-\u096f\u0971-\u0977\u0979-\u097f\u0981-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d02\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191c\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1d00-\u1de6\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua697\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a\uaa7b\uaa80-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")},u={name:"SyntaxTree",processComment:function(t){var e,n;if(!(t.type===i.Program&&t.body.length>0)){for(y.trailingComments.length>0?y.trailingComments[0].range[0]>=t.range[1]?(n=y.trailingComments,y.trailingComments=[]):y.trailingComments.length=0:y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments&&y.bottomRightStack[y.bottomRightStack.length-1].trailingComments[0].range[0]>=t.range[1]&&(n=y.bottomRightStack[y.bottomRightStack.length-1].trailingComments,delete y.bottomRightStack[y.bottomRightStack.length-1].trailingComments);y.bottomRightStack.length>0&&y.bottomRightStack[y.bottomRightStack.length-1].range[0]>=t.range[0];)e=y.bottomRightStack.pop();e?e.leadingComments&&e.leadingComments[e.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=e.leadingComments,delete e.leadingComments):y.leadingComments.length>0&&y.leadingComments[y.leadingComments.length-1].range[1]<=t.range[0]&&(t.leadingComments=y.leadingComments,y.leadingComments=[]),n&&(t.trailingComments=n),y.bottomRightStack.push(t)}},markEnd:function(t,e){return y.range&&(t.range=[e.start,f]),y.loc&&(t.loc=new G(void 0===e.startLineNumber?e.lineNumber:e.startLineNumber,e.start-(void 0===e.startLineStart?e.lineStart:e.startLineStart),h,f-p),this.postProcess(t)),y.attachComment&&this.processComment(t),t},postProcess:function(t){return y.source&&(t.loc.source=y.source),t},createArrayExpression:function(t){return{type:i.ArrayExpression,elements:t}},createAssignmentExpression:function(t,e,n){return{type:i.AssignmentExpression,operator:t,left:e,right:n}},createBinaryExpression:function(t,e,n){var r="||"===t||"&&"===t?i.LogicalExpression:i.BinaryExpression;return{type:r,operator:t,left:e,right:n}},createBlockStatement:function(t){return{type:i.BlockStatement,body:t}},createBreakStatement:function(t){return{type:i.BreakStatement,label:t}},createCallExpression:function(t,e){return{type:i.CallExpression,callee:t,arguments:e}},createCatchClause:function(t,e){return{type:i.CatchClause,param:t,body:e}},createConditionalExpression:function(t,e,n){return{type:i.ConditionalExpression,test:t,consequent:e,alternate:n}},createContinueStatement:function(t){return{type:i.ContinueStatement,label:t}},createDebuggerStatement:function(){return{type:i.DebuggerStatement}},createDoWhileStatement:function(t,e){return{type:i.DoWhileStatement,body:t,test:e}},createEmptyStatement:function(){return{type:i.EmptyStatement}},createExpressionStatement:function(t){return{type:i.ExpressionStatement,expression:t}},createForStatement:function(t,e,n,r){return{type:i.ForStatement,init:t,test:e,update:n,body:r}},createForInStatement:function(t,e,n){return{type:i.ForInStatement,left:t,right:e,body:n,each:!1}},createFunctionDeclaration:function(t,e,n,r){return{type:i.FunctionDeclaration,id:t,params:e,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(t,e,n,r){return{type:i.FunctionExpression,id:t,params:e,defaults:n,body:r,rest:null,generator:!1,expression:!1}},createIdentifier:function(t){return{type:i.Identifier,name:t}},createIfStatement:function(t,e,n){return{type:i.IfStatement,test:t,consequent:e,alternate:n}},createLabeledStatement:function(t,e){return{type:i.LabeledStatement,label:t,body:e}},createLiteral:function(t){return{type:i.Literal,value:t.value,raw:l.slice(t.start,t.end)}},createMemberExpression:function(t,e,n){return{type:i.MemberExpression,computed:"["===t,object:e,property:n}},createNewExpression:function(t,e){return{type:i.NewExpression,callee:t,arguments:e}},createObjectExpression:function(t){return{type:i.ObjectExpression,properties:t}},createPostfixExpression:function(t,e){return{type:i.UpdateExpression,operator:t,argument:e,prefix:!1}},createProgram:function(t){return{type:i.Program,body:t}},createProperty:function(t,e,n){return{type:i.Property,key:e,value:n,kind:t}},createReturnStatement:function(t){return{type:i.ReturnStatement,argument:t}},createSequenceExpression:function(t){return{type:i.SequenceExpression,expressions:t}},createSwitchCase:function(t,e){return{type:i.SwitchCase,test:t,consequent:e}},createSwitchStatement:function(t,e){return{type:i.SwitchStatement,discriminant:t,cases:e}},createThisExpression:function(){return{type:i.ThisExpression}},createThrowStatement:function(t){return{type:i.ThrowStatement,argument:t}},createTryStatement:function(t,e,n,r){return{type:i.TryStatement,block:t,guardedHandlers:e,handlers:n,finalizer:r}},createUnaryExpression:function(t,e){return"++"===t||"--"===t?{type:i.UpdateExpression,operator:t,argument:e,prefix:!0}:{type:i.UnaryExpression,operator:t,argument:e,prefix:!0}},createVariableDeclaration:function(t,e){return{type:i.VariableDeclaration,declarations:t,kind:e}},createVariableDeclarator:function(t,e){return{type:i.VariableDeclarator,id:t,init:e}},createWhileStatement:function(t,e){return{type:i.WhileStatement,test:t,body:e}},createWithStatement:function(t,e){return{type:i.WithStatement,object:t,body:e}}},t.version="1.2.5",t.tokenize=function(t,n){var r,i;r=String,"string"===typeof t||t instanceof String||(t=r(t));m=u,f=0,h=(l=t).length>0?1:0,p=0,d=l.length,g=null,v={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},(n=n||{}).tokens=!0,y.tokens=[],y.tokenize=!0,y.openParenToken=-1,y.openCurlyToken=-1,y.range="boolean"===typeof n.range&&n.range,y.loc="boolean"===typeof n.loc&&n.loc,"boolean"===typeof n.comment&&n.comment&&(y.comments=[]);"boolean"===typeof n.tolerant&&n.tolerant&&(y.errors=[]);try{if(q(),g.type===e.EOF)return y.tokens;for(V();g.type!==e.EOF;)try{V()}catch(a){if(g,y.errors){y.errors.push(a);break}throw a}Ot(),i=y.tokens,"undefined"!==typeof y.comments&&(i.comments=y.comments),"undefined"!==typeof y.errors&&(i.errors=y.errors)}catch(o){throw o}finally{y={}}return i},t.parse=function(t,e){var n,r;r=String,"string"===typeof t||t instanceof String||(t=r(t));m=u,f=0,h=(l=t).length>0?1:0,p=0,d=l.length,g=null,v={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},y={},"undefined"!==typeof e&&(y.range="boolean"===typeof e.range&&e.range,y.loc="boolean"===typeof e.loc&&e.loc,y.attachComment="boolean"===typeof e.attachComment&&e.attachComment,y.loc&&null!==e.source&&void 0!==e.source&&(y.source=r(e.source)),"boolean"===typeof e.tokens&&e.tokens&&(y.tokens=[]),"boolean"===typeof e.comment&&e.comment&&(y.comments=[]),"boolean"===typeof e.tolerant&&e.tolerant&&(y.errors=[]),y.attachComment&&(y.range=!0,y.comments=[],y.bottomRightStack=[],y.trailingComments=[],y.leadingComments=[]));try{n=Ct(),"undefined"!==typeof y.comments&&(n.comments=y.comments),"undefined"!==typeof y.tokens&&(Ot(),n.tokens=y.tokens),"undefined"!==typeof y.errors&&(n.errors=y.errors)}catch(i){throw i}finally{y={}}return n},t.Syntax=function(){var t,e={};for(t in"function"===typeof Object.create&&(e=Object.create(null)),i)i.hasOwnProperty(t)&&(e[t]=i[t]);return"function"===typeof Object.freeze&&Object.freeze(e),e}()})?r.apply(e,i):r)||(t.exports=a)}()},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){i(t.tensor)};var i=(0,((r=n(28))&&r.__esModule?r:{default:r}).default)({args:["array","scalar"],body:function(t){t=1.0507009873554805*(Math.max(t,0)+1.6732632423543772*(Math.exp(Math.min(t,0))-1))}})},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){i(t.tensor)};var i=(0,((r=n(28))&&r.__esModule?r:{default:r}).default)({args:["array"],body:function(t){t=Math.log(Math.exp(t)+1)}})},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){i(t.tensor)};var i=(0,((r=n(28))&&r.__esModule?r:{default:r}).default)({args:["array"],body:function(t){t/=1+Math.abs(t)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.alpha,o=void 0===a?0:a,s=n.maxValue,u=void 0===s?null:s;0!==o&&(e=new i.default([],t.tensor.shape),r.default.mins(e.tensor,t.tensor,0),r.default.mulseq(e.tensor,o));r.default.maxseq(t.tensor,0),u&&r.default.minseq(t.tensor,u);e&&r.default.addeq(t.tensor,e.tensor)};var r=a(n(12)),i=a(n(8));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){i(t.tensor)};var i=(0,((r=n(28))&&r.__esModule?r:{default:r}).default)({args:["array"],body:function(t){t=Math.tanh(t)}})},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){i(t.tensor)};var i=(0,((r=n(28))&&r.__esModule?r:{default:r}).default)({args:["array"],body:function(t){t=1/(1+Math.exp(-t))}})},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){i(t.tensor)};var i=(0,((r=n(28))&&r.__esModule?r:{default:r}).default)({args:["array"],body:function(t){(t=.2*t+.5)<=0?t=0:t>=1&&(t=1)}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5),u=n(80);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=p(n(11)),c=p(n(8)),f=n(9),h=p(n(28));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D alpha;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  vec4 a = texture(alpha, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0) + a * min(v, 0.0);\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),t=a(this,o(e).call(this,n)),Object.defineProperty(u(u(t)),"_compute",{configurable:!0,enumerable:!0,writable:!0,value:(0,h.default)({args:["array","array"],body:function(t,e){t=Math.max(t,0)+e*Math.min(t,0)}})}),t.layerClass="PReLU",t.params=["alpha"],t.gpu&&(t.program=f.webgl2.compileProgram(d)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.output=t,this._compute(this.output.tensor,this.weights.alpha.tensor)}},{key:"_callGPU",value:function(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new c.default([],t.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),t.is1D?this.output.is1D=t.is1D:(t.is2DReshaped||t.is2DSquareReshaped)&&(t.is2DReshaped?this.output.is2DReshaped=t.is2DReshaped:t.is2DSquareReshaped&&(this.output.is2DSquareReshaped=t.is2DSquareReshaped),this.output.originalShape=t.originalShape,this.output.indicesForReshaped=t.indicesForReshaped)),f.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"},{input:this.weights.alpha,name:"alpha"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5),u=n(80);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=p(n(11)),c=p(n(8)),f=n(9),h=p(n(28));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform float alpha;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = max(v, 0.0) + alpha * (exp(min(v, 0.0)) - 1.0);\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),t=a(this,o(e).call(this,n)),g.call(u(u(t))),t.layerClass="ELU";var i=n.alpha,s=void 0===i?1:i;return t.description="alpha: ".concat(s),t.alpha=s,t.gpu&&(t.program=f.webgl2.compileProgram(d)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.output=t,this._compute(this.output.tensor,this.alpha)}},{key:"_callGPU",value:function(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new c.default([],t.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),t.is1D?this.output.is1D=t.is1D:(t.is2DReshaped||t.is2DSquareReshaped)&&(t.is2DReshaped?this.output.is2DReshaped=t.is2DReshaped:t.is2DSquareReshaped&&(this.output.is2DSquareReshaped=t.is2DSquareReshaped),this.output.originalShape=t.originalShape,this.output.indicesForReshaped=t.indicesForReshaped)),f.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.alpha,type:"float",name:"alpha"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(l.default);e.default=m;var g=function(){Object.defineProperty(this,"_compute",{configurable:!0,enumerable:!0,writable:!0,value:(0,h.default)({args:["array","scalar"],body:function(t,e){t=Math.max(t,0)+e*(Math.exp(Math.min(t,0))-1)}})})}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5),u=n(80);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=p(n(11)),c=p(n(8)),f=n(9),h=p(n(28));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform float theta;\nout vec4 outColor;\n\nvoid main() {\n  vec4 v = texture(x, vec2(outTex.x, outTex.y));\n  outColor = v * float(greaterThan(v, vec4(theta)));\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),t=a(this,o(e).call(this,n)),g.call(u(u(t))),t.layerClass="ThresholdedReLU";var i=n.theta,s=void 0===i?1:i;return t.description="theta: ".concat(s),t.theta=s,t.gpu&&(t.program=f.webgl2.compileProgram(d)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.output=t,this._compute(this.output.tensor,this.theta)}},{key:"_callGPU",value:function(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new c.default([],t.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),t.is1D?this.output.is1D=t.is1D:(t.is2DReshaped||t.is2DSquareReshaped)&&(t.is2DReshaped?this.output.is2DReshaped=t.is2DReshaped:t.is2DSquareReshaped&&(this.output.is2DSquareReshaped=t.is2DSquareReshaped),this.output.originalShape=t.originalShape,this.output.indicesForReshaped=t.indicesForReshaped)),f.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.theta,type:"float",name:"theta"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(l.default);e.default=m;var g=function(){Object.defineProperty(this,"_compute",{configurable:!0,enumerable:!0,writable:!0,value:(0,h.default)({args:["array","scalar"],body:function(t,e){t*=Number(t>e)}})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Conv1D",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Conv2D",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"SeparableConv2D",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Conv2DTranspose",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Conv3D",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"Cropping1D",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"Cropping2D",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Cropping3D",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"UpSampling1D",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"UpSampling2D",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"UpSampling3D",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"ZeroPadding1D",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"ZeroPadding2D",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(e,"ZeroPadding3D",{enumerable:!0,get:function(){return g.default}});var r=v(n(707)),i=v(n(197)),a=v(n(726)),o=v(n(727)),s=v(n(728)),u=v(n(729)),l=v(n(730)),c=v(n(731)),f=v(n(732)),h=v(n(733)),p=v(n(734)),d=v(n(735)),m=v(n(736)),g=v(n(737));function v(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=m(n(11)),l=m(n(8)),c=m(n(197)),f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(60)),h=m(n(12)),p=m(n(276)),d=m(n(278));function m(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Conv1D";var i=n.filters,s=void 0===i?1:i,u=n.kernel_size,l=void 0===u?1:u,f=n.strides,h=void 0===f?1:f,p=n.padding,d=void 0===p?"valid":p,m=n.dilation_rate,g=void 0===m?1:m,v=n.activation,y=void 0===v?"linear":v,b=n.use_bias,_=void 0===b||b;t.description="".concat(s," filters of size ").concat(l,", striding ").concat(h),t.description+="valid"===d?", no border padding":", pad to same borders",t.description+=g>1?", dilation rate ".concat(g):"",t.description+="linear"!==y?", ".concat(y," activation"):"","valid"!==d&&"same"!==d&&t.throwError("Invalid padding."),1!==g&&1!==h&&t.throwError("Incompatible combination of dilation_rate with strides."),t.use_bias=_,t.params=t.use_bias?["kernel","bias"]:["kernel"];var x={filters:s,kernel_size:[l,1],strides:[h,1],padding:d,data_format:"channels_first",dilation_rate:g,activation:y,use_bias:_};return t._conv2dAttrs=x,t._conv2d=new c.default(Object.assign(x,{gpu:n.gpu})),t}return s(e,t),i(e,[{key:"setWeights",value:function(t){t[0].tensor=(0,d.default)(t[0].tensor).transpose(2,1,0,3),this._conv2d.setWeights(t)}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){var e=this,n=new l.default(t.tensor.data,t.tensor.shape);n.tensor=(0,d.default)(n.tensor).transpose(0,2,1);var r=this._conv2d.call(n);this.outputShape=[0,2].map(function(t){return e._conv2d.outputShape[t]}),this.output=new l.default([],this.outputShape),h.default.assign(this.output.tensor,(0,p.default)(r.tensor).transpose(1,0,2))}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"});var e=t.tensor.shape,n=new l.default([],e);Object.assign(n,t),n.glTextureShape=e,n.is2DReshaped=!0,n.originalShape=[e[0],1,e[1]],n.indicesForReshaped=f.createIndicesFor2DReshaped(n.originalShape,!1,-1),this.output=this._conv2d.call(n),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=g},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){i=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,n){var r=n(3);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return"#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[".concat(t,"];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(").concat(e[0],") * outTex.y);\n  int out_x = int(float(").concat(e[1],") * outTex.x);\n  \n  outColor = vec4(").concat((0,i.default)(t).map(function(t){return"texelFetch(inputs[".concat(t,"], ivec2(out_x, out_y), 0).r")}).join(" + "),");\n}\n")};var r,i=(r=n(81))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return"#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[".concat(t,"];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(").concat(e[0],") * outTex.y);\n  int out_x = int(float(").concat(e[1],") * outTex.x);\n  \n  outColor = vec4((").concat((0,i.default)(t).map(function(t){return"texelFetch(inputs[".concat(t,"], ivec2(out_x, out_y), 0).r")}).join(" + "),") / float(").concat(t,"));\n}\n")};var r,i=(r=n(81))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,o){var s=e.map(function(t){return t[o]}),u=(0,a.default)(t+1).map(function(t){return(0,i.default)((0,r.default)(s,t))}),l=0===o?"out_y":"out_x",c="\n  int n = 0;\n  int offset = 0;\n  if (".concat(l," >= ").concat(u[1]," && ").concat(l," < ").concat(u[2],") {\n    n = 1;\n    offset = ").concat(u[1],";\n  }");t>2&&(c+="".concat((0,a.default)(2,t).map(function(t){return" else if (".concat(l," >= ").concat(u[t]," && ").concat(l," < ").concat(u[t+1],") {\n    n = ").concat(t,";\n    offset = ").concat(u[t],";\n  }")}).join(""),"\n"));var f="outColor = vec4(0.0);";if(0===o||1===o){f="\n  if (n == 0) {\n    outColor = vec4(texelFetch(inputs[0], ivec2(out_x, out_y), 0).r);\n  }".concat((0,a.default)(1,t).map(function(t){return" else if (n == ".concat(t,") {\n    outColor = vec4(texelFetch(inputs[").concat(t,"], ivec2(").concat(function(t){return"out_x".concat(1===o?" - ".concat(u[t]):"")}(t),", ").concat(function(t){return"out_y".concat(0===o?" - ".concat(u[t]):"")}(t),"), 0).r);\n  }")}).join(""),"\n")}return"#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[".concat(t,"];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(").concat(n[0],") * outTex.y);\n  int out_x = int(float(").concat(n[1],") * outTex.x);\n").concat(c,"\n").concat(f,"\n}\n")};var r=o(n(715)),i=o(n(277)),a=o(n(81));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){var r=n(716),i=n(264);t.exports=function(t,e,n){return t&&t.length?(e=n||void 0===e?1:i(e),r(t,0,e<0?0:e)):[]}},function(t,e){t.exports=function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(i);++r<i;)a[r]=t[r+e];return a}},function(t,e){t.exports=function(t,e){for(var n,r=-1,i=t.length;++r<i;){var a=e(t[r]);void 0!==a&&(n=void 0===n?a:n+a)}return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return"#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[".concat(t,"];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(").concat(e[0],") * outTex.y);\n  int out_x = int(float(").concat(e[1],") * outTex.x);\n\n  float val = texelFetch(inputs[0], ivec2(out_x, out_y), 0).r;\n  for (int i = 1; i < ").concat(t,"; i++) {\n    val = max(val, texelFetch(inputs[i], ivec2(out_x, out_y), 0).r);\n  }\n\n  outColor = vec4(val);\n}\n")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return"#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[".concat(t,"];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(").concat(e[0],") * outTex.y);\n  int out_x = int(float(").concat(e[1],") * outTex.x);\n\n  float val = texelFetch(inputs[0], ivec2(out_x, out_y), 0).r;\n  for (int i = 1; i < ").concat(t,"; i++) {\n    val = min(val, texelFetch(inputs[i], ivec2(out_x, out_y), 0).r);\n  }\n\n  outColor = vec4(val);\n}\n")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return"#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[".concat(t,"];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(").concat(e[0],") * outTex.y);\n  int out_x = int(float(").concat(e[1],") * outTex.x);\n\n  outColor = vec4(").concat((0,i.default)(t).map(function(t){return"texelFetch(inputs[".concat(t,"], ivec2(out_x, out_y), 0).r")}).join(" * "),");\n}\n")};var r,i=(r=n(81))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return"#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D inputs[2];\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(".concat(e[0],") * outTex.y);\n  int out_x = int(float(").concat(e[1],") * outTex.x);\n  \n  outColor = vec4(texelFetch(inputs[0], ivec2(out_x, out_y), 0).r - texelFetch(inputs[1], ivec2(out_x, out_y), 0).r);\n}\n")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r,i){var a=r?"sum += texelFetch(bias, ivec2(out_x, 0), 0).r;":"",o=i?"int fragmentIndex = int(floor(float(rowIndex) / float(".concat(e[0],")));\n      rowIndex = int(mod(float(rowIndex), float(").concat(e[0],")));\n      colIndex += fragmentIndex * ").concat(e[1],";"):"";return"#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform sampler2D kernel;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(".concat(t[0],") * outTex.y);\n  int out_x = int(float(").concat(t[1],") * outTex.x);\n\n  float sum = 0.;\n  for (int i = 0; i < ").concat(n[1],"; ++i) {\n    int index = texelFetch(indexMap, ivec2(i, out_y), 0).r;    \n    if (index != -1) {\n      int rowIndex = int(floor(float(index) / float(").concat(e[1],")));\n      int colIndex = int(mod(float(index), float(").concat(e[1],")));\n      ").concat(o,"\n      sum += texelFetch(x, ivec2(colIndex, rowIndex), 0).r * texelFetch(kernel, ivec2(out_x, i), 0).r;\n    }\n  }\n\n  ").concat(a,"\n  outColor = vec4(sum);\n}   \n")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r,i){var a=r?"sum += texelFetch(bias, ivec2(out_x, 0), 0).r;":"",o=i?"int fragmentIndex = int(floor(float(rowIndex) / float(".concat(e[0],")));\n      rowIndex = int(mod(float(rowIndex), float(").concat(e[0],")));\n      colIndex += fragmentIndex * ").concat(e[1],";"):"";return"#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D matMulResult;\nuniform isampler2D indexMap;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(".concat(t[0],") * outTex.y);\n  int out_x = int(float(").concat(t[1],") * outTex.x);\n\n  float sum = 0.;\n  for (int n = 0; n < ").concat(n[1],"; ++n) {\n    int index = texelFetch(indexMap, ivec2(n, out_y), 0).r;\n    if (index != -1) {\n      int rowIndex = int(floor(float(index) / float(").concat(e[1],")));\n      int colIndex = int(mod(float(index), float(").concat(e[1],")));\n      ").concat(o,"\n      sum += texelFetch(matMulResult, ivec2(colIndex + out_x, rowIndex), 0).r;\n    }\n  }\n\n  ").concat(a,"\n  outColor = vec4(sum);\n}  \n")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r;r=n?"#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D featureMaps;\nuniform sampler2D weights;\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(".concat(t[0],") * outTex.y);\n  int out_x = int(float(").concat(t[1],") * outTex.x);\n\n  int featureMapsRow = out_x + ").concat(t[0]," * out_y;\n\n  float sum = 0.;\n  for (int k = 0; k < ").concat(e,"; ++k) {\n    float f = texelFetch(featureMaps, ivec2(k, featureMapsRow), 0).r;\n    float w = texelFetch(weights, ivec2(k, 0), 0).r;\n    sum += f * w;\n  }\n\n  outColor = vec4(max(sum, 0.0));\n}  \n"):"#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D featureMaps;\nuniform sampler2D weights;\nout vec4 outColor;\n\nvoid main() {\n  int out_y = int(float(".concat(t[0],") * outTex.y);\n  int out_x = int(float(").concat(t[1],") * outTex.x);\n\n  float sum = 0.;\n  for (int k = 0; k < ").concat(e,"; ++k) {\n    float f = texelFetch(featureMaps, ivec2(k, out_y), 0).r;\n    float w = texelFetch(weights, ivec2(out_x, k), 0).r;\n    sum += f * w;\n  }\n\n  outColor = vec4(max(sum, 0.0));\n}  \n");return r}},function(t,e,n){"use strict";t.exports=function(t,e,n,l,c){var f=["gemm",t[0],t[1],"a",e[0],e[1],"b",n[0],n[1],l?"alpha":"",c?"beta":""].join(""),h=["function ",f,"(o,a,b,A,B){","var ",i("o",t),i("a",e),i("b",n),"i,j,k;"];"r"===e[0]&&"c"===n[0]?h.push.apply(h,function(t,e,n,r,i){var l=[],c="r"===t[0]?[1,0]:[0,1],f=[1,0],h=[0,1],p=["i","j"];l.push.apply(l,a(c,"o",t)),c[1]?(l.push("for(j=0;j<od1;++j){"),l.push("for(i=0;i<od0;++i){")):(l.push("for(i=0;i<od0;++i){"),l.push("for(j=0;j<od1;++j){"));l.push.apply(l,a(f,"a",e,"i")),l.push.apply(l,a(h,"b",n,void 0,"j")),l.push("var r=0.0;","for(k=0;k<ad1;++k){","r+=",u(f,"a",e,"i","k"),"*",u(h,"b",n,"k","j"),";"),l.push.apply(l,o(f,"a",e,0,"k")),l.push.apply(l,o(h,"b",n,0,"k")),l.push("}"),r&&l.push("r*=A;");i&&l.push("r+=B*",u(c,"o",t,"i","j"),";");return l.push.apply(l,s(c,"o",t,"i","j","r")),l.push.apply(l,o(c,"o",t,0,p[1])),l.push("}"),l.push.apply(l,o(c,"o",t,1,p[0])),l.push("}"),l}(t,e,n,l,c)):h.push.apply(h,function(t,e,n,i,l){var c=[],f=["od0","od1","ad1"],h=[1,0],p=[1,0],d=[0,1];c.push.apply(c,function(t,e){var n,r=[],i="r"===t[0]?[1,0]:[0,1];e&&r.push("if(B!==1.0){");r.push.apply(r,a(i,"o",t)),i[0]?(r.push("for(i=0;i<od0;++i){for(j=0;j<od1;++j){"),n=["i","j"]):(r.push("for(j=0;j<od1;++j){for(i=0;i<od0;++i){"),n=["j","i"]);e?r.push.apply(r,s(i,"o",t,"i","j","B*"+u(i,"o",t,"i","j"))):r.push.apply(r,s(i,"o",t,"i","j","0"));r.push.apply(r,o(i,"o",t,0,n[1])),r.push("}"),r.push.apply(r,o(i,"o",t,1,n[0])),r.push("}"),e&&r.push("}");return r}(t,l));for(var m=0;m<3;++m)c.push("for(var i",m,"=",f[m],";i",m,">0;){","var w",m,"=",r,";","if(i",m,"<",r,"){","w",m,"=i",m,";","i",m,"=0;","}else{","i",m,"-=",r,";","}");c.push.apply(c,a(h,"o",t,"i0","i1","w1")),c.push("for(i=0;i<w0;++i){for(j=0;j<w1;++j){var r=0.0;"),c.push.apply(c,a(p,"a",e,"(i0+i)","i2")),c.push.apply(c,a(d,"b",n,"i2","(i1+j)")),c.push("for(k=0;k<w2;++k){"),c.push("r+=",u(p,"a",e,"(i0+i)","(i2+k)"),"*",u(d,"b",n,"(i2+k)","(i1+j)"),";"),c.push.apply(c,o(p,"a",e,0,"(i2+k)")),c.push.apply(c,o(d,"b",n,0,"(i2+k)")),c.push("}");var g="r";i&&(g="A*r");return c.push.apply(c,s(h,"o",t,"(i0+i)","(i1+j)",g+"+"+u(h,"o",t,"(i0+i)","(i1+j)"))),c.push.apply(c,o(h,"o",t,0,"(i1+j)")),c.push("}"),c.push.apply(c,o(h,"o",t,1,"(i0+i)")),c.push("}}}}"),c}(t,e,n,l,c));return h.push("}return ",f),new Function(h.join(""))()};var r=32;function i(t,e){return"native"===e[1]?[t,"d0=",t,".length,",t,"d1=",t,"[0].length,"].join(""):[t,"d0=",t,".shape[0],",t,"d1=",t,".shape[1],",t,"s0=",t,".stride[0],",t,"s1=",t,".stride[1],",t,"o=",t,".offset,",t,"d=",t,".data,"].join("")}function a(t,e,n,r,i,a){var o=[];return"native"===n[1]?t[0]&&(r?o.push("var ",e,"p=",e,"[",r,"];"):o.push("var ",e,"p=",e,"[0];")):r&&i?a?o.push("var ",e,"t0=",e,"s",t[0],",",e,"t1=",e,"s",t[1],"-",e,"s",t[0],"*",a,",",e,"p=",e,"o+",r,"*",e,"s0+",i,"*",e,"s1;"):o.push("var ",e,"t0=",e,"s",t[0],",",e,"p=",e,"o+",r,"*",e,"s0+",i,"*",e,"s1;"):r?o.push("var ",e,"t0=",e,"s",t[0],",",e,"p=",e,"o+",r,"*",e,"s0;"):i?o.push("var ",e,"t0=",e,"s",t[0],",",e,"p=",e,"o+",i,"*",e,"s1;"):o.push("var ",e,"t0=",e,"s",t[0],",",e,"t1=",e,"s",t[1],"-",e,"s",t[0],"*",e,"d",t[0],",",e,"p=",e,"o;"),o}function o(t,e,n,r,i){var a=[];return"native"===n[1]?t[0]&&1===r&&a.push(e,"p=",e,"[",i,"+1]"):a.push(e,"p+=",e,"t",r,";"),a}function s(t,e,n,r,i,a){var o=[];return"native"===n[1]?t[0]?o.push(e,"p[",i,"]=",a,";"):o.push(e,"[",r,"][",i,"]=",a,";"):"generic"===n[1]?o.push(e,"d.set(",e,"p,",a,");"):o.push(e,"d[",e,"p]=",a,";"),o}function u(t,e,n,r,i){var a=[];return"native"===n[1]?t[0]?a.push(e,"p[",i,"]"):a.push(e,"[",r,"][",i,"]"):"generic"===n[1]?a.push(e,"d.get(",e,"p)"):a.push(e,"d[",e,"p]"),a.join("")}},function(t,e,n){"use strict";var r=n(47),i=n(61),a=n(2),o=n(7),s=n(4),u=n(3),l=n(33),c=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=x(n(11)),h=x(n(8)),p=_(n(48)),d=n(9),m=_(n(60)),g=x(n(12)),v=x(n(92)),y=x(n(197)),b=_(n(62));function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}var w=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(this,e),s(this,u(e).call(this,t))}return c(e,t),o(e,[{key:"_calcOutputShape",value:function(t){l(u(e.prototype),"_calcOutputShape",this).call(this,t);var n=this.kernelShape[0],r=t[2];this.outputShape[2]=n*r}},{key:"_im2col",value:function(t){var e=i(t.tensor.shape,3),n=e[0],r=e[1],a=e[2],o=this.kernelShape[1],s=this.kernelShape[2],u=this.outputShape[0]*this.outputShape[1],l=o*s;this.imColsMat||(this.imColsMat=new h.default([],[u*a,l]));for(var c=new h.default([],[o,s,1]),f=0,p=0;p<a;p++)for(var d=0,m=n-o;d<=m;d+=this.strides[0])for(var v=0,y=r-s;v<=y;v+=this.strides[1])g.default.assign(c.tensor,t.tensor.hi(d+o,v+s,p+1).lo(d,v,p)),this.imColsMat.tensor.data.set(c.tensor.data,f),f+=l;return this.imColsMat}},{key:"_w2row",value:function(){var t=this.weights.kernel.tensor.shape[2],e=i(this.kernelShape,3),n=e[0],r=e[1],a=e[2],o=r*a;this.wRowsMat=new h.default([],[o,n*t]);for(var s=new h.default([],[r,a]),u=new h.default([],[o]),l=0,c=0;c<t;c++)for(var f=0;f<n;f++)g.default.assign(s.tensor,this.weights.kernel.tensor.pick(null,null,c,f)),u.replaceTensorData(s.tensor.data),g.default.assign(this.wRowsMat.tensor.pick(null,l),u.tensor),l+=1;return this.wRowsMat}},{key:"_callCPU",value:function(t){this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._im2col(t);var e=this.kernelShape[0],n=this.outputShape[0],r=this.outputShape[1],i=n*r,a=this.inputShape[2],o=new h.default([],[i*a,e*a]);(0,v.default)(o.tensor,this.imColsMat.tensor,this.wRowsMat.tensor,1,1),this.output=new h.default([],this.outputShape);for(var s=n*r*e*a,u=new Float32Array(s),l=0;l<a;l++)for(var c=l*s+l*e;c<(l+1)*s;c+=e*a)for(var f=0;f<e;f++)u[c+f-l*s]=o.tensor.data[c+f];this.output.replaceTensorData(u)}},{key:"_createIndexMap",value:function(t){if(!this.indexMap){var e=i(this.inputShape,3),n=e[0],r=e[1],a=e[2],o=new h.default(t.data,t.shape,{type:Int32Array});if("same"===this.padding){var s=i(this.inputPadding,4);n=n+s[0]+s[1],r=r+s[2]+s[3];o=this._padInput(o,-1)}var u=this.kernelShape[1],l=this.kernelShape[2],c=this.outputShape[0]*this.outputShape[1],f=u*l;this.indexMap=new h.default([],[c*a,f],{type:Int32Array});for(var p=new h.default([],[u,l,1]),d=0,m=0;m<a;m++)for(var v=0,y=n-u;v<=y;v+=this.strides[0])for(var b=0,_=r-l;b<=_;b+=this.strides[1])g.default.assign(p.tensor,o.tensor.hi(v+u,b+l,m+1).lo(v,b,m)),this.indexMap.tensor.data.set(p.tensor.data,d),d+=f;this.indexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}}},{key:"_createOutputReshapeIndexMap",value:function(){if(!this.reshapeIndexMap){var t=this.kernelShape[0],e=[this.outputShape[0]*this.outputShape[1],this.outputShape[2]],n=new h.default([],e,{type:Int32Array}),r=new h.default([],e,{type:Int32Array});this.reshapeIndexMap=new h.default([],e,{type:Int32Array});for(var i=0;i<e[1];i++)for(var a=0;a<e[0];a++)g.default.assigns(n.tensor.pick(a,i),a+Math.floor(i/t)*e[0]);for(var o=0;o<e[1];o++)g.default.assigns(r.tensor.pick(null,o),o);g.default.muls(this.reshapeIndexMap.tensor,n.tensor,e[1]),g.default.addeq(this.reshapeIndexMap.tensor,r.tensor),this.reshapeIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}}},{key:"_callGPU",value:function(t){if(l(u(e.prototype),"_callGPU",this).call(this,t),this._createOutputReshapeIndexMap(),!this.outputReshaped){var n=[this.outputShape[0]*this.outputShape[1],this.outputShape[2]];this.outputReshaped=new h.default([],n),this.outputReshaped.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.outputReshaped.is2DReshaped=!0,this.outputReshaped.originalShape=this.outputShape,this.outputReshaped.indicesForReshaped=m.createIndicesFor2DReshaped(this.outputShape,!1,-1)}this.output.glTextureFragments&&this.output.convert2DRowFragmentedGLTextureToColStack(),d.webgl2.runProgram({program:this.output.glTextureFragments?this.mapInputFragmentsProgram:this.mapInputProgram,output:this.outputReshaped,inputs:[{input:this.output,name:"x"},{input:this.reshapeIndexMap,name:"indexMap"}],uniforms:[{value:this.output.glTextureShape[1],type:"int",name:"inputCols"}],supportsTextureFragments:!0}),this.output.glTextureFragments&&this.output.removeGLTextureFragmentsAsColStack()}}]),e}(y.default),S=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),(t=s(this,u(e).call(this,n))).layerClass="SeparableConv2D";var i=n.filters,o=void 0===i?1:i,l=n.kernel_size,c=void 0===l?[1,1]:l,f=n.strides,h=void 0===f?[1,1]:f,m=n.padding,g=void 0===m?"valid":m,v=n.data_format,y=void 0===v?"channels_last":v,_=n.depth_multiplier,x=void 0===_?1:_,w=n.activation,S=void 0===w?"linear":w,E=n.use_bias,k=void 0===E||E;return Array.isArray(c)?t.kernelShape=[o].concat(r(c)):t.kernelShape=[o,c,c],Array.isArray(h)?t.strides=h:t.strides=[h,h],"valid"===g||"same"===g?t.padding=g:t.throwError("Invalid padding."),"channels_last"===y||"channels_first"===y?t.dataFormat=y:t.throwError("Only channels_last and channels_first data formats are allowed."),t.activation=S,t.activationFunc=p[S],"valid"===g||"same"===g?t.padding=g:t.throwError("Invalid padding."),t.useBias=k,t.params=t.useBias?["depthwise_kernel","pointwise_kernel","bias"]:["depthwise_kernel","pointwise_kernel"],t.depthwiseConvAttrs={filters:x,kernel_size:[t.kernelShape[1],t.kernelShape[2]],strides:t.strides,padding:g,data_format:y,activation:"linear",use_bias:!1,gpu:n.gpu},t.pointwiseConvAttrs={filters:o,kernel_size:[1,1],strides:[1,1],padding:g,data_format:y,activation:"linear",use_bias:k,gpu:n.gpu},t.description="".concat(t.kernelShape[0]," ").concat(t.kernelShape.slice(1).join("x")," filters"),t.description+=t.strides.some(function(t){return t>1})?", ".concat(t.strides.join("x")," striding"):"",t.description+="valid"===t.padding?", no border padding":", pad to same borders",t.description+=x>1?", depth multiplier: ".concat(x):"",t.description+="linear"!==t.activation?", ".concat(t.activation," activation"):"",t.gpu&&(t.activationProgram=d.webgl2.compileProgram(b[t.activation])),t}return c(e,t),o(e,[{key:"setWeights",value:function(t){this._depthwiseConv=new w(this.depthwiseConvAttrs),this._depthwiseConv.setWeights(t.slice(0,1)),this._pointwiseConv=new y.default(this.pointwiseConvAttrs),this._pointwiseConv.setWeights(t.slice(1,3))}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this._depthwiseConv._callCPU(t),this._pointwiseConv._callCPU(this._depthwiseConv.output),this.output=this._pointwiseConv.output,this.activationFunc(this.output)}},{key:"_callGPU",value:function(t){this._depthwiseConv.outbound=[null],this._pointwiseConv.outbound=[null],this._depthwiseConv._callGPU(t),this._pointwiseConv._callGPU(this._depthwiseConv.outputReshaped),"linear"===this.activation?this.output=this._pointwiseConv.output:(this.output||(this.output=new h.default([],this._pointwiseConv.output.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this._pointwiseConv.output.originalShape,this.output.indicesForReshaped=m.createIndicesFor2DReshaped(this._pointwiseConv.output.originalShape,!1,-1)),this.outputPreactiv=this._pointwiseConv.output,d.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}],supportsTextureFragments:!0})),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1)))}}]),e}(f.default);e.default=S},function(t,e,n){"use strict";var r=n(61),i=n(47),a=n(2),o=n(7),s=n(4),u=n(3),l=n(33),c=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=w(n(11)),h=w(n(8)),p=x(n(48)),d=n(9),m=w(n(49)),g=x(n(60)),v=w(n(28)),y=w(n(12)),b=w(n(92)),_=x(n(62));function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function w(t){return t&&t.__esModule?t:{default:t}}var S="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",E=(0,v.default)({args:[{blockIndices:-1},"scalar","scalar"],body:function(t,e,n){for(var r=0;r<n;r++)if(-1===t[r]){t[r]=e;break}}}),k=(0,v.default)({args:[{blockIndices:-1},"array","scalar"],body:function(t,e,n){for(var r=0;r<n;r++)if(-1===t[r]){t[r]=e;break}}}),T=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),(t=s(this,u(e).call(this,n))).layerClass="Conv2DTranspose";var r=n.filters,o=void 0===r?1:r,l=n.kernel_size,c=void 0===l?[3,3]:l,f=n.strides,h=void 0===f?[1,1]:f,m=n.padding,g=void 0===m?"valid":m,v=n.data_format,y=void 0===v?"channels_last":v,b=n.activation,x=void 0===b?"linear":b,w=n.use_bias,E=void 0===w||w;return Array.isArray(c)?t.kernelShape=[o].concat(i(c)):t.kernelShape=[o,c,c],Array.isArray(h)?t.strides=h:t.strides=[h,h],"valid"===g||"same"===g?t.padding=g:t.throwError("Invalid padding."),"channels_last"===y||"channels_first"===y?t.dataFormat=y:t.throwError("Only channels_last and channels_first data formats are allowed."),t.activation=x,t.activationFunc=p[x],t.useBias=E,t.params=t.useBias?["kernel","bias"]:["kernel"],t.description="".concat(t.kernelShape[0]," ").concat(t.kernelShape.slice(1).join("x")," filters"),t.description+=t.strides.some(function(t){return t>1})?", ".concat(t.strides.join("x")," striding"):"",t.description+="valid"===t.padding?", no border padding":", pad to same borders",t.description+="linear"!==t.activation?", ".concat(t.activation," activation"):"",t.gpu&&(t.matMulProgram=d.webgl2.compileProgram(S),t.activationProgram=d.webgl2.compileProgram(_[t.activation])),t}return c(e,t),o(e,[{key:"setWeights",value:function(t){"channels_first"===this.dataFormat&&(t[0].tensor=t[0].tensor.transpose(2,3,1,0)),l(u(e.prototype),"setWeights",this).call(this,t,!1),this._w2row(),this.gpu&&(this.weights.kernel=this.wRowsMat,this.weights.kernel.createGLTexture({type:"2d",format:"float"}),this.useBias&&this.weights.bias.createGLTexture({type:"2d",format:"float"}))}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_calcOutputShape",value:function(t){if(!this.outputShape||!this.outputPadding){var e=t[0],n=t[1],i=r(this.kernelShape,3),a=i[0],o=i[1],s=i[2],u="same"===this.padding?e*this.strides[0]:e*this.strides[0]+Math.max(o-this.strides[0],0),l="same"===this.padding?n*this.strides[1]:n*this.strides[1]+Math.max(s-this.strides[1],0),c=a,f="same"===this.padding?Math.max(0,Math.floor((e-1)*this.strides[0]+o-u)):0,h="same"===this.padding?Math.max(0,Math.floor((n-1)*this.strides[1]+s-l)):0,p=Math.floor(f/2),d=f-p,m=Math.floor(h/2),g=h-m;this.outputShape=[u,l,c],this.outputPadding=[p,d,m,g]}}},{key:"_im2col",value:function(t){var e=r(t.tensor.shape,3),n=e[0],i=e[1],a=e[2];this.imColsMat||(this.imColsMat=new h.default([],[n*i,a]));for(var o=new h.default([],[n*i]),s=new h.default([],[n,i]),u=0;u<a;u++)y.default.assign(s.tensor,t.tensor.pick(null,null,u)),o.replaceTensorData(s.tensor.data),y.default.assign(this.imColsMat.tensor.pick(null,u),o.tensor);return this.imColsMat}},{key:"_w2row",value:function(){var t=r(this.weights.kernel.tensor.shape,4),e=t[0],n=t[1],i=t[2],a=t[3];this.wRowsMat=new h.default([],[a,e*n*i]);for(var o=new h.default([],[e*n*i]),s=new h.default([],[e,n,i]),u=0;u<a;u++)y.default.assign(s.tensor,this.weights.kernel.tensor.pick(null,null,null,u)),o.replaceTensorData(s.tensor.data),y.default.assign(this.wRowsMat.tensor.pick(u,null),o.tensor);return this.wRowsMat}},{key:"_callCPU",value:function(t){this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),this._im2col(t);var e=t.tensor.shape[0],n=t.tensor.shape[1],i=r(this.kernelShape,3),a=i[0],o=i[1],s=i[2],u=new h.default([],[e*n,o*s*a]);(0,b.default)(u.tensor,this.imColsMat.tensor,this.wRowsMat.tensor,1,1);var l=r(this.outputPadding,4),c=l[0],f=l[1],p=l[2],d=l[3];this.output=new h.default([],this.outputShape);for(var m=new h.default([],[this.outputShape[0]+c+f,this.outputShape[1]+p+d,this.outputShape[2]]),g=[o,s,a],v=new h.default([],g),_=new h.default([],[o*s*a]),x=0,w=0;w<e;w++)for(var S=0;S<n;S++){y.default.assign(_.tensor,u.tensor.pick(x,null)),v.replaceTensorData(_.tensor.data);var E=w*this.strides[0],k=S*this.strides[1];y.default.addeq(m.tensor.hi(E+o,k+s,this.outputShape[2]).lo(E,k,0),v.tensor),x+=1}if(y.default.assign(this.output.tensor,m.tensor.hi(this.outputShape[0]+c,this.outputShape[1]+p,this.outputShape[2]).lo(c,p,0)),this.useBias)for(var T=0;T<a;T++)y.default.addseq(this.output.tensor.pick(null,null,T),this.weights.bias.tensor.get(T));this.activationFunc(this.output),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1))}},{key:"_createIndexMap",value:function(){if(!this.indexMap){var t=this.inputShape[0],e=this.inputShape[1],n=r(this.kernelShape,3),i=n[0],a=n[1],o=n[2],s=r(this.outputPadding,4),u=s[0],l=s[1],c=s[2],f=s[3],p=(a-this.strides[0]+1)*(o-this.strides[1]+1),d=[this.outputShape[0],this.outputShape[1],p],m=[this.outputShape[0]+u+l,this.outputShape[1]+c+f,p],g=new h.default([],d,{type:Int32Array}),v=new h.default([],d,{type:Int32Array}),b=new h.default([],m,{type:Int32Array}),_=new h.default([],m,{type:Int32Array});y.default.assigns(g.tensor,-1),y.default.assigns(v.tensor,-1),y.default.assigns(b.tensor,-1),y.default.assigns(_.tensor,-1);for(var x=new h.default([],[a,o,i],{type:Int32Array}),w=0;w<a*o*i;w++)x.tensor.data[w]=w;for(var S=0;S<t;S++)for(var T=0;T<e;T++){var P=S*e+T,M=S*this.strides[0],C=T*this.strides[1];E(b.tensor.hi(M+a,C+o,p).lo(M,C,0),P,p),k(_.tensor.hi(M+a,C+o,p).lo(M,C,0),x.tensor.pick(null,null,0),p)}y.default.assign(g.tensor,b.tensor.hi(this.outputShape[0]+u,this.outputShape[1]+c,p).lo(u,c,0)),y.default.assign(v.tensor,_.tensor.hi(this.outputShape[0]+u,this.outputShape[1]+c,p).lo(u,c,0));var O=[this.outputShape[0]*this.outputShape[1],p];this.indexMap=new h.default([],O,{type:Int32Array});for(var I=new h.default([],[p],{type:Int32Array}),N=0;N<this.outputShape[0];N++)for(var A=0;A<this.outputShape[1];A++){for(var R=0;R<p;R++){var D=g.tensor.get(N,A,R),j=v.tensor.get(N,A,R);-1!==D&&-1!==j?I.tensor.set(R,D*this.weights.kernel.glTextureShape[1]+j):I.tensor.set(R,-1)}y.default.assign(this.indexMap.tensor.pick(N*this.outputShape[1]+A,null),I.tensor)}this.indexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}}},{key:"_callGPU",value:function(t){t.is2DReshaped||t.is2DSquareReshaped?(this.inputShape=t.originalShape,this._calcOutputShape(this.inputShape)):(this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),this._im2col(t),this.imColsMat.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}));var e=t.is2DReshaped||t.is2DSquareReshaped?t:this.imColsMat;if(!this.matMulResult){var n=[e.glTextureShape[0],this.weights.kernel.glTextureShape[1]];this.matMulResult=new h.default([],n),this.matMulResult.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})}if("linear"!==this.activation&&!this.outputPreactiv){var r=[this.outputShape[0]*this.outputShape[1],this.outputShape[2]];this.outputPreactiv=new h.default([],r),this.outputPreactiv.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.outputPreactiv.is2DReshaped=!0,this.outputPreactiv.originalShape=this.outputShape,this.outputPreactiv.indicesForReshaped=g.createIndicesFor2DReshaped(this.outputShape,!1,-1)}if(!this.output){var a=[this.outputShape[0]*this.outputShape[1],this.outputShape[2]];this.output=new h.default([],a),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=g.createIndicesFor2DReshaped(this.outputShape,!1,-1)}d.webgl2.runProgram({program:this.matMulProgram,output:this.matMulResult,inputs:[{input:e,name:"A"},{input:this.weights.kernel,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}],supportsTextureFragments:!0}),this._createIndexMap();var o=Boolean(this.matMulResult.glTextureFragments);if(o&&this.matMulResult.convert2DRowFragmentedGLTextureToColStack(),!this.convTransposeProgram){var s=(0,m.default)("conv2dTranspose",this.output.glTextureFragmentShape?this.output.glTextureFragmentShape:this.output.glTextureShape,this.matMulResult.glTextureFragmentShape?this.matMulResult.glTextureFragmentShape:this.matMulResult.glTextureShape,this.indexMap.glTextureFragmentShape?this.indexMap.glTextureFragmentShape:this.indexMap.glTextureShape,this.useBias,o);this.convTransposeProgram=d.webgl2.compileProgram(s)}d.webgl2.runProgram({program:this.convTransposeProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:[{input:this.matMulResult,name:"matMulResult"},{input:this.indexMap,name:"indexMap"}].concat(i(this.useBias?[{input:this.weights.bias,name:"bias"}]:[])),supportsTextureFragments:!0}),o&&this.matMulResult.removeGLTextureFragmentsAsColStack(),"linear"!==this.activation&&d.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(2,0,1)))}}]),e}(f.default);e.default=T},function(t,e,n){"use strict";var r=n(61),i=n(47),a=n(2),o=n(7),s=n(4),u=n(3),l=n(33),c=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=x(n(11)),h=x(n(8)),p=_(n(48)),d=n(9),m=x(n(49)),g=_(n(60)),v=x(n(12)),y=x(n(92)),b=_(n(62));function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}var w="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",S="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 inputSize = textureSize(x, 0);\n  ivec2 outputSize = textureSize(indexMap, 0);\n  int out_x = int(float(outputSize[0]) * outTex.x);\n  int out_y = int(float(outputSize[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    int fragmentIndex = int(floor(float(rowIndex) / float(inputSize[1])));\n    rowIndex = int(mod(float(rowIndex), float(inputSize[1])));\n    colIndex = fragmentIndex * inputCols + colIndex;\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",E="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",k=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),(t=s(this,u(e).call(this,n))).layerClass="Conv3D";var r=n.filters,o=void 0===r?1:r,l=n.kernel_size,c=void 0===l?[1,1,1]:l,f=n.strides,h=void 0===f?[1,1,1]:f,m=n.padding,g=void 0===m?"valid":m,v=n.data_format,y=void 0===v?"channels_last":v,_=n.dilation_rate,x=void 0===_?[1,1,1]:_,k=n.activation,T=void 0===k?"linear":k,P=n.use_bias,M=void 0===P||P;return Array.isArray(c)?t.kernelShape=[o].concat(i(c)):t.kernelShape=[o,c,c,c],Array.isArray(h)?t.strides=h:t.strides=[h,h,h],"valid"===g||"same"===g?t.padding=g:t.throwError("Invalid padding."),"channels_last"===y||"channels_first"===y?t.dataFormat=y:t.throwError("Only channels_last and channels_first data formats are allowed."),Array.isArray(x)?t.dilationRate=x:t.dilationRate=[x,x,x],1===t.dilationRate[0]&&1===t.dilationRate[1]&&1===t.dilationRate[2]||1===t.strides[0]&&1===t.strides[1]&&1===t.strides[2]||t.throwError("Incompatible combination of dilation_rate with strides."),t.activation=T,t.activationFunc=p[T],t.useBias=M,t.params=t.useBias?["kernel","bias"]:["kernel"],t.description="".concat(t.kernelShape[0]," ").concat(t.kernelShape.slice(1).join("x")," filters"),t.description+=t.strides.some(function(t){return t>1})?", ".concat(t.strides.join("x")," striding"):"",t.description+="valid"===t.padding?", no border padding":", pad to same borders",t.description+=t.dilationRate.some(function(t){return t>1})?", ".concat(t.dilationRate.join("x")," dilation"):"",t.description+="linear"!==t.activation?", ".concat(t.activation," activation"):"",t.gpu&&(t.mapInputProgram=d.webgl2.compileProgram(w),t.mapInputFragmentsProgram=d.webgl2.compileProgram(S),t.matMulProgram=d.webgl2.compileProgram(E),t.activationProgram=d.webgl2.compileProgram(b[t.activation])),t}return c(e,t),o(e,[{key:"setWeights",value:function(t){"channels_first"===this.dataFormat&&(t[0].tensor=t[0].tensor.transpose(2,3,4,1,0)),l(u(e.prototype),"setWeights",this).call(this,t,!1),this._w2row(),this.gpu&&(this.weights.kernel=this.wRowsMat,this.weights.kernel.createGLTexture({type:"2d",format:"float"}),this.useBias&&this.weights.bias.createGLTexture({type:"2d",format:"float"}))}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_calcOutputShape",value:function(t){if(!this.outputShape||!this.inputPadding){var e=t[0],n=t[1],i=t[2],a=r(this.kernelShape,4),o=a[0],s=a[1],u=a[2],l=a[3],c=s+(s-1)*(this.dilationRate[0]-1),f=u+(u-1)*(this.dilationRate[1]-1),h=l+(l-1)*(this.dilationRate[2]-1),p="same"===this.padding?Math.floor((e+this.strides[0]-1)/this.strides[0]):Math.floor((e-c+this.strides[0])/this.strides[0]),d="same"===this.padding?Math.floor((n+this.strides[1]-1)/this.strides[1]):Math.floor((n-f+this.strides[1])/this.strides[1]),m="same"===this.padding?Math.floor((i+this.strides[2]-1)/this.strides[2]):Math.floor((i-h+this.strides[2])/this.strides[2]),g=o,v="same"===this.padding?Math.max(0,Math.floor((p-1)*this.strides[0]+c-e)):0,y="same"===this.padding?Math.max(0,Math.floor((d-1)*this.strides[1]+f-n)):0,b="same"===this.padding?Math.max(0,Math.floor((m-1)*this.strides[2]+h-i)):0,_=Math.floor(v/2),x=v-_,w=Math.floor(y/2),S=y-w,E=Math.floor(b/2),k=b-E;this.outputShape=[p,d,m,g],this.inputPadding=[_,x,w,S,E,k]}}},{key:"_padInput",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("same"===this.padding){var n=r(t.tensor.shape,4),i=n[0],a=n[1],o=n[2],s=n[3],u=r(this.inputPadding,6),l=u[0],c=u[1],f=u[2],p=u[3],d=u[4],m=i+l+c,g=a+f+p,y=o+d+u[5],b=new h.default([],[m,g,y,s]);return 0!==e&&v.default.assigns(b.tensor,e),v.default.assign(b.tensor.hi(i+l,a+f,o+d,s).lo(l,f,d,0),t.tensor),b}return t}},{key:"_vol2col",value:function(t){var e=r(t.tensor.shape,4),n=e[0],i=e[1],a=e[2],o=e[3],s=this.kernelShape[1],u=this.kernelShape[2],l=this.kernelShape[3],c=this.outputShape[0]*this.outputShape[1]*this.outputShape[2],f=s*u*l*o,p=s+(s-1)*(this.dilationRate[0]-1),d=u+(u-1)*(this.dilationRate[1]-1),m=l+(l-1)*(this.dilationRate[2]-1);if(this.volColsMat||(this.volColsMat=new h.default([],[c,f])),1===p&&1===d&&1===m&&1===this.strides[0]&&1===this.strides[1]&&1===this.strides[2])return this.volColsMat.replaceTensorData(t.tensor.data),this.volColsMat;for(var g=new h.default([],[s,u,l,o]),y=0,b=0,_=n-p;b<=_;b+=this.strides[0])for(var x=0,w=i-d;x<=w;x+=this.strides[1])for(var S=0,E=a-m;S<=E;S+=this.strides[2])v.default.assign(g.tensor,t.tensor.hi(b+p,x+d,S+m,o).lo(b,x,S,0).step(this.dilationRate[0],this.dilationRate[1],this.dilationRate[2],1)),this.volColsMat.tensor.data.set(g.tensor.data,y),y+=f;return this.volColsMat}},{key:"_w2row",value:function(){var t=this.weights.kernel.tensor.shape[3],e=r(this.kernelShape,4),n=e[0],i=e[1],a=e[2],o=e[3],s=i*a*o*t;this.wRowsMat=new h.default([],[s,n]);for(var u=new h.default([],[i,a,o,t]),l=new h.default([],[s]),c=0;c<n;c++)v.default.assign(u.tensor,this.weights.kernel.tensor.pick(null,null,null,null,c)),l.replaceTensorData(u.tensor.data),v.default.assign(this.wRowsMat.tensor.pick(null,c),l.tensor);return this.wRowsMat}},{key:"_callCPU",value:function(t){this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._vol2col(t);var e=this.kernelShape[0],n=this.outputShape[0],r=this.outputShape[1],i=this.outputShape[2],a=n*r*i,o=new h.default([],[a,e]);if(this.useBias)for(var s=0;s<e;s++)v.default.assigns(o.tensor.pick(null,s),this.weights.bias.tensor.get(s));(0,y.default)(o.tensor,this.volColsMat.tensor,this.wRowsMat.tensor,1,1),this.output=new h.default([],this.outputShape);for(var u=new h.default([],[n*r*i]),l=new h.default([],[n,r,i]),c=0;c<e;c++)v.default.assign(u.tensor,o.tensor.pick(null,c)),l.replaceTensorData(u.tensor.data),v.default.assign(this.output.tensor.pick(null,null,null,c),l.tensor);this.activationFunc(this.output),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(3,0,1,2))}},{key:"_createIndexMap",value:function(t){if(!this.indexMap){var e=r(this.inputShape,4),n=e[0],i=e[1],a=e[2],o=e[3],s=new h.default(t.data,t.shape,{type:Int32Array});if("same"===this.padding){var u=r(this.inputPadding,6);n=n+u[0]+u[1],i=i+u[2]+u[3],a=a+u[4]+u[5];s=this._padInput(s,-1)}var l=this.kernelShape[1],c=this.kernelShape[2],f=this.kernelShape[3],p=this.outputShape[0]*this.outputShape[1]*this.outputShape[2],d=l*c*f*o,m=l+(l-1)*(this.dilationRate[0]-1),g=c+(c-1)*(this.dilationRate[1]-1),y=f+(f-1)*(this.dilationRate[2]-1);this.indexMap=new h.default([],[p,d],{type:Int32Array});for(var b=new h.default([],[l,c,f,o]),_=0,x=0,w=n-m;x<=w;x+=this.strides[0])for(var S=0,E=i-g;S<=E;S+=this.strides[1])for(var k=0,T=a-y;k<=T;k+=this.strides[2])v.default.assign(b.tensor,s.tensor.hi(x+m,S+g,k+y,o).lo(x,S,k,0).step(this.dilationRate[0],this.dilationRate[1],this.dilationRate[2],1)),this.indexMap.tensor.data.set(b.tensor.data,_),_+=d;this.indexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}}},{key:"_callGPU",value:function(t){var e;if(t.is2DReshaped||t.is2DSquareReshaped?(this.inputShape=t.originalShape,this._calcOutputShape(this.inputShape),this._createIndexMap(t.indicesForReshaped),e=[this.indexMap.glTextureShape[0],this.weights.kernel.glTextureShape[1]]):(this.inputShape=t.tensor.shape,this._calcOutputShape(this.inputShape),t=this._padInput(t),this._vol2col(t),this.volColsMat.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),e=[this.volColsMat.glTextureShape[0],this.weights.kernel.glTextureShape[1]]),"linear"===this.activation||this.outputPreactiv||(this.outputPreactiv=new h.default([],e),this.outputPreactiv.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.outputPreactiv.is2DReshaped=!0,this.outputPreactiv.originalShape=this.outputShape,this.outputPreactiv.indicesForReshaped=g.createIndicesFor2DReshaped(this.outputShape,!1,-1)),this.output||(this.output=new h.default([],e),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output.is2DReshaped=!0,this.output.originalShape=this.outputShape,this.output.indicesForReshaped=g.createIndicesFor2DReshaped(this.outputShape,!1,-1)),t.is2DReshaped||t.is2DSquareReshaped){var n=Boolean(t.glTextureFragments);if(n&&t.convert2DRowFragmentedGLTextureToColStack(),!this.convProgram){var r=(0,m.default)("conv2d",this.output.glTextureFragmentShape?this.output.glTextureFragmentShape:this.output.glTextureShape,t.glTextureFragmentShape?t.glTextureFragmentShape:t.glTextureShape,this.indexMap.glTextureFragmentShape?this.indexMap.glTextureFragmentShape:this.indexMap.glTextureShape,this.useBias,n);this.convProgram=d.webgl2.compileProgram(r)}d.webgl2.runProgram({program:this.convProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"},{input:this.weights.kernel,name:"kernel"}].concat(i(this.useBias?[{input:this.weights.bias,name:"bias"}]:[])),supportsTextureFragments:!0}),n&&t.removeGLTextureFragmentsAsColStack()}else{var a=[{input:this.volColsMat,name:"A"},{input:this.weights.kernel,name:"B"}];this.useBias&&a.push({input:this.weights.bias,name:"C"}),d.webgl2.runProgram({program:this.matMulProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:a,uniforms:[{value:this.useBias?1:0,type:"bool",name:"addC"}],supportsTextureFragments:!0})}"linear"!==this.activation&&d.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.reshapeFrom2D(),"channels_first"===this.dataFormat&&(this.output.tensor=this.output.tensor.transpose(3,0,1,2)))}}]),e}(f.default);e.default=k},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Cropping1D";var i=n.cropping,s=void 0===i?[0,0]:i;return Array.isArray(s)?t.cropping=s:t.cropping=[s,s],t.description="".concat(JSON.stringify(t.cropping)),t.gpu&&(t.mapInputProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]-this.cropping[0]-this.cropping[1],this.inputShape[1]],this.output=new l.default([],this.outputShape),f.default.assign(this.output.tensor,t.tensor.hi(this.inputShape[0]-this.cropping[1],this.inputShape[2]).lo(this.cropping[0],0))}},{key:"_createIndexMap",value:function(){var t,e;if(!this.indexMap){for(var n=new l.default([],this.inputShape,{type:Int32Array}),r=new l.default([],this.inputShape,{type:Int32Array}),i=new l.default([],this.inputShape,{type:Int32Array}),a=0;a<this.inputShape[0];a++)f.default.assigns(r.tensor.pick(a,null),a);for(var o=0;o<this.inputShape[1];o++)f.default.assigns(i.tensor.pick(null,o),o);f.default.muls(n.tensor,r.tensor,this.inputShape[1]),f.default.addeq(n.tensor,i.tensor),this.indexMap=new l.default([],this.outputShape,{type:Int32Array});var s=[this.cropping[0],0],u=[this.inputShape[0]-this.cropping[1],this.inputShape[2]];f.default.assign(this.indexMap.tensor,(t=(e=n.tensor).hi.apply(e,u)).lo.apply(t,s)),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]-this.cropping[0]-this.cropping[1],this.inputShape[1]],this._createIndexMap(),this.output||(this.output=new l.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Cropping2D";var i=n.cropping,s=void 0===i?[[0,0],[0,0]]:i,u=n.data_format,l=void 0===u?"channels_last":u;return Array.isArray(s)?Array.isArray(s[0])?t.cropping=s:t.cropping=[[s[0],s[0]],[s[1],s[1]]]:t.cropping=[[s,s],[s,s]],t.dataFormat=l,t.description="".concat(JSON.stringify(t.cropping)),t.gpu&&(t.mapInputProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[2]],this.output=new l.default([],this.outputShape),f.default.assign(this.output.tensor,t.tensor.hi(this.inputShape[0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][1],this.inputShape[2]).lo(this.cropping[0][0],this.cropping[1][0],0)),"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(2,0,1),this.output.tensor=this.output.tensor.transpose(2,0,1))}},{key:"_createIndexMap",value:function(t,e){var n,r;if(!this.indexMap){var i=new l.default(t.data,t.shape,{type:Int32Array});this.indexMap=new l.default([],this.outputShape,{type:Int32Array});var a="channels_first"===this.dataFormat?[0,this.cropping[0][0],this.cropping[1][0]]:[this.cropping[0][0],this.cropping[1][0],0],o="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]-this.cropping[0][1],this.inputShape[2]-this.cropping[1][1]]:[this.inputShape[0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][1],this.inputShape[2]];f.default.assign(this.indexMap.tensor,(n=(r=i.tensor).hi.apply(r,o)).lo.apply(n,a)),e?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[2]-this.cropping[1][0]-this.cropping[1][1]]:[this.inputShape[0]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[2]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new l.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Cropping3D";var i=n.cropping,s=void 0===i?[[0,0],[0,0],[0,0]]:i,u=n.data_format,l=void 0===u?"channels_last":u;return Array.isArray(s)?Array.isArray(s[0])?t.cropping=s:t.cropping=[[s[0],s[0]],[s[1],s[1]],[s[2],s[2]]]:t.cropping=[[s,s],[s,s],[s,s]],t.dataFormat=l,t.description="".concat(JSON.stringify(t.cropping)),t.gpu&&(t.mapInputProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[2]-this.cropping[2][0]-this.cropping[2][1],this.inputShape[3]],this.output=new l.default([],this.outputShape),f.default.assign(this.output.tensor,t.tensor.hi(this.inputShape[0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][1],this.inputShape[2]-this.cropping[2][1],this.inputShape[3]).lo(this.cropping[0][0],this.cropping[1][0],this.cropping[2][0],0)),"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(3,0,1,2),this.output.tensor=this.output.tensor.transpose(3,0,1,2))}},{key:"_createIndexMap",value:function(t,e){var n,r;if(!this.indexMap){var i=new l.default(t.data,t.shape,{type:Int32Array});this.indexMap=new l.default([],this.outputShape,{type:Int32Array});var a="channels_first"===this.dataFormat?[0,this.cropping[0][0],this.cropping[1][0],this.cropping[2][0]]:[this.cropping[0][0],this.cropping[1][0],this.cropping[2][0],0],o="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]-this.cropping[0][1],this.inputShape[2]-this.cropping[1][1],this.inputShape[3]-this.cropping[2][1]]:[this.inputShape[0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][1],this.inputShape[2]-this.cropping[2][1],this.inputShape[3]];f.default.assign(this.indexMap.tensor,(n=(r=i.tensor).hi.apply(r,o)).lo.apply(n,a)),e?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[2]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[3]-this.cropping[2][0]-this.cropping[2][1]]:[this.inputShape[0]-this.cropping[0][0]-this.cropping[0][1],this.inputShape[1]-this.cropping[1][0]-this.cropping[1][1],this.inputShape[2]-this.cropping[2][0]-this.cropping[2][1],this.inputShape[3]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new l.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="UpSampling1D";var i=n.size,s=void 0===i?2:i;return t.size=s,t.description="size ".concat(s),t.gpu&&(t.mapInputProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]*this.size,this.inputShape[1]],this.output=new l.default([],this.outputShape);for(var e=0;e<this.size;e++)f.default.assign(this.output.tensor.lo(e,0).step(this.size,1),t.tensor)}},{key:"_createIndexMap",value:function(){if(!this.indexMap){for(var t=new l.default([],this.inputShape,{type:Int32Array}),e=new l.default([],this.inputShape,{type:Int32Array}),n=new l.default([],this.inputShape,{type:Int32Array}),r=0;r<this.inputShape[0];r++)f.default.assigns(e.tensor.pick(r,null),r);for(var i=0;i<this.inputShape[1];i++)f.default.assigns(n.tensor.pick(null,i),i);f.default.muls(t.tensor,e.tensor,this.inputShape[1]),f.default.addeq(t.tensor,n.tensor),this.indexMap=new l.default([],this.outputShape,{type:Int32Array});for(var a=0;a<this.size;a++)f.default.assign(this.indexMap.tensor.lo(a,0).step(this.size,1),t.tensor);this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]*this.size,this.inputShape[1]],this._createIndexMap(),this.output||(this.output=new l.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="UpSampling2D";var i=n.size,s=void 0===i?[2,2]:i,u=n.data_format,l=void 0===u?"channels_last":u;return Array.isArray(s)?t.size=s:t.size=[s,s],t.dataFormat=l,t.description="size ".concat(t.size.join("x")),t.gpu&&(t.mapInputProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]*this.size[0],this.inputShape[1]*this.size[1],this.inputShape[2]],this.output=new l.default([],this.outputShape);for(var e=0;e<this.size[0];e++)for(var n=0;n<this.size[1];n++)f.default.assign(this.output.tensor.lo(e,n,0).step(this.size[0],this.size[1],1),t.tensor);"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(2,0,1),this.output.tensor=this.output.tensor.transpose(2,0,1))}},{key:"_createIndexMap",value:function(t,e){if(!this.indexMap){var n=new l.default(t.data,t.shape,{type:Int32Array});this.indexMap=new l.default([],this.outputShape,{type:Int32Array});for(var r=0;r<this.size[0];r++)for(var i=0;i<this.size[1];i++){var a,o,s="channels_first"===this.dataFormat?[0,r,i]:[r,i,0],u="channels_first"===this.dataFormat?[1,this.size[0],this.size[1]]:[this.size[0],this.size[1],1];f.default.assign((a=(o=this.indexMap.tensor).lo.apply(o,s)).step.apply(a,u),n.tensor)}e?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]*this.size[0],this.inputShape[2]*this.size[1]]:[this.inputShape[0]*this.size[0],this.inputShape[1]*this.size[1],this.inputShape[2]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new l.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="UpSampling3D";var i=n.size,s=void 0===i?[2,2,2]:i,u=n.data_format,l=void 0===u?"channels_last":u;return Array.isArray(s)?t.size=s:t.size=[s,s,s],t.dataFormat=l,t.description="size ".concat(t.size.join("x")),t.gpu&&(t.mapInputProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]*this.size[0],this.inputShape[1]*this.size[1],this.inputShape[2]*this.size[2],this.inputShape[3]],this.output=new l.default([],this.outputShape);for(var e=0;e<this.size[0];e++)for(var n=0;n<this.size[1];n++)for(var r=0;r<this.size[2];r++)f.default.assign(this.output.tensor.lo(e,n,r,0).step(this.size[0],this.size[1],this.size[2],1),t.tensor);"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(3,0,1,2),this.output.tensor=this.output.tensor.transpose(3,0,1,2))}},{key:"_createIndexMap",value:function(t,e){if(!this.indexMap){var n=new l.default(t.data,t.shape,{type:Int32Array});this.indexMap=new l.default([],this.outputShape,{type:Int32Array});for(var r=0;r<this.size[0];r++)for(var i=0;i<this.size[1];i++)for(var a=0;a<this.size[2];a++){var o,s,u="channels_first"===this.dataFormat?[0,r,i,a]:[r,i,a,0],c="channels_first"===this.dataFormat?[1,this.size[0],this.size[1],this.size[2]]:[this.size[0],this.size[1],this.size[2],1];f.default.assign((o=(s=this.indexMap.tensor).lo.apply(s,u)).step.apply(o,c),n.tensor)}e?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]*this.size[0],this.inputShape[2]*this.size[1],this.inputShape[3]*this.size[2]]:[this.inputShape[0]*this.size[0],this.inputShape[1]*this.size[1],this.inputShape[2]*this.size[2],this.inputShape[3]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new l.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="ZeroPadding1D";var i=n.padding,s=void 0===i?[1,1]:i;return Array.isArray(s)?t.padding=s:t.padding=[s,s],t.description="".concat(JSON.stringify(t.padding)),t.gpu&&(t.mapInputProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]+this.padding[0]+this.padding[1],this.inputShape[1]],this.output=new l.default([],this.outputShape),f.default.assign(this.output.tensor.hi(this.inputShape[0]+this.padding[0],this.inputShape[1]).lo(this.padding[0],0),t.tensor)}},{key:"_createIndexMap",value:function(){var t,e;if(!this.indexMap){for(var n=new l.default([],this.inputShape,{type:Int32Array}),r=new l.default([],this.inputShape,{type:Int32Array}),i=new l.default([],this.inputShape,{type:Int32Array}),a=0;a<this.inputShape[0];a++)f.default.assigns(r.tensor.pick(a,null),a);for(var o=0;o<this.inputShape[1];o++)f.default.assigns(i.tensor.pick(null,o),o);f.default.muls(n.tensor,r.tensor,this.inputShape[1]),f.default.addeq(n.tensor,i.tensor),this.indexMap=new l.default([],this.outputShape,{type:Int32Array});var s=[this.padding[0],0],u=[this.inputShape[0]+this.padding[0],this.inputShape[1]];f.default.assigns(this.indexMap.tensor,-1),f.default.assign((t=(e=this.indexMap.tensor).hi.apply(e,u)).lo.apply(t,s),n.tensor),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]+this.padding[0]+this.padding[1],this.inputShape[1]],this._createIndexMap(),this.output||(this.output=new l.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="ZeroPadding2D";var i=n.padding,s=void 0===i?[[1,1],[1,1]]:i,u=n.data_format,l=void 0===u?"channels_last":u;return Array.isArray(s)?Array.isArray(s[0])?t.padding=s:t.padding=[[s[0],s[0]],[s[1],s[1]]]:t.padding=[[s,s],[s,s]],t.dataFormat=l,t.description="".concat(JSON.stringify(t.padding)),t.gpu&&(t.mapInputProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]+this.padding[0][0]+this.padding[0][1],this.inputShape[1]+this.padding[1][0]+this.padding[1][1],this.inputShape[2]],this.output=new l.default([],this.outputShape),f.default.assign(this.output.tensor.hi(this.inputShape[0]+this.padding[0][0],this.inputShape[1]+this.padding[1][0],this.inputShape[2]).lo(this.padding[0][0],this.padding[1][0],0),t.tensor),"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(2,0,1),this.output.tensor=this.output.tensor.transpose(2,0,1))}},{key:"_createIndexMap",value:function(t,e){var n,r;if(!this.indexMap){var i=new l.default(t.data,t.shape,{type:Int32Array});this.indexMap=new l.default([],this.outputShape,{type:Int32Array});var a="channels_first"===this.dataFormat?[0,this.padding[0][0],this.padding[1][0]]:[this.padding[0][0],this.padding[1][0],0],o="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]+this.padding[0][0],this.inputShape[2]+this.padding[1][0]]:[this.inputShape[0]+this.padding[0][0],this.inputShape[1]+this.padding[1][0],this.inputShape[2]];f.default.assigns(this.indexMap.tensor,-1),f.default.assign((n=(r=this.indexMap.tensor).hi.apply(r,o)).lo.apply(n,a),i.tensor),e?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]+this.padding[0][0]+this.padding[0][1],this.inputShape[2]+this.padding[1][0]+this.padding[1][1]]:[this.inputShape[0]+this.padding[0][0]+this.padding[0][1],this.inputShape[1]+this.padding[1][0]+this.padding[1][1],this.inputShape[2]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new l.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="ZeroPadding3D";var i=n.padding,s=void 0===i?[[1,1],[1,1],[1,1]]:i,u=n.data_format,l=void 0===u?"channels_last":u;return Array.isArray(s)?Array.isArray(s[0])?t.padding=s:t.padding=[[s[0],s[0]],[s[1],s[1]],[s[2],s[2]]]:t.padding=[[s,s],[s,s],[s,s]],t.dataFormat=l,t.description="".concat(JSON.stringify(t.padding)),t.gpu&&(t.mapInputProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(1,2,3,0)),this.inputShape=t.tensor.shape,this.outputShape=[this.inputShape[0]+this.padding[0][0]+this.padding[0][1],this.inputShape[1]+this.padding[1][0]+this.padding[1][1],this.inputShape[2]+this.padding[2][0]+this.padding[2][1],this.inputShape[3]],this.output=new l.default([],this.outputShape),f.default.assign(this.output.tensor.hi(this.inputShape[0]+this.padding[0][0],this.inputShape[1]+this.padding[1][0],this.inputShape[2]+this.padding[2][0],this.inputShape[3]).lo(this.padding[0][0],this.padding[1][0],this.padding[2][0],0),t.tensor),"channels_first"===this.dataFormat&&(t.tensor=t.tensor.transpose(3,0,1,2),this.output.tensor=this.output.tensor.transpose(3,0,1,2))}},{key:"_createIndexMap",value:function(t,e){var n,r;if(!this.indexMap){var i=new l.default(t.data,t.shape,{type:Int32Array});this.indexMap=new l.default([],this.outputShape,{type:Int32Array});var a="channels_first"===this.dataFormat?[0,this.padding[0][0],this.padding[1][0],this.padding[2][0]]:[this.padding[0][0],this.padding[1][0],this.padding[2][0],0],o="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]+this.padding[0][0],this.inputShape[2]+this.padding[1][0],this.inputShape[3]+this.padding[2][0]]:[this.inputShape[0]+this.padding[0][0],this.inputShape[1]+this.padding[1][0],this.inputShape[2]+this.padding[2][0],this.inputShape[3]];f.default.assigns(this.indexMap.tensor,-1),f.default.assign((n=(r=this.indexMap.tensor).hi.apply(r,o)).lo.apply(n,a),i.tensor),e?this.indexMap.reshapeTo2D():this.indexMap.reshapeTo2DSquare(),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture||(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"})),this.inputShape=t.originalShape,this.outputShape="channels_first"===this.dataFormat?[this.inputShape[0],this.inputShape[1]+this.padding[0][0]+this.padding[0][1],this.inputShape[2]+this.padding[1][0]+this.padding[1][1],this.inputShape[3]+this.padding[2][0]+this.padding[2][1]]:[this.inputShape[0]+this.padding[0][0]+this.padding[0][1],this.inputShape[1]+this.padding[1][0]+this.padding[1][1],this.inputShape[2]+this.padding[2][0]+this.padding[2][1],this.inputShape[3]],this._createIndexMap(t.indicesForReshaped,t.is2DReshaped),this.output||(this.output=new l.default([],this.outputShape),t.is2DReshaped?this.output.reshapeTo2D():this.output.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.reshapeFrom2DSquare())}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Dense",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Activation",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Dropout",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"SpatialDropout1D",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"SpatialDropout2D",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"SpatialDropout3D",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"Flatten",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Reshape",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"Permute",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"RepeatVector",{enumerable:!0,get:function(){return h.default}});var r=p(n(739)),i=p(n(765)),a=p(n(766)),o=p(n(767)),s=p(n(768)),u=p(n(769)),l=p(n(770)),c=p(n(771)),f=p(n(772)),h=p(n(773));function p(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=g(n(11)),l=g(n(8)),c=m(n(48)),f=n(9),h=n(108),p=g(n(12)),d=m(n(62));function m(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function g(t){return t&&t.__esModule?t:{default:t}}var v="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",y=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Dense";var i=n.units,s=void 0===i?1:i,u=n.activation,l=void 0===u?"linear":u,h=n.input_dim,p=void 0===h?null:h,m=n.use_bias,g=void 0===m||m;return t.description="".concat(l," activation, output dimensions: ").concat(s),t.activation=l,t.activationFunc=c[t.activation],t.units=s,t.input_dim=p,t.use_bias=g,t.params=t.use_bias?["kernel","bias"]:["kernel"],t.input_dim&&(t.inputShape=[t.input_dim]),t.gpu&&(t.matMulProgram=f.webgl2.compileProgram(v),t.activationProgram=f.webgl2.compileProgram(d[t.activation])),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.output=new l.default([],[this.units]),this.use_bias&&p.default.assign(this.output.tensor,this.weights.bias.tensor),(0,h.gemv)(1,this.weights.kernel.tensor.transpose(1,0),t.tensor,1,this.output.tensor),this.activationFunc(this.output)}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),"linear"===this.activation||this.outputPreactiv||(this.outputPreactiv=new l.default([],[this.units]),this.outputPreactiv.createGLTexture({type:"2d",format:"float"})),this.output||(this.output=new l.default([],[this.units]),this.output.createGLTexture({type:"2d",format:"float"}));var e=[{input:t,name:"A"},{input:this.weights.kernel,name:"B"}];this.use_bias&&e.push({input:this.weights.bias,name:"C"}),f.webgl2.runProgram({program:this.matMulProgram,output:"linear"===this.activation?this.output:this.outputPreactiv,inputs:e,uniforms:[{value:this.use_bias?1:0,type:"bool",name:"addC"}]}),"linear"!==this.activation&&f.webgl2.runProgram({program:this.activationProgram,output:this.output,inputs:[{input:this.outputPreactiv,name:"x"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=y},function(t,e,n){"use strict";var r=n(146);t.exports=function(t,e,n,i,a){for(var o=r.dot,s=e.shape[0]-1;s>=0;s--)a.set(s,a.get(s)*i+t*o(e.pick(s,null),n));return!0}},function(t,e,n){"use strict";t.exports=function(t,e){var n,r,i=t.data,a=e.data,o=t.stride[0],s=e.stride[0],u=t.offset,l=e.offset;for(n=t.shape[0]-1;n>=0;n--,u+=o,l+=s)r=i[u],i[u]=a[l],a[l]=r}},function(t,e,n){"use strict";t.exports=function(t,e){var n,r=e.data,i=e.stride[0],a=e.offset;for(n=e.shape[0]-1;n>=0;n--,a+=i)r[a]*=t}},function(t,e,n){"use strict";t.exports=function(t,e){var n,r=t.data,i=e.data,a=t.stride[0],o=e.stride[0],s=t.offset,u=e.offset;for(n=t.shape[0]-1;n>=0;n--,s+=a,u+=o)i[u]=r[s]}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r,i=e.data,a=n.data,o=e.stride[0],s=n.stride[0],u=e.offset,l=n.offset;for(r=e.shape[0]-1;r>=0;r--,u+=o,l+=s)a[l]+=t*i[u]}},function(t,e,n){"use strict";t.exports=function(t,e){var n,r,i=t.data,a=t.stride[0],o=t.offset,s=0;if(t===e)for(n=t.shape[0]-1;n>=0;n--,o+=a)s+=(r=i[o])*r;else{var u=e.data,l=e.stride[0],c=e.offset;for(n=t.shape[0]-1;n>=0;n--,o+=a,c+=l)s+=u[c]*i[o]}return s}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r,i=e.data,a=n.data,o=e.stride[0],s=n.stride[0],u=e.offset,l=n.offset;for(r=e.shape[0]-1;r>=0;r--,u+=o,l+=s)a[l]=t*i[u]}},function(t,e,n){"use strict";var r=function(t,e){if(0===t&&0===e)return 0;var n=Math.abs(t),r=Math.abs(e),i=Math.min(n,r),a=Math.max(n,r);return i/=a,a*Math.sqrt(1+i*i)};t.exports=function(t){var e,n,i=t.data,a=t.stride[0],o=t.offset,s=0;for(e=t.shape[0]-1;e>=0;e--,o+=a)n=i[o],s=r(s,n);return s}},function(t,e,n){"use strict";t.exports=function(t){var e,n=t.data,r=t.stride[0],i=t.offset,a=0;for(e=t.shape[0]-1;e>=0;e--,i+=r)a+=Math.abs(n[i]);return a}},function(t,e,n){"use strict";t.exports=function(t){var e,n,r,i=-1/0,a=t.data,o=t.stride[0],s=t.offset,u=t.shape[0];for(e=0;e<u;e++,s+=o)(n=Math.abs(a[s]))>i&&(i=n,r=e);return r}},function(t,e,n){"use strict";Math.sign=Math.sign||function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1},t.exports=function(t,e,n){var r=0,i=0,a=0,o=0,s=0;if(0===e?(r=Math.sign(t),i=0,a=Math.abs(t)):0===t?(r=0,i=Math.sign(e),a=Math.abs(e)):Math.abs(t)>Math.abs(e)?(i=(o=e/t)*(r=1/(s=Math.sign(t)*Math.sqrt(1+o*o))),a=t*s):(r=(o=t/e)*(i=1/(s=Math.sign(t)*Math.sqrt(1+o*o))),a=e*s),!(void 0!==n&&n.length>2))return[r,i,a];n[0]=r,n[1]=i,n[2]=a}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,i,a,o){var s=0,u=0,l=0,c=0,f=0,h=t.shape[0],p=t.shape[1],d=Math.min(e,h-1),m=Math.min(n,p-1),g=void 0===a?1:a,v=void 0===o?0:o;for(;s<=d;){c=0;var y=Math.min(s+m,p-1);for(l=0;l<=y;l++)c+=t.get(s,l)*r.get(l);i.set(s,c*g+v*i.get(s)),s++}if(s<h)for(u=0;s+m<p;){for(c=0,l=0;l<=d+m;l++)f=u+l+1,c+=t.get(s,f)*r.get(f);if(i.set(s,c*g+v*i.get(s)),u++,++s===h)break}if(s<h)for(u++;s-d<p;){for(c=0,l=u;l<p;l++)c+=t.get(s,l)*r.get(l);if(i.set(s,c*g+v*i.get(s)),u++,++s===h)break}return!0}},function(t,e,n){"use strict";var r=n(146);t.exports=function(t,e,n,i,a,o){var s=t.shape[0],u=i||!0,l=void 0===a?1:a,c=void 0===o?0:o,f=0,h=0,p=0,d=0;if(0===c)for(f=0;f<n.shape[0];++f)n.set(f,0);else 1!==c&&r.scal(c,n);if(0===l)return!0;if(1===l)if(u)for(h=0;h<s;++h){for(p=e.get(h),d=0,n.set(h,n.get(h)+p*t.get(h,h)),f=h+1;f<s;++f)n.set(f,n.get(f)+p*t.get(f,h)),d+=t.get(f,h)*e.get(f);n.set(h,n.get(h)+d)}else for(h=0;h<s;++h){for(p=e.get(h),d=0,f=0;f<=h-1;++f)n.set(f,n.get(f)+p*t.get(f,h)),d+=t.get(f,h)*e.get(f);n.set(h,n.get(h)+p*t.get(h,h)+d)}else if(u)for(h=0;h<s;++h){for(p=l*e.get(h),d=0,n.set(h,n.get(h)+p*t.get(h,h)),f=h+1;f<s;++f)n.set(f,n.get(f)+p*t.get(f,h)),d+=t.get(f,h)*e.get(f);n.set(h,n.get(h)+l*d)}else for(h=0;h<s;++h){for(p=l*e.get(h),d=0,f=0;f<=h-1;++f)n.set(f,n.get(f)+p*t.get(f,h)),d+=t.get(f,h)*e.get(f);n.set(h,n.get(h)+p*t.get(h,h)+l*d)}return!0}},function(t,e,n){"use strict";t.exports=function(){console.error("SBMV (symmetric banded matrix vector multiply) not yet implemented")}},function(t,e,n){"use strict";(function(t){t.exporst=function(){console.error("SPMV (symmetric packed matrix vector multiply) not yet implemented")}}).call(this,n(104)(t))},function(t,e,n){"use strict";var r=n(146);t.exports=function(t,e,n){var i=r.dot,a=t.shape[1],o=0;if(n)for(o=a-1;o>=0;o--)e.set(o,i(t.pick(o,null).hi(o+1),e.hi(o+1)));else for(o=0;o<a;o++)e.set(o,i(t.pick(o,null).lo(o),e.lo(o)));return!0}},function(t,e,n){"use strict";t.exports=function(){console.error("TBMV (triangular banded matrix vector multiply) not yet implemented")}},function(t,e,n){"use strict";var r=n(146);t.exports=function(t,e,n){var i=r.dot,a=t.shape[1],o=0;if(n)for(e.set(0,e.get(0)/t.get(0,0)),o=1;o<a;o++)e.set(o,(e.get(o)-i(t.pick(o,null).hi(o),e.hi(o)))/t.get(o,o));else for(e.set(a-1,e.get(a-1)/t.get(a-1,a-1)),o=a-2;o>=0;o--)e.set(o,(e.get(o)-i(t.pick(o,null).lo(o+1),e.lo(o+1)))/t.get(o,o));return!0}},function(t,e,n){"use strict";(function(t){t.exporst=function(){console.error("TBSV (triangular banded matrix solver) not yet implemented")}}).call(this,n(104)(t))},function(t,e,n){"use strict";t.exports=function(){console.error("TPSV (triangular packed matrix solver) not yet implemented")}},function(t,e,n){"use strict";t.exports=function(){console.error("GER (rank 1 operation A := alpha*x*y' + A) not yet implemented")}},function(t,e,n){"use strict";t.exports=function(){console.error("SYR (symmetric rank 1 operation A := alpha*x*y' + A) not yet implemented")}},function(t,e,n){"use strict";t.exports=function(){console.error("SPR (symmetric packed rank 1 operation A := alpha*x*y' + A) not yet implemented")}},function(t,e,n){"use strict";t.exports=function(){console.error("SYR (symmetric rank 2 operation A := alpha*x*y' + alpha*y*x' + A) not yet implemented")}},function(t,e,n){"use strict";t.exports=function(){console.error("SPR (symmetric packed rank 2 operation A := alpha*x*y' + alpha*y*x' + A) not yet implemented")}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=d(n(11)),l=d(n(8)),c=n(9),f=p(n(48)),h=p(n(62));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Activation";var i=n.activation,s=void 0===i?"linear":i;return t.activation=s,t.activationFunc=f[s],t.description="".concat(t.activation),t.gpu&&(t.program=c.webgl2.compileProgram(h[t.activation])),t}return s(e,t),i(e,[{key:"call",value:function(t){return"linear"===this.activation?(this.output=t,this.output):(this.gpu?this._callGPU(t):this._callCPU(t),this.output)}},{key:"_callCPU",value:function(t){this.output=new l.default(new t.arrayType(t.tensor.data),t.tensor.shape),this.activationFunc(this.output)}},{key:"_callGPU",value:function(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),this.output||(this.output=new l.default([],t.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),t.is1D?this.output.is1D=t.is1D:(t.is2DReshaped||t.is2DSquareReshaped)&&(t.is2DReshaped?this.output.is2DReshaped=t.is2DReshaped:t.is2DSquareReshaped&&(this.output.is2DSquareReshaped=t.is2DSquareReshaped),this.output.originalShape=t.originalShape,this.output.indicesForReshaped=t.indicesForReshaped)),c.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"}],supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(u.default);e.default=m},function(t,e,n){"use strict";var r,i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="Dropout";var r=n.rate,a=void 0===r?.5:r;return t.description="".concat(a),t.rate=Math.min(Math.max(0,a),1),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.output=t,this.output}}]),e}(((r=n(11))&&r.__esModule?r:{default:r}).default);e.default=l},function(t,e,n){"use strict";var r,i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="SpatialDropout1D";var r=n.p,a=void 0===r?.5:r;return t.description="".concat(a),t.p=Math.min(Math.max(0,a),1),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.output=t,this.output}}]),e}(((r=n(11))&&r.__esModule?r:{default:r}).default);e.default=l},function(t,e,n){"use strict";var r,i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="SpatialDropout2D";var r=n.rate,a=void 0===r?.5:r,u=n.data_format,l=void 0===u?"channels_last":u;return t.description="".concat(a),t.rate=Math.min(Math.max(0,a),1),t.dataFormat=l,t}return u(e,t),a(e,[{key:"call",value:function(t){return this.output=t,this.output}}]),e}(((r=n(11))&&r.__esModule?r:{default:r}).default);e.default=l},function(t,e,n){"use strict";var r,i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="SpatialDropout3D";var r=n.rate,a=void 0===r?.5:r,u=n.data_format,l=void 0===u?"channels_last":u;return t.description="".concat(a),t.rate=Math.min(Math.max(0,a),1),t.dataFormat=l,t}return u(e,t),a(e,[{key:"call",value:function(t){return this.output=t,this.output}}]),e}(((r=n(11))&&r.__esModule?r:{default:r}).default);e.default=l},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=f(n(11)),l=f(n(8)),c=n(9);function f(t){return t&&t.__esModule?t:{default:t}}var h="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int outputSize;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(outputSize) * outTex.x);\n  int out_y = 0;\n\n  int i = int(floor(float(out_x) / float(inputCols)));\n  int j = int(mod(float(out_x), float(inputCols)));\n  outColor = vec4(texelFetch(x, ivec2(j, i), 0).r);\n}\n",p="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int outputSize;\nuniform int inputRows;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(outputSize) * outTex.x);\n  int out_y = 0;\n\n  int rowIndex = int(mod(floor(float(out_x) / float(inputCols)), float(inputRows)));\n  int colIndex = int(mod(float(out_x), float(inputCols)));\n  int fragmentIndex = int(floor(float(out_x) / (float(inputRows) * float(inputCols))));\n  colIndex += fragmentIndex * inputCols;\n  outColor = vec4(texelFetch(x, ivec2(colIndex, rowIndex), 0).r);\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Flatten",t.gpu&&(t.flattenProgram=c.webgl2.compileProgram(h),t.flattenFragmentsProgram=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){t.tensor.shape.length<=1?this.output=t:(this.output=new l.default([],[t.tensor.shape.reduce(function(t,e){return t*e},1)]),this.output.replaceTensorData(t.tensor.data))}},{key:"_callGPU",value:function(t){t.glTexture||t.glTextureFragments||(t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float"}):t.tensor.shape.length>2&&!t.is2DReshaped&&(t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"}))),this.output||(this.output=new l.default([],[t.glTextureShape.reduce(function(t,e){return t*e},1)]),this.output.createGLTexture({type:"2d",format:"float"})),t.glTextureFragments?(t.convert2DRowFragmentedGLTextureToColStack(),c.webgl2.runProgram({program:this.flattenFragmentsProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.output.glTextureShape[1],type:"int",name:"outputSize"},{value:t.glTextureShape[0],type:"int",name:"inputRows"},{value:t.glTextureShape[1],type:"int",name:"inputCols"}],supportsTextureFragments:!0}),t.removeGLTextureFragmentsAsColStack()):c.webgl2.runProgram({program:this.flattenProgram,output:this.output,inputs:[{input:t,name:"x"}],uniforms:[{value:this.output.glTextureShape[1],type:"int",name:"outputSize"},{value:t.glTextureShape[1],type:"int",name:"inputCols"}],supportsTextureFragments:!0}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";var r=n(47),i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(279)),c=d(n(11)),f=d(n(8)),h=n(9),p=d(n(12));function d(t){return t&&t.__esModule?t:{default:t}}var m="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",g=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="Reshape";var r=n.target_shape,a=void 0===r?[]:r;return t.targetShape=a,t.description="target shape: ".concat(JSON.stringify(t.targetShape)),t.gpu&&(t.mapInputProgram=h.webgl2.compileProgram(m)),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.targetShape.reduce(function(t,e){return t*e},1)!==t.tensor.size&&this.throwError("The total size of new array must be unchanged in reshape layer."),this.output=new f.default([],this.targetShape),this.output.replaceTensorData(t.tensor.data)}},{key:"_createIndexMap",value:function(){if(!this.indexMap){var t=new f.default([],this.inputShape,{type:Int32Array}),e=new f.default([],this.inputShape,{type:Int32Array}),n=new f.default([],this.inputShape,{type:Int32Array});if(2===this.inputShape.length)for(var i=0;i<this.inputShape[0];i++)p.default.assigns(e.tensor.pick(i,null),i);else if(3===this.inputShape.length)for(var a=0;a<this.inputShape[0];a++)for(var o=0;o<this.inputShape[1];o++)p.default.assigns(e.tensor.pick(a,o,null),a*this.inputShape[1]+o);else if(4===this.inputShape.length)for(var s=0;s<this.inputShape[0];s++)for(var u=0;u<this.inputShape[1];u++)for(var c=0;c<this.inputShape[2];c++)p.default.assigns(e.tensor.pick(s,u,c,null),s*this.inputShape[1]*this.inputShape[2]+u*this.inputShape[2]+c);for(var h=0;h<(0,l.default)(this.inputShape);h++){var d;p.default.assigns((d=n.tensor).pick.apply(d,r(Array(this.inputShape.length-1).fill(null)).concat([h])),h)}p.default.muls(t.tensor,e.tensor,(0,l.default)(this.inputShape)),p.default.addeq(t.tensor,n.tensor),this.indexMap=new f.default([],this.targetShape,{type:Int32Array}),this.indexMap.replaceTensorData(new Int32Array(t.tensor.data)),this.targetShape.length>2&&this.indexMap.reshapeTo2D(),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){t.glTexture?t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:this.inputShape=t.tensor.shape:(this.inputShape=t.tensor.shape,t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float"}):t.tensor.shape.length>2&&!t.is2DReshaped&&(t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"}))),this._createIndexMap(),this.output||(this.output=new f.default([],this.targetShape),this.targetShape.length>2&&this.output.reshapeTo2D(),this.output.createGLTexture({type:"2d",format:"float"})),h.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(c.default);e.default=g},function(t,e,n){"use strict";var r=n(47),i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=g(n(279)),c=g(n(81)),f=g(n(137)),h=g(n(11)),p=g(n(8)),d=n(9),m=g(n(12));function g(t){return t&&t.__esModule?t:{default:t}}var v="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",y=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="Permute";var r=n.dims,a=void 0===r?[]:r;return t.description="".concat(JSON.stringify(a)),t.dims=a.map(function(t){return t-1}),t.gpu&&(t.mapInputProgram=d.webgl2.compileProgram(v)),t}return u(e,t),a(e,[{key:"call",value:function(t){return t.tensor.shape.length<=1||(0,f.default)((0,c.default)(t.tensor.shape.length),this.dims)?(this.output=t,this.output):(this.gpu?this._callGPU(t):this._callCPU(t),this.output)}},{key:"_callCPU",value:function(t){var e;this.dims.length!==t.tensor.shape.length&&this.throwError("The specified dims permutation must match the number of dimensions.");var n=this.dims.map(function(e){return t.tensor.shape[e]});this.output=new p.default([],n),m.default.assign(this.output.tensor,(e=t.tensor).transpose.apply(e,r(this.dims)))}},{key:"_createIndexMap",value:function(){var t,e=this;if(!this.indexMap){var n=new p.default([],this.inputShape,{type:Int32Array}),i=new p.default([],this.inputShape,{type:Int32Array}),a=new p.default([],this.inputShape,{type:Int32Array});if(2===this.inputShape.length)for(var o=0;o<this.inputShape[0];o++)m.default.assigns(i.tensor.pick(o,null),o);else if(3===this.inputShape.length)for(var s=0;s<this.inputShape[0];s++)for(var u=0;u<this.inputShape[1];u++)m.default.assigns(i.tensor.pick(s,u,null),s*this.inputShape[1]+u);else if(4===this.inputShape.length)for(var c=0;c<this.inputShape[0];c++)for(var f=0;f<this.inputShape[1];f++)for(var h=0;h<this.inputShape[2];h++)m.default.assigns(i.tensor.pick(c,f,h,null),c*this.inputShape[1]*this.inputShape[2]+f*this.inputShape[2]+h);for(var d=0;d<(0,l.default)(this.inputShape);d++){var g;m.default.assigns((g=a.tensor).pick.apply(g,r(Array(this.inputShape.length-1).fill(null)).concat([d])),d)}m.default.muls(n.tensor,i.tensor,(0,l.default)(this.inputShape)),m.default.addeq(n.tensor,a.tensor);var v=this.dims.map(function(t){return e.inputShape[t]});this.indexMap=new p.default([],v,{type:Int32Array}),m.default.assign(this.indexMap.tensor,(t=n.tensor).transpose.apply(t,r(this.dims))),v.length>2&&this.indexMap.reshapeTo2D(),this.indexMap.createGLTexture({type:"2d",format:"int"})}}},{key:"_callGPU",value:function(t){var e=this;if(t.glTexture?t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:this.inputShape=t.tensor.shape:(this.inputShape=t.tensor.shape,t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float"}):t.tensor.shape.length>2&&!t.is2DReshaped&&(t.reshapeTo2D(),t.createGLTexture({type:"2d",format:"float"}))),this._createIndexMap(),!this.output){var n=this.dims.map(function(t){return e.inputShape[t]});this.output=new p.default([],n),n.length>2&&this.output.reshapeTo2D(),this.output.createGLTexture({type:"2d",format:"float"})}d.webgl2.runProgram({program:this.mapInputProgram,output:this.output,inputs:[{input:t,name:"x"},{input:this.indexMap,name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(h.default);e.default=y},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=p(n(11)),l=p(n(8)),c=n(9),f=p(n(278)),h=p(n(774));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(x, vec2(outTex.x, 0));\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="RepeatVector";var i=n.n,s=void 0===i?1:i;return t.n=s,t.description="n = ".concat(s),t.gpu&&(t.program=c.webgl2.compileProgram(d)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){1!==t.tensor.shape.length&&this.throwError("Only 1D tensor inputs allowed."),this.output=new l.default([],[this.n,t.tensor.shape[1]]),this.output.tensor=(0,h.default)((0,f.default)(t.tensor,0),[this.n,1])}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.output||(this.output=new l.default([],[this.n,t.glTextureShape[1]]),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=m},function(t,e,n){"use strict";var r=n(280),i=n(12);t.exports=function(){var t,e,n,a;2===arguments.length?(e=arguments[0],a=arguments[1]):3===arguments.length&&(n=arguments[0],e=arguments[1],a=arguments[2]);if(!Array.isArray(a))throw new Error("second argument of tile must be an array of repetition counts for each dimension");var o=e.shape.slice(0),s=o.slice(0),u=Math.max(s.length,a.length);for(t=0;t<u;t++)if(o[t]=void 0===o[t]?1:o[t],a[t]=void 0===a[t]?1:a[t],s[t]=(void 0===s[t]?1:s[t])*a[t],0===s[t])throw new Error("Number of tiles must be greater than zero");n||(n=r.zeros(s,e.dtype));var l=1;for(t=0;t<a.length;t++)l*=a[t];var c=new Array(a.length);for(t=0;t<a.length;t++)c[t]=0;var f=s.slice(0);for(p=0;p<s.length;p++)f[p]=p<e.dimension?null:0;for(t=0;t<l;t++){for(p=e.dimension;p<s.length;p++)f[p]=c[p];var h=n.pick.apply(n,f);if(h=(h=h.lo.apply(h,c)).hi.apply(h,e.shape),i.assign(h,e),t===l-1)break;for(var p=u-1;p>=0&&(c[p]+=o[p],c[p]===s[p]);)c[p]=0,p--}return n}},function(t,e,n){"use strict";(function(t,r){var i=n(778),a=n(282);t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var o="undefined"!==typeof Uint8ClampedArray,s=t.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=a([32,0])),s.BUFFER||(s.BUFFER=a([32,0]));var u=s.DATA,l=s.BUFFER;function c(t){if(t){var e=t.length||t.byteLength,n=i.log2(e);u[n].push(t)}}function f(t){t=i.nextPow2(t);var e=i.log2(t),n=u[e];return n.length>0?n.pop():new ArrayBuffer(t)}function h(t){return new Uint8Array(f(t),0,t)}function p(t){return new Uint16Array(f(2*t),0,t)}function d(t){return new Uint32Array(f(4*t),0,t)}function m(t){return new Int8Array(f(t),0,t)}function g(t){return new Int16Array(f(2*t),0,t)}function v(t){return new Int32Array(f(4*t),0,t)}function y(t){return new Float32Array(f(4*t),0,t)}function b(t){return new Float64Array(f(8*t),0,t)}function _(t){return o?new Uint8ClampedArray(f(t),0,t):h(t)}function x(t){return new DataView(f(t),0,t)}function w(t){t=i.nextPow2(t);var e=i.log2(t),n=l[e];return n.length>0?n.pop():new r(t)}e.free=function(t){if(r.isBuffer(t))l[i.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,n=0|i.log2(e);u[n].push(t)}},e.freeUint8=e.freeUint16=e.freeUint32=e.freeInt8=e.freeInt16=e.freeInt32=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(t){c(t.buffer)},e.freeArrayBuffer=c,e.freeBuffer=function(t){l[i.log2(t.length)].push(t)},e.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return f(t);switch(e){case"uint8":return h(t);case"uint16":return p(t);case"uint32":return d(t);case"int8":return m(t);case"int16":return g(t);case"int32":return v(t);case"float":case"float32":return y(t);case"double":case"float64":return b(t);case"uint8_clamped":return _(t);case"buffer":return w(t);case"data":case"dataview":return x(t);default:return null}return null},e.mallocArrayBuffer=f,e.mallocUint8=h,e.mallocUint16=p,e.mallocUint32=d,e.mallocInt8=m,e.mallocInt16=g,e.mallocInt32=v,e.mallocFloat32=e.mallocFloat=y,e.mallocFloat64=e.mallocDouble=b,e.mallocUint8Clamped=_,e.mallocDataView=x,e.mallocBuffer=w,e.clearCache=function(){for(var t=0;t<32;++t)s.UINT8[t].length=0,s.UINT16[t].length=0,s.UINT32[t].length=0,s.INT8[t].length=0,s.INT16[t].length=0,s.INT32[t].length=0,s.FLOAT[t].length=0,s.DOUBLE[t].length=0,s.UINT8C[t].length=0,u[t].length=0,l[t].length=0}}).call(this,n(26),n(23).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=l(t),r=n[0],o=n[1],s=new a(function(t,e,n){return 3*(e+n)/4-n}(0,r,o)),u=0,c=o>0?r-4:r,f=0;f<c;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],s[u++]=e>>16&255,s[u++]=e>>8&255,s[u++]=255&e;2===o&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,s[u++]=255&e);1===o&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,s[u++]=e>>8&255,s[u++]=255&e);return s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(t,o,o+16383>s?s:o+16383));1===i?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var i,a,o=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+t[e+f],f+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+t[e+f],f+=h,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=l}return(p?-1:1)*o*Math.pow(2,a-r)},e.write=function(t,e,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,d=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),(e+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(e*u-1)*Math.pow(2,i),o+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;t[n+p]=255&o,p+=d,o/=256,l-=8);t[n+p-d]|=128*m}},function(t,e,n){"use strict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1)&&!!t},e.log2=function(t){var e,n;return e=(t>65535)<<4,e|=n=((t>>>=e)>255)<<3,e|=n=((t>>>=n)>15)<<2,(e|=n=((t>>>=n)>3)<<1)|(t>>>=n)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var i=new Array(256);!function(t){for(var e=0;e<256;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(i),e.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,n){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Embedding",{enumerable:!0,get:function(){return i.default}});var r,i=(r=n(780))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=h(n(11)),l=h(n(8)),c=n(9),f=h(n(12));function h(t){return t&&t.__esModule?t:{default:t}}var p="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D embeddings;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 x_size = textureSize(x, 0);\n  ivec2 embeddings_size = textureSize(embeddings, 0);\n  int out_x = int(float(embeddings_size[0]) * outTex.x);\n  int out_y = int(float(x_size[0]) * outTex.y);\n\n  int index = int(texelFetch(x, ivec2(out_y, 0), 0).r);\n  outColor = texelFetch(embeddings, ivec2(out_x, index), 0);\n}\n",d=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Embedding";var i=n.input_dim,s=void 0===i?1:i,u=n.output_dim,l=void 0===u?1:u,f=n.input_length,h=void 0===f?0:f,d=n.mask_zero,m=void 0!==d&&d;return t.description="output dimensions: ".concat(l),t.inputDim=s,t.outputDim=l,t.inputLength=h,t.maskZero=m,t.params=["embeddings"],t.gpu&&(t.program=c.webgl2.compileProgram(p)),t}return s(e,t),i(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.output=new l.default([],[t.tensor.shape[0],this.weights.embeddings.tensor.shape[1]]);for(var e=0,n=t.tensor.shape[0];e<n;e++)f.default.assign(this.output.tensor.pick(e,null),this.weights.embeddings.tensor.pick(t.tensor.get(e),null))}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.output||(this.output=new l.default([],[t.glTextureShape[1],this.weights.embeddings.glTextureShape[1]]),this.output.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:t,name:"x"},{input:this.weights.embeddings,name:"embeddings"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Add",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Subtract",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"Multiply",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Average",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"Maximum",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"Minimum",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"Concatenate",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"Dot",{enumerable:!0,get:function(){return c.default}});var r=f(n(782)),i=f(n(783)),a=f(n(784)),o=f(n(785)),s=f(n(786)),u=f(n(787)),l=f(n(788)),c=f(n(791));function f(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(33),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(66)),c=d(n(8)),f=n(9),h=d(n(49)),p=d(n(12));function d(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Add",t.mode="sum",t}return u(e,t),i(e,[{key:"_callCPU",value:function(t){var e=t[0].tensor.shape.slice();this.output=new c.default([],e);for(var n=0;n<t.length;n++)p.default.addeq(this.output.tensor,t[n].tensor)}},{key:"_callGPU",value:function(t){if(!this.mergeProgram){var n=t[0].glTextureFragments?t[0].glTextureFragmentShape:t[0].glTextureShape,r=(0,h.default)("add",t.length,n);this.mergeProgram=f.webgl2.compileProgram(r)}s(o(e.prototype),"_callGPU",this).call(this,t)}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(33),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(66)),c=d(n(8)),f=n(9),h=d(n(49)),p=d(n(12));function d(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Subtract",t.mode="diff",t}return u(e,t),i(e,[{key:"_callCPU",value:function(t){2!==t.length&&this.throwError("Inputs should be an array of 2 Tensors.");var e=t[0].tensor.shape.slice();this.output=new c.default([],e),p.default.sub(this.output.tensor,t[0].tensor,t[1].tensor)}},{key:"_callGPU",value:function(t){if(!this.mergeProgram){var n=t[0].glTextureFragments?t[0].glTextureFragmentShape:t[0].glTextureShape,r=(0,h.default)("subtract",t.length,n);this.mergeProgram=f.webgl2.compileProgram(r)}s(o(e.prototype),"_callGPU",this).call(this,t)}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(33),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(66)),c=d(n(8)),f=n(9),h=d(n(49)),p=d(n(12));function d(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Multiply",t.mode="mul",t}return u(e,t),i(e,[{key:"_callCPU",value:function(t){var e=t[0].tensor.shape.slice();this.output=new c.default([],e),p.default.assigns(this.output.tensor,1);for(var n=0;n<t.length;n++)p.default.muleq(this.output.tensor,t[n].tensor)}},{key:"_callGPU",value:function(t){if(!this.mergeProgram){var n=t[0].glTextureFragments?t[0].glTextureFragmentShape:t[0].glTextureShape,r=(0,h.default)("multiply",t.length,n);this.mergeProgram=f.webgl2.compileProgram(r)}s(o(e.prototype),"_callGPU",this).call(this,t)}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(33),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(66)),c=d(n(8)),f=n(9),h=d(n(49)),p=d(n(12));function d(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Average",t.mode="ave",t}return u(e,t),i(e,[{key:"_callCPU",value:function(t){var e=t[0].tensor.shape.slice();this.output=new c.default([],e);for(var n=0;n<t.length;n++)p.default.addeq(this.output.tensor,t[n].tensor);p.default.divseq(this.output.tensor,t.length)}},{key:"_callGPU",value:function(t){if(!this.mergeProgram){var n=t[0].glTextureFragments?t[0].glTextureFragmentShape:t[0].glTextureShape,r=(0,h.default)("average",t.length,n);this.mergeProgram=f.webgl2.compileProgram(r)}s(o(e.prototype),"_callGPU",this).call(this,t)}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(33),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(66)),c=d(n(8)),f=n(9),h=d(n(49)),p=d(n(12));function d(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Maximum",t.mode="max",t}return u(e,t),i(e,[{key:"_callCPU",value:function(t){var e=t[0].tensor.shape.slice();this.output=new c.default([],e),p.default.assign(this.output.tensor,t[0].tensor);for(var n=1;n<t.length;n++)p.default.maxeq(this.output.tensor,t[n].tensor)}},{key:"_callGPU",value:function(t){if(!this.mergeProgram){var n=t[0].glTextureFragments?t[0].glTextureFragmentShape:t[0].glTextureShape,r=(0,h.default)("maximum",t.length,n);this.mergeProgram=f.webgl2.compileProgram(r)}s(o(e.prototype),"_callGPU",this).call(this,t)}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(33),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(66)),c=d(n(8)),f=n(9),h=d(n(49)),p=d(n(12));function d(t){return t&&t.__esModule?t:{default:t}}var m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Minimum",t.mode="min",t}return u(e,t),i(e,[{key:"_callCPU",value:function(t){var e=t[0].tensor.shape.slice();this.output=new c.default([],e),p.default.assign(this.output.tensor,t[0].tensor);for(var n=1;n<t.length;n++)p.default.mineq(this.output.tensor,t[n].tensor)}},{key:"_callGPU",value:function(t){if(!this.mergeProgram){var n=t[0].glTextureFragments?t[0].glTextureFragmentShape:t[0].glTextureShape,r=(0,h.default)("minimum",t.length,n);this.mergeProgram=f.webgl2.compileProgram(r)}s(o(e.prototype),"_callGPU",this).call(this,t)}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=m(n(277)),l=m(n(66)),c=m(n(8)),f=n(9),h=m(n(49)),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(60)),d=m(n(789));function m(t){return t&&t.__esModule?t:{default:t}}var g=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Concatenate",t.mode="concat";var i=n.axis,s=void 0===i?-1:i;return t.concatAxis=s<=0?s:s-1,t}return s(e,t),i(e,[{key:"_callCPU",value:function(t){var e=t[0].tensor.shape.slice(),n=this.concatAxis<0?e.length+this.concatAxis:this.concatAxis;if(t.slice(1,t.length).forEach(function(t){var r=t.tensor.shape.slice()[n];e[n]+=r}),this.output=new c.default([],e),0===n)(0,d.default)(this.output.tensor,t.map(function(t){return t.tensor}));else{for(var r,i=[n],a=0;a<t[0].tensor.shape.length;a++)a!==n&&i.push(a);(0,d.default)((r=this.output.tensor).transpose.apply(r,i),t.map(function(t){var e;return(e=t.tensor).transpose.apply(e,i)}))}}},{key:"_callGPU",value:function(t){t.forEach(function(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0})});var e=t[0].glTextureShape.slice(),n=1;if(t[0].is2DReshaped?-1===this.concatAxis||this.concatAxis===t[0].originalShape.length-1?n=1:this.throwError("specified axis not supported for now."):-1===this.concatAxis||1===this.concatAxis?n=1:-2===this.concatAxis||0===this.concatAxis?n=0:this.throwError("specified axis not supported for now."),e[n]=(0,u.default)(t.map(function(t){return t.glTextureShape[n]})),!this.output)if(this.output=new c.default([],e),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:1===n}),t[0].is1D)this.output.is1D=t[0].is1D;else if(t[0].is2DReshaped){this.output.is2DReshaped=t[0].is2DReshaped,this.output.originalShape=t[0].originalShape.slice();var r=this.concatAxis<0?this.output.originalShape.length+this.concatAxis:this.concatAxis;this.output.originalShape[r]=(0,u.default)(t.map(function(t){return t.originalShape[r]})),this.output.indicesForReshaped=p.createIndicesFor2DReshaped(this.output.originalShape,!1,r)}if(!this.mergeProgram){var i=this.output.glTextureFragments?this.output.glTextureFragmentShape:this.output.glTextureShape,a=(0,h.default)("concatenate",t.length,t.map(function(t){return t.glTextureShape}),i,n);this.mergeProgram=f.webgl2.compileProgram(a)}f.webgl2.runProgram({program:this.mergeProgram,output:this.output,inputs:t.map(function(t,e){return{input:t,name:"inputs[".concat(e,"]")}}),supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(l.default);e.default=g},function(t,e,n){"use strict";t.exports=function(){var t,e,n,s,u,l,c,f,h,p;if(s=r({},o),0===arguments.length)throw new Error("Array of ndarrays to concatenate must not be empty");Array.isArray(arguments[0])?(n=arguments[0],r(s,arguments[1]||{})):2===arguments.length&&(n=arguments[1],t=arguments[0],r(s,arguments[2]||{}));if(0===n.length)throw new Error("Array of ndarrays to concatenate must not be empty");for(u=0;u<n.length;u++)if(c){if(n[u].dimension!==c.length)throw new Error("all arrays must have the same dimensionality");for(l=1;l<n[u].shape.length;l++)if(n[u].shape[l]!==c[l])throw new Error("last n-1 dimensions of concatenated rows must have the same size");c[0]+=n[u].shape[0]}else c=n[u].shape.slice(0);if(t){if(c[0]!==t.shape[0])throw new Error("first dimension of output array must match the total number of concatenated rows")}else t=a.zeros(c,s.dtype);for(l=0,f=0;l<n.length;l++)e=n[l],h=e.shape[0],p=t.lo(f).hi(h),i.assign(p,e),f+=h;return t};var r=n(790),i=n(12),a=n(280),o={dtype:"double"}},function(t,e){t.exports=function(t,e){if(!e||"object"!==typeof e)return t;var n=Object.keys(e),r=n.length;for(;r--;)t[n[r]]=e[n[r]];return t}},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=p(n(66)),l=p(n(8)),c=n(9),f=p(n(92)),h=p(n(12));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D input1;\nuniform sampler2D input2;\nuniform int rows;\nuniform int cols;\nuniform int dotAxis1;\nuniform int dotAxis2;\nuniform int commonDim;\nuniform bool normalize;\nout vec4 outColor;\n\nvoid main() {\n  int out_x = int(float(cols) * outTex.x);\n  int out_y = int(float(rows) * outTex.y);\n\n  float sum = 0.;\n  float a = 0.;\n  float b = 0.;\n  float norm1 = 0.;\n  float norm2 = 0.;\n\n  for (int i = 0; i < commonDim; ++i) {\n    if (dotAxis1 == 0 && dotAxis2 == 0) {\n      a = texelFetch(input1, ivec2(out_y, i), 0).r;\n      b = texelFetch(input2, ivec2(out_x, i), 0).r;\n    } else if (dotAxis1 == 1 && dotAxis2 == 1) {\n      a = texelFetch(input1, ivec2(i, out_y), 0).r;\n      b = texelFetch(input2, ivec2(i, out_x), 0).r;\n    }\n\n    sum += a * b;\n\n    if (normalize) {\n      norm1 += a * a;\n      norm2 += b * b;\n    }\n  }\n\n  if (normalize) {\n    sum /= sqrt(norm1) * sqrt(norm2);\n  }\n\n  outColor = vec4(sum);\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Dot",t.mode="dot";var i=n.axes,s=void 0===i?-1:i,u=n.normalize,l=void 0!==u&&u;return Array.isArray(s)?t.dotAxes=[s[0]<=0?s[0]:s[0]-1,s[1]<=0?s[1]:s[1]-1]:t.dotAxes=[s<=0?s:s-1,s<=0?s:s-1],t.normalize=l,t.gpu&&(t.mergeProgram=c.webgl2.compileProgram(d)),t}return s(e,t),i(e,[{key:"_calcOutputShape",value:function(t){var e=t[0].slice(),n=t[1].slice();e.splice(this.dotAxes[0],1),n.splice(this.dotAxes[1],1),this.outputShape=e.concat(n),1===this.outputShape.length&&this.outputShape.push(1)}},{key:"_callCPU",value:function(t){if(this._calcOutputShape([t[0].tensor.shape,t[1].tensor.shape]),this.output=new l.default([],this.outputShape),2===t[0].tensor.shape.length&&2===t[1].tensor.shape.length){if(0===this.dotAxes[0]&&0===this.dotAxes[1]){if(this.normalize){for(var e=0;e<t[0].tensor.shape[1];e++)h.default.divseq(t[0].tensor.pick(null,e),h.default.norm2(t[0].tensor.pick(null,e)));for(var n=0;n<t[1].tensor.shape[1];n++)h.default.divseq(t[1].tensor.pick(null,n),h.default.norm2(t[1].tensor.pick(null,n)))}(0,f.default)(this.output.tensor,t[0].tensor.transpose(1,0),t[1].tensor)}else if(1===this.dotAxes[0]&&1===this.dotAxes[1]){if(this.normalize){for(var r=0;r<t[0].tensor.shape[0];r++)h.default.divseq(t[0].tensor.pick(r,null),h.default.norm2(t[0].tensor.pick(r,null)));for(var i=0;i<t[1].tensor.shape[0];i++)h.default.divseq(t[1].tensor.pick(i,null),h.default.norm2(t[1].tensor.pick(i,null)))}(0,f.default)(this.output.tensor,t[0].tensor,t[1].tensor.transpose(1,0))}}else this.throwError("dot mode for 3+ dim tensors not yet implemented.")}},{key:"_callGPU",value:function(t){t.forEach(function(t){t.glTexture||t.glTextureFragments||t.createGLTexture({type:"2d",format:"float"})}),this._calcOutputShape([t[0].glTextureShape,t[1].glTextureShape]),this.output||(this.output=new l.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"}));var e=t[0].glTextureShape[this.dotAxes[0]];c.webgl2.runProgram({program:this.mergeProgram,output:this.output,inputs:[{input:t[0],name:"input1"},{input:t[1],name:"input2"}],uniforms:[{value:this.output.glTextureShape[0],type:"int",name:"rows"},{value:this.output.glTextureShape[1],type:"int",name:"cols"},{value:this.dotAxes[0],type:"int",name:"dotAxis1"},{value:this.dotAxes[1],type:"int",name:"dotAxis2"},{value:e,type:"int",name:"commonDim"},{value:+this.normalize,type:"bool",name:"normalize"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GaussianDropout",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"GaussianNoise",{enumerable:!0,get:function(){return i.default}});var r=a(n(793)),i=a(n(794));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r,i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="GaussianDropout";var r=n.rate,a=void 0===r?.5:r;return t.rate=Math.min(Math.max(0,a),1),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.output=t,this.output}}]),e}(((r=n(11))&&r.__esModule?r:{default:r}).default);e.default=l},function(t,e,n){"use strict";var r,i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="GaussianNoise";var r=n.stddev,a=void 0===r?0:r;return t.stddev=a,t}return u(e,t),a(e,[{key:"call",value:function(t){return this.output=t,this.output}}]),e}(((r=n(11))&&r.__esModule?r:{default:r}).default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BatchNormalization",{enumerable:!0,get:function(){return i.default}});var r,i=(r=n(796))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";var r=n(47),i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=p(n(11)),c=p(n(8)),f=n(9),h=p(n(12));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D X;\nuniform isampler2D normAxisIndexMap;\nuniform sampler2D gamma;\nuniform sampler2D beta;\nuniform sampler2D mean;\nuniform sampler2D std;\nuniform float epsilon;\nuniform bool scale;\nuniform bool center;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(X, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\nint normAxisIndex = texelFetch(normAxisIndexMap, ivec2(out_x, out_y), 0).r;\n\n  float _x = texelFetch(X, ivec2(out_x, out_y), 0).r;\n  float _mean = texelFetch(mean, ivec2(normAxisIndex, 0), 0).r;\n  float _std = texelFetch(std, ivec2(normAxisIndex, 0), 0).r;\n\n  float _gamma = 1.0;\n  if (scale) {\n    _gamma = texelFetch(gamma, ivec2(normAxisIndex, 0), 0).r;\n  }\n\n  float _beta = 0.0;\n  if (center) {\n    _beta = texelFetch(beta, ivec2(normAxisIndex, 0), 0).r;\n  }\n\n  float sum = _beta + _gamma * (_x - _mean) / sqrt(_std + epsilon);\n\n  outColor = vec4(sum);\n}\n",m=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="BatchNormalization";var r=n.epsilon,a=void 0===r?.001:r,u=n.axis,l=void 0===u?-1:u,c=n.center,h=void 0===c||c,p=n.scale,m=void 0===p||p;return t.epsilon=a,t.center=h,t.scale=m,t.axis=l,t.axisNormalized=!1,t.params=[],t.scale&&t.params.push("gamma"),t.center&&t.params.push("beta"),t.params=t.params.concat(["moving_mean","moving_variance"]),t.gpu&&(t.program=f.webgl2.compileProgram(d)),t}return u(e,t),a(e,[{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.axisNormalized||(this.axis=this.axis<0?t.tensor.shape.length+this.axis:this.axis-1,this.axisNormalized=!0);for(var e=[],n=0;n<t.tensor.shape.length;n++)n===this.axis?e.push(1):e.push(null);for(var r=new c.default([],t.tensor.shape),i=new c.default([],t.tensor.shape),a=0;a<t.tensor.shape[this.axis];a++){var o,s;if(e[this.axis]=a,this.scale)h.default.assigns((o=r.tensor).pick.apply(o,e),this.weights.gamma.tensor.get(a));if(this.center)h.default.assigns((s=i.tensor).pick.apply(s,e),this.weights.beta.tensor.get(a))}for(var u=new c.default([],t.tensor.shape),l=new c.default([],t.tensor.shape),f=0;f<t.tensor.shape[this.axis];f++){var p,d;e[this.axis]=f,h.default.assigns((p=u.tensor).pick.apply(p,e),this.weights.moving_mean.tensor.get(f)),h.default.assigns((d=l.tensor).pick.apply(d,e),this.weights.moving_variance.tensor.get(f)+this.epsilon)}h.default.sqrteq(l.tensor),this.output=new c.default(t.tensor.data,t.tensor.shape),h.default.subeq(this.output.tensor,u.tensor),h.default.diveq(this.output.tensor,l.tensor),this.scale&&h.default.muleq(this.output.tensor,r.tensor),this.center&&h.default.addeq(this.output.tensor,i.tensor)}},{key:"_createIndexMap",value:function(t,e){if(!this.normAxisIndexMap){var n=new c.default([],this.inputShape,{type:Int32Array});this.normAxisIndexMap=new c.default([],t,{type:Int32Array});for(var i=Array(this.inputShape.length).fill(null),a=0;a<this.inputShape[this.axis];a++){var o;i[this.axis]=a,h.default.assigns((o=n.tensor).pick.apply(o,r(i)),a)}if(e)for(var s=0;s<e.data.length;s++)this.normAxisIndexMap.tensor.data[e.data[s]]=n.tensor.data[s];else this.normAxisIndexMap=n;this.normAxisIndexMap.createGLTexture({type:"2d",format:"int",supportsTextureFragments:!0})}}},{key:"_callGPU",value:function(t){this.axisNormalized||(t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:this.inputShape=t.tensor.shape,this.axis=this.axis<0?this.inputShape.length+this.axis:this.axis-1,this.axisNormalized=!0),t.glTexture||t.glTextureFragments||(t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}):t.tensor.shape.length>2&&!t.is2DReshaped&&(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}))),this._createIndexMap(t.glTextureShape,t.indicesForReshaped),this.output||(this.output=new c.default([],t.glTextureShape),this.output.createGLTexture({type:"2d",format:"float",supportsTextureFragments:!0}),t.is1D?this.output.is1D=t.is1D:(t.is2DReshaped||t.is2DSquareReshaped)&&(t.is2DReshaped?this.output.is2DReshaped=t.is2DReshaped:t.is2DSquareReshaped&&(this.output.is2DSquareReshaped=t.is2DSquareReshaped),this.output.originalShape=t.originalShape,this.output.indicesForReshaped=t.indicesForReshaped));var e=[{input:t,name:"X"},{input:this.normAxisIndexMap,name:"normAxisIndexMap"}];this.scale&&e.push({input:this.weights.gamma,name:"gamma"}),this.center&&e.push({input:this.weights.beta,name:"beta"}),e.push({input:this.weights.moving_mean,name:"mean"}),e.push({input:this.weights.moving_variance,name:"std"});var n=[{value:this.epsilon,type:"float",name:"epsilon"},{value:+this.scale,type:"bool",name:"scale"},{value:+this.center,type:"bool",name:"center"}];f.webgl2.runProgram({program:this.program,output:this.output,inputs:e,uniforms:n,supportsTextureFragments:!0}),0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(l.default);e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"MaxPooling1D",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"MaxPooling2D",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"MaxPooling3D",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"AveragePooling1D",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"AveragePooling2D",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"AveragePooling3D",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"GlobalMaxPooling1D",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"GlobalMaxPooling2D",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"GlobalMaxPooling3D",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"GlobalAveragePooling1D",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"GlobalAveragePooling2D",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(e,"GlobalAveragePooling3D",{enumerable:!0,get:function(){return d.default}});var r=m(n(798)),i=m(n(799)),a=m(n(800)),o=m(n(801)),s=m(n(802)),u=m(n(803)),l=m(n(804)),c=m(n(805)),f=m(n(806)),h=m(n(807)),p=m(n(808)),d=m(n(809));function m(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="MaxPooling1D",t.poolingFunc="max",t}return s(e,t),e}(((r=n(283))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="MaxPooling2D",t.poolingFunc="max",t}return s(e,t),e}(((r=n(284))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="MaxPooling3D",t.poolingFunc="max",t}return s(e,t),e}(((r=n(285))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="AveragePooling1D",t.poolingFunc="average",t}return s(e,t),e}(((r=n(283))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="AveragePooling2D",t.poolingFunc="average",t}return s(e,t),e}(((r=n(284))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="AveragePooling3D",t.poolingFunc="average",t}return s(e,t),e}(((r=n(285))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="GlobalMaxPooling1D",t.poolingFunc="max",t}return s(e,t),e}(((r=n(286))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="GlobalMaxPooling2D",t.poolingFunc="max",t}return s(e,t),e}(((r=n(287))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="GlobalMaxPooling3D",t.poolingFunc="max",t}return s(e,t),e}(((r=n(288))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="GlobalAveragePooling1D",t.poolingFunc="average",t}return s(e,t),e}(((r=n(286))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="GlobalAveragePooling2D",t.poolingFunc="average",t}return s(e,t),e}(((r=n(287))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r,i=n(2),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(this,e),(t=a(this,o(e).call(this,n))).layerClass="GlobalAveragePooling3D",t.poolingFunc="average",t}return s(e,t),e}(((r=n(288))&&r.__esModule?r:{default:r}).default);e.default=u},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(33),u=n(5),l=n(80);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=b(n(48)),f=y(n(8)),h=y(n(11)),p=n(9),d=n(108),m=y(n(12)),g=y(n(28)),v=b(n(62));function y(t){return t&&t.__esModule?t:{default:t}}function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}var _="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",x="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",w="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(bias, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n  float bias_val = texelFetch(bias, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val + t2_val + bias_val);\n}\n",S="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n\n  outColor = vec4(texelFetch(x, ivec2(out_x, index), 0).r);\n}\n",E="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D y;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(y, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (out_y == index) {\n    outColor = vec4(texelFetch(x, ivec2(out_x, 0), 0).r);\n  } else {\n    outColor = vec4(texelFetch(y, ivec2(out_x, out_y), 0).r);\n  }\n}\n",k=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),t=a(this,o(e).call(this,n)),Object.defineProperty(l(l(t)),"_combine",{configurable:!0,enumerable:!0,writable:!0,value:(0,g.default)({args:["array","array","array","array"],body:function(t,e,n,r){e+n+r}})}),t.layerClass="SimpleRNN";var i=n.units,s=void 0===i?1:i,u=n.activation,f=void 0===u?"tanh":u,h=n.use_bias,d=void 0===h||h,m=n.return_sequences,y=void 0!==m&&m,b=n.go_backwards,k=void 0!==b&&b,T=n.stateful,P=void 0!==T&&T;return t.units=s,t.activation=f,t.activationFunc=c[f],t.use_bias=d,t.returnSequences=y,t.goBackwards=k,t.stateful=P,t.params=t.use_bias?["kernel","recurrent_kernel","bias"]:["kernel","recurrent_kernel"],t.description="output dimensions: ".concat(t.units),t.description+="linear"!==t.activation?", ".concat(t.activation," activation"):"",t.description+=t.returnSequences?", return sequences":"",t.description+=t.goBackwards?", backward direction":"",t.description+=t.stateful?", stateful":"",t.gpu&&(t.copyTextureProgram=p.webgl2.compileProgram(_),t.matMulProgram=p.webgl2.compileProgram(x),t.activationProgram=p.webgl2.compileProgram(v[t.activation]),t.gateSummationProgram=p.webgl2.compileProgram(w),t.timestepReadProgram=p.webgl2.compileProgram(S),t.timestepWriteProgram=p.webgl2.compileProgram(E)),t}return u(e,t),i(e,[{key:"setWeights",value:function(t){s(o(e.prototype),"setWeights",this).call(this,t),this.use_bias||(this.weights.bias=new f.default([],[this.units]),this.gpu&&this.weights.bias.createGLTexture({type:"2d",format:"float"}))}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){var e=this,n=this.units,r=this.stateful&&this.currentHiddenState?this.currentHiddenState:new f.default([],[n]),i=new f.default([],[n]),a=new f.default([],[n]),o=new f.default([],[n]);this.hiddenStateSequence=new f.default([],[t.tensor.shape[0],n]);for(var s=new f.default([],[t.tensor.shape[1]]),u=0,l=t.tensor.shape[0];u<l;u++){var c=this.goBackwards?l-u-1:u;m.default.assign(s.tensor,t.tensor.pick(c,null)),[i,a].forEach(function(t){return m.default.assigns(t.tensor,0)}),m.default.assign(o.tensor,r.tensor),(0,d.gemv)(1,e.weights.kernel.tensor.transpose(1,0),s.tensor,1,i.tensor),(0,d.gemv)(1,e.weights.recurrent_kernel.tensor.transpose(1,0),o.tensor,1,a.tensor),e._combine(r.tensor,i.tensor,a.tensor,e.weights.bias.tensor),e.activationFunc(r),this.returnSequences&&m.default.assign(this.hiddenStateSequence.tensor.pick(u,null),r.tensor)}this.returnSequences?this.output=this.hiddenStateSequence:this.output=r,this.stateful&&(this.currentHiddenState=r)}},{key:"_stepGPU",value:function(){p.webgl2.runProgram({program:this.copyTextureProgram,output:this.previousHiddenState,inputs:[{input:this.currentHiddenState,name:"source"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempXH,inputs:[{input:this.currentX,name:"A"},{input:this.weights.kernel,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempHH,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.recurrent_kernel,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentHiddenStatePreactiv,inputs:[{input:this.tempXH,name:"t1"},{input:this.tempHH,name:"t2"},{input:this.weights.bias,name:"bias"}]}),"linear"!==this.activation?p.webgl2.runProgram({program:this.activationProgram,output:this.currentHiddenState,inputs:[{input:this.currentHiddenStatePreactiv,name:"x"}]}):this.currentHiddenState=this.currentHiddenStatePreactiv}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"});var e=this.units;this.currentHiddenState&&this.stateful||(this.currentHiddenState=new f.default([],[e]),this.currentHiddenState.createGLTexture({type:"2d",format:"float"})),this.currentHiddenStatePreactiv||(this.currentHiddenStatePreactiv=new f.default([],[e]),this.currentHiddenStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXH||(this.tempXH=new f.default([],[e]),this.tempXH.createGLTexture({type:"2d",format:"float"})),this.tempHH||(this.tempHH=new f.default([],[e]),this.tempHH.createGLTexture({type:"2d",format:"float"})),this.previousHiddenState||(this.previousHiddenState=new f.default([],[e]),this.previousHiddenState.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequence||(this.hiddenStateSequence=new f.default([],[t.glTextureShape[0],e]),this.hiddenStateSequence.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequenceCopy||(this.hiddenStateSequenceCopy=new f.default([],[t.glTextureShape[0],e]),this.hiddenStateSequenceCopy.createGLTexture({type:"2d",format:"float"})),this.currentX||(this.currentX=new f.default([],[t.glTextureShape[1]]),this.currentX.createGLTexture({type:"2d",format:"float"}));for(var n=0,r=t.glTextureShape[0];n<r;n++){var i=this.goBackwards?r-n-1:n;p.webgl2.runProgram({program:this.timestepReadProgram,output:this.currentX,inputs:[{input:t,name:"x"}],uniforms:[{value:i,type:"int",name:"index"}]}),this._stepGPU(),this.returnSequences&&(p.webgl2.runProgram({program:this.copyTextureProgram,output:this.hiddenStateSequenceCopy,inputs:[{input:this.hiddenStateSequence,name:"source"}]}),p.webgl2.runProgram({program:this.timestepWriteProgram,output:this.hiddenStateSequence,inputs:[{input:this.currentHiddenState,name:"x"},{input:this.hiddenStateSequenceCopy,name:"y"}],uniforms:[{value:n,type:"int",name:"index"}]}))}this.returnSequences?this.output=this.hiddenStateSequence:this.output=this.currentHiddenState,0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(h.default);e.default=k},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(33),u=n(5),l=n(80);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=b(n(48)),f=y(n(8)),h=y(n(11)),p=n(9),d=n(108),m=y(n(12)),g=y(n(28)),v=b(n(62));function y(t){return t&&t.__esModule?t:{default:t}}function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}var _="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",x="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",w="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(bias, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n  float bias_val = texelFetch(bias, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val + t2_val + bias_val);\n}\n",S="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(t1, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val * t2_val);\n}\n",E="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n\n  outColor = vec4(texelFetch(x, ivec2(out_x, index), 0).r);\n}\n",k="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D y;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(y, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (out_y == index) {\n    outColor = vec4(texelFetch(x, ivec2(out_x, 0), 0).r);\n  } else {\n    outColor = vec4(texelFetch(y, ivec2(out_x, out_y), 0).r);\n  }\n}\n",T="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D c;\nuniform sampler2D ctm1;\nuniform sampler2D i;\nuniform sampler2D f;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(c, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float c_val = texelFetch(c, ivec2(out_x, out_y), 0).r;\n  float ctm1_val = texelFetch(ctm1, ivec2(out_x, out_y), 0).r;\n  float i_val = texelFetch(i, ivec2(out_x, out_y), 0).r;\n  float f_val = texelFetch(f, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(c_val * i_val + ctm1_val * f_val);\n}\n",P=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),t=a(this,o(e).call(this,n)),Object.defineProperty(l(l(t)),"_combine",{configurable:!0,enumerable:!0,writable:!0,value:(0,g.default)({args:["array","array","array","array"],body:function(t,e,n,r){e+n+r}})}),Object.defineProperty(l(l(t)),"_update",{configurable:!0,enumerable:!0,writable:!0,value:(0,g.default)({args:["array","array","array","array"],body:function(t,e,n,r){t=t*n+e*r}})}),t.layerClass="LSTM";var i=n.units,s=void 0===i?1:i,u=n.activation,f=void 0===u?"tanh":u,h=n.use_bias,d=void 0===h||h,m=n.recurrent_activation,y=void 0===m?"hard_sigmoid":m,b=n.return_sequences,P=void 0!==b&&b,M=n.go_backwards,C=void 0!==M&&M,O=n.stateful,I=void 0!==O&&O;return t.units=s,t.activation=f,t.recurrentActivation=y,t.activationFunc=c[f],t.recurrentActivationFunc=c[y],t.use_bias=d,t.returnSequences=P,t.goBackwards=C,t.stateful=I,t.params=t.use_bias?["kernel","recurrent_kernel","bias"]:["kernel","recurrent_kernel"],t.description="output dimensions: ".concat(t.units),t.description+="linear"!==t.activation?", ".concat(t.activation," activation"):"",t.description+="linear"!==t.recurrentActivation?", ".concat(t.recurrentActivation," recurrent activation"):"",t.description+=t.returnSequences?", return sequences":"",t.description+=t.goBackwards?", backward direction":"",t.description+=t.stateful?", stateful":"",t.gpu&&(t.copyTextureProgram=p.webgl2.compileProgram(_),t.matMulProgram=p.webgl2.compileProgram(x),t.activationProgram=p.webgl2.compileProgram(v[t.activation]),t.recurrentActivationProgram=p.webgl2.compileProgram(v[t.recurrentActivation]),t.gateSummationProgram=p.webgl2.compileProgram(w),t.gateProductProgram=p.webgl2.compileProgram(S),t.timestepReadProgram=p.webgl2.compileProgram(E),t.timestepWriteProgram=p.webgl2.compileProgram(k),t.updateProgram=p.webgl2.compileProgram(T)),t}return u(e,t),i(e,[{key:"setWeights",value:function(t){var n=this;s(o(e.prototype),"setWeights",this).call(this,t);var r=this.weights.kernel.tensor.shape;this.weights.W_i=new f.default([],[r[0],this.units]),this.weights.W_f=new f.default([],[r[0],this.units]),this.weights.W_c=new f.default([],[r[0],this.units]),this.weights.W_o=new f.default([],[r[0],this.units]),m.default.assign(this.weights.W_i.tensor,this.weights.kernel.tensor.hi(r[0],this.units).lo(0,0)),m.default.assign(this.weights.W_f.tensor,this.weights.kernel.tensor.hi(r[0],2*this.units).lo(0,this.units)),m.default.assign(this.weights.W_c.tensor,this.weights.kernel.tensor.hi(r[0],3*this.units).lo(0,2*this.units)),m.default.assign(this.weights.W_o.tensor,this.weights.kernel.tensor.hi(r[0],4*this.units).lo(0,3*this.units));var i=this.weights.recurrent_kernel.tensor.shape;if(this.weights.U_i=new f.default([],[i[0],this.units]),this.weights.U_f=new f.default([],[i[0],this.units]),this.weights.U_c=new f.default([],[i[0],this.units]),this.weights.U_o=new f.default([],[i[0],this.units]),m.default.assign(this.weights.U_i.tensor,this.weights.recurrent_kernel.tensor.hi(i[0],this.units).lo(0,0)),m.default.assign(this.weights.U_f.tensor,this.weights.recurrent_kernel.tensor.hi(i[0],2*this.units).lo(0,this.units)),m.default.assign(this.weights.U_c.tensor,this.weights.recurrent_kernel.tensor.hi(i[0],3*this.units).lo(0,2*this.units)),m.default.assign(this.weights.U_o.tensor,this.weights.recurrent_kernel.tensor.hi(i[0],4*this.units).lo(0,3*this.units)),this.weights.b_i=new f.default([],[this.units]),this.weights.b_f=new f.default([],[this.units]),this.weights.b_c=new f.default([],[this.units]),this.weights.b_o=new f.default([],[this.units]),this.use_bias&&(m.default.assign(this.weights.b_i.tensor,this.weights.bias.tensor.hi(this.units).lo(0)),m.default.assign(this.weights.b_f.tensor,this.weights.bias.tensor.hi(2*this.units).lo(this.units)),m.default.assign(this.weights.b_c.tensor,this.weights.bias.tensor.hi(3*this.units).lo(2*this.units)),m.default.assign(this.weights.b_o.tensor,this.weights.bias.tensor.hi(4*this.units).lo(3*this.units))),this.gpu){["W_i","W_f","W_c","W_o","U_i","U_f","U_c","U_o","b_i","b_f","b_c","b_o"].forEach(function(t){n.weights[t].createGLTexture({type:"2d",format:"float"})})}}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){var e=this,n=this.weights.b_i.tensor.shape[0],r=this.weights.b_c.tensor.shape[0],i=this.weights.b_f.tensor.shape[0],a=this.weights.b_o.tensor.shape[0],o=new f.default([],[n]),s=new f.default([],[n]),u=new f.default([],[n]),l=new f.default([],[i]),c=new f.default([],[i]),h=new f.default([],[i]),p=new f.default([],[a]),g=new f.default([],[a]),v=new f.default([],[a]),y=new f.default([],[r]),b=new f.default([],[r]),_=new f.default([],[r]),x=this.stateful&&this.previousCandidate?this.previousCandidate:new f.default([],[r]),w=this.stateful&&this.currentHiddenState?this.currentHiddenState:new f.default([],[r]),S=new f.default([],[r]);this.hiddenStateSequence=new f.default([],[t.tensor.shape[0],r]);for(var E=new f.default([],[t.tensor.shape[1]]),k=0,T=t.tensor.shape[0];k<T;k++){var P=this.goBackwards?T-k-1:k;m.default.assign(E.tensor,t.tensor.pick(P,null)),[s,u,c,h,g,v,b,_].forEach(function(t){return m.default.assigns(t.tensor,0)}),m.default.assign(S.tensor,w.tensor),(0,d.gemv)(1,e.weights.W_i.tensor.transpose(1,0),E.tensor,1,s.tensor),(0,d.gemv)(1,e.weights.U_i.tensor.transpose(1,0),S.tensor,1,u.tensor),e._combine(o.tensor,s.tensor,u.tensor,e.weights.b_i.tensor),e.recurrentActivationFunc(o),(0,d.gemv)(1,e.weights.W_f.tensor.transpose(1,0),E.tensor,1,c.tensor),(0,d.gemv)(1,e.weights.U_f.tensor.transpose(1,0),S.tensor,1,h.tensor),e._combine(l.tensor,c.tensor,h.tensor,e.weights.b_f.tensor),e.recurrentActivationFunc(l),(0,d.gemv)(1,e.weights.W_o.tensor.transpose(1,0),E.tensor,1,g.tensor),(0,d.gemv)(1,e.weights.U_o.tensor.transpose(1,0),S.tensor,1,v.tensor),e._combine(p.tensor,g.tensor,v.tensor,e.weights.b_o.tensor),e.recurrentActivationFunc(p),(0,d.gemv)(1,e.weights.W_c.tensor.transpose(1,0),E.tensor,1,b.tensor),(0,d.gemv)(1,e.weights.U_c.tensor.transpose(1,0),S.tensor,1,_.tensor),e._combine(y.tensor,b.tensor,_.tensor,e.weights.b_c.tensor),e.activationFunc(y),e._update(y.tensor,x.tensor,o.tensor,l.tensor),m.default.assign(x.tensor,y.tensor),e.activationFunc(y),m.default.mul(w.tensor,p.tensor,y.tensor),m.default.assign(this.hiddenStateSequence.tensor.pick(k,null),w.tensor)}this.returnSequences?this.output=this.hiddenStateSequence:this.output=w,this.stateful&&(this.previousCandidate=x,this.currentHiddenState=w)}},{key:"_stepGPU",value:function(){p.webgl2.runProgram({program:this.copyTextureProgram,output:this.previousHiddenState,inputs:[{input:this.currentHiddenState,name:"source"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempXI,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_i,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempHI,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_i,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentInputGateStatePreactiv,inputs:[{input:this.tempXI,name:"t1"},{input:this.tempHI,name:"t2"},{input:this.weights.b_i,name:"bias"}]}),"linear"!==this.recurrentActivation?p.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentInputGateState,inputs:[{input:this.currentInputGateStatePreactiv,name:"x"}]}):this.currentInputGateState=this.currentInputGateStatePreactiv,p.webgl2.runProgram({program:this.matMulProgram,output:this.tempXF,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_f,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempHF,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_f,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentForgetGateStatePreactiv,inputs:[{input:this.tempXF,name:"t1"},{input:this.tempHF,name:"t2"},{input:this.weights.b_f,name:"bias"}]}),"linear"!==this.recurrentActivation?p.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentForgetGateState,inputs:[{input:this.currentForgetGateStatePreactiv,name:"x"}]}):this.currentForgetGateState=this.currentForgetGateStatePreactiv,p.webgl2.runProgram({program:this.matMulProgram,output:this.tempXO,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_o,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempHO,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_o,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentOutputGateStatePreactiv,inputs:[{input:this.tempXO,name:"t1"},{input:this.tempHO,name:"t2"},{input:this.weights.b_o,name:"bias"}]}),"linear"!==this.recurrentActivation?p.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentOutputGateState,inputs:[{input:this.currentOutputGateStatePreactiv,name:"x"}]}):this.currentOutputGateState=this.currentOutputGateStatePreactiv,p.webgl2.runProgram({program:this.matMulProgram,output:this.tempXC,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_c,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempHC,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_c,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentCandidatePreactiv,inputs:[{input:this.tempXC,name:"t1"},{input:this.tempHC,name:"t2"},{input:this.weights.b_c,name:"bias"}]}),"linear"!==this.activation?p.webgl2.runProgram({program:this.activationProgram,output:this.currentCandidate,inputs:[{input:this.currentCandidatePreactiv,name:"x"}]}):this.currentCandidate=this.currentCandidatePreactiv,p.webgl2.runProgram({program:this.copyTextureProgram,output:this.currentCandidateCopy,inputs:[{input:this.currentCandidate,name:"source"}]}),p.webgl2.runProgram({program:this.updateProgram,output:this.currentCandidate,inputs:[{input:this.currentCandidateCopy,name:"c"},{input:this.previousCandidate,name:"ctm1"},{input:this.currentInputGateState,name:"i"},{input:this.currentForgetGateState,name:"f"}]}),p.webgl2.runProgram({program:this.copyTextureProgram,output:this.previousCandidate,inputs:[{input:this.currentCandidate,name:"source"}]}),p.webgl2.runProgram({program:this.copyTextureProgram,output:this.currentCandidatePreactiv,inputs:[{input:this.currentCandidate,name:"source"}]}),"linear"!==this.activation?p.webgl2.runProgram({program:this.activationProgram,output:this.currentCandidate,inputs:[{input:this.currentCandidatePreactiv,name:"x"}]}):this.currentCandidate=this.currentCandidatePreactiv,p.webgl2.runProgram({program:this.gateProductProgram,output:this.currentHiddenState,inputs:[{input:this.currentOutputGateState,name:"t1"},{input:this.currentCandidate,name:"t2"}]})}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"});var e=this.weights.b_i.glTextureShape[1],n=this.weights.b_c.glTextureShape[1],r=this.weights.b_f.glTextureShape[1],i=this.weights.b_o.glTextureShape[1];this.currentInputGateState||(this.currentInputGateState=new f.default([],[e]),this.currentInputGateState.createGLTexture({type:"2d",format:"float"})),this.currentInputGateStatePreactiv||(this.currentInputGateStatePreactiv=new f.default([],[e]),this.currentInputGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXI||(this.tempXI=new f.default([],[e]),this.tempXI.createGLTexture({type:"2d",format:"float"})),this.tempHI||(this.tempHI=new f.default([],[e]),this.tempHI.createGLTexture({type:"2d",format:"float"})),this.currentForgetGateState||(this.currentForgetGateState=new f.default([],[r]),this.currentForgetGateState.createGLTexture({type:"2d",format:"float"})),this.currentForgetGateStatePreactiv||(this.currentForgetGateStatePreactiv=new f.default([],[r]),this.currentForgetGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXF||(this.tempXF=new f.default([],[r]),this.tempXF.createGLTexture({type:"2d",format:"float"})),this.tempHF||(this.tempHF=new f.default([],[r]),this.tempHF.createGLTexture({type:"2d",format:"float"})),this.currentOutputGateState||(this.currentOutputGateState=new f.default([],[i]),this.currentOutputGateState.createGLTexture({type:"2d",format:"float"})),this.currentOutputGateStatePreactiv||(this.currentOutputGateStatePreactiv=new f.default([],[i]),this.currentOutputGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXO||(this.tempXO=new f.default([],[i]),this.tempXO.createGLTexture({type:"2d",format:"float"})),this.tempHO||(this.tempHO=new f.default([],[i]),this.tempHO.createGLTexture({type:"2d",format:"float"})),this.currentCandidate||(this.currentCandidate=new f.default([],[n]),this.currentCandidate.createGLTexture({type:"2d",format:"float"})),this.currentCandidateCopy||(this.currentCandidateCopy=new f.default([],[n]),this.currentCandidateCopy.createGLTexture({type:"2d",format:"float"})),this.currentCandidatePreactiv||(this.currentCandidatePreactiv=new f.default([],[n]),this.currentCandidatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXC||(this.tempXC=new f.default([],[n]),this.tempXC.createGLTexture({type:"2d",format:"float"})),this.tempHC||(this.tempHC=new f.default([],[n]),this.tempHC.createGLTexture({type:"2d",format:"float"})),this.previousCandidate&&this.stateful||(this.previousCandidate=new f.default([],[n]),this.previousCandidate.createGLTexture({type:"2d",format:"float"})),this.currentHiddenState&&this.stateful||(this.currentHiddenState=new f.default([],[n]),this.currentHiddenState.createGLTexture({type:"2d",format:"float"})),this.previousHiddenState||(this.previousHiddenState=new f.default([],[n]),this.previousHiddenState.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequence||(this.hiddenStateSequence=new f.default([],[t.glTextureShape[0],n]),this.hiddenStateSequence.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequenceCopy||(this.hiddenStateSequenceCopy=new f.default([],[t.glTextureShape[0],n]),this.hiddenStateSequenceCopy.createGLTexture({type:"2d",format:"float"})),this.currentX||(this.currentX=new f.default([],[t.glTextureShape[1]]),this.currentX.createGLTexture({type:"2d",format:"float"}));for(var a=0,o=t.glTextureShape[0];a<o;a++){var s=this.goBackwards?o-a-1:a;p.webgl2.runProgram({program:this.timestepReadProgram,output:this.currentX,inputs:[{input:t,name:"x"}],uniforms:[{value:s,type:"int",name:"index"}]}),this._stepGPU(),this.returnSequences&&(p.webgl2.runProgram({program:this.copyTextureProgram,output:this.hiddenStateSequenceCopy,inputs:[{input:this.hiddenStateSequence,name:"source"}]}),p.webgl2.runProgram({program:this.timestepWriteProgram,output:this.hiddenStateSequence,inputs:[{input:this.currentHiddenState,name:"x"},{input:this.hiddenStateSequenceCopy,name:"y"}],uniforms:[{value:a,type:"int",name:"index"}]}))}this.returnSequences?this.output=this.hiddenStateSequence:this.output=this.currentHiddenState,0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(h.default);e.default=P},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(33),u=n(5),l=n(80);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=b(n(48)),f=y(n(8)),h=y(n(11)),p=n(9),d=n(108),m=y(n(12)),g=y(n(28)),v=b(n(62));function y(t){return t&&t.__esModule?t:{default:t}}function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}var _="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",x="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D A;\nuniform sampler2D B;\nuniform sampler2D C;\nuniform bool addC;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 A_size = textureSize(A, 0);\n  ivec2 B_size = textureSize(B, 0);\n  int out_x = int(float(B_size[0]) * outTex.x);\n  int out_y = int(float(A_size[1]) * outTex.y);\n  int commonDim = A_size[0];\n\n  float sum = 0.;\n  for (int i = 0; i < commonDim; ++i) {\n    float a = texelFetch(A, ivec2(i, out_y), 0).r;\n    float b = texelFetch(B, ivec2(out_x, i), 0).r;\n    sum += a * b;\n  }\n\n  if (addC) {\n    sum += texelFetch(C, ivec2(out_x, 0), 0).r;\n  }\n\n  outColor = vec4(sum);\n}\n",w="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nuniform sampler2D bias;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(bias, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n  float bias_val = texelFetch(bias, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val + t2_val + bias_val);\n}\n",S="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D t1;\nuniform sampler2D t2;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(t1, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float t1_val = texelFetch(t1, ivec2(out_x, out_y), 0).r;\n  float t2_val = texelFetch(t2, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(t1_val * t2_val);\n}\n",E="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n\n  outColor = vec4(texelFetch(x, ivec2(out_x, index), 0).r);\n}\n",k="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform sampler2D y;\nuniform int index;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(y, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (out_y == index) {\n    outColor = vec4(texelFetch(x, ivec2(out_x, 0), 0).r);\n  } else {\n    outColor = vec4(texelFetch(y, ivec2(out_x, out_y), 0).r);\n  }\n}\n",T="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D h;\nuniform sampler2D htm1;\nuniform sampler2D z;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(h, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float h_val = texelFetch(h, ivec2(out_x, out_y), 0).r;\n  float htm1_val = texelFetch(htm1, ivec2(out_x, out_y), 0).r;\n  float z_val = texelFetch(z, ivec2(out_x, out_y), 0).r;\n\n  outColor = vec4(h_val * (float(1.0) - z_val) + htm1_val * z_val);\n}\n",P=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),t=a(this,o(e).call(this,n)),Object.defineProperty(l(l(t)),"_combine",{configurable:!0,enumerable:!0,writable:!0,value:(0,g.default)({args:["array","array","array","array"],body:function(t,e,n,r){e+n+r}})}),Object.defineProperty(l(l(t)),"_update",{configurable:!0,enumerable:!0,writable:!0,value:(0,g.default)({args:["array","array","array"],body:function(t,e,n){t=t*(1-n)+e*n}})}),t.layerClass="GRU";var i=n.units,s=void 0===i?1:i,u=n.activation,f=void 0===u?"tanh":u,h=n.use_bias,d=void 0===h||h,m=n.recurrent_activation,y=void 0===m?"hard_sigmoid":m,b=n.return_sequences,P=void 0!==b&&b,M=n.go_backwards,C=void 0!==M&&M,O=n.stateful,I=void 0!==O&&O;return t.units=s,t.activation=f,t.recurrentActivation=y,t.activationFunc=c[f],t.recurrentActivationFunc=c[y],t.use_bias=d,t.returnSequences=P,t.goBackwards=C,t.stateful=I,t.params=t.use_bias?["kernel","recurrent_kernel","bias"]:["kernel","recurrent_kernel"],t.description="output dimensions: ".concat(t.units),t.description+="linear"!==t.activation?", ".concat(t.activation," activation"):"",t.description+="linear"!==t.recurrentActivation?", ".concat(t.recurrentActivation," recurrent activation"):"",t.description+=t.returnSequences?", return sequences":"",t.description+=t.goBackwards?", backward direction":"",t.description+=t.stateful?", stateful":"",t.gpu&&(t.copyTextureProgram=p.webgl2.compileProgram(_),t.matMulProgram=p.webgl2.compileProgram(x),t.activationProgram=p.webgl2.compileProgram(v[t.activation]),t.recurrentActivationProgram=p.webgl2.compileProgram(v[t.recurrentActivation]),t.gateSummationProgram=p.webgl2.compileProgram(w),t.gateProductProgram=p.webgl2.compileProgram(S),t.timestepReadProgram=p.webgl2.compileProgram(E),t.timestepWriteProgram=p.webgl2.compileProgram(k),t.updateProgram=p.webgl2.compileProgram(T)),t}return u(e,t),i(e,[{key:"setWeights",value:function(t){var n=this;s(o(e.prototype),"setWeights",this).call(this,t);var r=this.weights.kernel.tensor.shape;this.weights.W_z=new f.default([],[r[0],this.units]),this.weights.W_r=new f.default([],[r[0],this.units]),this.weights.W_h=new f.default([],[r[0],this.units]),m.default.assign(this.weights.W_z.tensor,this.weights.kernel.tensor.hi(r[0],this.units).lo(0,0)),m.default.assign(this.weights.W_r.tensor,this.weights.kernel.tensor.hi(r[0],2*this.units).lo(0,this.units)),m.default.assign(this.weights.W_h.tensor,this.weights.kernel.tensor.hi(r[0],3*this.units).lo(0,2*this.units));var i=this.weights.recurrent_kernel.tensor.shape;if(this.weights.U_z=new f.default([],[i[0],this.units]),this.weights.U_r=new f.default([],[i[0],this.units]),this.weights.U_h=new f.default([],[i[0],this.units]),m.default.assign(this.weights.U_z.tensor,this.weights.recurrent_kernel.tensor.hi(i[0],this.units).lo(0,0)),m.default.assign(this.weights.U_r.tensor,this.weights.recurrent_kernel.tensor.hi(i[0],2*this.units).lo(0,this.units)),m.default.assign(this.weights.U_h.tensor,this.weights.recurrent_kernel.tensor.hi(i[0],3*this.units).lo(0,2*this.units)),this.weights.b_z=new f.default([],[this.units]),this.weights.b_r=new f.default([],[this.units]),this.weights.b_h=new f.default([],[this.units]),this.use_bias&&(m.default.assign(this.weights.b_z.tensor,this.weights.bias.tensor.hi(this.units).lo(0)),m.default.assign(this.weights.b_r.tensor,this.weights.bias.tensor.hi(2*this.units).lo(this.units)),m.default.assign(this.weights.b_h.tensor,this.weights.bias.tensor.hi(3*this.units).lo(2*this.units))),this.gpu){["W_z","W_r","W_h","U_z","U_r","U_h","b_z","b_r","b_h"].forEach(function(t){n.weights[t].createGLTexture({type:"2d",format:"float"})})}}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){var e=this,n=this.weights.b_z.tensor.shape[0],r=this.weights.b_r.tensor.shape[0],i=this.weights.b_h.tensor.shape[0],a=new f.default([],[n]),o=new f.default([],[n]),s=new f.default([],[n]),u=new f.default([],[r]),l=new f.default([],[r]),c=new f.default([],[r]),h=this.stateful&&this.currentHiddenState?this.currentHiddenState:new f.default([],[i]),p=new f.default([],[i]),g=new f.default([],[i]),v=new f.default([],[i]);this.hiddenStateSequence=new f.default([],[t.tensor.shape[0],i]);for(var y=new f.default([],[t.tensor.shape[1]]),b=0,_=t.tensor.shape[0];b<_;b++){var x=this.goBackwards?_-b-1:b;m.default.assign(y.tensor,t.tensor.pick(x,null)),[o,s,l,c,p,g].forEach(function(t){return m.default.assigns(t.tensor,0)}),m.default.assign(v.tensor,h.tensor),(0,d.gemv)(1,e.weights.W_z.tensor.transpose(1,0),y.tensor,1,o.tensor),(0,d.gemv)(1,e.weights.U_z.tensor.transpose(1,0),v.tensor,1,s.tensor),e._combine(a.tensor,o.tensor,s.tensor,e.weights.b_z.tensor),e.recurrentActivationFunc(a),(0,d.gemv)(1,e.weights.W_r.tensor.transpose(1,0),y.tensor,1,l.tensor),(0,d.gemv)(1,e.weights.U_r.tensor.transpose(1,0),v.tensor,1,c.tensor),e._combine(u.tensor,l.tensor,c.tensor,e.weights.b_r.tensor),e.recurrentActivationFunc(u),m.default.muleq(u.tensor,v.tensor),(0,d.gemv)(1,e.weights.W_h.tensor.transpose(1,0),y.tensor,1,p.tensor),(0,d.gemv)(1,e.weights.U_h.tensor.transpose(1,0),u.tensor,1,g.tensor),e._combine(h.tensor,p.tensor,g.tensor,e.weights.b_h.tensor),e.activationFunc(h),e._update(h.tensor,v.tensor,a.tensor),this.returnSequences&&m.default.assign(this.hiddenStateSequence.tensor.pick(b,null),h.tensor)}this.returnSequences?this.output=this.hiddenStateSequence:this.output=h,this.stateful&&(this.currentHiddenState=h)}},{key:"_stepGPU",value:function(){p.webgl2.runProgram({program:this.copyTextureProgram,output:this.previousHiddenState,inputs:[{input:this.currentHiddenState,name:"source"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempXZ,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_z,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempHZ,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_z,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentUpdateGateStatePreactiv,inputs:[{input:this.tempXZ,name:"t1"},{input:this.tempHZ,name:"t2"},{input:this.weights.b_z,name:"bias"}]}),"linear"!==this.recurrentActivation?p.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentUpdateGateState,inputs:[{input:this.currentUpdateGateStatePreactiv,name:"x"}]}):this.currentUpdateGateState=this.currentUpdateGateStatePreactiv,p.webgl2.runProgram({program:this.matMulProgram,output:this.tempXR,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_r,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempHR,inputs:[{input:this.previousHiddenState,name:"A"},{input:this.weights.U_r,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentResetGateStatePreactiv,inputs:[{input:this.tempXR,name:"t1"},{input:this.tempHR,name:"t2"},{input:this.weights.b_r,name:"bias"}]}),"linear"!==this.recurrentActivation?p.webgl2.runProgram({program:this.recurrentActivationProgram,output:this.currentResetGateState,inputs:[{input:this.currentResetGateStatePreactiv,name:"x"}]}):this.currentResetGateState=this.currentResetGateStatePreactiv,p.webgl2.runProgram({program:this.copyTextureProgram,output:this.currentResetGateStateCopy,inputs:[{input:this.currentResetGateState,name:"source"}]}),p.webgl2.runProgram({program:this.gateProductProgram,output:this.currentResetGateState,inputs:[{input:this.currentResetGateStateCopy,name:"t1"},{input:this.previousHiddenState,name:"t2"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempXH,inputs:[{input:this.currentX,name:"A"},{input:this.weights.W_h,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.matMulProgram,output:this.tempHH,inputs:[{input:this.currentResetGateState,name:"A"},{input:this.weights.U_h,name:"B"}],uniforms:[{value:0,type:"bool",name:"addC"}]}),p.webgl2.runProgram({program:this.gateSummationProgram,output:this.currentHiddenStatePreactiv,inputs:[{input:this.tempXH,name:"t1"},{input:this.tempHH,name:"t2"},{input:this.weights.b_h,name:"bias"}]}),"linear"!==this.activation?p.webgl2.runProgram({program:this.activationProgram,output:this.currentHiddenState,inputs:[{input:this.currentHiddenStatePreactiv,name:"x"}]}):this.currentHiddenState=this.currentHiddenStatePreactiv,p.webgl2.runProgram({program:this.copyTextureProgram,output:this.currentHiddenStateCopy,inputs:[{input:this.currentHiddenState,name:"source"}]}),p.webgl2.runProgram({program:this.updateProgram,output:this.currentHiddenState,inputs:[{input:this.currentHiddenStateCopy,name:"h"},{input:this.previousHiddenState,name:"htm1"},{input:this.currentUpdateGateState,name:"z"}]})}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"});var e=this.weights.b_z.glTextureShape[1],n=this.weights.b_r.glTextureShape[1],r=this.weights.b_h.glTextureShape[1];this.currentHiddenState&&this.stateful||(this.currentHiddenState=new f.default([],[r]),this.currentHiddenState.createGLTexture({type:"2d",format:"float"})),this.currentHiddenStateCopy||(this.currentHiddenStateCopy=new f.default([],[r]),this.currentHiddenStateCopy.createGLTexture({type:"2d",format:"float"})),this.currentHiddenStatePreactiv||(this.currentHiddenStatePreactiv=new f.default([],[r]),this.currentHiddenStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.currentUpdateGateState||(this.currentUpdateGateState=new f.default([],[e]),this.currentUpdateGateState.createGLTexture({type:"2d",format:"float"})),this.currentUpdateGateStatePreactiv||(this.currentUpdateGateStatePreactiv=new f.default([],[e]),this.currentUpdateGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXZ||(this.tempXZ=new f.default([],[e]),this.tempXZ.createGLTexture({type:"2d",format:"float"})),this.tempHZ||(this.tempHZ=new f.default([],[e]),this.tempHZ.createGLTexture({type:"2d",format:"float"})),this.currentResetGateState||(this.currentResetGateState=new f.default([],[n]),this.currentResetGateState.createGLTexture({type:"2d",format:"float"})),this.currentResetGateStateCopy||(this.currentResetGateStateCopy=new f.default([],[n]),this.currentResetGateStateCopy.createGLTexture({type:"2d",format:"float"})),this.currentResetGateStatePreactiv||(this.currentResetGateStatePreactiv=new f.default([],[n]),this.currentResetGateStatePreactiv.createGLTexture({type:"2d",format:"float"})),this.tempXR||(this.tempXR=new f.default([],[n]),this.tempXR.createGLTexture({type:"2d",format:"float"})),this.tempHR||(this.tempHR=new f.default([],[n]),this.tempHR.createGLTexture({type:"2d",format:"float"})),this.tempXH||(this.tempXH=new f.default([],[r]),this.tempXH.createGLTexture({type:"2d",format:"float"})),this.tempHH||(this.tempHH=new f.default([],[r]),this.tempHH.createGLTexture({type:"2d",format:"float"})),this.previousHiddenState||(this.previousHiddenState=new f.default([],[r]),this.previousHiddenState.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequence||(this.hiddenStateSequence=new f.default([],[t.glTextureShape[0],r]),this.hiddenStateSequence.createGLTexture({type:"2d",format:"float"})),this.hiddenStateSequenceCopy||(this.hiddenStateSequenceCopy=new f.default([],[t.glTextureShape[0],r]),this.hiddenStateSequenceCopy.createGLTexture({type:"2d",format:"float"})),this.currentX||(this.currentX=new f.default([],[t.glTextureShape[1]]),this.currentX.createGLTexture({type:"2d",format:"float"}));for(var i=0,a=t.glTextureShape[0];i<a;i++){var o=this.goBackwards?a-i-1:i;p.webgl2.runProgram({program:this.timestepReadProgram,output:this.currentX,inputs:[{input:t,name:"x"}],uniforms:[{value:o,type:"int",name:"index"}]}),this._stepGPU(),this.returnSequences&&(p.webgl2.runProgram({program:this.copyTextureProgram,output:this.hiddenStateSequenceCopy,inputs:[{input:this.hiddenStateSequence,name:"source"}]}),p.webgl2.runProgram({program:this.timestepWriteProgram,output:this.hiddenStateSequence,inputs:[{input:this.currentHiddenState,name:"x"},{input:this.hiddenStateSequenceCopy,name:"y"}],uniforms:[{value:i,type:"int",name:"index"}]}))}this.returnSequences?this.output=this.hiddenStateSequence:this.output=this.currentHiddenState,0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(h.default);e.default=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"TimeDistributed",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"Bidirectional",{enumerable:!0,get:function(){return i.default}});var r=a(n(814)),i=a(n(815));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){"use strict";var r=n(47),i=n(2),a=n(7),o=n(4),s=n(3),u=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=d(n(11)),c=d(n(8)),f=n(9),h=d(n(12)),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(196));function d(t){return t&&t.__esModule?t:{default:t}}var m="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",g="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform isampler2D indexMap;\nuniform int inputCols;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(indexMap, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(inputCols)));\n    int colIndex = int(mod(float(index), float(inputCols)));\n    float val = texelFetch(x, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = vec4(0.0);\n  }\n}\n",v="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D x;\nuniform int t;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(x, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n\n  outColor = vec4(texelFetch(x, ivec2(out_x, t), 0).r);\n}\n",y="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D outputCopy;\nuniform sampler2D sliceOutput;\nuniform int t;\nuniform int timesteps;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(sliceOutput, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(timesteps) * outTex.y);\n\n  if (t == out_y) {\n    outColor = vec4(texelFetch(sliceOutput, ivec2(out_x, 0), 0).r);\n  } else {\n    outColor = texelFetch(outputCopy, ivec2(out_x, out_y), 0);\n  }\n}\n",b="#version 300 es\nprecision highp float;\nprecision highp isampler2D;\n\nin vec2 outTex;\nuniform sampler2D outputCopy;\nuniform sampler2D sliceOutput;\nuniform isampler2D indexMap;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(outputCopy, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  int index = texelFetch(indexMap, ivec2(out_x, out_y), 0).r;\n\n  if (index != -1) {\n    int rowIndex = int(floor(float(index) / float(textureSize(sliceOutput, 0)[0])));\n    int colIndex = int(mod(float(index), float(textureSize(sliceOutput, 0)[0])));\n    float val = texelFetch(sliceOutput, ivec2(colIndex, rowIndex), 0).r;\n    outColor = vec4(val);\n  } else {\n    outColor = texelFetch(outputCopy, ivec2(out_x, out_y), 0);\n  }\n}\n",_=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),(t=o(this,s(e).call(this,n))).layerClass="TimeDistributed";var r=n.layer;r||t.throwError("wrapped layer is undefined.");var a=Object.assign({},r.config,{gpu:n.gpu});return t.wrappedLayer=new p[r.class_name](a),t.wrappedLayer.outbound=[null],t.gpu&&(t.copyTextureProgram=f.webgl2.compileProgram(m),t.mapInputProgram=f.webgl2.compileProgram(g),t.selectSliceProgram=f.webgl2.compileProgram(v),t.copySliceOutputProgram=f.webgl2.compileProgram(y),t.mapSliceOutputProgram=f.webgl2.compileProgram(b)),t}return u(e,t),a(e,[{key:"setWeights",value:function(t){this.wrappedLayer.setWeights(t)}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){var e,n,i=r(t.tensor.shape.slice(1)),a=new c.default([],i);h.default.assign(a.tensor,(e=t.tensor).pick.apply(e,[0].concat(r(Array(i.length).fill(null)))));var o=this.wrappedLayer.call(a),s=o.tensor.shape.slice();this.output=new c.default([],[t.tensor.shape[0]].concat(r(s))),h.default.assign((n=this.output.tensor).pick.apply(n,[0].concat(r(Array(s.length).fill(null)))),o.tensor);for(var u=1,l=t.tensor.shape[0];u<l;u++){var f,p;h.default.assign(a.tensor,(f=t.tensor).pick.apply(f,[u].concat(r(Array(i.length).fill(null))))),o=this.wrappedLayer.call(a),h.default.assign((p=this.output.tensor).pick.apply(p,[u].concat(r(Array(s.length).fill(null)))),o.tensor)}}},{key:"_createIndexMap",value:function(t){if(!this.indexMaps){var e=new c.default(t.data,t.shape,{type:Int32Array});this.indexMaps=[];for(var n=this.inputShape[0],i=this.inputShape.slice(1),a=0;a<n;a++){var o,s=new c.default([],i,{type:Int32Array});h.default.assign(s.tensor,(o=e.tensor).pick.apply(o,[a].concat(r(Array(i.length).fill(null))))),s.reshapeTo2DSquare(),s.createGLTexture({type:"2d",format:"int"}),this.indexMaps.push(s)}}}},{key:"_createOutputIndexMap",value:function(t){if(!this.outputIndexMaps){var e=new c.default(t.data,t.shape,{type:Int32Array});this.outputIndexMaps=[];for(var n=this.outputShape[0],i=this.outputShape.slice(1),a=0;a<n;a++){var o,s=new c.default([],this.outputShape,{type:Int32Array});h.default.assigns(s.tensor,-1),h.default.assign((o=s.tensor).pick.apply(o,[a].concat(r(Array(i.length).fill(null)))),e.tensor),s.reshapeTo2DSquare(),s.createGLTexture({type:"2d",format:"int"}),this.outputIndexMaps.push(s)}}}},{key:"_callGPU",value:function(t){t.is2DReshaped||t.is2DSquareReshaped?this.inputShape=t.originalShape:this.inputShape=t.tensor.shape,t.glTexture||(t.tensor.shape.length<=2?t.createGLTexture({type:"2d",format:"float"}):t.tensor.shape.length>2&&!t.is2DReshaped&&(t.reshapeTo2DSquare(),t.createGLTexture({type:"2d",format:"float"}))),this.inputShape.length>2&&this._createIndexMap(t.indicesForReshaped);var e=this.inputShape[0],n=this.inputShape.slice(1);this.slice||(this.slice=new c.default([],n),n.length<=2?this.slice.createGLTexture({type:"2d",format:"float"}):(this.slice.reshapeTo2DSquare(),this.slice.createGLTexture({type:"2d",format:"float"}))),this.inputShape.length<=2?f.webgl2.runProgram({program:this.selectSliceProgram,output:this.slice,inputs:[{input:t,name:"x"}],uniforms:[{value:0,type:"int",name:"t"}]}):f.webgl2.runProgram({program:this.mapInputProgram,output:this.slice,inputs:[{input:t,name:"x"},{input:this.indexMaps[0],name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),this.wrappedLayer._callGPU(this.slice),this.sliceOutput=this.wrappedLayer.output,this.output||(this.inputShape.length<=2?(this.outputShape=[e,this.sliceOutput.glTextureShape[1]],this.output=new c.default([],this.outputShape),this.outputCopy=new c.default([],this.outputShape),this.output.createGLTexture({type:"2d",format:"float"}),this.outputCopy.createGLTexture({type:"2d",format:"float"})):(this.outputShape=[e].concat(r(this.sliceOutput.originalShape)),this.output=new c.default([],this.outputShape),this.outputCopy=new c.default([],this.outputShape),this.output.reshapeTo2DSquare(),this.outputCopy.reshapeTo2DSquare(),this.output.createGLTexture({type:"2d",format:"float"}),this.outputCopy.createGLTexture({type:"2d",format:"float"}),this._createOutputIndexMap(this.sliceOutput.indicesForReshaped))),f.webgl2.runProgram({program:this.copyTextureProgram,output:this.outputCopy,inputs:[{input:this.output,name:"source"}]}),this.inputShape.length<=2?f.webgl2.runProgram({program:this.copySliceOutputProgram,output:this.output,inputs:[{input:this.outputCopy,name:"outputCopy"},{input:this.sliceOutput,name:"sliceOutput"}],uniforms:[{value:0,type:"int",name:"t"},{value:e,type:"int",name:"timesteps"}]}):f.webgl2.runProgram({program:this.mapSliceOutputProgram,output:this.output,inputs:[{input:this.outputCopy,name:"outputCopy"},{input:this.sliceOutput,name:"sliceOutput"},{input:this.outputIndexMaps[0],name:"indexMap"}]});for(var i=1;i<e;i++)this.inputShape.length<=2?f.webgl2.runProgram({program:this.selectSliceProgram,output:this.slice,inputs:[{input:t,name:"x"}],uniforms:[{value:i,type:"int",name:"t"}]}):f.webgl2.runProgram({program:this.mapInputProgram,output:this.slice,inputs:[{input:t,name:"x"},{input:this.indexMaps[i],name:"indexMap"}],uniforms:[{value:t.glTextureShape[1],type:"int",name:"inputCols"}]}),this.wrappedLayer._callGPU(this.slice),this.sliceOutput=this.wrappedLayer.output,f.webgl2.runProgram({program:this.copyTextureProgram,output:this.outputCopy,inputs:[{input:this.output,name:"source"}]}),this.inputShape.length<=2?f.webgl2.runProgram({program:this.copySliceOutputProgram,output:this.output,inputs:[{input:this.outputCopy,name:"outputCopy"},{input:this.sliceOutput,name:"sliceOutput"}],uniforms:[{value:i,type:"int",name:"t"},{value:e,type:"int",name:"timesteps"}]}):f.webgl2.runProgram({program:this.mapSliceOutputProgram,output:this.output,inputs:[{input:this.outputCopy,name:"outputCopy"},{input:this.sliceOutput,name:"sliceOutput"},{input:this.outputIndexMaps[i],name:"indexMap"}]});0===this.outbound.length&&(this.output.transferFromGLTexture(),this.output.is2DReshaped?this.output.reshapeFrom2D():this.output.is2DSquareReshaped&&this.output.reshapeFrom2DSquare())}}]),e}(l.default);e.default=_},function(t,e,n){"use strict";var r=n(2),i=n(7),a=n(4),o=n(3),s=n(5);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=p(n(11)),l=p(n(8)),c=n(9),f=p(n(12)),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(289));function p(t){return t&&t.__esModule?t:{default:t}}var d="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D source;\nout vec4 outColor;\n\nvoid main(void) {\n  outColor = texture(source, vec2(outTex.x, outTex.y));\n}\n",m="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D forward;\nuniform sampler2D backward;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(forward, 0);\n  int out_x = int(float(size[0] * 2) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  if (out_x >= 0 && out_x < size[0]) {\n    outColor = vec4(texelFetch(forward, ivec2(out_x, out_y), 0).r);\n  } else {\n    outColor = vec4(texelFetch(backward, ivec2(out_x - size[0], size[1] - out_y - 1), 0).r);\n  }\n}\n",g="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D forward;\nuniform sampler2D backward;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(forward, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float forward_val = texelFetch(forward, ivec2(out_x, out_y), 0).r;\n  float backward_val = texelFetch(backward, ivec2(out_x, size[1] - out_y - 1), 0).r;\n\n  outColor = vec4(forward_val + backward_val);\n}\n",v="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D forward;\nuniform sampler2D backward;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(forward, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float forward_val = texelFetch(forward, ivec2(out_x, out_y), 0).r;\n  float backward_val = texelFetch(backward, ivec2(out_x, size[1] - out_y - 1), 0).r;\n\n  outColor = vec4(forward_val * backward_val);\n}\n",y="#version 300 es\nprecision highp float;\n\nin vec2 outTex;\nuniform sampler2D forward;\nuniform sampler2D backward;\nout vec4 outColor;\n\nvoid main() {\n  ivec2 size = textureSize(forward, 0);\n  int out_x = int(float(size[0]) * outTex.x);\n  int out_y = int(float(size[1]) * outTex.y);\n\n  float forward_val = texelFetch(forward, ivec2(out_x, out_y), 0).r;\n  float backward_val = texelFetch(backward, ivec2(out_x, size[1] - out_y - 1), 0).r;\n\n  outColor = vec4(0.5 * (forward_val + backward_val));\n}\n",b=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),(t=a(this,o(e).call(this,n))).layerClass="Bidirectional";var i=n.layer,s=n.merge_mode,u=void 0===s?"concat":s;i||t.throwError("wrapped layer is undefined."),["SimpleRNN","GRU","LSTM"].includes(i.class_name)||t.throwError("cannot wrap ".concat(i.class_name," layer.")),["concat","sum","mul","ave"].includes(u)||t.throwError("merge_mode ".concat(u," not supported."));var l=Object.assign({},i.config,{gpu:n.gpu}),f=Object.assign({},i.config,{gpu:n.gpu});return f.go_backwards=!f.go_backwards,t.forwardLayer=new h[i.class_name](l),t.backwardLayer=new h[i.class_name](f),t.forwardLayer.outbound=[null],t.backwardLayer.outbound=[null],t.mergeMode=u,t.returnSequences=i.config.return_sequences,t.gpu&&(t.copyTextureProgram=c.webgl2.compileProgram(d),"concat"===t.mergeMode?t.mergeProgram=c.webgl2.compileProgram(m):"sum"===t.mergeMode?t.mergeProgram=c.webgl2.compileProgram(g):"mul"===t.mergeMode?t.mergeProgram=c.webgl2.compileProgram(v):"ave"===t.mergeMode&&(t.mergeProgram=c.webgl2.compileProgram(y))),t}return s(e,t),i(e,[{key:"setWeights",value:function(t){this.forwardLayer.setWeights(t.slice(0,t.length/2)),this.backwardLayer.setWeights(t.slice(t.length/2))}},{key:"call",value:function(t){return this.gpu?this._callGPU(t):this._callCPU(t),this.output}},{key:"_callCPU",value:function(t){this.forwardLayer._callCPU(new l.default(t.tensor.data,t.tensor.shape)),this.backwardLayer._callCPU(new l.default(t.tensor.data,t.tensor.shape));var e=this.forwardLayer.output,n=this.backwardLayer.output;this.returnSequences&&(n.tensor=n.tensor.step(-1));var r=e.tensor.shape.slice();"concat"===this.mergeMode&&(r[r.length-1]+=n.tensor.shape[r.length-1]),this.output=new l.default([],r),"concat"===this.mergeMode?this.returnSequences?(f.default.assign(this.output.tensor.hi(r[0],e.tensor.shape[1]).lo(0,0),e.tensor),f.default.assign(this.output.tensor.hi(r[0],r[1]).lo(0,e.tensor.shape[1]),n.tensor)):(f.default.assign(this.output.tensor.hi(e.tensor.shape[0]).lo(0),e.tensor),f.default.assign(this.output.tensor.hi(r[0]).lo(e.tensor.shape[0]),n.tensor)):"sum"===this.mergeMode?(f.default.addeq(this.output.tensor,e.tensor),f.default.addeq(this.output.tensor,n.tensor)):"mul"===this.mergeMode?(f.default.assigns(this.output.tensor,1),f.default.muleq(this.output.tensor,e.tensor),f.default.muleq(this.output.tensor,n.tensor)):"ave"===this.mergeMode&&(f.default.addeq(this.output.tensor,e.tensor),f.default.addeq(this.output.tensor,n.tensor),f.default.divseq(this.output.tensor,2))}},{key:"_callGPU",value:function(t){t.glTexture||t.createGLTexture({type:"2d",format:"float"}),this.inputCopy||(this.inputCopy=new l.default([],t.glTextureShape),this.inputCopy.createGLTexture({type:"2d",format:"float"})),c.webgl2.runProgram({program:this.copyTextureProgram,output:this.inputCopy,inputs:[{input:t,name:"source"}]}),this.forwardLayer._callGPU(t),this.backwardLayer._callGPU(this.inputCopy);var e=this.forwardLayer.output,n=this.backwardLayer.output,r=e.glTextureShape.slice();"concat"===this.mergeMode&&(r[1]+=n.glTextureShape[1]),this.output||(this.output=new l.default([],r),this.output.createGLTexture({type:"2d",format:"float"}),this.returnSequences||(this.output.is1D=!0)),c.webgl2.runProgram({program:this.mergeProgram,output:this.output,inputs:[{input:e,name:"forward"},{input:n,name:"backward"}]}),0===this.outbound.length&&this.output.transferFromGLTexture()}}]),e}(u.default);e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"CAM",{enumerable:!0,get:function(){return i.default}});var r,i=(r=n(817))&&r.__esModule?r:{default:r}},function(t,e,n){"use strict";var r=n(47),i=n(2),a=n(7);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=h(n(8)),s=n(9),u=h(n(12)),l=n(108),c=h(n(92)),f=h(n(49));function h(t){return t&&t.__esModule?t:{default:t}}var p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,t),this.modelLayersMap=e.modelLayersMap,this.gpu=e.gpu,!this.modelLayersMap)throw new Error("[CAM] modelLayersMap is required")}return a(t,[{key:"initialize",value:function(){var t=this;if(this.modelLayersMap.forEach(function(e){"GlobalAveragePooling2D"===e.layerClass&&(t.enabled=!0,t.poolLayer=e)}),this.enabled&&!this.data){this.featureMaps=this.modelLayersMap.get(this.poolLayer.inbound[0]).output;var e=this.poolLayer;for(e.outbound.length||(this.weights=this.poolLayer.output);e.outbound.length;)(e=this.modelLayersMap.get(e.outbound[0])).weights.kernel?this.weights=e.weights.kernel:this.weights=this.poolLayer.output;if(this.featureMaps.is2DReshaped?this.inputShape=this.featureMaps.originalShape.slice(0,2):this.inputShape=this.featureMaps.tensor.shape.slice(0,2),1===this.weights.tensor.shape.length)this.shape=this.inputShape;else{var n=this.weights.tensor.shape[1];this.shape=r(this.inputShape).concat([n])}this.data=new Float32Array(this.shape.reduce(function(t,e){return t*e},1))}}},{key:"update",value:function(){if(this.enabled){this.featureMaps=this.modelLayersMap.get(this.poolLayer.inbound[0]).output,this.gpu?this._updateGPU():this._updateCPU();var t=u.default.inf(this.output.tensor),e=u.default.sup(this.output.tensor);u.default.divseq(u.default.subseq(this.output.tensor,t),e-t),this.data=this.output.tensor.data}}},{key:"_updateCPU",value:function(){if(this.featureMaps.is2DReshaped||this.featureMaps.reshapeTo2D(),1===this.weights.tensor.shape.length){this.output||(this.output=new o.default([],this.shape));var t=new o.default([],[this.shape[0]*this.shape[1]]);(0,l.gemv)(1,this.featureMaps.tensor,this.weights.tensor,1,t.tensor),this.output.replaceTensorData(t.tensor.data)}else this.output||(this.output=new o.default([],this.shape)),this.output.reshapeTo2D(),(0,c.default)(this.output.tensor,this.featureMaps.tensor,this.weights.tensor,1,1),this.output.reshapeFrom2D();u.default.maxseq(this.output.tensor,0),this.featureMaps.is2DReshaped&&this.featureMaps.reshapeFrom2D()}},{key:"_updateGPU",value:function(){this.output||(this.output=new o.default([],this.shape));var t=this.weights.is1D;!this.output.glTexture&&t?this.output.createGLTexture({type:"2d",format:"float"}):(this.output.reshapeTo2D(),this.output.createGLTexture({type:"2d",format:"float"}));var e=t?this.weights.glTextureShape[1]:this.weights.glTextureShape[0];if(!this.program){var n=(0,f.default)("cam",this.output.glTextureShape,e,t);this.program=s.webgl2.compileProgram(n)}s.webgl2.runProgram({program:this.program,output:this.output,inputs:[{input:this.featureMaps,name:"featureMaps"},{input:this.weights,name:"weights"}]}),this.output.transferFromGLTexture(),this.output.is2DReshaped&&this.output.reshapeFrom2D()}}]),t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Model=e.Weights=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(819));var i=r.Reader,a=r.Writer,o=r.util,s=r.roots.default||(r.roots.default={});e.default=s;var u=s.Weights=function(){function t(t){if(this.shape=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.layerName="",t.prototype.weightName="",t.prototype.shape=o.emptyArray,t.prototype.type="",t.prototype.data=o.newBuffer([]),t.prototype.quantizeMin=0,t.prototype.quantizeMax=0,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=a.create()),null!=t.layerName&&t.hasOwnProperty("layerName")&&e.uint32(10).string(t.layerName),null!=t.weightName&&t.hasOwnProperty("weightName")&&e.uint32(18).string(t.weightName),null!=t.shape&&t.shape.length){e.uint32(26).fork();for(var n=0;n<t.shape.length;++n)e.uint32(t.shape[n]);e.ldelim()}return null!=t.type&&t.hasOwnProperty("type")&&e.uint32(34).string(t.type),null!=t.data&&t.hasOwnProperty("data")&&e.uint32(42).bytes(t.data),null!=t.quantizeMin&&t.hasOwnProperty("quantizeMin")&&e.uint32(53).float(t.quantizeMin),null!=t.quantizeMax&&t.hasOwnProperty("quantizeMax")&&e.uint32(61).float(t.quantizeMax),e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.Weights;t.pos<n;){var a=t.uint32();switch(a>>>3){case 1:r.layerName=t.string();break;case 2:r.weightName=t.string();break;case 3:if(r.shape&&r.shape.length||(r.shape=[]),2===(7&a))for(var o=t.uint32()+t.pos;t.pos<o;)r.shape.push(t.uint32());else r.shape.push(t.uint32());break;case 4:r.type=t.string();break;case 5:r.data=t.bytes();break;case 6:r.quantizeMin=t.float();break;case 7:r.quantizeMax=t.float();break;default:t.skipType(7&a)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!==typeof t||null===t)return"object expected";if(null!=t.layerName&&t.hasOwnProperty("layerName")&&!o.isString(t.layerName))return"layerName: string expected";if(null!=t.weightName&&t.hasOwnProperty("weightName")&&!o.isString(t.weightName))return"weightName: string expected";if(null!=t.shape&&t.hasOwnProperty("shape")){if(!Array.isArray(t.shape))return"shape: array expected";for(var e=0;e<t.shape.length;++e)if(!o.isInteger(t.shape[e]))return"shape: integer[] expected"}return null!=t.type&&t.hasOwnProperty("type")&&!o.isString(t.type)?"type: string expected":null!=t.data&&t.hasOwnProperty("data")&&!(t.data&&"number"===typeof t.data.length||o.isString(t.data))?"data: buffer expected":null!=t.quantizeMin&&t.hasOwnProperty("quantizeMin")&&"number"!==typeof t.quantizeMin?"quantizeMin: number expected":null!=t.quantizeMax&&t.hasOwnProperty("quantizeMax")&&"number"!==typeof t.quantizeMax?"quantizeMax: number expected":null},t.fromObject=function(t){if(t instanceof s.Weights)return t;var e=new s.Weights;if(null!=t.layerName&&(e.layerName=String(t.layerName)),null!=t.weightName&&(e.weightName=String(t.weightName)),t.shape){if(!Array.isArray(t.shape))throw TypeError(".Weights.shape: array expected");e.shape=[];for(var n=0;n<t.shape.length;++n)e.shape[n]=t.shape[n]>>>0}return null!=t.type&&(e.type=String(t.type)),null!=t.data&&("string"===typeof t.data?o.base64.decode(t.data,e.data=o.newBuffer(o.base64.length(t.data)),0):t.data.length&&(e.data=t.data)),null!=t.quantizeMin&&(e.quantizeMin=Number(t.quantizeMin)),null!=t.quantizeMax&&(e.quantizeMax=Number(t.quantizeMax)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.shape=[]),e.defaults&&(n.layerName="",n.weightName="",n.type="",n.data=e.bytes===String?"":[],n.quantizeMin=0,n.quantizeMax=0),null!=t.layerName&&t.hasOwnProperty("layerName")&&(n.layerName=t.layerName),null!=t.weightName&&t.hasOwnProperty("weightName")&&(n.weightName=t.weightName),t.shape&&t.shape.length){n.shape=[];for(var r=0;r<t.shape.length;++r)n.shape[r]=t.shape[r]}return null!=t.type&&t.hasOwnProperty("type")&&(n.type=t.type),null!=t.data&&t.hasOwnProperty("data")&&(n.data=e.bytes===String?o.base64.encode(t.data,0,t.data.length):e.bytes===Array?Array.prototype.slice.call(t.data):t.data),null!=t.quantizeMin&&t.hasOwnProperty("quantizeMin")&&(n.quantizeMin=e.json&&!isFinite(t.quantizeMin)?String(t.quantizeMin):t.quantizeMin),null!=t.quantizeMax&&t.hasOwnProperty("quantizeMax")&&(n.quantizeMax=e.json&&!isFinite(t.quantizeMax)?String(t.quantizeMax):t.quantizeMax),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}();e.Weights=u;var l=s.Model=function(){function t(t){if(this.modelWeights=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.id="",t.prototype.name="",t.prototype.kerasVersion="",t.prototype.backend="",t.prototype.modelConfig="",t.prototype.modelWeights=o.emptyArray,t.create=function(e){return new t(e)},t.encode=function(t,e){if(e||(e=a.create()),null!=t.id&&t.hasOwnProperty("id")&&e.uint32(10).string(t.id),null!=t.name&&t.hasOwnProperty("name")&&e.uint32(18).string(t.name),null!=t.kerasVersion&&t.hasOwnProperty("kerasVersion")&&e.uint32(26).string(t.kerasVersion),null!=t.backend&&t.hasOwnProperty("backend")&&e.uint32(34).string(t.backend),null!=t.modelConfig&&t.hasOwnProperty("modelConfig")&&e.uint32(42).string(t.modelConfig),null!=t.modelWeights&&t.modelWeights.length)for(var n=0;n<t.modelWeights.length;++n)s.Weights.encode(t.modelWeights[n],e.uint32(50).fork()).ldelim();return e},t.encodeDelimited=function(t,e){return this.encode(t,e).ldelim()},t.decode=function(t,e){t instanceof i||(t=i.create(t));for(var n=void 0===e?t.len:t.pos+e,r=new s.Model;t.pos<n;){var a=t.uint32();switch(a>>>3){case 1:r.id=t.string();break;case 2:r.name=t.string();break;case 3:r.kerasVersion=t.string();break;case 4:r.backend=t.string();break;case 5:r.modelConfig=t.string();break;case 6:r.modelWeights&&r.modelWeights.length||(r.modelWeights=[]),r.modelWeights.push(s.Weights.decode(t,t.uint32()));break;default:t.skipType(7&a)}}return r},t.decodeDelimited=function(t){return t instanceof i||(t=new i(t)),this.decode(t,t.uint32())},t.verify=function(t){if("object"!==typeof t||null===t)return"object expected";if(null!=t.id&&t.hasOwnProperty("id")&&!o.isString(t.id))return"id: string expected";if(null!=t.name&&t.hasOwnProperty("name")&&!o.isString(t.name))return"name: string expected";if(null!=t.kerasVersion&&t.hasOwnProperty("kerasVersion")&&!o.isString(t.kerasVersion))return"kerasVersion: string expected";if(null!=t.backend&&t.hasOwnProperty("backend")&&!o.isString(t.backend))return"backend: string expected";if(null!=t.modelConfig&&t.hasOwnProperty("modelConfig")&&!o.isString(t.modelConfig))return"modelConfig: string expected";if(null!=t.modelWeights&&t.hasOwnProperty("modelWeights")){if(!Array.isArray(t.modelWeights))return"modelWeights: array expected";for(var e=0;e<t.modelWeights.length;++e){var n=s.Weights.verify(t.modelWeights[e]);if(n)return"modelWeights."+n}}return null},t.fromObject=function(t){if(t instanceof s.Model)return t;var e=new s.Model;if(null!=t.id&&(e.id=String(t.id)),null!=t.name&&(e.name=String(t.name)),null!=t.kerasVersion&&(e.kerasVersion=String(t.kerasVersion)),null!=t.backend&&(e.backend=String(t.backend)),null!=t.modelConfig&&(e.modelConfig=String(t.modelConfig)),t.modelWeights){if(!Array.isArray(t.modelWeights))throw TypeError(".Model.modelWeights: array expected");e.modelWeights=[];for(var n=0;n<t.modelWeights.length;++n){if("object"!==typeof t.modelWeights[n])throw TypeError(".Model.modelWeights: object expected");e.modelWeights[n]=s.Weights.fromObject(t.modelWeights[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.modelWeights=[]),e.defaults&&(n.id="",n.name="",n.kerasVersion="",n.backend="",n.modelConfig=""),null!=t.id&&t.hasOwnProperty("id")&&(n.id=t.id),null!=t.name&&t.hasOwnProperty("name")&&(n.name=t.name),null!=t.kerasVersion&&t.hasOwnProperty("kerasVersion")&&(n.kerasVersion=t.kerasVersion),null!=t.backend&&t.hasOwnProperty("backend")&&(n.backend=t.backend),null!=t.modelConfig&&t.hasOwnProperty("modelConfig")&&(n.modelConfig=t.modelConfig),t.modelWeights&&t.modelWeights.length){n.modelWeights=[];for(var r=0;r<t.modelWeights.length;++r)n.modelWeights[r]=s.Weights.toObject(t.modelWeights[r],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},t}();e.Model=l},function(t,e,n){"use strict";t.exports=n(820)},function(t,e,n){"use strict";var r=e;function i(){r.Reader._configure(r.BufferReader),r.util._configure()}r.build="minimal",r.Writer=n(290),r.BufferWriter=n(829),r.Reader=n(291),r.BufferReader=n(830),r.util=n(82),r.rpc=n(831),r.roots=n(833),r.configure=i,r.Writer._configure(r.BufferWriter),i()},function(t,e,n){"use strict";t.exports=function(t,e){var n=new Array(arguments.length-1),r=0,i=2,a=!0;for(;i<arguments.length;)n[r++]=arguments[i++];return new Promise(function(i,o){n[r]=function(t){if(a)if(a=!1,t)o(t);else{for(var e=new Array(arguments.length-1),n=0;n<e.length;)e[n++]=arguments[n];i.apply(null,e)}};try{t.apply(e||null,n)}catch(s){a&&(a=!1,o(s))}})}},function(t,e,n){"use strict";var r=e;r.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&"="===t.charAt(e);)++n;return Math.ceil(3*t.length)/4-n};for(var i=new Array(64),a=new Array(123),o=0;o<64;)a[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(t,e,n){for(var r,a=null,o=[],s=0,u=0;e<n;){var l=t[e++];switch(u){case 0:o[s++]=i[l>>2],r=(3&l)<<4,u=1;break;case 1:o[s++]=i[r|l>>4],r=(15&l)<<2,u=2;break;case 2:o[s++]=i[r|l>>6],o[s++]=i[63&l],u=0}s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0)}return u&&(o[s++]=i[r],o[s++]=61,1===u&&(o[s++]=61)),a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))};r.decode=function(t,e,n){for(var r,i=n,o=0,s=0;s<t.length;){var u=t.charCodeAt(s++);if(61===u&&o>1)break;if(void 0===(u=a[u]))throw Error("invalid encoding");switch(o){case 0:r=u,o=1;break;case 1:e[n++]=r<<2|(48&u)>>4,r=u,o=2;break;case 2:e[n++]=(15&r)<<4|(60&u)>>2,r=u,o=3;break;case 3:e[n++]=(3&r)<<6|u,o=0}}if(1===o)throw Error("invalid encoding");return n-i},r.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},function(t,e,n){"use strict";function r(){this._listeners={}}t.exports=r,r.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this},r.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this},r.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}},function(t,e,n){"use strict";function r(t){return"undefined"!==typeof Float32Array?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),r=128===n[3];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function a(t,r,i){e[0]=t,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function o(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],e[0]}function s(t,r){return n[3]=t[r],n[2]=t[r+1],n[1]=t[r+2],n[0]=t[r+3],e[0]}t.writeFloatLE=r?i:a,t.writeFloatBE=r?a:i,t.readFloatLE=r?o:s,t.readFloatBE=r?s:o}():function(){function e(t,e,n,r){var i=e<0?1:0;if(i&&(e=-e),0===e)t(1/e>0?0:2147483648,n,r);else if(isNaN(e))t(2143289344,n,r);else if(e>3.4028234663852886e38)t((i<<31|2139095040)>>>0,n,r);else if(e<1.1754943508222875e-38)t((i<<31|Math.round(e/1.401298464324817e-45))>>>0,n,r);else{var a=Math.floor(Math.log(e)/Math.LN2);t((i<<31|a+127<<23|8388607&Math.round(e*Math.pow(2,-a)*8388608))>>>0,n,r)}}function n(t,e,n){var r=t(e,n),i=2*(r>>31)+1,a=r>>>23&255,o=8388607&r;return 255===a?o?NaN:i*(1/0):0===a?1.401298464324817e-45*i*o:i*Math.pow(2,a-150)*(o+8388608)}t.writeFloatLE=e.bind(null,i),t.writeFloatBE=e.bind(null,a),t.readFloatLE=n.bind(null,o),t.readFloatBE=n.bind(null,s)}(),"undefined"!==typeof Float64Array?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),r=128===n[7];function i(t,r,i){e[0]=t,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function a(t,r,i){e[0]=t,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function o(t,r){return n[0]=t[r],n[1]=t[r+1],n[2]=t[r+2],n[3]=t[r+3],n[4]=t[r+4],n[5]=t[r+5],n[6]=t[r+6],n[7]=t[r+7],e[0]}function s(t,r){return n[7]=t[r],n[6]=t[r+1],n[5]=t[r+2],n[4]=t[r+3],n[3]=t[r+4],n[2]=t[r+5],n[1]=t[r+6],n[0]=t[r+7],e[0]}t.writeDoubleLE=r?i:a,t.writeDoubleBE=r?a:i,t.readDoubleLE=r?o:s,t.readDoubleBE=r?s:o}():function(){function e(t,e,n,r,i,a){var o=r<0?1:0;if(o&&(r=-r),0===r)t(0,i,a+e),t(1/r>0?0:2147483648,i,a+n);else if(isNaN(r))t(0,i,a+e),t(2146959360,i,a+n);else if(r>1.7976931348623157e308)t(0,i,a+e),t((o<<31|2146435072)>>>0,i,a+n);else{var s;if(r<2.2250738585072014e-308)t((s=r/5e-324)>>>0,i,a+e),t((o<<31|s/4294967296)>>>0,i,a+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),t(4503599627370496*(s=r*Math.pow(2,-u))>>>0,i,a+e),t((o<<31|u+1023<<20|1048576*s&1048575)>>>0,i,a+n)}}}function n(t,e,n,r,i){var a=t(r,i+e),o=t(r,i+n),s=2*(o>>31)+1,u=o>>>20&2047,l=4294967296*(1048575&o)+a;return 2047===u?l?NaN:s*(1/0):0===u?5e-324*s*l:s*Math.pow(2,u-1075)*(l+4503599627370496)}t.writeDoubleLE=e.bind(null,i,0,4),t.writeDoubleBE=e.bind(null,a,4,0),t.readDoubleLE=n.bind(null,o,0,4),t.readDoubleBE=n.bind(null,s,4,0)}(),t}function i(t,e,n){e[n]=255&t,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function a(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=255&t}function o(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function s(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=r(r)},function(module,exports,__webpack_require__){"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},function(t,e,n){"use strict";var r=e;r.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)(n=t.charCodeAt(r))<128?e+=1:n<2048?e+=2:55296===(64512&n)&&56320===(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},r.read=function(t,e,n){if(n-e<1)return"";for(var r,i=null,a=[],o=0;e<n;)(r=t[e++])<128?a[o++]=r:r>191&&r<224?a[o++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,a[o++]=55296+(r>>10),a[o++]=56320+(1023&r)):a[o++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),o=0);return i?(o&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))},r.write=function(t,e,n){for(var r,i,a=n,o=0;o<t.length;++o)(r=t.charCodeAt(o))<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&56320===(64512&(i=t.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&i),++o,e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128);return n-a}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=n||8192,i=r>>>1,a=null,o=r;return function(n){if(n<1||n>i)return t(n);o+n>r&&(a=t(r),o=0);var s=e.call(a,o,o+=n);return 7&o&&(o=1+(7|o)),s}}},function(t,e,n){"use strict";t.exports=i;var r=n(82);function i(t,e){this.lo=t>>>0,this.hi=e>>>0}var a=i.zero=new i(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var o=i.zeroHash="\0\0\0\0\0\0\0\0";i.fromNumber=function(t){if(0===t)return a;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new i(n,r)},i.from=function(t){if("number"===typeof t)return i.fromNumber(t);if(r.isString(t)){if(!r.Long)return i.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new i(t.low>>>0,t.high>>>0):a},i.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+4294967296*n)}return this.lo+4294967296*this.hi},i.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var s=String.prototype.charCodeAt;i.fromHash=function(t){return t===o?a:new i((s.call(t,0)|s.call(t,1)<<8|s.call(t,2)<<16|s.call(t,3)<<24)>>>0,(s.call(t,4)|s.call(t,5)<<8|s.call(t,6)<<16|s.call(t,7)<<24)>>>0)},i.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},i.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},i.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},i.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}},function(t,e,n){"use strict";t.exports=o;var r=n(290);(o.prototype=Object.create(r.prototype)).constructor=o;var i=n(82),a=i.Buffer;function o(){r.call(this)}o.alloc=function(t){return(o.alloc=i._Buffer_allocUnsafe)(t)};var s=a&&a.prototype instanceof Uint8Array&&"set"===a.prototype.set.name?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]};function u(t,e,n){t.length<40?i.utf8.write(t,e,n):e.utf8Write(t,n)}o.prototype.bytes=function(t){i.isString(t)&&(t=i._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(s,e,t),this},o.prototype.string=function(t){var e=a.byteLength(t);return this.uint32(e),e&&this._push(u,e,t),this}},function(t,e,n){"use strict";t.exports=a;var r=n(291);(a.prototype=Object.create(r.prototype)).constructor=a;var i=n(82);function a(t){r.call(this,t)}i.Buffer&&(a.prototype._slice=i.Buffer.prototype.slice),a.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len))}},function(t,e,n){"use strict";e.Service=n(832)},function(t,e,n){"use strict";t.exports=i;var r=n(82);function i(t,e,n){if("function"!==typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(n)}(i.prototype=Object.create(r.EventEmitter.prototype)).constructor=i,i.prototype.rpcCall=function t(e,n,i,a,o){if(!a)throw TypeError("request must be specified");var s=this;if(!o)return r.asPromise(t,s,e,n,i,a);if(s.rpcImpl)try{return s.rpcImpl(e,n[s.requestDelimited?"encodeDelimited":"encode"](a).finish(),function(t,n){if(t)return s.emit("error",t,e),o(t);if(null!==n){if(!(n instanceof i))try{n=i[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(t){return s.emit("error",t,e),o(t)}return s.emit("data",n,e),o(null,n)}s.end(!0)})}catch(u){return s.emit("error",u,e),void setTimeout(function(){o(u)},0)}else setTimeout(function(){o(Error("already ended"))},0)},i.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},function(t,e,n){"use strict";t.exports={}},function(t,e){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.approxEquals=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-4,o=(0,i.default)((0,a.default)(t)),s=e;if(o.length!==s.length)return!1;for(var u=0;u<o.length;u++){if(!(0,r.default)(o[u]))return!1;if(o[u]<s[u]-n||o[u]>s[u]+n)return!1}return!0};var r=o(n(836)),i=o(n(837)),a=o(n(838));function o(t){return t&&t.__esModule?t:{default:t}}},function(t,e,n){var r=n(56).isFinite;t.exports=function(t){return"number"==typeof t&&r(t)}},function(t,e,n){var r=n(267),i=1/0;t.exports=function(t){return null!=t&&t.length?r(t,i):[]}},function(t,e,n){"use strict";var r=n(282),i=n(28)({args:["array","scalar","index"],body:function(t,e,n){var r,i=e;for(r=0;r<n.length-1;++r)i=i[n[r]];i[n[n.length-1]]=t}});t.exports=function(t){var e=r(t.shape);return i(t,e),e}},,,function(t,e,n){"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=n(93),e.createHash=e.Hash=n(109),e.createHmac=e.Hmac=n(299);var r=n(856),i=Object.keys(r),a=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(i);e.getHashes=function(){return a};var o=n(302);e.pbkdf2=o.pbkdf2,e.pbkdf2Sync=o.pbkdf2Sync;var s=n(858);e.Cipher=s.Cipher,e.createCipher=s.createCipher,e.Cipheriv=s.Cipheriv,e.createCipheriv=s.createCipheriv,e.Decipher=s.Decipher,e.createDecipher=s.createDecipher,e.Decipheriv=s.Decipheriv,e.createDecipheriv=s.createDecipheriv,e.getCiphers=s.getCiphers,e.listCiphers=s.listCiphers;var u=n(875);e.DiffieHellmanGroup=u.DiffieHellmanGroup,e.createDiffieHellmanGroup=u.createDiffieHellmanGroup,e.getDiffieHellman=u.getDiffieHellman,e.createDiffieHellman=u.createDiffieHellman,e.DiffieHellman=u.DiffieHellman;var l=n(880);e.createSign=l.createSign,e.Sign=l.Sign,e.createVerify=l.createVerify,e.Verify=l.Verify,e.createECDH=n(918);var c=n(919);e.publicEncrypt=c.publicEncrypt,e.privateEncrypt=c.privateEncrypt,e.publicDecrypt=c.publicDecrypt,e.privateDecrypt=c.privateDecrypt;var f=n(922);e.randomFill=f.randomFill,e.randomFillSync=f.randomFillSync,e.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join("\n"))},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},,function(t,e,n){"use strict";var r=n(15).Buffer,i=n(844);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,a=r.allocUnsafe(t>>>0),o=this.head,s=0;o;)e=o.data,n=a,i=s,e.copy(n,i),s+=o.data.length,o=o.next;return a},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},,function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(26))},function(t,e,n){"use strict";t.exports=a;var r=n(296),i=n(110);function a(t){if(!(this instanceof a))return new a(t);r.call(this,t)}i.inherits=n(13),i.inherits(a,r),a.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(202)},function(t,e,n){t.exports=n(83)},function(t,e,n){t.exports=n(201).Transform},function(t,e,n){t.exports=n(201).PassThrough},function(t,e,n){var r=n(13),i=n(94),a=n(15).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<30|t>>>2}function c(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,u=0|this._e,f=0;f<16;++f)n[f]=t.readInt32BE(4*f);for(;f<80;++f)n[f]=n[f-3]^n[f-8]^n[f-14]^n[f-16];for(var h=0;h<80;++h){var p=~~(h/20),d=0|((e=r)<<5|e>>>27)+c(p,i,a,s)+u+n[h]+o[p];u=s,s=a,a=l(i),i=r,r=d}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=a.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,n){var r=n(13),i=n(94),a=n(15).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],s=new Array(80);function u(){this.init(),this._w=s,i.call(this,64,56)}function l(t){return t<<5|t>>>27}function c(t){return t<<30|t>>>2}function f(t,e,n,r){return 0===t?e&n|~e&r:2===t?e&n|e&r|n&r:e^n^r}r(u,i),u.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},u.prototype._update=function(t){for(var e,n=this._w,r=0|this._a,i=0|this._b,a=0|this._c,s=0|this._d,u=0|this._e,h=0;h<16;++h)n[h]=t.readInt32BE(4*h);for(;h<80;++h)n[h]=(e=n[h-3]^n[h-8]^n[h-14]^n[h-16])<<1|e>>>31;for(var p=0;p<80;++p){var d=~~(p/20),m=l(r)+f(d,i,a,s)+u+n[p]+o[d]|0;u=s,s=a,a=c(i),i=r,r=m}this._a=r+this._a|0,this._b=i+this._b|0,this._c=a+this._c|0,this._d=s+this._d|0,this._e=u+this._e|0},u.prototype._hash=function(){var t=a.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=u},function(t,e,n){var r=n(13),i=n(297),a=n(94),o=n(15).Buffer,s=new Array(64);function u(){this.init(),this._w=s,a.call(this,64,56)}r(u,i),u.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},u.prototype._hash=function(){var t=o.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=u},function(t,e,n){var r=n(13),i=n(298),a=n(94),o=n(15).Buffer,s=new Array(160);function u(){this.init(),this._w=s,a.call(this,128,112)}r(u,i),u.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},u.prototype._hash=function(){var t=o.allocUnsafe(48);function e(e,n,r){t.writeInt32BE(e,r),t.writeInt32BE(n,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=u},function(t,e,n){"use strict";var r=n(13),i=n(15).Buffer,a=n(67),o=i.alloc(128),s=64;function u(t,e){a.call(this,"digest"),"string"===typeof e&&(e=i.from(e)),this._alg=t,this._key=e,e.length>s?e=t(e):e.length<s&&(e=i.concat([e,o],s));for(var n=this._ipad=i.allocUnsafe(s),r=this._opad=i.allocUnsafe(s),u=0;u<s;u++)n[u]=54^e[u],r[u]=92^e[u];this._hash=[n]}r(u,a),u.prototype._update=function(t){this._hash.push(t)},u.prototype._final=function(){var t=this._alg(i.concat(this._hash));return this._alg(i.concat([this._opad,t]))},t.exports=u},function(t,e,n){t.exports=n(301)},function(t,e,n){(function(e,r){var i,a=n(303),o=n(304),s=n(305),u=n(15).Buffer,l=e.crypto&&e.crypto.subtle,c={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},f=[];function h(t,e,n,r,i){return l.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(t){return l.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:i}},t,r<<3)}).then(function(t){return u.from(t)})}t.exports=function(t,n,p,d,m,g){"function"===typeof m&&(g=m,m=void 0);var v=c[(m=m||"sha1").toLowerCase()];if(!v||"function"!==typeof e.Promise)return r.nextTick(function(){var e;try{e=s(t,n,p,d,m)}catch(r){return g(r)}g(null,e)});if(a(t,n,p,d),"function"!==typeof g)throw new Error("No callback provided to pbkdf2");u.isBuffer(t)||(t=u.from(t,o)),u.isBuffer(n)||(n=u.from(n,o)),function(t,e){t.then(function(t){r.nextTick(function(){e(null,t)})},function(t){r.nextTick(function(){e(t)})})}(function(t){if(e.process&&!e.process.browser)return Promise.resolve(!1);if(!l||!l.importKey||!l.deriveBits)return Promise.resolve(!1);if(void 0!==f[t])return f[t];var n=h(i=i||u.alloc(8),i,10,128,t).then(function(){return!0}).catch(function(){return!1});return f[t]=n,n}(v).then(function(e){return e?h(t,n,p,d,v):s(t,n,p,d,m)}),g)}}).call(this,n(26),n(39))},function(t,e,n){var r=n(859),i=n(207),a=n(208),o=n(874),s=n(149);function u(t,e,n){if(t=t.toLowerCase(),a[t])return i.createCipheriv(t,e,n);if(o[t])return new r({key:e,iv:n,mode:t});throw new TypeError("invalid suite type")}function l(t,e,n){if(t=t.toLowerCase(),a[t])return i.createDecipheriv(t,e,n);if(o[t])return new r({key:e,iv:n,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var n,r;if(t=t.toLowerCase(),a[t])n=a[t].key,r=a[t].iv;else{if(!o[t])throw new TypeError("invalid suite type");n=8*o[t].key,r=o[t].iv}var i=s(e,!1,n,r);return u(t,i.key,i.iv)},e.createCipheriv=e.Cipheriv=u,e.createDecipher=e.Decipher=function(t,e){var n,r;if(t=t.toLowerCase(),a[t])n=a[t].key,r=a[t].iv;else{if(!o[t])throw new TypeError("invalid suite type");n=8*o[t].key,r=o[t].iv}var i=s(e,!1,n,r);return l(t,i.key,i.iv)},e.createDecipheriv=e.Decipheriv=l,e.listCiphers=e.getCiphers=function(){return Object.keys(o).concat(i.getCiphers())}},function(t,e,n){var r=n(67),i=n(206),a=n(13),o=n(15).Buffer,s={"des-ede3-cbc":i.CBC.instantiate(i.EDE),"des-ede3":i.EDE,"des-ede-cbc":i.CBC.instantiate(i.EDE),"des-ede":i.EDE,"des-cbc":i.CBC.instantiate(i.DES),"des-ecb":i.DES};function u(t){r.call(this);var e,n=t.mode.toLowerCase(),i=s[n];e=t.decrypt?"decrypt":"encrypt";var a=t.key;o.isBuffer(a)||(a=o.from(a)),"des-ede"!==n&&"des-ede-cbc"!==n||(a=o.concat([a,a.slice(0,8)]));var u=t.iv;o.isBuffer(u)||(u=o.from(u)),this._des=i.create({key:a,iv:u,type:e})}s.des=s["des-cbc"],s.des3=s["des-ede3-cbc"],t.exports=u,a(u,r),u.prototype._update=function(t){return o.from(this._des.update(t))},u.prototype._final=function(){return o.from(this._des.final())}},function(t,e,n){"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,n){t[0+n]=e>>>24,t[1+n]=e>>>16&255,t[2+n]=e>>>8&255,t[3+n]=255&e},e.ip=function(t,e,n,r){for(var i=0,a=0,o=6;o>=0;o-=2){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>>s+o&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>>s+o&1}for(o=6;o>=0;o-=2){for(s=1;s<=25;s+=8)a<<=1,a|=e>>>s+o&1;for(s=1;s<=25;s+=8)a<<=1,a|=t>>>s+o&1}n[r+0]=i>>>0,n[r+1]=a>>>0},e.rip=function(t,e,n,r){for(var i=0,a=0,o=0;o<4;o++)for(var s=24;s>=0;s-=8)i<<=1,i|=e>>>s+o&1,i<<=1,i|=t>>>s+o&1;for(o=4;o<8;o++)for(s=24;s>=0;s-=8)a<<=1,a|=e>>>s+o&1,a<<=1,a|=t>>>s+o&1;n[r+0]=i>>>0,n[r+1]=a>>>0},e.pc1=function(t,e,n,r){for(var i=0,a=0,o=7;o>=5;o--){for(var s=0;s<=24;s+=8)i<<=1,i|=e>>s+o&1;for(s=0;s<=24;s+=8)i<<=1,i|=t>>s+o&1}for(s=0;s<=24;s+=8)i<<=1,i|=e>>s+o&1;for(o=1;o<=3;o++){for(s=0;s<=24;s+=8)a<<=1,a|=e>>s+o&1;for(s=0;s<=24;s+=8)a<<=1,a|=t>>s+o&1}for(s=0;s<=24;s+=8)a<<=1,a|=t>>s+o&1;n[r+0]=i>>>0,n[r+1]=a>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var r=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,n,i){for(var a=0,o=0,s=r.length>>>1,u=0;u<s;u++)a<<=1,a|=t>>>r[u]&1;for(u=s;u<r.length;u++)o<<=1,o|=e>>>r[u]&1;n[i+0]=a>>>0,n[i+1]=o>>>0},e.expand=function(t,e,n){var r=0,i=0;r=(1&t)<<5|t>>>27;for(var a=23;a>=15;a-=4)r<<=6,r|=t>>>a&63;for(a=11;a>=3;a-=4)i|=t>>>a&63,i<<=6;i|=(31&t)<<1|t>>>31,e[n+0]=r>>>0,e[n+1]=i>>>0};var i=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var n=0,r=0;r<4;r++){n<<=4,n|=i[64*r+(t>>>18-6*r&63)]}for(r=0;r<4;r++){n<<=4,n|=i[256+64*r+(e>>>18-6*r&63)]}return n>>>0};var a=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,n=0;n<a.length;n++)e<<=1,e|=t>>>a[n]&1;return e>>>0},e.padSplit=function(t,e,n){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var i=[],a=0;a<e;a+=n)i.push(r.slice(a,a+n));return i.join(" ")}},function(t,e,n){"use strict";var r=n(41);function i(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}t.exports=i,i.prototype._init=function(){},i.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},i.prototype._buffer=function(t,e){for(var n=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<n;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=n,n},i.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},i.prototype._updateEncrypt=function(t){var e=0,n=0,r=(this.bufferOff+t.length)/this.blockSize|0,i=new Array(r*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(n+=this._flushBuffer(i,n)));for(var a=t.length-(t.length-e)%this.blockSize;e<a;e+=this.blockSize)this._update(t,e,i,n),n+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return i},i.prototype._updateDecrypt=function(t){for(var e=0,n=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,i=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),n+=this._flushBuffer(i,n);return e+=this._buffer(t,e),i},i.prototype.final=function(t){var e,n;return t&&(e=this.update(t)),n="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(n):n},i.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},i.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},i.prototype._unpad=function(t){return t},i.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},function(t,e,n){"use strict";var r=n(41),i=n(13),a=n(206),o=a.utils,s=a.Cipher;function u(){this.tmp=new Array(2),this.keys=null}function l(t){s.call(this,t);var e=new u;this._desState=e,this.deriveKeys(e,t.key)}i(l,s),t.exports=l,l.create=function(t){return new l(t)};var c=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];l.prototype.deriveKeys=function(t,e){t.keys=new Array(32),r.equal(e.length,this.blockSize,"Invalid key length");var n=o.readUInt32BE(e,0),i=o.readUInt32BE(e,4);o.pc1(n,i,t.tmp,0),n=t.tmp[0],i=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var s=c[a>>>1];n=o.r28shl(n,s),i=o.r28shl(i,s),o.pc2(n,i,t.keys,a)}},l.prototype._update=function(t,e,n,r){var i=this._desState,a=o.readUInt32BE(t,e),s=o.readUInt32BE(t,e+4);o.ip(a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],"encrypt"===this.type?this._encrypt(i,a,s,i.tmp,0):this._decrypt(i,a,s,i.tmp,0),a=i.tmp[0],s=i.tmp[1],o.writeUInt32BE(n,a,r),o.writeUInt32BE(n,s,r+4)},l.prototype._pad=function(t,e){for(var n=t.length-e,r=e;r<t.length;r++)t[r]=n;return!0},l.prototype._unpad=function(t){for(var e=t[t.length-1],n=t.length-e;n<t.length;n++)r.equal(t[n],e);return t.slice(0,t.length-e)},l.prototype._encrypt=function(t,e,n,r,i){for(var a=e,s=n,u=0;u<t.keys.length;u+=2){var l=t.keys[u],c=t.keys[u+1];o.expand(s,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var f=o.substitute(l,c),h=s;s=(a^o.permute(f))>>>0,a=h}o.rip(s,a,r,i)},l.prototype._decrypt=function(t,e,n,r,i){for(var a=n,s=e,u=t.keys.length-2;u>=0;u-=2){var l=t.keys[u],c=t.keys[u+1];o.expand(a,t.tmp,0),l^=t.tmp[0],c^=t.tmp[1];var f=o.substitute(l,c),h=a;a=(s^o.permute(f))>>>0,s=h}o.rip(a,s,r,i)}},function(t,e,n){"use strict";var r=n(41),i=n(13),a={};function o(t){r.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}i(e,t);for(var n=Object.keys(a),r=0;r<n.length;r++){var o=n[r];e.prototype[o]=a[o]}return e.create=function(t){return new e(t)},e},a._cbcInit=function(){var t=new o(this.options.iv);this._cbcState=t},a._update=function(t,e,n,r){var i=this._cbcState,a=this.constructor.super_.prototype,o=i.iv;if("encrypt"===this.type){for(var s=0;s<this.blockSize;s++)o[s]^=t[e+s];a._update.call(this,o,0,n,r);for(s=0;s<this.blockSize;s++)o[s]=n[r+s]}else{a._update.call(this,t,e,n,r);for(s=0;s<this.blockSize;s++)n[r+s]^=o[s];for(s=0;s<this.blockSize;s++)o[s]=t[e+s]}}},function(t,e,n){"use strict";var r=n(41),i=n(13),a=n(206),o=a.Cipher,s=a.DES;function u(t,e){r.equal(e.length,24,"Invalid key length");var n=e.slice(0,8),i=e.slice(8,16),a=e.slice(16,24);this.ciphers="encrypt"===t?[s.create({type:"encrypt",key:n}),s.create({type:"decrypt",key:i}),s.create({type:"encrypt",key:a})]:[s.create({type:"decrypt",key:a}),s.create({type:"encrypt",key:i}),s.create({type:"decrypt",key:n})]}function l(t){o.call(this,t);var e=new u(this.type,this.options.key);this._edeState=e}i(l,o),t.exports=l,l.create=function(t){return new l(t)},l.prototype._update=function(t,e,n,r){var i=this._edeState;i.ciphers[0]._update(t,e,n,r),i.ciphers[1]._update(n,r,n,r),i.ciphers[2]._update(n,r,n,r)},l.prototype._pad=s.prototype._pad,l.prototype._unpad=s.prototype._unpad},function(t,e,n){var r=n(208),i=n(309),a=n(15).Buffer,o=n(310),s=n(67),u=n(148),l=n(149);function c(t,e,n){s.call(this),this._cache=new h,this._cipher=new u.AES(e),this._prev=a.from(n),this._mode=t,this._autopadding=!0}n(13)(c,s),c.prototype._update=function(t){var e,n;this._cache.add(t);for(var r=[];e=this._cache.get();)n=this._mode.encrypt(this,e),r.push(n);return a.concat(r)};var f=a.alloc(16,16);function h(){this.cache=a.allocUnsafe(0)}function p(t,e,n){var s=r[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"===typeof e&&(e=a.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);if("string"===typeof n&&(n=a.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);return"stream"===s.type?new o(s.module,e,n):"auth"===s.type?new i(s.module,e,n):new c(s.module,e,n)}c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(f))throw this._cipher.scrub(),new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},h.prototype.add=function(t){this.cache=a.concat([this.cache,t])},h.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},h.prototype.flush=function(){for(var t=16-this.cache.length,e=a.allocUnsafe(t),n=-1;++n<t;)e.writeUInt8(t,n);return a.concat([this.cache,e])},e.createCipheriv=p,e.createCipher=function(t,e){var n=r[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var i=l(e,!1,n.key,n.iv);return p(t,i.key,i.iv)}},function(t,e){e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},function(t,e,n){var r=n(111);e.encrypt=function(t,e){var n=r(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},e.decrypt=function(t,e){var n=t._prev;t._prev=e;var i=t._cipher.decryptBlock(e);return r(i,n)}},function(t,e,n){var r=n(15).Buffer,i=n(111);function a(t,e,n){var a=e.length,o=i(e,t._cache);return t._cache=t._cache.slice(a),t._prev=r.concat([t._prev,n?e:o]),o}e.encrypt=function(t,e,n){for(var i,o=r.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=r.allocUnsafe(0)),!(t._cache.length<=e.length)){o=r.concat([o,a(t,e,n)]);break}i=t._cache.length,o=r.concat([o,a(t,e.slice(0,i),n)]),e=e.slice(i)}return o}},function(t,e,n){var r=n(15).Buffer;function i(t,e,n){var i=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=r.concat([t._prev.slice(1),r.from([n?e:i])]),i}e.encrypt=function(t,e,n){for(var a=e.length,o=r.allocUnsafe(a),s=-1;++s<a;)o[s]=i(t,e[s],n);return o}},function(t,e,n){var r=n(15).Buffer;function i(t,e,n){for(var r,i,o=-1,s=0;++o<8;)r=e&1<<7-o?128:0,s+=(128&(i=t._cipher.encryptBlock(t._prev)[0]^r))>>o%8,t._prev=a(t._prev,n?r:i);return s}function a(t,e){var n=t.length,i=-1,a=r.allocUnsafe(t.length);for(t=r.concat([t,r.from([e])]);++i<n;)a[i]=t[i]<<1|t[i+1]>>7;return a}e.encrypt=function(t,e,n){for(var a=e.length,o=r.allocUnsafe(a),s=-1;++s<a;)o[s]=i(t,e[s],n);return o}},function(t,e,n){(function(t){var r=n(111);function i(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(e,n){for(;e._cache.length<n.length;)e._cache=t.concat([e._cache,i(e)]);var a=e._cache.slice(0,n.length);return e._cache=e._cache.slice(n.length),r(n,a)}}).call(this,n(23).Buffer)},function(t,e,n){var r=n(15).Buffer,i=r.alloc(16,0);function a(t){var e=r.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function o(t){this.h=t,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}o.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},o.prototype._multiply=function(){for(var t,e,n,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],i=[0,0,0,0],o=-1;++o<128;){for(0!==(this.state[~~(o/8)]&1<<7-o%8)&&(i[0]^=r[0],i[1]^=r[1],i[2]^=r[2],i[3]^=r[3]),n=0!==(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,n&&(r[0]=r[0]^225<<24)}this.state=a(i)},o.prototype.update=function(t){var e;for(this.cache=r.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},o.prototype.final=function(t,e){return this.cache.length&&this.ghash(r.concat([this.cache,i],16)),this.ghash(a([0,t,0,e])),this.state},t.exports=o},function(t,e,n){var r=n(309),i=n(15).Buffer,a=n(208),o=n(310),s=n(67),u=n(148),l=n(149);function c(t,e,n){s.call(this),this._cache=new f,this._last=void 0,this._cipher=new u.AES(e),this._prev=i.from(n),this._mode=t,this._autopadding=!0}function f(){this.cache=i.allocUnsafe(0)}function h(t,e,n){var s=a[t.toLowerCase()];if(!s)throw new TypeError("invalid suite type");if("string"===typeof n&&(n=i.from(n)),"GCM"!==s.mode&&n.length!==s.iv)throw new TypeError("invalid iv length "+n.length);if("string"===typeof e&&(e=i.from(e)),e.length!==s.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===s.type?new o(s.module,e,n,!0):"auth"===s.type?new r(s.module,e,n,!0):new c(s.module,e,n)}n(13)(c,s),c.prototype._update=function(t){var e,n;this._cache.add(t);for(var r=[];e=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,e),r.push(n);return i.concat(r)},c.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");var n=-1;for(;++n<e;)if(t[n+(16-e)]!==e)throw new Error("unable to decrypt data");if(16===e)return;return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},c.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},f.prototype.add=function(t){this.cache=i.concat([this.cache,t])},f.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},f.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var n=a[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var r=l(e,!1,n.key,n.iv);return h(t,r.key,r.iv)},e.createDecipheriv=h},function(t,e){e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},function(t,e,n){(function(t){var r=n(311),i=n(878),a=n(879);var o={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(e){var n=new t(i[e].prime,"hex"),r=new t(i[e].gen,"hex");return new a(n,r)},e.createDiffieHellman=e.DiffieHellman=function e(n,i,s,u){return t.isBuffer(i)||void 0===o[i]?e(n,"binary",i,s):(i=i||"binary",u=u||"binary",s=s||new t([2]),t.isBuffer(s)||(s=new t(s,u)),"number"===typeof n?new a(r(n,s),s,!0):(t.isBuffer(n)||(n=new t(n,i)),new a(n,s,!0)))}}).call(this,n(23).Buffer)},,,function(t){t.exports={modp1:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18:{gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}},function(t,e,n){(function(e){var r=n(24),i=new(n(312)),a=new r(24),o=new r(11),s=new r(10),u=new r(3),l=new r(7),c=n(311),f=n(93);function h(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this._pub=new r(t),this}function p(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this._priv=new r(t),this}t.exports=m;var d={};function m(t,e,n){this.setGenerator(e),this.__prime=new r(t),this._prime=r.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=h,this.setPrivateKey=p):this._primeCode=8}function g(t,n){var r=new e(t.toArray());return n?r.toString(n):r}Object.defineProperty(m.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!==typeof this._primeCode&&(this._primeCode=function(t,e){var n=e.toString("hex"),r=[n,t.toString(16)].join("_");if(r in d)return d[r];var f,h=0;if(t.isEven()||!c.simpleSieve||!c.fermatTest(t)||!i.test(t))return h+=1,h+="02"===n||"05"===n?8:4,d[r]=h,h;switch(i.test(t.shrn(1))||(h+=2),n){case"02":t.mod(a).cmp(o)&&(h+=8);break;case"05":(f=t.mod(s)).cmp(u)&&f.cmp(l)&&(h+=8);break;default:h+=4}return d[r]=h,h}(this.__prime,this.__gen)),this._primeCode}}),m.prototype.generateKeys=function(){return this._priv||(this._priv=new r(f(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},m.prototype.computeSecret=function(t){var n=(t=(t=new r(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new e(n.toArray()),a=this.getPrime();if(i.length<a.length){var o=new e(a.length-i.length);o.fill(0),i=e.concat([o,i])}return i},m.prototype.getPublicKey=function(t){return g(this._pub,t)},m.prototype.getPrivateKey=function(t){return g(this._priv,t)},m.prototype.getPrime=function(t){return g(this.__prime,t)},m.prototype.getGenerator=function(t){return g(this._gen,t)},m.prototype.setGenerator=function(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this.__gen=t,this._gen=new r(t),this}}).call(this,n(23).Buffer)},function(t,e,n){(function(e){var r=n(109),i=n(199),a=n(13),o=n(881),s=n(917),u=n(301);function l(t){i.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=r(e.hash),this._tag=e.id,this._signType=e.sign}function c(t){i.Writable.call(this);var e=u[t];if(!e)throw new Error("Unknown message digest");this._hash=r(e.hash),this._tag=e.id,this._signType=e.sign}function f(t){return new l(t)}function h(t){return new c(t)}Object.keys(u).forEach(function(t){u[t].id=new e(u[t].id,"hex"),u[t.toLowerCase()]=u[t]}),a(l,i.Writable),l.prototype._write=function(t,e,n){this._hash.update(t),n()},l.prototype.update=function(t,n){return"string"===typeof t&&(t=new e(t,n)),this._hash.update(t),this},l.prototype.sign=function(t,e){this.end();var n=this._hash.digest(),r=o(n,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},a(c,i.Writable),c.prototype._write=function(t,e,n){this._hash.update(t),n()},c.prototype.update=function(t,n){return"string"===typeof t&&(t=new e(t,n)),this._hash.update(t),this},c.prototype.verify=function(t,n,r){"string"===typeof n&&(n=new e(n,r)),this.end();var i=this._hash.digest();return s(n,i,t,this._signType,this._tag)},t.exports={Sign:f,Verify:h,createSign:f,createVerify:h}}).call(this,n(23).Buffer)},function(t,e,n){(function(e){var r=n(299),i=n(209),a=n(29).ec,o=n(24),s=n(151),u=n(322);function l(t,n,i,a){if((t=new e(t.toArray())).length<n.byteLength()){var o=new e(n.byteLength()-t.length);o.fill(0),t=e.concat([o,t])}var s=i.length,u=function(t,n){t=(t=c(t,n)).mod(n);var r=new e(t.toArray());if(r.length<n.byteLength()){var i=new e(n.byteLength()-r.length);i.fill(0),r=e.concat([i,r])}return r}(i,n),l=new e(s);l.fill(1);var f=new e(s);return f.fill(0),f=r(a,f).update(l).update(new e([0])).update(t).update(u).digest(),l=r(a,f).update(l).digest(),{k:f=r(a,f).update(l).update(new e([1])).update(t).update(u).digest(),v:l=r(a,f).update(l).digest()}}function c(t,e){var n=new o(t),r=(t.length<<3)-e.bitLength();return r>0&&n.ishrn(r),n}function f(t,n,i){var a,o;do{for(a=new e(0);8*a.length<t.bitLength();)n.v=r(i,n.k).update(n.v).digest(),a=e.concat([a,n.v]);o=c(a,t),n.k=r(i,n.k).update(n.v).update(new e([0])).digest(),n.v=r(i,n.k).update(n.v).digest()}while(-1!==o.cmp(t));return o}function h(t,e,n,r){return t.toRed(o.mont(n)).redPow(e).fromRed().mod(r)}t.exports=function(t,n,r,p,d){var m=s(n);if(m.curve){if("ecdsa"!==p&&"ecdsa/rsa"!==p)throw new Error("wrong private key type");return function(t,n){var r=u[n.curve.join(".")];if(!r)throw new Error("unknown curve "+n.curve.join("."));var i=new a(r).keyFromPrivate(n.privateKey).sign(t);return new e(i.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==p)throw new Error("wrong private key type");return function(t,n,r){for(var i,a=n.params.priv_key,s=n.params.p,u=n.params.q,p=n.params.g,d=new o(0),m=c(t,u).mod(u),g=!1,v=l(a,u,t,r);!1===g;)i=f(u,v,r),d=h(p,i,s,u),0===(g=i.invm(u).imul(m.add(a.mul(d))).mod(u)).cmpn(0)&&(g=!1,d=new o(0));return function(t,n){t=t.toArray(),n=n.toArray(),128&t[0]&&(t=[0].concat(t)),128&n[0]&&(n=[0].concat(n));var r=[48,t.length+n.length+4,2,t.length];return r=r.concat(t,[2,n.length],n),new e(r)}(d,g)}(t,m,r)}if("rsa"!==p&&"ecdsa/rsa"!==p)throw new Error("wrong private key type");t=e.concat([d,t]);for(var g=m.modulus.byteLength(),v=[0,1];t.length+v.length+1<g;)v.push(255);v.push(0);for(var y=-1;++y<t.length;)v.push(t[y]);return i(v,m)},t.exports.getKey=l,t.exports.makeKey=f}).call(this,n(23).Buffer)},function(t){t.exports={_args:[["elliptic@6.4.1","V:\\MINST\\DR_Project\\digit-recognition-webapp-react"]],_from:"elliptic@6.4.1",_id:"elliptic@6.4.1",_inBundle:!1,_integrity:"sha512-BsXLz5sqX8OHcsh7CqBMztyXARmGQ3LWPtGjJi6DiJHq5C/qvi9P3OqgswKSDftbu8+IoI/QDTAm2fFnQ9SZSQ==",_location:"/elliptic",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"elliptic@6.4.1",name:"elliptic",escapedName:"elliptic",rawSpec:"6.4.1",saveSpec:null,fetchSpec:"6.4.1"},_requiredBy:["/browserify-sign","/create-ecdh"],_resolved:"https://registry.npmjs.org/elliptic/-/elliptic-6.4.1.tgz",_spec:"6.4.1",_where:"V:\\MINST\\DR_Project\\digit-recognition-webapp-react",author:{name:"Fedor Indutny",email:"fedor@indutny.com"},bugs:{url:"https://github.com/indutny/elliptic/issues"},dependencies:{"bn.js":"^4.4.0",brorand:"^1.0.1","hash.js":"^1.0.0","hmac-drbg":"^1.0.0",inherits:"^2.0.1","minimalistic-assert":"^1.0.0","minimalistic-crypto-utils":"^1.0.0"},description:"EC cryptography",devDependencies:{brfs:"^1.4.3",coveralls:"^2.11.3",grunt:"^0.4.5","grunt-browserify":"^5.0.0","grunt-cli":"^1.2.0","grunt-contrib-connect":"^1.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^1.0.1","grunt-mocha-istanbul":"^3.0.1","grunt-saucelabs":"^8.6.2",istanbul:"^0.4.2",jscs:"^2.9.0",jshint:"^2.6.0",mocha:"^2.1.0"},files:["lib"],homepage:"https://github.com/indutny/elliptic",keywords:["EC","Elliptic","curve","Cryptography"],license:"MIT",main:"lib/elliptic.js",name:"elliptic",repository:{type:"git",url:"git+ssh://git@github.com/indutny/elliptic.git"},scripts:{jscs:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",jshint:"jscs benchmarks/*.js lib/*.js lib/**/*.js lib/**/**/*.js test/index.js",lint:"npm run jscs && npm run jshint",test:"npm run lint && npm run unit",unit:"istanbul test _mocha --reporter=spec test/index.js",version:"grunt dist && git add dist/"},version:"6.4.1"}},function(t,e,n){"use strict";var r=e,i=n(24),a=n(41),o=n(314);r.assert=a,r.toArray=o.toArray,r.zero2=o.zero2,r.toHex=o.toHex,r.encode=o.encode,r.getNAF=function(t,e){for(var n=[],r=1<<e+1,i=t.clone();i.cmpn(1)>=0;){var a;if(i.isOdd()){var o=i.andln(r-1);a=o>(r>>1)-1?(r>>1)-o:o,i.isubn(a)}else a=0;n.push(a);for(var s=0!==i.cmpn(0)&&0===i.andln(r-1)?e+1:1,u=1;u<s;u++)n.push(0);i.iushrn(s)}return n},r.getJSF=function(t,e){var n=[[],[]];t=t.clone(),e=e.clone();for(var r=0,i=0;t.cmpn(-r)>0||e.cmpn(-i)>0;){var a,o,s,u=t.andln(3)+r&3,l=e.andln(3)+i&3;3===u&&(u=-1),3===l&&(l=-1),a=0===(1&u)?0:3!==(s=t.andln(7)+r&7)&&5!==s||2!==l?u:-u,n[0].push(a),o=0===(1&l)?0:3!==(s=e.andln(7)+i&7)&&5!==s||2!==u?l:-l,n[1].push(o),2*r===a+1&&(r=1-r),2*i===o+1&&(i=1-i),t.iushrn(1),e.iushrn(1)}return n},r.cachedProperty=function(t,e,n){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},r.parseBytes=function(t){return"string"===typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new i(t,"hex","le")}},function(t,e,n){"use strict";var r=n(24),i=n(29).utils,a=i.getNAF,o=i.getJSF,s=i.assert;function u(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=u,u.prototype.point=function(){throw new Error("Not implemented")},u.prototype.validate=function(){throw new Error("Not implemented")},u.prototype._fixedNafMul=function(t,e){s(t.precomputed);var n=t._getDoubles(),r=a(e,1),i=(1<<n.step+1)-(n.step%2===0?2:1);i/=3;for(var o=[],u=0;u<r.length;u+=n.step){var l=0;for(e=u+n.step-1;e>=u;e--)l=(l<<1)+r[e];o.push(l)}for(var c=this.jpoint(null,null,null),f=this.jpoint(null,null,null),h=i;h>0;h--){for(u=0;u<o.length;u++){(l=o[u])===h?f=f.mixedAdd(n.points[u]):l===-h&&(f=f.mixedAdd(n.points[u].neg()))}c=c.add(f)}return c.toP()},u.prototype._wnafMul=function(t,e){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var i=r.points,o=a(e,n),u=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(e=0;l>=0&&0===o[l];l--)e++;if(l>=0&&e++,u=u.dblp(e),l<0)break;var c=o[l];s(0!==c),u="affine"===t.type?c>0?u.mixedAdd(i[c-1>>1]):u.mixedAdd(i[-c-1>>1].neg()):c>0?u.add(i[c-1>>1]):u.add(i[-c-1>>1].neg())}return"affine"===t.type?u.toP():u},u.prototype._wnafMulAdd=function(t,e,n,r,i){for(var s=this._wnafT1,u=this._wnafT2,l=this._wnafT3,c=0,f=0;f<r;f++){var h=(k=e[f])._getNAFPoints(t);s[f]=h.wnd,u[f]=h.points}for(f=r-1;f>=1;f-=2){var p=f-1,d=f;if(1===s[p]&&1===s[d]){var m=[e[p],null,null,e[d]];0===e[p].y.cmp(e[d].y)?(m[1]=e[p].add(e[d]),m[2]=e[p].toJ().mixedAdd(e[d].neg())):0===e[p].y.cmp(e[d].y.redNeg())?(m[1]=e[p].toJ().mixedAdd(e[d]),m[2]=e[p].add(e[d].neg())):(m[1]=e[p].toJ().mixedAdd(e[d]),m[2]=e[p].toJ().mixedAdd(e[d].neg()));var g=[-3,-1,-5,-7,0,7,5,1,3],v=o(n[p],n[d]);c=Math.max(v[0].length,c),l[p]=new Array(c),l[d]=new Array(c);for(var y=0;y<c;y++){var b=0|v[0][y],_=0|v[1][y];l[p][y]=g[3*(b+1)+(_+1)],l[d][y]=0,u[p]=m}}else l[p]=a(n[p],s[p]),l[d]=a(n[d],s[d]),c=Math.max(l[p].length,c),c=Math.max(l[d].length,c)}var x=this.jpoint(null,null,null),w=this._wnafT4;for(f=c;f>=0;f--){for(var S=0;f>=0;){var E=!0;for(y=0;y<r;y++)w[y]=0|l[y][f],0!==w[y]&&(E=!1);if(!E)break;S++,f--}if(f>=0&&S++,x=x.dblp(S),f<0)break;for(y=0;y<r;y++){var k,T=w[y];0!==T&&(T>0?k=u[y][T-1>>1]:T<0&&(k=u[y][-T-1>>1].neg()),x="affine"===k.type?x.mixedAdd(k):x.add(k))}}for(f=0;f<r;f++)u[f]=null;return i?x:x.toP()},u.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},u.prototype.decodePoint=function(t,e){t=i.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1===2*n)return 6===t[0]?s(t[t.length-1]%2===0):7===t[0]&&s(t[t.length-1]%2===1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(t){return this.encode(t,!0)},l.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},l.prototype.encode=function(t,e){return i.encode(this._encode(e),t)},l.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},l.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},l.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var a=0;a<t;a++)r=r.dbl();n.push(r)}return{step:t,points:n}},l.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}},function(t,e,n){"use strict";var r=n(150),i=n(29),a=n(24),o=n(13),s=r.base,u=i.utils.assert;function l(t){s.call(this,"short",t),this.a=new a(t.a,16).toRed(this.red),this.b=new a(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function c(t,e,n,r){s.BasePoint.call(this,t,"affine"),null===e&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(e,16),this.y=new a(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function f(t,e,n,r){s.BasePoint.call(this,t,"jacobian"),null===e&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(e,16),this.y=new a(n,16),this.z=new a(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}o(l,s),t.exports=l,l.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,n;if(t.beta)e=new a(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)n=new a(t.lambda,16);else{var i=this._getEndoRoots(this.n);0===this.g.mul(i[0]).x.cmp(this.g.x.redMul(e))?n=i[0]:(n=i[1],u(0===this.g.mul(n).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:n,basis:t.basis?t.basis.map(function(t){return{a:new a(t.a,16),b:new a(t.b,16)}}):this._getEndoBasis(n)}}},l.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:a.mont(t),n=new a(2).toRed(e).redInvm(),r=n.redNeg(),i=new a(3).toRed(e).redNeg().redSqrt().redMul(n);return[r.redAdd(i).fromRed(),r.redSub(i).fromRed()]},l.prototype._getEndoBasis=function(t){for(var e,n,r,i,o,s,u,l,c,f=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=t,p=this.n.clone(),d=new a(1),m=new a(0),g=new a(0),v=new a(1),y=0;0!==h.cmpn(0);){var b=p.div(h);l=p.sub(b.mul(h)),c=g.sub(b.mul(d));var _=v.sub(b.mul(m));if(!r&&l.cmp(f)<0)e=u.neg(),n=d,r=l.neg(),i=c;else if(r&&2===++y)break;u=l,p=h,h=l,g=d,d=c,v=m,m=_}o=l.neg(),s=c;var x=r.sqr().add(i.sqr());return o.sqr().add(s.sqr()).cmp(x)>=0&&(o=e,s=n),r.negative&&(r=r.neg(),i=i.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:r,b:i},{a:o,b:s}]},l.prototype._endoSplit=function(t){var e=this.endo.basis,n=e[0],r=e[1],i=r.b.mul(t).divRound(this.n),a=n.b.neg().mul(t).divRound(this.n),o=i.mul(n.a),s=a.mul(r.a),u=i.mul(n.b),l=a.mul(r.b);return{k1:t.sub(o).sub(s),k2:u.add(l).neg()}},l.prototype.pointFromX=function(t,e){(t=new a(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var i=r.fromRed().isOdd();return(e&&!i||!e&&i)&&(r=r.redNeg()),this.point(t,r)},l.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,n=t.y,r=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},l.prototype._endoWnafMulAdd=function(t,e,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,a=0;a<t.length;a++){var o=this._endoSplit(e[a]),s=t[a],u=s._getBeta();o.k1.negative&&(o.k1.ineg(),s=s.neg(!0)),o.k2.negative&&(o.k2.ineg(),u=u.neg(!0)),r[2*a]=s,r[2*a+1]=u,i[2*a]=o.k1,i[2*a+1]=o.k2}for(var l=this._wnafMulAdd(1,r,i,2*a,n),c=0;c<2*a;c++)r[c]=null,i[c]=null;return l},o(c,s.BasePoint),l.prototype.point=function(t,e,n){return new c(this,t,e,n)},l.prototype.pointFromJSON=function(t,e){return c.fromJSON(this,t,e)},c.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,r=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},c.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},c.fromJSON=function(t,e,n){"string"===typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],n);if(!e[2])return r;function i(e){return t.point(e[0],e[1],n)}var a=e[2];return r.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[r].concat(a.doubles.points.map(i))},naf:a.naf&&{wnd:a.naf.wnd,points:[r].concat(a.naf.points.map(i))}},r},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return this.inf},c.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var n=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},c.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,n=this.x.redSqr(),r=t.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(e).redMul(r),a=i.redSqr().redISub(this.x.redAdd(this.x)),o=i.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)},c.prototype.getX=function(){return this.x.fromRed()},c.prototype.getY=function(){return this.y.fromRed()},c.prototype.mul=function(t){return t=new a(t,16),this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},c.prototype.jmulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},c.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},c.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return e},c.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},o(f,s.BasePoint),l.prototype.jpoint=function(t,e,n){return new f(this,t,e,n)},f.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),n=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(n,r)},f.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},f.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(e),i=t.x.redMul(n),a=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(n.redMul(this.z)),s=r.redSub(i),u=a.redSub(o);if(0===s.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),c=l.redMul(s),f=r.redMul(l),h=u.redSqr().redIAdd(c).redISub(f).redISub(f),p=u.redMul(f.redISub(h)).redISub(a.redMul(c)),d=this.z.redMul(t.z).redMul(s);return this.curve.jpoint(h,p,d)},f.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),n=this.x,r=t.x.redMul(e),i=this.y,a=t.y.redMul(e).redMul(this.z),o=n.redSub(r),s=i.redSub(a);if(0===o.cmpn(0))return 0!==s.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),l=u.redMul(o),c=n.redMul(u),f=s.redSqr().redIAdd(l).redISub(c).redISub(c),h=s.redMul(c.redISub(f)).redISub(i.redMul(l)),p=this.z.redMul(o);return this.curve.jpoint(f,h,p)},f.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var e=this,n=0;n<t;n++)e=e.dbl();return e}var r=this.curve.a,i=this.curve.tinv,a=this.x,o=this.y,s=this.z,u=s.redSqr().redSqr(),l=o.redAdd(o);for(n=0;n<t;n++){var c=a.redSqr(),f=l.redSqr(),h=f.redSqr(),p=c.redAdd(c).redIAdd(c).redIAdd(r.redMul(u)),d=a.redMul(f),m=p.redSqr().redISub(d.redAdd(d)),g=d.redISub(m),v=p.redMul(g);v=v.redIAdd(v).redISub(h);var y=l.redMul(s);n+1<t&&(u=u.redMul(h)),a=m,s=y,l=v}return this.curve.jpoint(a,l.redMul(i),s)},f.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},f.prototype._zeroDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(r).redISub(a);o=o.redIAdd(o);var s=r.redAdd(r).redIAdd(r),u=s.redSqr().redISub(o).redISub(o),l=a.redIAdd(a);l=(l=l.redIAdd(l)).redIAdd(l),t=u,e=s.redMul(o.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),f=this.y.redSqr(),h=f.redSqr(),p=this.x.redAdd(f).redSqr().redISub(c).redISub(h);p=p.redIAdd(p);var d=c.redAdd(c).redIAdd(c),m=d.redSqr(),g=h.redIAdd(h);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(p).redISub(p),e=d.redMul(p.redISub(t)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(t,e,n)},f.prototype._threeDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),a=i.redSqr(),o=this.x.redAdd(i).redSqr().redISub(r).redISub(a);o=o.redIAdd(o);var s=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=s.redSqr().redISub(o).redISub(o);t=u;var l=a.redIAdd(a);l=(l=l.redIAdd(l)).redIAdd(l),e=s.redMul(o.redISub(u)).redISub(l),n=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),f=this.y.redSqr(),h=this.x.redMul(f),p=this.x.redSub(c).redMul(this.x.redAdd(c));p=p.redAdd(p).redIAdd(p);var d=h.redIAdd(h),m=(d=d.redIAdd(d)).redAdd(d);t=p.redSqr().redISub(m),n=this.y.redAdd(this.z).redSqr().redISub(f).redISub(c);var g=f.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=p.redMul(d.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,n)},f.prototype._dbl=function(){var t=this.curve.a,e=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),a=e.redSqr(),o=n.redSqr(),s=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(i)),u=e.redAdd(e),l=(u=u.redIAdd(u)).redMul(o),c=s.redSqr().redISub(l.redAdd(l)),f=l.redISub(c),h=o.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=s.redMul(f).redISub(h),d=n.redAdd(n).redMul(r);return this.curve.jpoint(c,p,d)},f.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr(),r=e.redSqr(),i=t.redAdd(t).redIAdd(t),a=i.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(r),s=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(a)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var l=i.redIAdd(o).redSqr().redISub(a).redISub(s).redISub(u),c=e.redMul(l);c=(c=c.redIAdd(c)).redIAdd(c);var f=this.x.redMul(s).redISub(c);f=(f=f.redIAdd(f)).redIAdd(f);var h=this.y.redMul(l.redMul(u.redISub(l)).redISub(o.redMul(s)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var p=this.z.redAdd(o).redSqr().redISub(n).redISub(s);return this.curve.jpoint(f,h,p)},f.prototype.mul=function(t,e){return t=new a(t,e),this.curve._wnafMul(this,t)},f.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),i=n.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(r)).cmpn(0)},f.prototype.eqXToP=function(t){var e=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(n))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},f.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},f.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(t,e,n){"use strict";var r=n(150),i=n(24),a=n(13),o=r.base,s=n(29).utils;function u(t){o.call(this,"mont",t),this.a=new i(t.a,16).toRed(this.red),this.b=new i(t.b,16).toRed(this.red),this.i4=new i(4).toRed(this.red).redInvm(),this.two=new i(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function l(t,e,n){o.BasePoint.call(this,t,"projective"),null===e&&null===n?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new i(e,16),this.z=new i(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(u,o),t.exports=u,u.prototype.validate=function(t){var e=t.normalize().x,n=e.redSqr(),r=n.redMul(e).redAdd(n.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},a(l,o.BasePoint),u.prototype.decodePoint=function(t,e){return this.point(s.toArray(t,e),1)},u.prototype.point=function(t,e){return new l(this,t,e)},u.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},l.prototype.precompute=function(){},l.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},l.fromJSON=function(t,e){return new l(t,e[0],e[1]||t.one)},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},l.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),n=t.redSub(e),r=t.redMul(e),i=n.redMul(e.redAdd(this.curve.a24.redMul(n)));return this.curve.point(r,i)},l.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.diffAdd=function(t,e){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),i=t.x.redAdd(t.z),a=t.x.redSub(t.z).redMul(n),o=i.redMul(r),s=e.z.redMul(a.redAdd(o).redSqr()),u=e.x.redMul(a.redISub(o).redSqr());return this.curve.point(s,u)},l.prototype.mul=function(t){for(var e=t.clone(),n=this,r=this.curve.point(null,null),i=[];0!==e.cmpn(0);e.iushrn(1))i.push(e.andln(1));for(var a=i.length-1;a>=0;a--)0===i[a]?(n=n.diffAdd(r,this),r=r.dbl()):(r=n.diffAdd(r,this),n=n.dbl());return r},l.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},l.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},l.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(t,e,n){"use strict";var r=n(150),i=n(29),a=n(24),o=n(13),s=r.base,u=i.utils.assert;function l(t){this.twisted=1!==(0|t.a),this.mOneA=this.twisted&&-1===(0|t.a),this.extended=this.mOneA,s.call(this,"edwards",t),this.a=new a(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),u(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|t.c)}function c(t,e,n,r,i){s.BasePoint.call(this,t,"projective"),null===e&&null===n&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(e,16),this.y=new a(n,16),this.z=r?new a(r,16):this.curve.one,this.t=i&&new a(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}o(l,s),t.exports=l,l.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},l.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},l.prototype.jpoint=function(t,e,n,r){return this.point(t,e,n,r)},l.prototype.pointFromX=function(t,e){(t=new a(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),r=this.c2.redSub(this.a.redMul(n)),i=this.one.redSub(this.c2.redMul(this.d).redMul(n)),o=r.redMul(i.redInvm()),s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var u=s.fromRed().isOdd();return(e&&!u||!e&&u)&&(s=s.redNeg()),this.point(t,s)},l.prototype.pointFromY=function(t,e){(t=new a(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr(),r=n.redSub(this.c2),i=n.redMul(this.d).redMul(this.c2).redSub(this.a),o=r.redMul(i.redInvm());if(0===o.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var s=o.redSqrt();if(0!==s.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return s.fromRed().isOdd()!==e&&(s=s.redNeg()),this.point(s,t)},l.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),n=t.y.redSqr(),r=e.redMul(this.a).redAdd(n),i=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(n)));return 0===r.cmp(i)},o(c,s.BasePoint),l.prototype.pointFromJSON=function(t){return c.fromJSON(this,t)},l.prototype.point=function(t,e,n,r){return new c(this,t,e,n,r)},c.fromJSON=function(t,e){return new c(t,e[0],e[1],e[2])},c.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},c.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},c.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(t),i=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),a=r.redAdd(e),o=a.redSub(n),s=r.redSub(e),u=i.redMul(o),l=a.redMul(s),c=i.redMul(s),f=o.redMul(a);return this.curve.point(u,l,f,c)},c.prototype._projDbl=function(){var t,e,n,r=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),a=this.y.redSqr();if(this.curve.twisted){var o=(l=this.curve._mulA(i)).redAdd(a);if(this.zOne)t=r.redSub(i).redSub(a).redMul(o.redSub(this.curve.two)),e=o.redMul(l.redSub(a)),n=o.redSqr().redSub(o).redSub(o);else{var s=this.z.redSqr(),u=o.redSub(s).redISub(s);t=r.redSub(i).redISub(a).redMul(u),e=o.redMul(l.redSub(a)),n=o.redMul(u)}}else{var l=i.redAdd(a);s=this.curve._mulC(this.z).redSqr(),u=l.redSub(s).redSub(s);t=this.curve._mulC(r.redISub(l)).redMul(u),e=this.curve._mulC(l).redMul(i.redISub(a)),n=l.redMul(u)}return this.curve.point(t,e,n)},c.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},c.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),i=this.z.redMul(t.z.redAdd(t.z)),a=n.redSub(e),o=i.redSub(r),s=i.redAdd(r),u=n.redAdd(e),l=a.redMul(o),c=s.redMul(u),f=a.redMul(u),h=o.redMul(s);return this.curve.point(l,c,h,f)},c.prototype._projAdd=function(t){var e,n,r=this.z.redMul(t.z),i=r.redSqr(),a=this.x.redMul(t.x),o=this.y.redMul(t.y),s=this.curve.d.redMul(a).redMul(o),u=i.redSub(s),l=i.redAdd(s),c=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(a).redISub(o),f=r.redMul(u).redMul(c);return this.curve.twisted?(e=r.redMul(l).redMul(o.redSub(this.curve._mulA(a))),n=u.redMul(l)):(e=r.redMul(l).redMul(o.redSub(a)),n=this.curve._mulC(u).redMul(l)),this.curve.point(f,e,n)},c.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},c.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},c.prototype.mulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!1)},c.prototype.jmulAdd=function(t,e,n){return this.curve._wnafMulAdd(1,[this,e],[t,n],2,!0)},c.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},c.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},c.prototype.getX=function(){return this.normalize(),this.x.fromRed()},c.prototype.getY=function(){return this.normalize(),this.y.fromRed()},c.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},c.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var n=t.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},c.prototype.toP=c.prototype.normalize,c.prototype.mixedAdd=c.prototype.add},function(t,e,n){"use strict";var r,i=e,a=n(210),o=n(29),s=o.utils.assert;function u(t){"short"===t.type?this.curve=new o.curve.short(t):"edwards"===t.type?this.curve=new o.curve.edwards(t):this.curve=new o.curve.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(t,e){Object.defineProperty(i,t,{configurable:!0,enumerable:!0,get:function(){var n=new u(e);return Object.defineProperty(i,t,{configurable:!0,enumerable:!0,value:n}),n}})}i.PresetCurve=u,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=n(895)}catch(c){r=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},function(t,e,n){"use strict";e.sha1=n(890),e.sha224=n(891),e.sha256=n(316),e.sha384=n(892),e.sha512=n(317)},function(t,e,n){"use strict";var r=n(57),i=n(112),a=n(315),o=r.rotl32,s=r.sum32,u=r.sum32_5,l=a.ft_1,c=i.BlockHash,f=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(h,c),t.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=o(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],a=this.h[1],c=this.h[2],h=this.h[3],p=this.h[4];for(r=0;r<n.length;r++){var d=~~(r/20),m=u(o(i,5),l(d,a,c,h),p,n[r],f[d]);p=h,h=c,c=o(a,30),a=i,i=m}this.h[0]=s(this.h[0],i),this.h[1]=s(this.h[1],a),this.h[2]=s(this.h[2],c),this.h[3]=s(this.h[3],h),this.h[4]=s(this.h[4],p)},h.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){"use strict";var r=n(57),i=n(316);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(a,i),t.exports=a,a.blockSize=512,a.outSize=224,a.hmacStrength=192,a.padLength=64,a.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(t,e,n){"use strict";var r=n(57),i=n(317);function a(){if(!(this instanceof a))return new a;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(a,i),t.exports=a,a.blockSize=1024,a.outSize=384,a.hmacStrength=192,a.padLength=128,a.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(t,e,n){"use strict";var r=n(57),i=n(112),a=r.rotl32,o=r.sum32,s=r.sum32_3,u=r.sum32_4,l=i.BlockHash;function c(){if(!(this instanceof c))return new c;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function f(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function h(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function p(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(c,l),e.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(t,e){for(var n=this.h[0],r=this.h[1],i=this.h[2],l=this.h[3],c=this.h[4],y=n,b=r,_=i,x=l,w=c,S=0;S<80;S++){var E=o(a(u(n,f(S,r,i,l),t[d[S]+e],h(S)),g[S]),c);n=c,c=l,l=a(i,10),i=r,r=E,E=o(a(u(y,f(79-S,b,_,x),t[m[S]+e],p(S)),v[S]),w),y=w,w=x,x=a(_,10),_=b,b=E}E=s(this.h[1],i,x),this.h[1]=s(this.h[2],l,w),this.h[2]=s(this.h[3],c,y),this.h[3]=s(this.h[4],n,b),this.h[4]=s(this.h[0],r,_),this.h[0]=E},c.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,n){"use strict";var r=n(57),i=n(41);function a(t,e,n){if(!(this instanceof a))return new a(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,n))}t.exports=a,a.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},a.prototype.update=function(t,e){return this.inner.update(t,e),this},a.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(t,e,n){"use strict";var r=n(24),i=n(897),a=n(29),o=a.utils.assert,s=n(898),u=n(899);function l(t){if(!(this instanceof l))return new l(t);"string"===typeof t&&(o(a.curves.hasOwnProperty(t),"Unknown curve "+t),t=a.curves[t]),t instanceof a.curves.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=l,l.prototype.keyPair=function(t){return new s(this,t)},l.prototype.keyFromPrivate=function(t,e){return s.fromPrivate(this,t,e)},l.prototype.keyFromPublic=function(t,e){return s.fromPublic(this,t,e)},l.prototype.genKeyPair=function(t){t||(t={});for(var e=new i({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a.rand(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),o=this.n.sub(new r(2));;){var s=new r(e.generate(n));if(!(s.cmp(o)>0))return s.iaddn(1),this.keyFromPrivate(s)}},l.prototype._truncateToN=function(t,e){var n=8*t.byteLength()-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},l.prototype.sign=function(t,e,n,a){"object"===typeof n&&(a=n,n=null),a||(a={}),e=this.keyFromPrivate(e,n),t=this._truncateToN(new r(t,16));for(var o=this.n.byteLength(),s=e.getPrivate().toArray("be",o),l=t.toArray("be",o),c=new i({hash:this.hash,entropy:s,nonce:l,pers:a.pers,persEnc:a.persEnc||"utf8"}),f=this.n.sub(new r(1)),h=0;;h++){var p=a.k?a.k(h):new r(c.generate(this.n.byteLength()));if(!((p=this._truncateToN(p,!0)).cmpn(1)<=0||p.cmp(f)>=0)){var d=this.g.mul(p);if(!d.isInfinity()){var m=d.getX(),g=m.umod(this.n);if(0!==g.cmpn(0)){var v=p.invm(this.n).mul(g.mul(e.getPrivate()).iadd(t));if(0!==(v=v.umod(this.n)).cmpn(0)){var y=(d.getY().isOdd()?1:0)|(0!==m.cmp(g)?2:0);return a.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),y^=1),new u({r:g,s:v,recoveryParam:y})}}}}}},l.prototype.verify=function(t,e,n,i){t=this._truncateToN(new r(t,16)),n=this.keyFromPublic(n,i);var a=(e=new u(e,"hex")).r,o=e.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var s,l=o.invm(this.n),c=l.mul(t).umod(this.n),f=l.mul(a).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(c,n.getPublic(),f)).isInfinity()&&s.eqXToP(a):!(s=this.g.mulAdd(c,n.getPublic(),f)).isInfinity()&&0===s.getX().umod(this.n).cmp(a)},l.prototype.recoverPubKey=function(t,e,n,i){o((3&n)===n,"The recovery param is more than two bits"),e=new u(e,i);var a=this.n,s=new r(t),l=e.r,c=e.s,f=1&n,h=n>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");l=h?this.curve.pointFromX(l.add(this.curve.n),f):this.curve.pointFromX(l,f);var p=e.r.invm(a),d=a.sub(s).mul(p).umod(a),m=c.mul(p).umod(a);return this.g.mulAdd(d,l,m)},l.prototype.getKeyRecoveryParam=function(t,e,n,r){if(null!==(e=new u(e,r)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var a;try{a=this.recoverPubKey(t,e,i)}catch(t){continue}if(a.eq(n))return i}throw new Error("Unable to find valid recovery factor")}},function(t,e,n){"use strict";var r=n(210),i=n(314),a=n(41);function o(t){if(!(this instanceof o))return new o(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=i.toArray(t.entropy,t.entropyEnc||"hex"),n=i.toArray(t.nonce,t.nonceEnc||"hex"),r=i.toArray(t.pers,t.persEnc||"hex");a(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}t.exports=o,o.prototype._init=function(t,e,n){var r=t.concat(e).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},o.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(t,e,n,r){"string"!==typeof e&&(r=n,n=e,e=null),t=i.toArray(t,e),n=i.toArray(n,r),a(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},o.prototype.generate=function(t,e,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof e&&(r=n,n=e,e=null),n&&(n=i.toArray(n,r||"hex"),this._update(n));for(var a=[];a.length<t;)this.V=this._hmac().update(this.V).digest(),a=a.concat(this.V);var o=a.slice(0,t);return this._update(n),this._reseed++,i.encode(o,e)}},function(t,e,n){"use strict";var r=n(24),i=n(29).utils.assert;function a(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=a,a.fromPublic=function(t,e,n){return e instanceof a?e:new a(t,{pub:e,pubEnc:n})},a.fromPrivate=function(t,e,n){return e instanceof a?e:new a(t,{priv:e,privEnc:n})},a.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(t,e){return"string"===typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},a.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?i(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||i(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},a.prototype.derive=function(t){return t.mul(this.priv).getX()},a.prototype.sign=function(t,e,n){return this.ec.sign(t,this,e,n)},a.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(t,e,n){"use strict";var r=n(24),i=n(29).utils,a=i.assert;function o(t,e){if(t instanceof o)return t;this._importDER(t,e)||(a(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function s(){this.place=0}function u(t,e){var n=t[e.place++];if(!(128&n))return n;for(var r=15&n,i=0,a=0,o=e.place;a<r;a++,o++)i<<=8,i|=t[o];return e.place=o,i}function l(t){for(var e=0,n=t.length-1;!t[e]&&!(128&t[e+1])&&e<n;)e++;return 0===e?t:t.slice(e)}function c(t,e){if(e<128)t.push(e);else{var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|n);--n;)t.push(e>>>(n<<3)&255);t.push(e)}}t.exports=o,o.prototype._importDER=function(t,e){t=i.toArray(t,e);var n=new s;if(48!==t[n.place++])return!1;if(u(t,n)+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var a=u(t,n),o=t.slice(n.place,a+n.place);if(n.place+=a,2!==t[n.place++])return!1;var l=u(t,n);if(t.length!==l+n.place)return!1;var c=t.slice(n.place,l+n.place);return 0===o[0]&&128&o[1]&&(o=o.slice(1)),0===c[0]&&128&c[1]&&(c=c.slice(1)),this.r=new r(o),this.s=new r(c),this.recoveryParam=null,!0},o.prototype.toDER=function(t){var e=this.r.toArray(),n=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n)),e=l(e),n=l(n);!n[0]&&!(128&n[1]);)n=n.slice(1);var r=[2];c(r,e.length),(r=r.concat(e)).push(2),c(r,n.length);var a=r.concat(n),o=[48];return c(o,a.length),o=o.concat(a),i.encode(o,t)}},function(t,e,n){"use strict";var r=n(210),i=n(29),a=i.utils,o=a.assert,s=a.parseBytes,u=n(901),l=n(902);function c(t){if(o("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof c))return new c(t);t=i.curves[t].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=r.sha512}t.exports=c,c.prototype.sign=function(t,e){t=s(t);var n=this.keyFromSecret(e),r=this.hashInt(n.messagePrefix(),t),i=this.g.mul(r),a=this.encodePoint(i),o=this.hashInt(a,n.pubBytes(),t).mul(n.priv()),u=r.add(o).umod(this.curve.n);return this.makeSignature({R:i,S:u,Rencoded:a})},c.prototype.verify=function(t,e,n){t=s(t),e=this.makeSignature(e);var r=this.keyFromPublic(n),i=this.hashInt(e.Rencoded(),r.pubBytes(),t),a=this.g.mul(e.S());return e.R().add(r.pub().mul(i)).eq(a)},c.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return a.intFromLE(t.digest()).umod(this.curve.n)},c.prototype.keyFromPublic=function(t){return u.fromPublic(this,t)},c.prototype.keyFromSecret=function(t){return u.fromSecret(this,t)},c.prototype.makeSignature=function(t){return t instanceof l?t:new l(this,t)},c.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},c.prototype.decodePoint=function(t){var e=(t=a.parseBytes(t)).length-1,n=t.slice(0,e).concat(-129&t[e]),r=0!==(128&t[e]),i=a.intFromLE(n);return this.curve.pointFromY(i,r)},c.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},c.prototype.decodeInt=function(t){return a.intFromLE(t)},c.prototype.isPoint=function(t){return t instanceof this.pointClass}},function(t,e,n){"use strict";var r=n(29).utils,i=r.assert,a=r.parseBytes,o=r.cachedProperty;function s(t,e){this.eddsa=t,this._secret=a(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=a(e.pub)}s.fromPublic=function(t,e){return e instanceof s?e:new s(t,{pub:e})},s.fromSecret=function(t,e){return e instanceof s?e:new s(t,{secret:e})},s.prototype.secret=function(){return this._secret},o(s,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),o(s,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),o(s,"privBytes",function(){var t=this.eddsa,e=this.hash(),n=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r}),o(s,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),o(s,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),o(s,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),s.prototype.sign=function(t){return i(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},s.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},s.prototype.getSecret=function(t){return i(this._secret,"KeyPair is public only"),r.encode(this.secret(),t)},s.prototype.getPublic=function(t){return r.encode(this.pubBytes(),t)},t.exports=s},function(t,e,n){"use strict";var r=n(24),i=n(29).utils,a=i.assert,o=i.cachedProperty,s=i.parseBytes;function u(t,e){this.eddsa=t,"object"!==typeof e&&(e=s(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),a(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof r&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}o(u,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(u,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(u,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(u,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),u.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},u.prototype.toHex=function(){return i.encode(this.toBytes(),"hex").toUpperCase()},t.exports=u},function(t,e,n){"use strict";var r=n(113);e.certificate=n(914);var i=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=i;var a=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=a;var o=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(s),this.key("subjectPublicKey").bitstr())});e.PublicKey=o;var s=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),u=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(s),this.key("subjectPrivateKey").octstr())});e.PrivateKey=u;var l=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=l;var c=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=c,e.DSAparam=r.define("DSAparam",function(){this.int()});var f=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(h),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=f;var h=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});e.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},function(t,e,n){var r=n(113),i=n(13);function a(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new a(t,e)},a.prototype._createNamed=function(t){var e;try{e=n(905).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(r){e=function(t){this._initNamed(t)}}return i(e,t),e.prototype._initNamed=function(e){t.call(this,e)},new e(this)},a.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(r.decoders[t])),this.decoders[t]},a.prototype.decode=function(t,e,n){return this._getDecoder(e).decode(t,n)},a.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(r.encoders[t])),this.encoders[t]},a.prototype.encode=function(t,e,n){return this._getEncoder(e).encode(t,n)}},function(module,exports,__webpack_require__){var indexOf=__webpack_require__(906),Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,r=n.eval,i=n.execScript;!r&&i&&(i.call(n,"null"),r=n.eval),forEach(Object_keys(t),function(e){n[e]=t[e]}),forEach(globals,function(e){t[e]&&(n[e]=t[e])});var a=Object_keys(n),o=r.call(n,this.code);return forEach(Object_keys(n),function(e){(e in t||-1===indexOf(a,e))&&(t[e]=n[e])}),forEach(globals,function(e){e in t||defineProp(t,e,n[e])}),document.body.removeChild(e),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return forEach(Object_keys(e),function(n){t[n]=e[n]}),n},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}}),exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"===typeof t&&forEach(Object_keys(t),function(n){e[n]=t[n]}),e}},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e,n){var r=n(13);function i(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function a(t,e){this.path=t,this.rethrow(e)}e.Reporter=i,i.prototype.isError=function(t){return t instanceof a},i.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},i.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},i.prototype.enterKey=function(t){return this._reporterState.path.push(t)},i.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},i.prototype.leaveKey=function(t,e,n){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=n)},i.prototype.path=function(){return this._reporterState.path.join("/")},i.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},i.prototype.leaveObject=function(t){var e=this._reporterState,n=e.obj;return e.obj=t,n},i.prototype.error=function(t){var e,n=this._reporterState,r=t instanceof a;if(e=r?t:new a(n.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!n.options.partial)throw e;return r||n.errors.push(e),e},i.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},r(a,Error),a.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,a),!this.stack)try{throw new Error(this.message)}catch(e){this.stack=e.stack}return this}},function(t,e,n){var r=n(114).Reporter,i=n(114).EncoderBuffer,a=n(114).DecoderBuffer,o=n(41),s=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],u=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(s);function l(t,e){var n={};this._baseState=n,n.enc=t,n.parent=e||null,n.children=null,n.tag=null,n.args=null,n.reverseArgs=null,n.choice=null,n.optional=!1,n.any=!1,n.obj=!1,n.use=null,n.useDecoder=null,n.key=null,n.default=null,n.explicit=null,n.implicit=null,n.contains=null,n.parent||(n.children=[],this._wrap())}t.exports=l;var c=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){var t=this._baseState,e={};c.forEach(function(n){e[n]=t[n]});var n=new this.constructor(e.parent);return n._baseState=e,n},l.prototype._wrap=function(){var t=this._baseState;u.forEach(function(e){this[e]=function(){var n=new this.constructor(this);return t.children.push(n),n[e].apply(n,arguments)}},this)},l.prototype._init=function(t){var e=this._baseState;o(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),o.equal(e.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(t){var e=this._baseState,n=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==n.length&&(o(null===e.children),e.children=n,n.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(o(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!==typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(n){n==(0|n)&&(n|=0);var r=t[n];e[r]=n}),e}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(t){l.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),s.forEach(function(t){l.prototype[t]=function(){var e=this._baseState,n=Array.prototype.slice.call(arguments);return o(null===e.tag),e.tag=t,this._useArgs(n),this}}),l.prototype.use=function(t){o(t);var e=this._baseState;return o(null===e.use),e.use=t,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(t){var e=this._baseState;return o(null===e.default),e.default=t,e.optional=!0,this},l.prototype.explicit=function(t){var e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.explicit=t,this},l.prototype.implicit=function(t){var e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.implicit=t,this},l.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},l.prototype.key=function(t){var e=this._baseState;return o(null===e.key),e.key=t,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(t){var e=this._baseState;return o(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},l.prototype.contains=function(t){var e=this._baseState;return o(null===e.use),e.contains=t,this},l.prototype._decode=function(t,e){var n=this._baseState;if(null===n.parent)return t.wrapResult(n.children[0]._decode(t,e));var r,i=n.default,o=!0,s=null;if(null!==n.key&&(s=t.enterKey(n.key)),n.optional){var u=null;if(null!==n.explicit?u=n.explicit:null!==n.implicit?u=n.implicit:null!==n.tag&&(u=n.tag),null!==u||n.any){if(o=this._peekTag(t,u,n.any),t.isError(o))return o}else{var l=t.save();try{null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e),o=!0}catch(d){o=!1}t.restore(l)}}if(n.obj&&o&&(r=t.enterObject()),o){if(null!==n.explicit){var c=this._decodeTag(t,n.explicit);if(t.isError(c))return c;t=c}var f=t.offset;if(null===n.use&&null===n.choice){if(n.any)l=t.save();var h=this._decodeTag(t,null!==n.implicit?n.implicit:n.tag,n.any);if(t.isError(h))return h;n.any?i=t.raw(l):t=h}if(e&&e.track&&null!==n.tag&&e.track(t.path(),f,t.length,"tagged"),e&&e.track&&null!==n.tag&&e.track(t.path(),t.offset,t.length,"content"),i=n.any?i:null===n.choice?this._decodeGeneric(n.tag,t,e):this._decodeChoice(t,e),t.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(n){n._decode(t,e)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var p=new a(i);i=this._getUse(n.contains,t._reporterState.obj)._decode(p,e)}}return n.obj&&o&&(i=t.leaveObject(r)),null===n.key||null===i&&!0!==o?null!==s&&t.exitKey(s):t.leaveKey(s,n.key,i),i},l.prototype._decodeGeneric=function(t,e,n){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],n):/str$/.test(t)?this._decodeStr(e,t,n):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],n):"objid"===t?this._decodeObjid(e,null,null,n):"gentime"===t||"utctime"===t?this._decodeTime(e,t,n):"null_"===t?this._decodeNull(e,n):"bool"===t?this._decodeBool(e,n):"objDesc"===t?this._decodeStr(e,t,n):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],n):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,n):e.error("unknown tag: "+t)},l.prototype._getUse=function(t,e){var n=this._baseState;return n.useDecoder=this._use(t,e),o(null===n.useDecoder._baseState.parent),n.useDecoder=n.useDecoder._baseState.children[0],n.implicit!==n.useDecoder._baseState.implicit&&(n.useDecoder=n.useDecoder.clone(),n.useDecoder._baseState.implicit=n.implicit),n.useDecoder},l.prototype._decodeChoice=function(t,e){var n=this._baseState,r=null,i=!1;return Object.keys(n.choice).some(function(a){var o=t.save(),s=n.choice[a];try{var u=s._decode(t,e);if(t.isError(u))return!1;r={type:a,value:u},i=!0}catch(l){return t.restore(o),!1}return!0},this),i?r:t.error("Choice not matched")},l.prototype._createEncoderBuffer=function(t){return new i(t,this.reporter)},l.prototype._encode=function(t,e,n){var r=this._baseState;if(null===r.default||r.default!==t){var i=this._encodeValue(t,e,n);if(void 0!==i&&!this._skipDefault(i,e,n))return i}},l.prototype._encodeValue=function(t,e,n){var i=this._baseState;if(null===i.parent)return i.children[0]._encode(t,e||new r);var a=null;if(this.reporter=e,i.optional&&void 0===t){if(null===i.default)return;t=i.default}var o=null,s=!1;if(i.any)a=this._createEncoderBuffer(t);else if(i.choice)a=this._encodeChoice(t,e);else if(i.contains)o=this._getUse(i.contains,n)._encode(t,e),s=!0;else if(i.children)o=i.children.map(function(n){if("null_"===n._baseState.tag)return n._encode(null,e,t);if(null===n._baseState.key)return e.error("Child should have a key");var r=e.enterKey(n._baseState.key);if("object"!==typeof t)return e.error("Child expected, but input is not object");var i=n._encode(t[n._baseState.key],e,t);return e.leaveKey(r),i},this).filter(function(t){return t}),o=this._createEncoderBuffer(o);else if("seqof"===i.tag||"setof"===i.tag){if(!i.args||1!==i.args.length)return e.error("Too many args for : "+i.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var u=this.clone();u._baseState.implicit=null,o=this._createEncoderBuffer(t.map(function(n){var r=this._baseState;return this._getUse(r.args[0],t)._encode(n,e)},u))}else null!==i.use?a=this._getUse(i.use,n)._encode(t,e):(o=this._encodePrimitive(i.tag,t),s=!0);if(!i.any&&null===i.choice){var l=null!==i.implicit?i.implicit:i.tag,c=null===i.implicit?"universal":"context";null===l?null===i.use&&e.error("Tag could be omitted only for .use()"):null===i.use&&(a=this._encodeComposite(l,s,c,o))}return null!==i.explicit&&(a=this._encodeComposite(i.explicit,!1,"context",a)),a},l.prototype._encodeChoice=function(t,e){var n=this._baseState,r=n.choice[t.type];return r||o(!1,t.type+" not found in "+JSON.stringify(Object.keys(n.choice))),r._encode(t.value,e)},l.prototype._encodePrimitive=function(t,e){var n=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&n.args)return this._encodeObjid(e,n.reverseArgs[0],n.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,n.args&&n.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},l.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},l.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(t)}},function(t,e,n){var r=n(319);e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=r._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=r._reverse(e.tag)},function(t,e,n){var r=e;r.der=n(320),r.pem=n(911)},function(t,e,n){var r=n(13),i=n(23).Buffer,a=n(320);function o(t){a.call(this,t),this.enc="pem"}r(o,a),t.exports=o,o.prototype.decode=function(t,e){for(var n=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,s=-1,u=-1,l=0;l<n.length;l++){var c=n[l].match(o);if(null!==c&&c[2]===r){if(-1!==s){if("END"!==c[1])break;u=l;break}if("BEGIN"!==c[1])break;s=l}}if(-1===s||-1===u)throw new Error("PEM section not found for: "+r);var f=n.slice(s+1,u).join("");f.replace(/[^a-z0-9\+\/=]+/gi,"");var h=new i(f,"base64");return a.prototype.decode.call(this,h,e)}},function(t,e,n){var r=e;r.der=n(321),r.pem=n(913)},function(t,e,n){var r=n(13),i=n(321);function a(t){i.call(this,t),this.enc="pem"}r(a,i),t.exports=a,a.prototype.encode=function(t,e){for(var n=i.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"],a=0;a<n.length;a+=64)r.push(n.slice(a,a+64));return r.push("-----END "+e.label+"-----"),r.join("\n")}},function(t,e,n){"use strict";var r=n(113),i=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),a=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),o=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional())}),s=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}),u=r.define("RelativeDistinguishedName",function(){this.setof(a)}),l=r.define("RDNSequence",function(){this.seqof(u)}),c=r.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),f=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(i),this.key("notAfter").use(i))}),h=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),p=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int(),this.key("serialNumber").int(),this.key("signature").use(o),this.key("issuer").use(c),this.key("validity").use(f),this.key("subject").use(c),this.key("subjectPublicKeyInfo").use(s),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(h).optional())}),d=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(p),this.key("signatureAlgorithm").use(o),this.key("signatureValue").bitstr())});t.exports=d},function(t){t.exports={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}},function(t,e,n){(function(e){var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r\+\/\=]+)[\n\r]+/m,i=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----/m,a=/^-----BEGIN ((?:.* KEY)|CERTIFICATE)-----([0-9A-z\n\r\+\/\=]+)-----END \1-----$/m,o=n(149),s=n(207);t.exports=function(t,n){var u,l=t.toString(),c=l.match(r);if(c){var f="aes"+c[1],h=new e(c[2],"hex"),p=new e(c[3].replace(/[\r\n]/g,""),"base64"),d=o(n,h.slice(0,8),parseInt(c[1],10)).key,m=[],g=s.createDecipheriv(f,d,h);m.push(g.update(p)),m.push(g.final()),u=e.concat(m)}else{var v=l.match(a);u=new e(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(i)[1],data:u}}}).call(this,n(23).Buffer)},function(t,e,n){(function(e){var r=n(24),i=n(29).ec,a=n(151),o=n(322);function s(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=e)throw new Error("invalid sig")}t.exports=function(t,n,u,l,c){var f=a(u);if("ec"===f.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(t,e,n){var r=o[n.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var a=new i(r),s=n.data.subjectPrivateKey.data;return a.verify(e,t,s)}(t,n,f)}if("dsa"===f.type){if("dsa"!==l)throw new Error("wrong public key type");return function(t,e,n){var i=n.data.p,o=n.data.q,u=n.data.g,l=n.data.pub_key,c=a.signature.decode(t,"der"),f=c.s,h=c.r;s(f,o),s(h,o);var p=r.mont(i),d=f.invm(o);return 0===u.toRed(p).redPow(new r(e).mul(d).mod(o)).fromRed().mul(l.toRed(p).redPow(h.mul(d).mod(o)).fromRed()).mod(i).mod(o).cmp(h)}(t,n,f)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");n=e.concat([c,n]);for(var h=f.modulus.byteLength(),p=[1],d=0;n.length+p.length+2<h;)p.push(255),d++;p.push(0);for(var m=-1;++m<n.length;)p.push(n[m]);p=new e(p);var g=r.mont(f.modulus);t=(t=new r(t).toRed(g)).redPow(new r(f.publicExponent)),t=new e(t.fromRed().toArray());var v=d<8?1:0;for(h=Math.min(t.length,p.length),t.length!==p.length&&(v=1),m=-1;++m<h;)v|=t[m]^p[m];return 0===v}}).call(this,n(23).Buffer)},function(t,e,n){(function(e){var r=n(29),i=n(24);t.exports=function(t){return new o(t)};var a={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function o(t){this.curveType=a[t],this.curveType||(this.curveType={name:t}),this.curve=new r.ec(this.curveType.name),this.keys=void 0}function s(t,n,r){Array.isArray(t)||(t=t.toArray());var i=new e(t);if(r&&i.length<r){var a=new e(r-i.length);a.fill(0),i=e.concat([a,i])}return n?i.toString(n):i}a.p224=a.secp224r1,a.p256=a.secp256r1=a.prime256v1,a.p192=a.secp192r1=a.prime192v1,a.p384=a.secp384r1,a.p521=a.secp521r1,o.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},o.prototype.computeSecret=function(t,n,r){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),s(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},o.prototype.getPublicKey=function(t,e){var n=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(n[n.length-1]%2?n[0]=7:n[0]=6),s(n,t)},o.prototype.getPrivateKey=function(t){return s(this.keys.getPrivate(),t)},o.prototype.setPublicKey=function(t,n){return n=n||"utf8",e.isBuffer(t)||(t=new e(t,n)),this.keys._importPublic(t),this},o.prototype.setPrivateKey=function(t,n){n=n||"utf8",e.isBuffer(t)||(t=new e(t,n));var r=new i(t);return r=r.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(r),this}}).call(this,n(23).Buffer)},function(t,e,n){e.publicEncrypt=n(920),e.privateDecrypt=n(921),e.privateEncrypt=function(t,n){return e.publicEncrypt(t,n,!0)},e.publicDecrypt=function(t,n){return e.privateDecrypt(t,n,!0)}},function(t,e,n){var r=n(151),i=n(93),a=n(109),o=n(323),s=n(324),u=n(24),l=n(325),c=n(209),f=n(15).Buffer;t.exports=function(t,e,n){var h;h=t.padding?t.padding:n?1:4;var p,d=r(t);if(4===h)p=function(t,e){var n=t.modulus.byteLength(),r=e.length,l=a("sha1").update(f.alloc(0)).digest(),c=l.length,h=2*c;if(r>n-h-2)throw new Error("message too long");var p=f.alloc(n-r-h-2),d=n-c-1,m=i(c),g=s(f.concat([l,p,f.alloc(1,1),e],d),o(m,d)),v=s(m,o(g,c));return new u(f.concat([f.alloc(1),v,g],n))}(d,e);else if(1===h)p=function(t,e,n){var r,a=e.length,o=t.modulus.byteLength();if(a>o-11)throw new Error("message too long");r=n?f.alloc(o-a-3,255):function(t){var e,n=f.allocUnsafe(t),r=0,a=i(2*t),o=0;for(;r<t;)o===a.length&&(a=i(2*t),o=0),(e=a[o++])&&(n[r++]=e);return n}(o-a-3);return new u(f.concat([f.from([0,n?1:2]),r,f.alloc(1),e],o))}(d,e,n);else{if(3!==h)throw new Error("unknown padding");if((p=new u(e)).cmp(d.modulus)>=0)throw new Error("data too long for modulus")}return n?c(p,d):l(p,d)}},function(t,e,n){var r=n(151),i=n(323),a=n(324),o=n(24),s=n(209),u=n(109),l=n(325),c=n(15).Buffer;t.exports=function(t,e,n){var f;f=t.padding?t.padding:n?1:4;var h,p=r(t),d=p.modulus.byteLength();if(e.length>d||new o(e).cmp(p.modulus)>=0)throw new Error("decryption error");h=n?l(new o(e),p):s(e,p);var m=c.alloc(d-h.length);if(h=c.concat([m,h],d),4===f)return function(t,e){var n=t.modulus.byteLength(),r=u("sha1").update(c.alloc(0)).digest(),o=r.length;if(0!==e[0])throw new Error("decryption error");var s=e.slice(1,o+1),l=e.slice(o+1),f=a(s,i(l,o)),h=a(l,i(f,n-o-1));if(function(t,e){t=c.from(t),e=c.from(e);var n=0,r=t.length;t.length!==e.length&&(n++,r=Math.min(t.length,e.length));var i=-1;for(;++i<r;)n+=t[i]^e[i];return n}(r,h.slice(0,o)))throw new Error("decryption error");var p=o;for(;0===h[p];)p++;if(1!==h[p++])throw new Error("decryption error");return h.slice(p)}(p,h);if(1===f)return function(t,e,n){var r=e.slice(0,2),i=2,a=0;for(;0!==e[i++];)if(i>=e.length){a++;break}var o=e.slice(2,i-1);("0002"!==r.toString("hex")&&!n||"0001"!==r.toString("hex")&&n)&&a++;o.length<8&&a++;if(a)throw new Error("decryption error");return e.slice(i)}(0,h,n);if(3===f)return h;throw new Error("unknown padding")}},function(t,e,n){"use strict";(function(t,r){function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var a=n(15),o=n(93),s=a.Buffer,u=a.kMaxLength,l=t.crypto||t.msCrypto,c=Math.pow(2,32)-1;function f(t,e){if("number"!==typeof t||t!==t)throw new TypeError("offset must be a number");if(t>c||t<0)throw new TypeError("offset must be a uint32");if(t>u||t>e)throw new RangeError("offset out of range")}function h(t,e,n){if("number"!==typeof t||t!==t)throw new TypeError("size must be a number");if(t>c||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>u)throw new RangeError("buffer too small")}function p(t,e,n,i){if(r.browser){var a=t.buffer,s=new Uint8Array(a,e,n);return l.getRandomValues(s),i?void r.nextTick(function(){i(null,t)}):t}if(!i)return o(n).copy(t,e),t;o(n,function(n,r){if(n)return i(n);r.copy(t,e),i(null,t)})}l&&l.getRandomValues||!r.browser?(e.randomFill=function(e,n,r,i){if(!s.isBuffer(e)&&!(e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"===typeof n)i=n,n=0,r=e.length;else if("function"===typeof r)i=r,r=e.length-n;else if("function"!==typeof i)throw new TypeError('"cb" argument must be a function');return f(n,e.length),h(r,n,e.length),p(e,n,r,i)},e.randomFillSync=function(e,n,r){"undefined"===typeof n&&(n=0);if(!s.isBuffer(e)&&!(e instanceof t.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');f(n,e.length),void 0===r&&(r=e.length-n);return h(r,n,e.length),p(e,n,r)}):(e.randomFill=i,e.randomFillSync=i)}).call(this,n(26),n(39))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=y(n(6)),a=y(n(10)),o=y(n(42)),s=y(n(84)),u=y(n(115)),l=y(n(326)),c=y(n(116)),f=y(n(95)),h=y(n(85)),p=y(n(117)),d=y(n(211)),m=y(n(212)),g=y(n(118)),v=y(n(96));function y(t){return t&&t.__esModule?t:{default:t}}var b=a.default.array,_=a.default.func,x=(0,o.default)({displayName:"DataSet",propTypes:{data:b.isRequired,xScale:_.isRequired,yScale:_.isRequired,colorScale:_.isRequired,values:_.isRequired,label:_.isRequired,x:_.isRequired,y:_.isRequired,y0:_.isRequired},render:function(){var t=this.props,e=t.data,n=t.xScale,r=t.yScale,a=t.colorScale,o=t.values,s=t.label,u=t.x,c=t.y,f=t.y0,h=t.onMouseEnter,p=t.onMouseLeave,d=t.groupedBars,m=t.colorByLabel,g=void 0;return g=d?e.map(function(t,f){return o(t).map(function(o,d){var m=c(o)<0?r(0):r(c(o));return i.default.createElement(l.default,{key:s(t)+"."+d,width:n.rangeBand()/e.length,height:Math.abs(r(0)-r(c(o))),x:n(u(o))+n.rangeBand()*f/e.length,y:m,fill:a(s(t)),data:o,onMouseEnter:h,onMouseLeave:p})})}):e.map(function(t){return o(t).map(function(e,o){var d=a(m?s(t):u(e)),g=c(e)<0?r(f(e)):r(f(e)+c(e));return i.default.createElement(l.default,{key:s(t)+"."+o,width:n.rangeBand(),height:Math.abs(r(f(e)+c(e))-r(f(e))),x:n(u(e)),y:g,fill:d,data:e,onMouseEnter:h,onMouseLeave:p})})}),i.default.createElement("g",null,g)}}),w=(0,o.default)({displayName:"BarChart",mixins:[f.default,h.default,p.default,d.default,m.default,g.default,v.default],getDefaultProps:function(){return{colorByLabel:!0}},_tooltipHtml:function(t){for(var e=this._xScale,n=this._yScale,r=this.props.tooltipHtml(this.props.x(t),this.props.y0(t),this.props.y(t)),i=e.rangeBand()/2+e(this.props.x(t)),a=this._data[this._data.length-1].values,o=null,s=0;s<a.length;s++)if(this.props.x(a[s])===this.props.x(t)){o=a[s];break}return[r,i,n(this.props.y0(o)+this.props.y(o))]},render:function(){var t=this.props,e=t.xAxis,n=t.yAxis,a=t.height,o=t.width,l=t.margin,f=t.viewBox,h=t.preserveAspectRatio,p=t.colorScale,d=t.values,m=t.label,g=t.y,v=t.y0,y=t.x,b=t.groupedBars,_=t.colorByLabel,w=t.tickFormat,S=this._data,E=this._innerWidth,k=this._innerHeight,T=this._xScale,P=this._yScale,M=this._yIntercept;return i.default.createElement("div",null,i.default.createElement(s.default,{height:a,width:o,margin:l,viewBox:f,preserveAspectRatio:h},i.default.createElement(x,{data:S,xScale:T,yScale:P,colorScale:p,values:d,label:m,y:g,y0:v,x:y,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,groupedBars:b,colorByLabel:_}),i.default.createElement(u.default,r({className:"x axis",orientation:"bottom",scale:T,height:k,width:E,zero:M,tickFormat:w},e)),i.default.createElement(u.default,r({className:"y axis",orientation:"left",scale:P,height:k,width:E,tickFormat:w},n)),this.props.children),i.default.createElement(c.default,this.state.tooltip))}});e.default=w},function(t,e,n){"use strict";var r=n(925);function i(){}t.exports=function(){function t(t,e,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=i,n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){"use strict";var r=n(159),i=n(927),a=n(928),o="mixins";t.exports=function(t,e,n){var s=[],u={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",UNSAFE_componentWillMount:"DEFINE_MANY",UNSAFE_componentWillReceiveProps:"DEFINE_MANY",UNSAFE_componentWillUpdate:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},l={getDerivedStateFromProps:"DEFINE_MANY_MERGED"},c={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)h(t,e[n])},childContextTypes:function(t,e){t.childContextTypes=r({},t.childContextTypes,e)},contextTypes:function(t,e){t.contextTypes=r({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=d(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){t.propTypes=r({},t.propTypes,e)},statics:function(t,e){!function(t,e){if(e)for(var n in e){var r=e[n];if(e.hasOwnProperty(n)){var i=n in c;a(!i,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',n);var o=n in t;if(o){var s=l.hasOwnProperty(n)?l[n]:null;return a("DEFINE_MANY_MERGED"===s,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",n),void(t[n]=d(t[n],r))}t[n]=r}}}(t,e)},autobind:function(){}};function f(t,e){var n=u.hasOwnProperty(e)?u[e]:null;b.hasOwnProperty(e)&&a("OVERRIDE_BASE"===n,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e),t&&a("DEFINE_MANY"===n||"DEFINE_MANY_MERGED"===n,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e)}function h(t,n){if(n){a("function"!==typeof n,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."),a(!e(n),"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object.");var r=t.prototype,i=r.__reactAutoBindPairs;for(var s in n.hasOwnProperty(o)&&c.mixins(t,n.mixins),n)if(n.hasOwnProperty(s)&&s!==o){var l=n[s],h=r.hasOwnProperty(s);if(f(h,s),c.hasOwnProperty(s))c[s](t,l);else{var p=u.hasOwnProperty(s);if("function"!==typeof l||p||h||!1===n.autobind)if(h){var g=u[s];a(p&&("DEFINE_MANY_MERGED"===g||"DEFINE_MANY"===g),"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",g,s),"DEFINE_MANY_MERGED"===g?r[s]=d(r[s],l):"DEFINE_MANY"===g&&(r[s]=m(r[s],l))}else r[s]=l;else i.push(s,l),r[s]=l}}}}function p(t,e){for(var n in a(t&&e&&"object"===typeof t&&"object"===typeof e,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."),e)e.hasOwnProperty(n)&&(a(void 0===t[n],"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",n),t[n]=e[n]);return t}function d(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return p(i,n),p(i,r),i}}function m(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function g(t,e){return e.bind(t)}var v={componentDidMount:function(){this.__isMounted=!0}},y={componentWillUnmount:function(){this.__isMounted=!1}},b={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t,e)},isMounted:function(){return!!this.__isMounted}},_=function(){};return r(_.prototype,t.prototype,b),function(t){var e=function(t,r,o){this.__reactAutoBindPairs.length&&function(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t[r]=g(t,i)}}(this),this.props=t,this.context=r,this.refs=i,this.updater=o||n,this.state=null;var s=this.getInitialState?this.getInitialState():null;a("object"===typeof s&&!Array.isArray(s),"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"),this.state=s};for(var r in e.prototype=new _,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],s.forEach(h.bind(null,e)),h(e,v),h(e,t),h(e,y),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),a(e.prototype.render,"createClass(...): Class specification must implement a `render` method."),u)e.prototype[r]||(e.prototype[r]=null);return e}}},function(t,e,n){"use strict";t.exports={}},function(t,e,n){"use strict";var r=function(t){};t.exports=function(t,e,n,i,a,o,s,u){if(r(e),!t){var l;if(void 0===e)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,a,o,s,u],f=0;(l=new Error(e.replace(/%s/g,function(){return c[f++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=m(n(6)),i=m(n(10)),a=m(n(42)),o=m(n(84)),s=m(n(326)),u=m(n(95)),l=m(n(85)),c=m(n(117)),f=m(n(211)),h=m(n(212)),p=m(n(118)),d=m(n(96));function m(t){return t&&t.__esModule?t:{default:t}}var g=i.default.array,v=i.default.func,y=(0,a.default)({displayName:"DataSet",propTypes:{data:g.isRequired,xScale:v.isRequired,yScale:v.isRequired,colorScale:v.isRequired,values:v.isRequired,label:v.isRequired,x:v.isRequired,y:v.isRequired,y0:v.isRequired},render:function(){var t=this.props,e=t.data,n=t.yScale,i=t.colorScale,a=t.values,o=t.label,u=t.y,l=t.x0,c=t.onMouseEnter,f=t.onMouseLeave,h=n(n.domain()[0]),p=e.map(function(t){return a(t).map(function(e,n){var a=h*u(e),p=h/2-a/2,d=2*l*n;return r.default.createElement(s.default,{key:o(t)+"."+n,width:l,height:a,x:d,y:p,fill:i(Math.floor(d)),data:e,onMouseEnter:c,onMouseLeave:f})})});return r.default.createElement("g",null,p)}}),b=(0,a.default)({displayName:"Waveform",mixins:[u.default,l.default,c.default,f.default,h.default,p.default,d.default],getDefaultProps:function(){return{}},_tooltipHtml:function(t){for(var e=[this._xScale,this._yScale],n=e[0],r=e[1],i=this.props.tooltipHtml(this.props.x(t),this.props.y0(t),this.props.y(t)),a=n.rangeBand()/2+n(this.props.x(t)),o=this._data[this._data.length-1].values,s=null,u=0;u<o.length;u++)if(this.props.x(o[u])===this.props.x(t)){s=o[u];break}return[i,a,r(this.props.y0(s)+this.props.y(s))]},render:function(){var t=this.props,e=t.height,n=t.width,i=t.margin,a=t.colorScale,s=t.values,u=t.label,l=t.y,c=t.y0,f=t.x,h=this._data,p=this._innerWidth,d=this._xScale,m=this._yScale,g="0 0 "+n+" "+e,v=void 0;return h[0].values.length>p/2?(h[0].values=function(t,e){for(var n=[],r=t.length,i=r/e,a=0;a<r;)n.push(t[Math.floor(a)]),a+=i;return n}(h[0].values,p/2),v=1):v=p/2/h[0].values.length,r.default.createElement("div",null,r.default.createElement(o.default,{height:e,width:n,margin:i,viewBox:g,preserveAspectRatio:"none"},r.default.createElement(y,{data:h,xScale:d,yScale:m,colorScale:a,label:u,values:s,x:f,y:l,y0:c,x0:v,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.props.children)))}});e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=p(n(6)),i=p(n(10)),a=p(n(42)),o=p(n(68)),s=p(n(84)),u=p(n(116)),l=p(n(95)),c=p(n(85)),f=p(n(213)),h=p(n(96));function p(t){return t&&t.__esModule?t:{default:t}}var d=i.default.string,m=i.default.array,g=i.default.number,v=i.default.bool,y=i.default.func,b=i.default.any,_=(0,a.default)({displayName:"Wedge",propTypes:{d:d.isRequired,fill:d.isRequired},render:function(){var t=this.props,e=t.fill,n=t.d,i=t.data,a=t.onMouseEnter,o=t.onMouseLeave;return r.default.createElement("path",{fill:e,d:n,onMouseMove:function(t){return a(t,i)},onMouseLeave:function(t){return o(t)}})}}),x=(0,a.default)({displayName:"DataSet",propTypes:{pie:m.isRequired,arc:y.isRequired,outerArc:y.isRequired,colorScale:y.isRequired,radius:g.isRequired,strokeWidth:g,stroke:d,fill:d,opacity:g,x:y.isRequired,hideLabels:v},getDefaultProps:function(){return{strokeWidth:2,stroke:"#000",fill:"none",opacity:.3,hideLabels:!1}},renderLabel:function(t){var e=this.props,n=e.arc,i=e.outerArc,a=e.radius,o=e.strokeWidth,s=e.stroke,u=e.fill,l=e.opacity,c=e.x,f=i.centroid(t);f[0]=a*(this.midAngle(t)<Math.PI?1:-1);var h=i.centroid(t);h[0]=.95*a*(this.midAngle(t)<Math.PI?1:-1);var p=this.midAngle(t)<Math.PI?"start":"end";return r.default.createElement("g",null,r.default.createElement("polyline",{opacity:l,strokeWidth:o,stroke:s,fill:u,points:[n.centroid(t),i.centroid(t),h]}),r.default.createElement("text",{dy:".35em",x:f[0],y:f[1],textAnchor:p},c(t.data)))},render:function(){var t=this,e=this.props,n=e.pie,i=e.arc,a=e.colorScale,o=e.x,s=e.y,u=e.onMouseEnter,l=e.onMouseLeave,c=e.hideLabels,f=n.map(function(e,n){var f=e.endAngle-e.startAngle>=10*Math.PI/180;return r.default.createElement("g",{key:o(e.data)+"."+s(e.data)+"."+n,className:"arc"},r.default.createElement(_,{data:e.data,fill:a(o(e.data)),d:i(e),onMouseEnter:u,onMouseLeave:l}),!c&&!!e.value&&f&&t.renderLabel(e))});return r.default.createElement("g",null,f)},midAngle:function(t){return t.startAngle+(t.endAngle-t.startAngle)/2}}),w=(0,a.default)({displayName:"PieChart",mixins:[l.default,c.default,f.default,h.default],propTypes:{innerRadius:g,outerRadius:g,labelRadius:g,padRadius:d,cornerRadius:g,sort:b,hideLabels:v},getDefaultProps:function(){return{innerRadius:null,outerRadius:null,labelRadius:null,padRadius:"auto",cornerRadius:0,sort:void 0,hideLabels:!1}},_tooltipHtml:function(t){return[this.props.tooltipHtml(this.props.x(t),this.props.y(t)),0,0]},render:function(){var t=this.props,e=t.data,n=t.width,i=t.height,a=t.margin,l=t.viewBox,c=t.preserveAspectRatio,f=t.colorScale,h=t.padRadius,p=t.cornerRadius,d=t.sort,m=t.x,g=t.y,v=t.values,y=t.hideLabels,b=this.props,_=b.innerRadius,w=b.outerRadius,S=b.labelRadius,E=this._innerWidth,k=this._innerHeight,T=o.default.layout.pie().value(function(t){return g(t)});"undefined"!==typeof d&&(T=T.sort(d));var P=Math.min(E,k)/2;_||(_=.8*P),w||(w=.4*P),S||(S=.9*P);var M=o.default.svg.arc().innerRadius(_).outerRadius(w).padRadius(h).cornerRadius(p),C=o.default.svg.arc().innerRadius(S).outerRadius(S),O=T(v(e)),I="translate("+E/2+", "+k/2+")";return r.default.createElement("div",null,r.default.createElement(s.default,{height:i,width:n,margin:a,viewBox:l,preserveAspectRatio:c},r.default.createElement("g",{transform:I},r.default.createElement(x,{width:E,height:k,colorScale:f,pie:O,arc:M,outerArc:C,radius:P,x:m,y:g,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,hideLabels:y})),this.props.children),r.default.createElement(u.default,this.state.tooltip))}});e.default=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=v(n(6)),a=v(n(10)),o=v(n(42)),s=v(n(68)),u=v(n(84)),l=v(n(115)),c=v(n(116)),f=v(n(95)),h=v(n(85)),p=v(n(117)),d=v(n(213)),m=v(n(118)),g=v(n(96));function v(t){return t&&t.__esModule?t:{default:t}}var y=a.default.array,b=a.default.func,_=a.default.string,x=(0,o.default)({displayName:"DataSet",propTypes:{data:y.isRequired,symbol:b.isRequired,xScale:b.isRequired,yScale:b.isRequired,colorScale:b.isRequired,onMouseEnter:b,onMouseLeave:b},render:function(){var t=this.props,e=t.data,n=t.symbol,r=t.xScale,a=t.yScale,o=t.colorScale,s=t.label,u=t.values,l=t.x,c=t.y,f=t.onMouseEnter,h=t.onMouseLeave,p=e.map(function(t){return u(t).map(function(e,u){var p="translate("+r(l(e))+", "+a(c(e))+")";return i.default.createElement("path",{key:s(t)+"."+u,className:"dot",d:n(),transform:p,fill:o(s(t)),onMouseOver:function(t){return f(t,e)},onMouseLeave:function(t){return h(t)}})})});return i.default.createElement("g",null,p)}}),w=(0,o.default)({displayName:"ScatterPlot",mixins:[f.default,h.default,p.default,d.default,m.default,g.default],propTypes:{rScale:b,shape:_},getDefaultProps:function(){return{rScale:null,shape:"circle"}},_tooltipHtml:function(t){return[this.props.tooltipHtml(this.props.x(t),this.props.y(t)),this._xScale(this.props.x(t)),this._yScale(this.props.y(t))]},render:function(){var t=this.props,e=t.height,n=t.width,a=t.margin,o=t.viewBox,f=t.preserveAspectRatio,h=t.colorScale,p=t.rScale,d=t.shape,m=t.label,g=t.values,v=t.x,y=t.y,b=t.xAxis,_=t.yAxis,w=this._data,S=this._innerWidth,E=this._innerHeight,k=this._xScale,T=this._yScale,P=this._xIntercept,M=this._yIntercept,C=s.default.svg.symbol().type(d);return p&&(C=C.size(p)),i.default.createElement("div",null,i.default.createElement(u.default,{height:e,width:n,margin:a,viewBox:o,preserveAspectRatio:f},i.default.createElement(l.default,r({className:"x axis",orientation:"bottom",scale:k,height:E,width:S,zero:M},b)),i.default.createElement(l.default,r({className:"y axis",orientation:"left",scale:T,height:E,width:S,zero:P},_)),i.default.createElement(x,{data:w,xScale:k,yScale:T,colorScale:h,symbol:C,label:m,values:g,x:v,y:y,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave}),this.props.children),i.default.createElement(c.default,this.state.tooltip))}});e.default=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=y(n(6)),a=y(n(10)),o=y(n(42)),s=y(n(68)),u=y(n(84)),l=y(n(115)),c=y(n(327)),f=y(n(116)),h=y(n(95)),p=y(n(85)),d=y(n(117)),m=y(n(213)),g=y(n(118)),v=y(n(96));function y(t){return t&&t.__esModule?t:{default:t}}var b=a.default.array,_=a.default.func,x=a.default.string,w=(0,o.default)({displayName:"DataSet",propTypes:{data:b.isRequired,line:_.isRequired,colorScale:_.isRequired},render:function(){var t=this.props,e=t.width,n=t.height,r=t.data,a=t.line,o=t.strokeWidth,s=t.strokeLinecap,u=t.strokeDasharray,l=t.colorScale,f=t.values,h=t.label,p=t.onMouseEnter,d=t.onMouseLeave,m=e+"x"+n,g=r.map(function(t,e){return i.default.createElement(c.default,{key:h(t)+"."+e,className:"line",d:a(f(t)),stroke:l(h(t)),strokeWidth:"function"===typeof o?o(h(t)):o,strokeLinecap:"function"===typeof s?s(h(t)):s,strokeDasharray:"function"===typeof u?u(h(t)):u,data:f(t),onMouseEnter:p,onMouseLeave:d,style:{clipPath:"url(#lineClip_"+m+")"}})});return i.default.createElement("g",null,i.default.createElement("defs",null,i.default.createElement("clipPath",{id:"lineClip_"+m},i.default.createElement("rect",{width:e,height:n}))),g,i.default.createElement("rect",{width:e,height:n,fill:"none",stroke:"none",style:{pointerEvents:"all"},onMouseMove:function(t){p(t,r)},onMouseLeave:function(t){d(t)}}))}}),S=(0,o.default)({displayName:"LineChart",mixins:[h.default,p.default,d.default,m.default,g.default,v.default],propTypes:{interpolate:x,defined:_},getDefaultProps:function(){return{interpolate:"linear",defined:function(){return!0},shape:"circle",shapeColor:null,showCustomLine:!1,lineStructureClassName:"dot",customPointColor:"blue",customPointShape:"circle"}},_tooltipHtml:function(t,e){var n=this.props,r=n.x,i=n.y,a=n.values,o=n.label,u=this._xScale,l=this._yScale,c=u.invert(e[0]),f=l.invert(e[1]),h=s.default.bisector(function(t){return r(t)}).left,p=t.map(function(t){var e=h(a(t),c),n=e===a(t).length?e-1:e,i=r(a(t)[n]),s=0===e?e:e-1,u=r(a(t)[s]),l=void 0;return l=Math.abs(c-i)<Math.abs(c-u)?n:s,{label:o(t),value:a(t)[l]}});p.sort(function(t,e){return i(t.value)-i(e.value)});var d=(0,s.default.bisector(function(t){return i(t.value)}).left)(p,f),m=d===p.length?d-1:d,g=0===d?d:d-1,v=i(p[m].value),y=i(p[g].value),b=void 0;return b=Math.abs(f-v)<Math.abs(f-y)?m:g,this._tooltipData=p[b],[this.props.tooltipHtml(p[b].label,p[b].value),u(p[b].value.x),l(p[b].value.y)]},render:function(){var t=this,e=this.props,n=e.height,a=e.width,o=e.margin,c=e.viewBox,h=e.preserveAspectRatio,p=e.colorScale,d=e.interpolate,m=e.defined,g=e.stroke,v=e.values,y=e.label,b=e.x,_=e.y,x=e.xAxis,S=e.yAxis,E=e.shape,k=e.shapeColor,T=e.showCustomLine,P=e.lineStructureClassName,M=e.customPointColor,C=e.customPointShape,O=this._data,I=this._innerWidth,N=this._innerHeight,A=this._xScale,R=this._yScale,D=this._xIntercept,j=this._yIntercept,L=s.default.svg.line().x(function(t){return A(b(t))}).y(function(t){return R(_(t))}).interpolate(d).defined(m),F=null,z=null;if(!this.state.tooltip.hidden){var B=s.default.svg.symbol().type(E),U=k||p(this._tooltipData.label),V=this._tooltipData?"translate("+A(b(this._tooltipData.value))+", "+R(_(this._tooltipData.value))+")":"";F=this.state.tooltip.hidden?null:i.default.createElement("path",{className:"dot",d:B(),transform:V,fill:U,onMouseEnter:function(e){return t.onMouseEnter(e,O)},onMouseLeave:function(e){return t.onMouseLeave(e)}})}if(T){z=O.map(function(e,n){return e.values.map(function(e,n){return i.default.createElement("path",{key:n,className:P,d:s.default.svg.symbol().type(C)(),transform:(r=e,"translate("+A(b(r))+", "+R(_(r))+")"),fill:M,onMouseEnter:function(e){return t.onMouseEnter(e,O)},onMouseLeave:function(e){return t.onMouseLeave(e)}});var r})})}return i.default.createElement("div",null,i.default.createElement(u.default,{height:n,width:a,margin:o,viewBox:c,preserveAspectRatio:h},i.default.createElement(l.default,r({className:"x axis",orientation:"bottom",scale:A,height:N,width:I,zero:j},x)),i.default.createElement(l.default,r({className:"y axis",orientation:"left",scale:R,height:N,width:I,zero:D},S)),i.default.createElement(w,r({height:N,width:I,data:O,line:L,colorScale:p,values:v,label:y,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},g)),this.props.children,F,z),i.default.createElement(f.default,this.state.tooltip))}});e.default=S},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=b(n(6)),a=b(n(10)),o=b(n(42)),s=b(n(68)),u=b(n(84)),l=b(n(115)),c=b(n(327)),f=b(n(116)),h=b(n(95)),p=b(n(85)),d=b(n(117)),m=b(n(211)),g=b(n(212)),v=b(n(118)),y=b(n(96));function b(t){return t&&t.__esModule?t:{default:t}}var _=a.default.array,x=a.default.func,w=a.default.string,S=(0,o.default)({displayName:"DataSet",propTypes:{data:_.isRequired,area:x.isRequired,line:x.isRequired,colorScale:x.isRequired,stroke:x.isRequired},render:function(){var t=this.props,e=t.data,n=t.area,r=t.colorScale,a=t.values,o=t.label,s=t.onMouseEnter,u=t.onMouseLeave,l=e.map(function(t,l){return i.default.createElement(c.default,{key:o(t)+"."+l,className:"area",stroke:"none",fill:r(o(t)),d:n(a(t)),onMouseEnter:s,onMouseLeave:u,data:e})});return i.default.createElement("g",null,l)}}),E=(0,o.default)({displayName:"AreaChart",mixins:[h.default,p.default,d.default,m.default,g.default,v.default,y.default],propTypes:{interpolate:w,stroke:x},getDefaultProps:function(){return{interpolate:"linear",stroke:s.default.scale.category20()}},_tooltipHtml:function(t,e){var n=this.props,r=n.x,i=n.y0,a=n.y,o=n.values,u=n.label,l=this._xScale,c=this._yScale,f=l.invert(e[0]),h=(0,s.default.bisector(function(t){return r(t)}).right)(o(t[0]),l.invert(e[0])),p=(h=h==o(t[0]).length?h-1:h)==o(t[0]).length?h-1:h,d=r(o(t[0])[p]),m=0==h?h:h-1,g=r(o(t[0])[m]);h=Math.abs(f-d)<Math.abs(f-g)?p:m;var v=c.invert(e[1]),y=(0,s.default.bisector(function(t){return i(o(t)[h])+a(o(t)[h])}).left)(t,v);y=y==t.length?y-1:y;var b=a(o(t[y])[h]),_=i(o(t[t.length-1])[h])+a(o(t[t.length-1])[h]),x=r(o(t[y])[h]),w=l(x),S=c(i(o(t[y])[h])+b);return[this.props.tooltipHtml(b,_,x,u(t[y])),w,S]},render:function(){var t=this.props,e=t.height,n=t.width,a=t.margin,o=t.viewBox,c=t.preserveAspectRatio,h=t.colorScale,p=t.interpolate,d=t.stroke,m=t.values,g=t.label,v=t.x,y=t.y,b=t.y0,_=t.xAxis,x=t.yAxis,w=t.yOrientation,E=this._data,k=this._innerWidth,T=this._innerHeight,P=this._xScale,M=this._yScale,C=s.default.svg.line().x(function(t){return P(v(t))}).y(function(t){return M(b(t)+y(t))}).interpolate(p),O=s.default.svg.area().x(function(t){return P(v(t))}).y0(function(t){return M(M.domain()[0]+b(t))}).y1(function(t){return M(b(t)+y(t))}).interpolate(p);return i.default.createElement("div",null,i.default.createElement(u.default,{height:e,width:n,margin:a,viewBox:o,preserveAspectRatio:c},i.default.createElement(S,{data:E,line:C,area:O,colorScale:h,stroke:d,label:g,values:m,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave}),i.default.createElement(l.default,r({className:"x axis",orientation:"bottom",scale:P,height:T,width:k},_)),i.default.createElement(l.default,r({className:"y axis",orientation:w||"left",scale:M,height:T,width:k},x)),this.props.children),i.default.createElement(f.default,this.state.tooltip))}});e.default=E},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=c(n(6)),a=c(n(86)),o=c(n(42)),s=c(n(84)),u=c(n(115)),l=c(n(85));function c(t){return t&&t.__esModule?t:{default:t}}var f={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},h=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],p=(0,o.default)({displayName:"Brush",mixins:[l.default],getInitialState:function(){return{resizers:h[0],xExtent:[0,0],yExtent:[0,0],xExtentDomain:void 0,yExtentDomain:void 0}},getDefaultProps:function(){return{xScale:null,yScale:null}},componentWillMount:function(){this._extent(this.props.extent),this.setState({resizers:h[!this.props.xScale<<1|!this.props.yScale]})},componentWillReceiveProps:function(t){t.xScale!==this.props.xScale&&(this._extent(t.extent,t.xScale),this.setState({resizers:h[!this.props.xScale<<1|!this.props.yScale]}))},render:function(){var t=this,e=this.props.xScale?this._d3ScaleRange(this.props.xScale):null,n=this.props.yScale?this._d3ScaleRange(this.props.yScale):null,a=i.default.createElement("rect",{className:"background",style:{visibility:"visible",cursor:"crosshair"},x:e?e[0]:"",width:e?e[1]-e[0]:"",y:n?n[0]:"",height:n?n[1]-n[0]:this._innerHeight,onMouseDown:this._onMouseDownBackground}),o=void 0;this.props.xScale&&(o=i.default.createElement("rect",{className:"extent",style:{cursor:"move"},x:this.state.xExtent[0],width:this.state.xExtent[1]-this.state.xExtent[0],height:this._innerHeight,onMouseDown:this._onMouseDownExtent}));var l=this.state.resizers.map(function(e){return i.default.createElement("g",{key:e,className:"resize "+e,style:{cursor:f[e]},transform:"translate("+t.state.xExtent[+/e$/.test(e)]+", "+t.state.yExtent[+/^s/.test(e)]+")",onMouseDown:function(n){t._onMouseDownResizer(n,e)}},i.default.createElement("rect",{x:/[ew]$/.test(e)?-3:null,y:/^[ns]/.test(e)?-3:null,width:"6",height:t._innerHeight,style:{visibility:"hidden",display:t._empty()?"none":null}}))}),c=this.props,h=c.height,p=c.width,d=c.margin,m=c.viewBox,g=c.preserveAspectRatio;return i.default.createElement("div",null,i.default.createElement(s.default,{height:h,width:p,margin:d,viewBox:m,preserveAspectRatio:g},i.default.createElement("g",{style:{pointerEvents:"all"},onMouseUp:this._onMouseUp,onMouseMove:this._onMouseMove},a,o,l),i.default.createElement(u.default,r({className:"x axis",orientation:"bottom",scale:this.props.xScale,height:this._innerHeight,width:this._innerWidth},this.props.xAxis)),this.props.children))},_getMousePosition:function(t){var e=a.default.findDOMNode(this).getElementsByTagName("svg")[0],n=void 0;if(e.createSVGPoint){var r=e.createSVGPoint();r.x=t.clientX,r.y=t.clientY,n=[(r=r.matrixTransform(e.getScreenCTM().inverse())).x-this.props.margin.left,r.y-this.props.margin.top]}else{var i=e.getBoundingClientRect();n=[t.clientX-i.left-e.clientLeft-this.props.margin.left,t.clientY-i.top-e.clientTop-this.props.margin.left]}return n},_onMouseDownBackground:function(t){t.preventDefault();var e=this._d3ScaleRange(this.props.xScale),n=this._getMousePosition(t),r=this.state.xExtent[1]-this.state.xExtent[0];e[1]-=r;var i=Math.max(e[0],Math.min(e[1],n[0]));this.setState({xExtent:[i,i+r]})},_onMouseDownExtent:function(t){t.preventDefault(),this._mouseMode="drag";var e=this._getMousePosition(t)[0]-this.state.xExtent[0];this._startPosition=e},_onMouseDownResizer:function(t,e){t.preventDefault(),this._mouseMode="resize",this._resizeDir=e},_onDrag:function(t){var e=this._d3ScaleRange(this.props.xScale),n=this._getMousePosition(t),r=this.state.xExtent[1]-this.state.xExtent[0];e[1]-=r;var i=Math.max(e[0],Math.min(e[1],n[0]-this._startPosition));this.setState({xExtent:[i,i+r],xExtentDomain:null})},_onResize:function(t){var e=this._d3ScaleRange(this.props.xScale),n=this._getMousePosition(t),r=Math.max(e[0],Math.min(e[1],n[0]));"w"==this._resizeDir?r>this.state.xExtent[1]?(this.setState({xExtent:[this.state.xExtent[1],r],xExtentDomain:null}),this._resizeDir="e"):this.setState({xExtent:[r,this.state.xExtent[1]],xExtentDomain:null}):"e"==this._resizeDir&&(r<this.state.xExtent[0]?(this.setState({xExtent:[r,this.state.xExtent[0]],xExtentDomain:null}),this._resizeDir="w"):this.setState({xExtent:[this.state.xExtent[0],r],xExtentDomain:null}))},_onMouseMove:function(t){t.preventDefault(),"resize"==this._mouseMode?this._onResize(t):"drag"==this._mouseMode&&this._onDrag(t)},_onMouseUp:function(t){t.preventDefault(),this._mouseMode=null,this.props.onChange(this._extent())},_extent:function(t,e){var n=e||this.props.xScale,r=this.props.yScale,i=this.state,a=i.xExtent,o=i.yExtent,s=i.xExtentDomain,u=i.yExtentDomain,l=void 0,c=void 0,f=void 0,h=void 0,p=void 0;if(!arguments.length)return n&&(s?(l=s[0],c=s[1]):(l=a[0],c=a[1],n.invert&&(l=n.invert(l),c=n.invert(c)),c<l&&(p=l,l=c,c=p))),r&&(u?(f=u[0],h=u[1]):(f=o[0],h=o[1],r.invert&&(f=r.invert(f),h=r.invert(h)),h<f&&(p=f,f=h,h=p))),n&&r?[[l,f],[c,h]]:n?[l,c]:r&&[f,h];n&&(l=t[0],c=t[1],r&&(l=l[0],c=c[0]),s=[l,c],n.invert&&(l=n(l),c=n(c)),c<l&&(p=l,l=c,c=p),l==a[0]&&c==a[1]||(a=[l,c])),r&&(f=t[0],h=t[1],n&&(f=f[1],h=h[1]),u=[f,h],r.invert&&(f=r(f),h=r(h)),h<f&&(p=f,f=h,h=p),f==o[0]&&h==o[1]||(o=[f,h])),this.setState({xExtent:a,yExtent:o,xExtentDomain:s,yExtentDomain:u})},_empty:function(){return!!this.props.xScale&&this.state.xExtent[0]==this.state.xExtent[1]||!!this.props.yScale&&this.state.yExtent[0]==this.state.yExtent[1]},_d3ScaleExtent:function(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]},_d3ScaleRange:function(t){return t.rangeExtent?t.rangeExtent():this._d3ScaleExtent(t.range())}});e.default=p},function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=e.UA=new r;e.browser=i.getBrowser(),e.cpu=i.getCPU(),e.device=i.getDevice(),e.engine=i.getEngine(),e.os=i.getOS(),e.ua=i.getUA(),e.setUA=function(t){return i.setUA(t)},e.mockUserAgent=function(t){window.navigator.__defineGetter__("userAgent",function(){return t})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isYandex=e.isEdge=e.getUA=e.engineVersion=e.engineName=e.mobileModel=e.mobileVendor=e.browserName=e.browserVersion=e.fullBrowserVersion=e.osName=e.osVersion=e.isIE=e.isOpera=e.isSafari=e.isFirefox=e.isChrome=e.isIOS=e.isWinPhone=e.isAndroid=e.isBrowser=e.isTablet=e.isMobileOnly=e.isMobile=e.isChromium=e.isMobileSafari=e.isWearable=e.isConsole=e.isSmartTV=void 0;var r=n(0),i=n(2),a=i.BROWSER_TYPES.CHROME,o=i.BROWSER_TYPES.CHROMIUM,s=i.BROWSER_TYPES.IE,u=i.BROWSER_TYPES.INTERNET_EXPLORER,l=i.BROWSER_TYPES.OPERA,c=i.BROWSER_TYPES.FIREFOX,f=i.BROWSER_TYPES.SAFARI,h=i.BROWSER_TYPES.MOBILE_SAFARI,p=i.BROWSER_TYPES.EDGE,d=i.BROWSER_TYPES.YANDEX,m=i.DEVICE_TYPES.MOBILE,g=i.DEVICE_TYPES.TABLET,v=i.DEVICE_TYPES.SMART_TV,y=i.DEVICE_TYPES.BROWSER,b=i.DEVICE_TYPES.WEARABLE,_=i.DEVICE_TYPES.CONSOLE,x=i.OS_TYPES.ANDROID,w=i.OS_TYPES.WINDOWS_PHONE,S=i.OS_TYPES.IOS;e.isSmartTV=r.device.type===v,e.isConsole=r.device.type===_,e.isWearable=r.device.type===b,e.isMobileSafari=r.browser.name===h,e.isChromium=r.browser.name===o,e.isMobile=function(){switch(r.device.type){case m:case g:return!0;default:return!1}}(),e.isMobileOnly=r.device.type===m,e.isTablet=r.device.type===g,e.isBrowser=r.device.type===y,e.isAndroid=r.os.name===x,e.isWinPhone=r.os.name===w,e.isIOS=r.os.name===S,e.isChrome=r.browser.name===a,e.isFirefox=r.browser.name===c,e.isSafari=r.browser.name===f||r.browser.name===h,e.isOpera=r.browser.name===l,e.isIE=r.browser.name===u||r.browser.name===s,e.osVersion=r.os.version?r.os.version:"none",e.osName=r.os.name?r.os.name:"none",e.fullBrowserVersion=r.browser.major,e.browserVersion=r.browser.version,e.browserName=r.browser.name,e.mobileVendor=r.device.vendor?r.device.vendor:"none",e.mobileModel=r.device.model?r.device.model:"none",e.engineName=r.engine.name,e.engineVersion=r.engine.version,e.getUA=r.ua,e.isEdge=r.browser.name===p,e.isYandex=r.browser.name===d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wearPayload=e.consolePayload=e.stvPayload=e.mobilePayload=e.broPayload=e.getCurrentBrowser=e.checkType=e.OS_TYPES=e.BROWSER_TYPES=e.DEVICE_TYPES=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=(n(0),e.DEVICE_TYPES={MOBILE:"mobile",TABLET:"tablet",SMART_TV:"smarttv",CONSOLE:"console",WEARABLE:"wearable",BROWSER:void 0}),a=e.BROWSER_TYPES={CHROME:"Chrome",FIREFOX:"Firefox",OPERA:"Opera",YANDEX:"Yandex",SAFARI:"Safari",INTERNET_EXPLORER:"Internet Explorer",EDGE:"Edge",CHROMIUM:"Chromium",IE:"IE",MOBILE_SAFARI:"Mobile Safari"},o=(e.OS_TYPES={IOS:"iOS",ANDROID:"Android",WINDOWS_PHONE:"Windows Phone"},{isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1});e.checkType=function(t){switch(t){case i.MOBILE:return{isMobile:!0};case i.TABLET:return{isTablet:!0};case i.SMART_TV:return{isSmartTV:!0};case i.CONSOLE:return{isConsole:!0};case i.WEARABLE:return{isWearable:!0};case i.BROWSER:return{isBrowser:!0};default:return o}},e.getCurrentBrowser=function(t){switch(t){case a.CHROME:case a.FIREFOX:case a.OPERA:case a.YANDEX:case a.SAFARI:case a.IE:case a.EDGE:case a.CHROMIUM:return!0;default:return!1}},e.broPayload=function(t,e,n,r,i){return{isBrowser:t,browserMajorVersion:e.major,browserFullVersion:e.version,browserName:e.name,engineName:n.name||!1,engineVersion:n.version,osName:r.name,osVersion:r.version,userAgent:i}},e.mobilePayload=function(t,e,n,i){return r({},t,{vendor:e.vendor||"none",model:e.model||"none",os:n.name||"none",osVersion:n.version||"none",ua:i||"none"})},e.stvPayload=function(t,e,n,r){return{isSmartTV:t,engineName:e.name||!1,engineVersion:e.version,osName:n.name,osVersion:n.version,userAgent:r}},e.consolePayload=function(t,e,n,r){return{isConsole:t,engineName:e.name||!1,engineVersion:e.version,osName:n.name,osVersion:n.version,userAgent:r}},e.wearPayload=function(t,e,n,r){return{isWearable:t,engineName:e.name||!1,engineVersion:e.version,osName:n.name,osVersion:n.version,userAgent:r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.deviceDetect=void 0;var r=n(4);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var i=n(1);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var a,o=n(8),s=(a=o)&&a.__esModule?a:{default:a};e.deviceDetect=s.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomView=e.WearableView=e.ConsoleView=e.SmartTVView=e.MobileOnlyView=e.WinPhoneView=e.TabletView=e.MobileView=e.IOSView=e.IEView=e.BrowserView=e.AndroidView=void 0;var r,i=n(5),a=(r=i)&&r.__esModule?r:{default:r},o=n(1);e.AndroidView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isAndroid?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.BrowserView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isBrowser?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.IEView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isIE?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.IOSView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isIOS?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.MobileView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isMobile?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.TabletView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isTablet?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.WinPhoneView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isWinPhone?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.MobileOnlyView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isMobileOnly?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.SmartTVView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isSmartTV?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.ConsoleView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isConsole?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.WearableView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,s=t.style;return o.isWearable?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:s},n):null},e.CustomView=function(t){var e=t.renderWithFragment,n=t.children,r=t.viewClassName,o=t.style;return t.condition?e?a.default.createElement(i.Fragment,null,n):a.default.createElement("div",{className:r,style:o},n):null}},function(t,e){t.exports=n(6)},function(t,e,n){var r;!function(i,a){"use strict";var o="model",s="name",u="type",l="vendor",c="version",f="mobile",h="tablet",p={extend:function(t,e){var n={};for(var r in t)e[r]&&e[r].length%2===0?n[r]=e[r].concat(t[r]):n[r]=t[r];return n},has:function(t,e){return"string"===typeof t&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},lowerize:function(t){return t.toLowerCase()},major:function(t){return"string"===typeof t?t.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},d={rgx:function(t,e){for(var n,r,i,a,o,s,u=0;u<e.length&&!o;){var l=e[u],c=e[u+1];for(n=r=0;n<l.length&&!o;)if(o=l[n++].exec(t))for(i=0;i<c.length;i++)s=o[++r],"object"===typeof(a=c[i])&&a.length>0?2==a.length?"function"==typeof a[1]?this[a[0]]=a[1].call(this,s):this[a[0]]=a[1]:3==a.length?"function"!==typeof a[1]||a[1].exec&&a[1].test?this[a[0]]=s?s.replace(a[1],a[2]):void 0:this[a[0]]=s?a[1].call(this,s,a[2]):void 0:4==a.length&&(this[a[0]]=s?a[3].call(this,s.replace(a[1],a[2])):void 0):this[a]=s||void 0;u+=2}},str:function(t,e){for(var n in e)if("object"===typeof e[n]&&e[n].length>0){for(var r=0;r<e[n].length;r++)if(p.has(e[n][r],t))return"?"===n?void 0:n}else if(p.has(e[n],t))return"?"===n?void 0:n;return t}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},g={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,c],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],c],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],c],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[s,c],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],c],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],c],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],c],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],c],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],c],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],c],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],c],[/(qqbrowserlite)\/([\w\.]+)/i],[s,c],[/(QQ)\/([\d\.]+)/i],[s,c],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,c],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,c],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[c,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[c,[s,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[c,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],c],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],c],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[c,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,c],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],c],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],c],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],c],[/fxios\/([\w\.-]+)/i],[c,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[c,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[c,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],c],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[c,d.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,c],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],c],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,c]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[o,l,[u,h]],[/applecoremedia\/[\w\.]+ \((ipad)/],[o,[l,"Apple"],[u,h]],[/(apple\s{0,1}tv)/i],[[o,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,o,[u,h]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[o,[l,"Amazon"],[u,h]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[o,d.str,m.device.amazon.model],[l,"Amazon"],[u,f]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[o,l,[u,f]],[/\((ip[honed|\s\w*]+);/i],[o,[l,"Apple"],[u,f]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,o,[u,f]],[/\(bb10;\s(\w+)/i],[o,[l,"BlackBerry"],[u,f]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[o,[l,"Asus"],[u,h]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[o,"Xperia Tablet"],[u,h]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[o,[l,"Sony"],[u,f]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,o,[u,"console"]],[/android.+;\s(shield)\sbuild/i],[o,[l,"Nvidia"],[u,"console"]],[/(playstation\s[34portablevi]+)/i],[o,[l,"Sony"],[u,"console"]],[/(sprint\s(\w+))/i],[[l,d.str,m.device.sprint.vendor],[o,d.str,m.device.sprint.model],[u,f]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,o,[u,h]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[o,/_/g," "],[u,f]],[/(nexus\s9)/i],[o,[l,"HTC"],[u,h]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[o,[l,"Huawei"],[u,f]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,o,[u,f]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[o,[l,"Microsoft"],[u,"console"]],[/(kin\.[onetw]{3})/i],[[o,/\./g," "],[l,"Microsoft"],[u,f]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[o,[l,"Motorola"],[u,f]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[o,[l,"Motorola"],[u,h]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,p.trim],[o,p.trim],[u,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[o,/^/,"SmartTV"],[l,"Samsung"],[u,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[o,[l,"Sharp"],[u,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],o,[u,h]],[/smart-tv.+(samsung)/i],[l,[u,"smarttv"],o],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],o,[u,f]],[/sie-(\w*)/i],[o,[l,"Siemens"],[u,f]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],o,[u,f]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[o,[l,"Acer"],[u,h]],[/android.+([vl]k\-?\d{3})\s+build/i],[o,[l,"LG"],[u,h]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],o,[u,h]],[/(lg) netcast\.tv/i],[l,o,[u,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[o,[l,"LG"],[u,f]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[o,[l,"Lenovo"],[u,h]],[/linux;.+((jolla));/i],[l,o,[u,f]],[/((pebble))app\/[\d\.]+\s/i],[l,o,[u,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,o,[u,f]],[/crkey/i],[[o,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[o,[l,"Google"],[u,"wearable"]],[/android.+;\s(pixel c)\s/i],[o,[l,"Google"],[u,h]],[/android.+;\s(pixel xl|pixel)\s/i],[o,[l,"Google"],[u,f]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[l,"Xiaomi"],[u,f]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[o,/_/g," "],[l,"Xiaomi"],[u,h]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[o,[l,"Meizu"],[u,h]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[o,[l,"OnePlus"],[u,f]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[o,[l,"RCA"],[u,h]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[o,[l,"Dell"],[u,h]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[o,[l,"Verizon"],[u,h]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],o,[u,h]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[o,[l,"NuVision"],[u,h]],[/android.+;\s(k88)\sbuild/i],[o,[l,"ZTE"],[u,h]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[o,[l,"Swiss"],[u,f]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[o,[l,"Swiss"],[u,h]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[o,[l,"Zeki"],[u,h]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],o,[u,h]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[o,[l,"Insignia"],[u,h]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[o,[l,"NextBook"],[u,h]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],o,[u,f]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],o,[u,f]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[o,[l,"Envizen"],[u,h]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,o,[u,h]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[o,[l,"MachSpeed"],[u,h]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,o,[u,h]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[o,[l,"Rotor"],[u,h]],[/android.+(KS(.+))\s+build/i],[o,[l,"Amazon"],[u,h]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,o,[u,h]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,p.lowerize],l,o],[/(android[\w\.\s\-]{0,9});.+build/i],[o,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[c,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,c],[/rv\:([\w\.]{1,9}).+(gecko)/i],[c,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,c],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[c,d.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[c,d.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],c],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[s,c],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],c],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],c],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,c],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],c],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],c],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,c],[/(haiku)\s(\w+)/i],[s,c],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[c,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[c,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[s,c]]},v=function t(e,n){if("object"===typeof e&&(n=e,e=void 0),!(this instanceof t))return new t(e,n).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),a=n?p.extend(g,n):g;return this.getBrowser=function(){var t={name:void 0,version:void 0};return d.rgx.call(t,r,a.browser),t.major=p.major(t.version),t},this.getCPU=function(){var t={architecture:void 0};return d.rgx.call(t,r,a.cpu),t},this.getDevice=function(){var t={vendor:void 0,model:void 0,type:void 0};return d.rgx.call(t,r,a.device),t},this.getEngine=function(){var t={name:void 0,version:void 0};return d.rgx.call(t,r,a.engine),t},this.getOS=function(){var t={name:void 0,version:void 0};return d.rgx.call(t,r,a.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(t){return r=t,this},this};v.VERSION="0.7.18",v.BROWSER={NAME:s,MAJOR:"major",VERSION:c},v.CPU={ARCHITECTURE:"architecture"},v.DEVICE={MODEL:o,VENDOR:l,TYPE:u,CONSOLE:"console",MOBILE:f,SMARTTV:"smarttv",TABLET:h,WEARABLE:"wearable",EMBEDDED:"embedded"},v.ENGINE={NAME:s,VERSION:c},v.OS={NAME:s,VERSION:c},"undefined"!==typeof e?("undefined"!==typeof t&&t.exports&&(e=t.exports=v),e.UAParser=v):n(7)?void 0===(r=function(){return v}.call(e,n,e,t))||(t.exports=r):i&&(i.UAParser=v);var y=i&&(i.jQuery||i.Zepto);if("undefined"!==typeof y){var b=new v;y.ua=b.getResult(),y.ua.get=function(){return b.getUA()},y.ua.set=function(t){b.setUA(t);var e=b.getResult();for(var n in e)y.ua[n]=e[n]}}}("object"===typeof window?window:this)},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2));var a=i.checkType(r.device.type);e.default=function(){var t=a.isBrowser,e=a.isMobile,n=a.isTablet,o=a.isSmartTV,s=a.isConsole,u=a.isWearable;return t?i.broPayload(t,r.browser,r.engine,r.os,r.ua):o?i.stvPayload(o,r.engine,r.os,r.ua):s?i.consolePayload(s,r.engine,r.os,r.ua):e?i.mobilePayload(a,r.device,r.os,r.ua):n?i.mobilePayload(a,r.device,r.os,r.ua):u?i.wearPayload(u,r.engine,r.os,r.ua):void 0}}])},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){t.classList?t.classList.add(e):(0,a.default)(t,e)||("string"===typeof t.className?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))};var r,i=n(937),a=(r=i)&&r.__esModule?r:{default:r};t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.classList?!!e&&t.classList.contains(e):-1!==(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")},t.exports=e.default},function(t,e,n){"use strict";function r(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}t.exports=function(t,e){t.classList?t.classList.remove(e):"string"===typeof t.className?t.className=r(t.className,e):t.setAttribute("class",r(t.className&&t.className.baseVal||"",e))}},function(t,e,n){"use strict";e.__esModule=!0,e.default=e.EXITING=e.ENTERED=e.ENTERING=e.EXITED=e.UNMOUNTED=void 0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,n):{};r.get||r.set?Object.defineProperty(e,n,r):e[n]=t[n]}return e.default=t,e}(n(10)),i=s(n(6)),a=s(n(86)),o=n(214);n(328);function s(t){return t&&t.__esModule?t:{default:t}}var u="unmounted";e.UNMOUNTED=u;var l="exited";e.EXITED=l;var c="entering";e.ENTERING=c;var f="entered";e.ENTERED=f;e.EXITING="exiting";var h=function(t){var e,n;function r(e,n){var r;r=t.call(this,e,n)||this;var i,a=n.transitionGroup,o=a&&!a.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?o?(i=l,r.appearStatus=c):i=f:i=e.unmountOnExit||e.mountOnEnter?u:l,r.state={status:i},r.nextCallback=null,r}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var o=r.prototype;return o.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(t,e){return t.in&&e.status===u?{status:l}:null},o.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},o.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==c&&n!==f&&(e=c):n!==c&&n!==f||(e="exiting")}this.updateStatus(!1,e)},o.componentWillUnmount=function(){this.cancelNextCallback()},o.getTimeouts=function(){var t,e,n,r=this.props.timeout;return t=e=n=r,null!=r&&"number"!==typeof r&&(t=r.exit,e=r.enter,n=r.appear),{exit:t,enter:e,appear:n}},o.updateStatus=function(t,e){if(void 0===t&&(t=!1),null!==e){this.cancelNextCallback();var n=a.default.findDOMNode(this);e===c?this.performEnter(n,t):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===l&&this.setState({status:u})},o.performEnter=function(t,e){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:e,a=this.getTimeouts();e||r?(this.props.onEnter(t,i),this.safeSetState({status:c},function(){n.props.onEntering(t,i),n.onTransitionEnd(t,a.enter,function(){n.safeSetState({status:f},function(){n.props.onEntered(t,i)})})})):this.safeSetState({status:f},function(){n.props.onEntered(t)})},o.performExit=function(t){var e=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(t),this.safeSetState({status:"exiting"},function(){e.props.onExiting(t),e.onTransitionEnd(t,r.exit,function(){e.safeSetState({status:l},function(){e.props.onExited(t)})})})):this.safeSetState({status:l},function(){e.props.onExited(t)})},o.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},o.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},o.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,e.nextCallback=null,t(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},o.onTransitionEnd=function(t,e,n){this.setNextCallback(n),t?(this.props.addEndListener&&this.props.addEndListener(t,this.nextCallback),null!=e&&setTimeout(this.nextCallback,e)):setTimeout(this.nextCallback,0)},o.render=function(){var t=this.state.status;if(t===u)return null;var e=this.props,n=e.children,r=function(t,e){if(null==t)return{};var n,r,i={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(e,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return n(t,r);var a=i.default.Children.only(n);return i.default.cloneElement(a,r)},r}(i.default.Component);function p(){}h.contextTypes={transitionGroup:r.object},h.childContextTypes={transitionGroup:function(){}},h.propTypes={},h.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:p,onEntering:p,onEntered:p,onExit:p,onExiting:p,onExited:p},h.UNMOUNTED=0,h.EXITED=1,h.ENTERING=2,h.ENTERED=3,h.EXITING=4;var d=(0,o.polyfill)(h);e.default=d},function(t,e,n){var r=n(941),i=n(942),a=null;function o(t){return setTimeout(t,0)}t.exports=function(t,e){var n=document,s="string"===typeof t?n.querySelector(t):t,u=i({returnFocusOnDeactivate:!0,escapeDeactivates:!0},e),l={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},c={activate:function(t){if(!l.active){_(),l.active=!0,l.paused=!1,l.nodeFocusedBeforeActivation=n.activeElement;var e=t&&t.onActivate?t.onActivate:u.onActivate;return e&&e(),h(),c}},deactivate:f,pause:function(){!l.paused&&l.active&&(l.paused=!0,p())},unpause:function(){l.paused&&l.active&&(l.paused=!1,h())}};return c;function f(t){if(l.active){p(),l.active=!1,l.paused=!1;var e=t&&void 0!==t.onDeactivate?t.onDeactivate:u.onDeactivate;return e&&e(),(t&&void 0!==t.returnFocus?t.returnFocus:u.returnFocusOnDeactivate)&&o(function(){x(l.nodeFocusedBeforeActivation)}),c}}function h(){if(l.active)return a&&a.pause(),a=c,_(),o(function(){x(m())}),n.addEventListener("focusin",v,!0),n.addEventListener("mousedown",g,!0),n.addEventListener("touchstart",g,!0),n.addEventListener("click",b,!0),n.addEventListener("keydown",y,!0),c}function p(){if(l.active&&a===c)return n.removeEventListener("focusin",v,!0),n.removeEventListener("mousedown",g,!0),n.removeEventListener("touchstart",g,!0),n.removeEventListener("click",b,!0),n.removeEventListener("keydown",y,!0),a=null,c}function d(t){var e=u[t],r=e;if(!e)return null;if("string"===typeof e&&!(r=n.querySelector(e)))throw new Error("`"+t+"` refers to no known node");if("function"===typeof e&&!(r=e()))throw new Error("`"+t+"` did not return a node");return r}function m(){var t;if(!(t=null!==d("initialFocus")?d("initialFocus"):s.contains(n.activeElement)?n.activeElement:l.firstTabbableNode||d("fallbackFocus")))throw new Error("You can't have a focus-trap without at least one focusable element");return t}function g(t){s.contains(t.target)||(u.clickOutsideDeactivates?f({returnFocus:!r.isFocusable(t.target)}):t.preventDefault())}function v(t){s.contains(t.target)||t.target instanceof Document||(t.stopImmediatePropagation(),x(l.mostRecentlyFocusedNode||m()))}function y(t){if(!1!==u.escapeDeactivates&&function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}(t))return t.preventDefault(),void f();(function(t){return"Tab"===t.key||9===t.keyCode})(t)&&function(t){if(_(),t.shiftKey&&t.target===l.firstTabbableNode)return t.preventDefault(),void x(l.lastTabbableNode);t.shiftKey||t.target!==l.lastTabbableNode||(t.preventDefault(),x(l.firstTabbableNode))}(t)}function b(t){u.clickOutsideDeactivates||s.contains(t.target)||(t.preventDefault(),t.stopImmediatePropagation())}function _(){var t=r(s);l.firstTabbableNode=t[0]||m(),l.lastTabbableNode=t[t.length-1]||m()}function x(t){t!==n.activeElement&&(t&&t.focus?(t.focus(),l.mostRecentlyFocusedNode=t,function(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"===typeof t.select}(t)&&t.select()):x(m()))}}},function(t,e){var n=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],r=n.join(","),i="undefined"===typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function a(t,e){e=e||{};var n,a,s,u=[],f=[],p=new h(t.ownerDocument||t),d=t.querySelectorAll(r);for(e.includeContainer&&i.call(t,r)&&(d=Array.prototype.slice.apply(d)).unshift(t),n=0;n<d.length;n++)o(a=d[n],p)&&(0===(s=l(a))?u.push(a):f.push({documentOrder:n,tabIndex:s,node:a}));return f.sort(c).map(function(t){return t.node}).concat(u)}function o(t,e){return!(!s(t,e)||function(t){return function(t){return f(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e=function(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e]}(t.ownerDocument.querySelectorAll('input[type="radio"][name="'+t.name+'"]'));return!e||e===t}(t)}(t)||l(t)<0)}function s(t,e){return e=e||new h(t.ownerDocument||t),!(t.disabled||function(t){return f(t)&&"hidden"===t.type}(t)||e.isUntouchable(t))}a.isTabbable=function(t,e){if(!t)throw new Error("No node provided");return!1!==i.call(t,r)&&o(t,e)},a.isFocusable=function(t,e){if(!t)throw new Error("No node provided");return!1!==i.call(t,u)&&s(t,e)};var u=n.concat("iframe").join(",");function l(t){var e=parseInt(t.getAttribute("tabindex"),10);return isNaN(e)?function(t){return"true"===t.contentEditable}(t)?0:t.tabIndex:e}function c(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex}function f(t){return"INPUT"===t.tagName}function h(t){this.doc=t,this.cache=[]}h.prototype.hasDisplayNone=function(t,e){if(t===this.doc.documentElement)return!1;var n=function(t,e){for(var n=0,r=t.length;n<r;n++)if(e(t[n]))return t[n]}(this.cache,function(e){return e===t});if(n)return n[1];var r=!1;return"none"===(e=e||this.doc.defaultView.getComputedStyle(t)).display?r=!0:t.parentNode&&(r=this.hasDisplayNone(t.parentNode)),this.cache.push([t,r]),r},h.prototype.isUntouchable=function(t){if(t===this.doc.documentElement)return!1;var e=this.doc.defaultView.getComputedStyle(t);return!!this.hasDisplayNone(t,e)||"hidden"===e.visibility},t.exports=a},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var r=arguments[e];for(var i in r)n.call(r,i)&&(t[i]=r[i])}return t};var n=Object.prototype.hasOwnProperty}]]);
//# sourceMappingURL=1.ecb74c6c.chunk.js.map